/*! For license information please see index.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.xmtp=t():e.xmtp=t()}(this,(function(){return(()=>{var __webpack_modules__={9656:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.utils=t.schnorr=t.verify=t.signSync=t.sign=t.getSharedSecret=t.recoverPublicKey=t.getPublicKey=t.Signature=t.Point=t.CURVE=void 0;const i=n(r(9159)),o=BigInt(0),s=BigInt(1),a=BigInt(2),c=BigInt(3),u=BigInt(8),d=a**BigInt(256),l={a:o,b:BigInt(7),P:d-a**BigInt(32)-BigInt(977),n:d-BigInt("432420386565659656852420866394968145599"),h:s,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")};function f(e){const{a:t,b:r}=l,n=I(e*e),i=I(n*e);return I(i+t*e+r)}t.CURVE=l;const h=l.a===o;class p{constructor(e,t,r){this.x=e,this.y=t,this.z=r}static fromAffine(e){if(!(e instanceof m))throw new TypeError("JacobianPoint#fromAffine: expected Point");return new p(e.x,e.y,s)}static toAffineBatch(e){const t=function(e,t=l.P){const r=e.length,n=new Array(r);let i=s;for(let s=0;s<r;s++)e[s]!==o&&(n[s]=i,i=I(i*e[s],t));i=B(i,t);for(let s=r-1;s>=0;s--){if(e[s]===o)continue;const r=I(i*e[s],t);e[s]=I(i*n[s],t),i=r}return e}(e.map((e=>e.z)));return e.map(((e,r)=>e.toAffine(t[r])))}static normalizeZ(e){return p.toAffineBatch(e).map(p.fromAffine)}equals(e){const t=this,r=e,n=I(t.z*t.z),i=I(t.z*n),o=I(r.z*r.z),s=I(r.z*o);return I(t.x*o)===I(n*r.x)&&I(t.y*s)===I(i*r.y)}negate(){return new p(this.x,I(-this.y),this.z)}double(){const e=this.x,t=this.y,r=this.z,n=I(e**a),i=I(t**a),o=I(i**a),s=I(a*(I(I((e+i)**a))-n-o)),d=I(c*n),l=I(d**a),f=I(l-a*s),h=I(d*(s-f)-u*o),y=I(a*t*r);return new p(f,h,y)}add(e){if(!(e instanceof p))throw new TypeError("JacobianPoint#add: expected JacobianPoint");const t=this.x,r=this.y,n=this.z,i=e.x,s=e.y,c=e.z;if(i===o||s===o)return this;if(t===o||r===o)return e;const u=I(n**a),d=I(c**a),l=I(t*d),f=I(i*u),h=I(r*c*d),y=I(I(s*n)*u),m=I(f-l),g=I(y-h);if(m===o)return g===o?this.double():p.ZERO;const b=I(m**a),v=I(m*b),w=I(l*b),E=I(g**a-v-a*w),S=I(g*(w-E)-h*v),_=I(n*c*m);return new p(E,S,_)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){let t=T(e);if(!h){let e=p.ZERO,r=this;for(;t>o;)t&s&&(e=e.add(r)),r=r.double(),t>>=s;return e}let{k1neg:r,k1:n,k2neg:i,k2:a}=U(t),c=p.ZERO,u=p.ZERO,d=this;for(;n>o||a>o;)n&s&&(c=c.add(d)),a&s&&(u=u.add(d)),d=d.double(),n>>=s,a>>=s;return r&&(c=c.negate()),i&&(u=u.negate()),u=new p(I(u.x*l.beta),u.y,u.z),c.add(u)}precomputeWindow(e){const t=h?128/e+1:256/e+1,r=[];let n=this,i=n;for(let o=0;o<t;o++){i=n,r.push(i);for(let t=1;t<2**(e-1);t++)i=i.add(n),r.push(i);n=i.double()}return r}wNAF(e,t){!t&&this.equals(p.BASE)&&(t=m.BASE);const r=t&&t._WINDOW_SIZE||1;if(256%r)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let n=t&&y.get(t);n||(n=this.precomputeWindow(r),t&&1!==r&&(n=p.normalizeZ(n),y.set(t,n)));let i=p.ZERO,o=p.ZERO;const a=h?128/r+1:256/r+1,c=2**(r-1),u=BigInt(2**r-1),d=2**r,l=BigInt(r);for(let t=0;t<a;t++){const r=t*c;let a=Number(e&u);if(e>>=l,a>c&&(a-=d,e+=s),0===a){let e=n[r];t%2&&(e=e.negate()),o=o.add(e)}else{let e=n[r+Math.abs(a)-1];a<0&&(e=e.negate()),i=i.add(e)}}return{p:i,f:o}}multiply(e,t){let r,n,i=T(e);if(h){let{k1neg:e,k1:o,k2neg:s,k2:a}=U(i),{p:c,f:u}=this.wNAF(o,t),{p:d,f}=this.wNAF(a,t);e&&(c=c.negate()),s&&(d=d.negate()),d=new p(I(d.x*l.beta),d.y,d.z),r=c.add(d),n=u.add(f)}else{let{p:e,f:o}=this.wNAF(i,t);r=e,n=o}return p.normalizeZ([r,n])[0]}toAffine(e=B(this.z)){const t=e**a,r=I(this.x*t),n=I(this.y*t*e);return new m(r,n)}}p.BASE=new p(l.Gx,l.Gy,s),p.ZERO=new p(o,s,o);const y=new WeakMap;class m{constructor(e,t){this.x=e,this.y=t}_setWindowSize(e){this._WINDOW_SIZE=e,y.delete(this)}static fromCompressedHex(e){const t=32===e.length,r=O(t?e:e.slice(1));if(!L(r))throw new Error("Point is not on curve");let n=function(e){const{P:t}=l,r=BigInt(6),n=BigInt(11),i=BigInt(22),o=BigInt(23),s=BigInt(44),u=BigInt(88),d=e*e*e%t,f=d*d*e%t,h=R(f,c)*f%t,p=R(h,c)*f%t,y=R(p,a)*d%t,m=R(y,n)*y%t,g=R(m,i)*m%t,b=R(g,s)*g%t,v=R(b,u)*b%t,w=R(v,s)*g%t,E=R(w,c)*f%t,S=R(E,o)*m%t,_=R(S,r)*d%t;return R(_,a)}(f(r));const i=(n&s)===s;t?i&&(n=I(-n)):1==(1&e[0])!==i&&(n=I(-n));const o=new m(r,n);return o.assertValidity(),o}static fromUncompressedHex(e){const t=O(e.slice(1,33)),r=O(e.slice(33)),n=new m(t,r);return n.assertValidity(),n}static fromHex(e){const t=M(e),r=t[0];if(32===t.length||33===t.length&&(2===r||3===r))return this.fromCompressedHex(t);if(65===t.length&&4===r)return this.fromUncompressedHex(t);throw new Error(`Point.fromHex: received invalid point. Expected 32-33 compressed bytes or 65 uncompressed bytes, not ${t.length}`)}static fromPrivateKey(e){return m.BASE.multiply(V(e))}static fromSignature(e,t,r){const n=D(e=M(e)),{r:i,s}=z(t);if(0!==r&&1!==r)throw new Error("Cannot recover signature: invalid recovery bit");if(n===o)throw new Error("Cannot recover signature: msgHash cannot be 0");const a=2+(1&r),c=m.fromHex(`0${a}${k(i)}`),u=p.fromAffine(c).multiplyUnsafe(s),d=p.BASE.multiply(n),f=B(i,l.n),h=u.subtract(d).multiplyUnsafe(f).toAffine();return h.assertValidity(),h}toRawBytes(e=!1){return x(this.toHex(e))}toHex(e=!1){const t=k(this.x);return e?`${this.y&s?"03":"02"}${t}`:`04${t}${k(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const e="Point is not on elliptic curve",{x:t,y:r}=this;if(!L(t)||!L(r))throw new Error(e);const n=I(r*r);if(I(n-f(t))!==o)throw new Error(e)}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new m(this.x,I(-this.y))}double(){return p.fromAffine(this).double().toAffine()}add(e){return p.fromAffine(this).add(p.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return p.fromAffine(this).multiply(e,this).toAffine()}}function g(e){return Number.parseInt(e[0],16)>=8?"00"+e:e}function b(e){if(e.length<2||2!==e[0])throw new Error(`Invalid signature integer tag: ${_(e)}`);const t=e[1],r=e.subarray(2,t+2);if(!t||r.length!==t)throw new Error("Invalid signature integer: wrong length");if(0===r[0]&&r[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:O(r),left:e.subarray(t+2)}}t.Point=m,m.BASE=new m(l.Gx,l.Gy),m.ZERO=new m(o,o);class v{constructor(e,t){this.r=e,this.s=t,this.assertValidity()}static fromCompact(e){const t=E(e),r="Signature.fromCompact";if("string"!=typeof e&&!t)throw new TypeError(`${r}: Expected string or Uint8Array`);const n=t?_(e):e;if(128!==n.length)throw new Error(`${r}: Expected 64-byte hex`);return new v(N(n.slice(0,64)),N(n.slice(64,128)))}static fromDER(e){const t=E(e);if("string"!=typeof e&&!t)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r,s:n}=function(e){if(e.length<2||48!=e[0])throw new Error(`Invalid signature tag: ${_(e)}`);if(e[1]!==e.length-2)throw new Error("Invalid signature: incorrect length");const{data:t,left:r}=b(e.subarray(2)),{data:n,left:i}=b(r);if(i.length)throw new Error(`Invalid signature: left bytes after parsing: ${_(i)}`);return{r:t,s:n}}(t?e:x(e));return new v(r,n)}static fromHex(e){return this.fromDER(e)}assertValidity(){const{r:e,s:t}=this;if(!F(e))throw new Error("Invalid Signature: r must be 0 < r < n");if(!F(t))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const e=l.n>>s;return this.s>e}normalizeS(){return this.hasHighS()?new v(this.r,l.n-this.s):this}toDERRawBytes(e=!1){return x(this.toDERHex(e))}toDERHex(e=!1){const t=g(P(this.s));if(e)return t;const r=g(P(this.r)),n=P(r.length/2),i=P(t.length/2);return`30${P(r.length/2+t.length/2+4)}02${n}${r}02${i}${t}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return x(this.toCompactHex())}toCompactHex(){return k(this.r)+k(this.s)}}function w(...e){if(!e.every(E))throw new Error("Uint8Array list expected");if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}function E(e){return e instanceof Uint8Array}t.Signature=v;const S=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function _(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");let t="";for(let r=0;r<e.length;r++)t+=S[e[r]];return t}function k(e){if(e>d)throw new Error("Expected number < 2^256");return e.toString(16).padStart(64,"0")}function A(e){return x(k(e))}function P(e){const t=e.toString(16);return 1&t.length?`0${t}`:t}function N(e){if("string"!=typeof e)throw new TypeError("hexToNumber: expected string, got "+typeof e);return BigInt(`0x${e}`)}function x(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+e.length);const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const n=2*r,i=e.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[r]=o}return t}function O(e){return N(_(e))}function M(e){return e instanceof Uint8Array?Uint8Array.from(e):x(e)}function T(e){if("number"==typeof e&&Number.isSafeInteger(e)&&e>0)return BigInt(e);if("bigint"==typeof e&&F(e))return e;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function I(e,t=l.P){const r=e%t;return r>=0?r:t+r}function R(e,t){const{P:r}=l;let n=e;for(;t-- >o;)n*=n,n%=r;return n}function B(e,t=l.P){if(e===o||t<=o)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=I(e,t),n=t,i=o,a=s,c=s,u=o;for(;r!==o;){const e=n/r,t=n%r,o=i-c*e,s=a-u*e;n=r,r=t,i=c,a=u,c=o,u=s}if(n!==s)throw new Error("invert: does not exist");return I(i,t)}const C=(e,t)=>(e+t/a)/t,K=a**BigInt(128);function U(e){const{n:t}=l,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-s*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,a=C(o*e,t),c=C(-n*e,t);let u=I(e-a*r-c*i,t),d=I(-a*n-c*o,t);const f=u>K,h=d>K;if(f&&(u=t-u),h&&(d=t-d),u>K||d>K)throw new Error("splitScalarEndo: Endomorphism failed");return{k1neg:f,k1:u,k2neg:h,k2:d}}function D(e){const{n:t}=l,r=8*e.length-256;let n=O(e);return r>0&&(n>>=BigInt(r)),n>=t&&(n-=t),n}class j{constructor(){this.v=new Uint8Array(32).fill(1),this.k=new Uint8Array(32).fill(0),this.counter=0}hmac(...e){return t.utils.hmacSha256(this.k,...e)}hmacSync(...e){if("function"!=typeof t.utils.hmacSha256Sync)throw new Error("utils.hmacSha256Sync is undefined, you need to set it");const r=t.utils.hmacSha256Sync(this.k,...e);if(r instanceof Promise)throw new Error("To use sync sign(), ensure utils.hmacSha256 is sync");return r}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(e=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),e),this.v=await this.hmac(this.v),0!==e.length&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),e),this.v=await this.hmac(this.v))}reseedSync(e=new Uint8Array){this.k=this.hmacSync(this.v,Uint8Array.from([0]),e),this.v=this.hmacSync(this.v),0!==e.length&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),e),this.v=this.hmacSync(this.v))}async generate(){return this.incr(),this.v=await this.hmac(this.v),this.v}generateSync(){return this.incr(),this.v=this.hmacSync(this.v),this.v}}function F(e){return o<e&&e<l.n}function L(e){return o<e&&e<l.P}function q(e,t,r){const n=O(e);if(!F(n))return;const{n:i}=l,a=m.BASE.multiply(n),c=I(a.x,i);if(c===o)return;const u=I(B(n,i)*I(t+r*c,i),i);if(u===o)return;const d=new v(c,u);return{sig:d,recovery:(a.x===d.r?0:2)|Number(a.y&s)}}function V(e){let t;if("bigint"==typeof e)t=e;else if("number"==typeof e&&Number.isSafeInteger(e)&&e>0)t=BigInt(e);else if("string"==typeof e){if(64!==e.length)throw new Error("Expected 32 bytes of private key");t=N(e)}else{if(!E(e))throw new TypeError("Expected valid private key");if(32!==e.length)throw new Error("Expected 32 bytes of private key");t=O(e)}if(!F(t))throw new Error("Expected private key: 0 < key < n");return t}function J(e){return e instanceof m?(e.assertValidity(),e):m.fromHex(e)}function z(e){if(e instanceof v)return e.assertValidity(),e;try{return v.fromDER(e)}catch(t){return v.fromCompact(e)}}function G(e){const t=E(e),r="string"==typeof e,n=(t||r)&&e.length;return t?33===n||65===n:r?66===n||130===n:e instanceof m}function H(e){return O(e.length>32?e.slice(0,32):e)}function W(e){const t=H(e),r=I(t,l.n);return $(r<o?t:r)}function $(e){if("bigint"!=typeof e)throw new Error("Expected bigint");return x(k(e))}function Z(e,r,n){if(null==e)throw new Error(`sign: expected valid message hash, not "${e}"`);const i=M(e),o=V(r),s=[$(o),W(i)];if(null!=n){!0===n&&(n=t.utils.randomBytes(32));const e=M(n);if(32!==e.length)throw new Error("sign: Expected 32 bytes of extra data");s.push(e)}return{seed:w(...s),m:H(i),d:o}}function X(e,t){let{sig:r,recovery:n}=e;const{canonical:i,der:o,recovered:s}=Object.assign({canonical:!0,der:!0},t);i&&r.hasHighS()&&(r=r.normalizeS(),n^=1);const a=o?r.toDERRawBytes():r.toCompactRawBytes();return s?[a,n]:a}t.getPublicKey=function(e,t=!1){return m.fromPrivateKey(e).toRawBytes(t)},t.recoverPublicKey=function(e,t,r){return m.fromSignature(e,t,r).toRawBytes()},t.getSharedSecret=function(e,t,r=!1){if(G(e))throw new TypeError("getSharedSecret: first arg must be private key");if(!G(t))throw new TypeError("getSharedSecret: second arg must be public key");const n=J(t);return n.assertValidity(),n.multiply(V(e)).toRawBytes(r)},t.sign=async function(e,t,r={}){const{seed:n,m:i,d:o}=Z(e,t,r.extraEntropy);let s;const a=new j;for(await a.reseed(n);!(s=q(await a.generate(),i,o));)await a.reseed();return X(s,r)},t.signSync=function(e,t,r={}){const{seed:n,m:i,d:o}=Z(e,t,r.extraEntropy);let s;const a=new j;for(a.reseedSync(n);!(s=q(a.generateSync(),i,o));)a.reseedSync();return X(s,r)};const Y={strict:!0};async function Q(e,...r){const n=new Uint8Array(e.split("").map((e=>e.charCodeAt(0)))),i=await t.utils.sha256(n);return O(await t.utils.sha256(w(i,i,...r)))}async function ee(e,t,r){const n=A(e);return I(await Q("BIP0340/challenge",n,t.toRawX(),r),l.n)}function te(e){return I(e.y,a)===o}t.verify=function(e,t,r,n=Y){let i;try{i=z(e),t=M(t)}catch(e){return!1}const{r:s,s:a}=i;if(n.strict&&i.hasHighS())return!1;const c=D(t);if(c===o)return!1;let u;try{u=p.fromAffine(J(r))}catch(e){return!1}const{n:d}=l,f=B(a,d),h=I(c*f,d),y=I(s*f,d),m=p.BASE.multiply(h),g=u.multiplyUnsafe(y);return I(m.add(g).toAffine().x,d)===s};class re{constructor(e,t){if(this.r=e,this.s=t,!L(e)||!F(t))throw new Error("Invalid signature")}static fromHex(e){const t=M(e);if(64!==t.length)throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${t.length}`);const r=O(t.slice(0,32)),n=O(t.slice(32,64));return new re(r,n)}toHex(){return k(this.r)+k(this.s)}toRawBytes(){return x(this.toHex())}}async function ne(e,t,r){const n=e instanceof re?e:re.fromHex(e),i=M(t),o=J(r),s=await ee(n.r,o,i),a=m.fromPrivateKey(n.s),c=o.multiply(s),u=a.subtract(c);return!(u.equals(m.BASE)||!te(u)||u.x!==n.r)}t.schnorr={Signature:re,getPublicKey:function(e){return m.fromPrivateKey(e).toRawX()},sign:async function(e,r,n=t.utils.randomBytes()){if(null==e)throw new TypeError(`sign: Expected valid message, not "${e}"`);const{n:i}=l,s=M(e),a=V(r),c=M(n);if(32!==c.length)throw new TypeError("sign: Expected 32 bytes of aux randomness");const u=m.fromPrivateKey(a),d=te(u)?a:i-a,f=d^await Q("BIP0340/aux",c),h=I(await Q("BIP0340/nonce",A(f),u.toRawX(),s),i);if(h===o)throw new Error("sign: Creation of signature failed. k is zero");const p=m.fromPrivateKey(h),y=te(p)?h:i-h,g=await ee(p.x,u,s),b=new re(p.x,I(y+g*d,i));if(!await ne(b.toRawBytes(),s,u.toRawX()))throw new Error("sign: Invalid signature produced");return b.toRawBytes()},verify:ne},m.BASE._setWindowSize(8);const ie={node:i.default,web:"object"==typeof self&&"crypto"in self?self.crypto:void 0};t.utils={isValidPrivateKey(e){try{return V(e),!0}catch(e){return!1}},randomBytes:(e=32)=>{if(ie.web)return ie.web.getRandomValues(new Uint8Array(e));if(ie.node){const{randomBytes:t}=ie.node;return Uint8Array.from(t(e))}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>{let e=8;for(;e--;){const e=t.utils.randomBytes(32),r=O(e);if(F(r)&&r!==s)return e}throw new Error("Valid private key was not found in 8 iterations. PRNG is broken")},bytesToHex:_,mod:I,sha256:async e=>{if(ie.web){const t=await ie.web.subtle.digest("SHA-256",e.buffer);return new Uint8Array(t)}if(ie.node){const{createHash:t}=ie.node;return Uint8Array.from(t("sha256").update(e).digest())}throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(e,...t)=>{if(ie.web){const r=await ie.web.subtle.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=w(...t),i=await ie.web.subtle.sign("HMAC",r,n);return new Uint8Array(i)}if(ie.node){const{createHmac:r}=ie.node,n=r("sha256",e);return t.forEach((e=>n.update(e))),Uint8Array.from(n.digest())}throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,precompute(e=8,t=m.BASE){const r=t===m.BASE?t:new m(t.x,t.y);return r._setWindowSize(e),r.multiply(c),r}}},4537:e=>{"use strict";e.exports=function(e,t){for(var r=new Array(arguments.length-1),n=0,i=2,o=!0;i<arguments.length;)r[n++]=arguments[i++];return new Promise((function(i,s){r[n]=function(e){if(o)if(o=!1,e)s(e);else{for(var t=new Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];i.apply(null,t)}};try{e.apply(t||null,r)}catch(e){o&&(o=!1,s(e))}}))}},7419:(e,t)=>{"use strict";var r=t;r.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var n=new Array(64),i=new Array(123),o=0;o<64;)i[n[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;r.encode=function(e,t,r){for(var i,o=null,s=[],a=0,c=0;t<r;){var u=e[t++];switch(c){case 0:s[a++]=n[u>>2],i=(3&u)<<4,c=1;break;case 1:s[a++]=n[i|u>>4],i=(15&u)<<2,c=2;break;case 2:s[a++]=n[i|u>>6],s[a++]=n[63&u],c=0}a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),a=0)}return c&&(s[a++]=n[i],s[a++]=61,1===c&&(s[a++]=61)),o?(a&&o.push(String.fromCharCode.apply(String,s.slice(0,a))),o.join("")):String.fromCharCode.apply(String,s.slice(0,a))};var s="invalid encoding";r.decode=function(e,t,r){for(var n,o=r,a=0,c=0;c<e.length;){var u=e.charCodeAt(c++);if(61===u&&a>1)break;if(void 0===(u=i[u]))throw Error(s);switch(a){case 0:n=u,a=1;break;case 1:t[r++]=n<<2|(48&u)>>4,n=u,a=2;break;case 2:t[r++]=(15&n)<<4|(60&u)>>2,n=u,a=3;break;case 3:t[r++]=(3&n)<<6|u,a=0}}if(1===a)throw Error(s);return r-o},r.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},9211:e=>{"use strict";function t(){this._listeners={}}e.exports=t,t.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},t.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],n=0;n<r.length;)r[n].fn===t?r.splice(n,1):++n;return this},t.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,r)}return this}},945:e=>{"use strict";function t(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=128===r[3];function i(e,n,i){t[0]=e,n[i]=r[0],n[i+1]=r[1],n[i+2]=r[2],n[i+3]=r[3]}function o(e,n,i){t[0]=e,n[i]=r[3],n[i+1]=r[2],n[i+2]=r[1],n[i+3]=r[0]}function s(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],t[0]}function a(e,n){return r[3]=e[n],r[2]=e[n+1],r[1]=e[n+2],r[0]=e[n+3],t[0]}e.writeFloatLE=n?i:o,e.writeFloatBE=n?o:i,e.readFloatLE=n?s:a,e.readFloatBE=n?a:s}():function(){function t(e,t,r,n){var i=t<0?1:0;if(i&&(t=-t),0===t)e(1/t>0?0:2147483648,r,n);else if(isNaN(t))e(2143289344,r,n);else if(t>34028234663852886e22)e((i<<31|2139095040)>>>0,r,n);else if(t<11754943508222875e-54)e((i<<31|Math.round(t/1401298464324817e-60))>>>0,r,n);else{var o=Math.floor(Math.log(t)/Math.LN2);e((i<<31|o+127<<23|8388607&Math.round(t*Math.pow(2,-o)*8388608))>>>0,r,n)}}function s(e,t,r){var n=e(t,r),i=2*(n>>31)+1,o=n>>>23&255,s=8388607&n;return 255===o?s?NaN:i*(1/0):0===o?1401298464324817e-60*i*s:i*Math.pow(2,o-150)*(s+8388608)}e.writeFloatLE=t.bind(null,r),e.writeFloatBE=t.bind(null,n),e.readFloatLE=s.bind(null,i),e.readFloatBE=s.bind(null,o)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=128===r[7];function i(e,n,i){t[0]=e,n[i]=r[0],n[i+1]=r[1],n[i+2]=r[2],n[i+3]=r[3],n[i+4]=r[4],n[i+5]=r[5],n[i+6]=r[6],n[i+7]=r[7]}function o(e,n,i){t[0]=e,n[i]=r[7],n[i+1]=r[6],n[i+2]=r[5],n[i+3]=r[4],n[i+4]=r[3],n[i+5]=r[2],n[i+6]=r[1],n[i+7]=r[0]}function s(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],r[4]=e[n+4],r[5]=e[n+5],r[6]=e[n+6],r[7]=e[n+7],t[0]}function a(e,n){return r[7]=e[n],r[6]=e[n+1],r[5]=e[n+2],r[4]=e[n+3],r[3]=e[n+4],r[2]=e[n+5],r[1]=e[n+6],r[0]=e[n+7],t[0]}e.writeDoubleLE=n?i:o,e.writeDoubleBE=n?o:i,e.readDoubleLE=n?s:a,e.readDoubleBE=n?a:s}():function(){function t(e,t,r,n,i,o){var s=n<0?1:0;if(s&&(n=-n),0===n)e(0,i,o+t),e(1/n>0?0:2147483648,i,o+r);else if(isNaN(n))e(0,i,o+t),e(2146959360,i,o+r);else if(n>17976931348623157e292)e(0,i,o+t),e((s<<31|2146435072)>>>0,i,o+r);else{var a;if(n<22250738585072014e-324)e((a=n/5e-324)>>>0,i,o+t),e((s<<31|a/4294967296)>>>0,i,o+r);else{var c=Math.floor(Math.log(n)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(a=n*Math.pow(2,-c))>>>0,i,o+t),e((s<<31|c+1023<<20|1048576*a&1048575)>>>0,i,o+r)}}}function s(e,t,r,n,i){var o=e(n,i+t),s=e(n,i+r),a=2*(s>>31)+1,c=s>>>20&2047,u=4294967296*(1048575&s)+o;return 2047===c?u?NaN:a*(1/0):0===c?5e-324*a*u:a*Math.pow(2,c-1075)*(u+4503599627370496)}e.writeDoubleLE=t.bind(null,r,0,4),e.writeDoubleBE=t.bind(null,n,4,0),e.readDoubleLE=s.bind(null,i,0,4),e.readDoubleBE=s.bind(null,o,4,0)}(),e}function r(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function n(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function i(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function o(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=t(t)},7199:module=>{"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},6662:e=>{"use strict";e.exports=function(e,t,r){var n=r||8192,i=n>>>1,o=null,s=n;return function(r){if(r<1||r>i)return e(r);s+r>n&&(o=e(n),s=0);var a=t.call(o,s,s+=r);return 7&s&&(s=1+(7|s)),a}}},4997:(e,t)=>{"use strict";var r=t;r.length=function(e){for(var t=0,r=0,n=0;n<e.length;++n)(r=e.charCodeAt(n))<128?t+=1:r<2048?t+=2:55296==(64512&r)&&56320==(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t},r.read=function(e,t,r){if(r-t<1)return"";for(var n,i=null,o=[],s=0;t<r;)(n=e[t++])<128?o[s++]=n:n>191&&n<224?o[s++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[s++]=55296+(n>>10),o[s++]=56320+(1023&n)):o[s++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),s=0);return i?(s&&i.push(String.fromCharCode.apply(String,o.slice(0,s))),i.join("")):String.fromCharCode.apply(String,o.slice(0,s))},r.write=function(e,t,r){for(var n,i,o=r,s=0;s<e.length;++s)(n=e.charCodeAt(s))<128?t[r++]=n:n<2048?(t[r++]=n>>6|192,t[r++]=63&n|128):55296==(64512&n)&&56320==(64512&(i=e.charCodeAt(s+1)))?(n=65536+((1023&n)<<10)+(1023&i),++s,t[r++]=n>>18|240,t[r++]=n>>12&63|128,t[r++]=n>>6&63|128,t[r++]=63&n|128):(t[r++]=n>>12|224,t[r++]=n>>6&63|128,t[r++]=63&n|128);return r-o}},930:(e,t,r)=>{"use strict";e.exports=r(3681)},3681:(e,t,r)=>{"use strict";var n=t;function i(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=r(7768),n.BufferWriter=r(3676),n.Reader=r(5109),n.BufferReader=r(5477),n.util=r(1429),n.rpc=r(5988),n.roots=r(4508),n.configure=i,i()},5109:(e,t,r)=>{"use strict";e.exports=c;var n,i=r(1429),o=i.LongBits,s=i.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var u,d="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")},l=function(){return i.Buffer?function(e){return(c.create=function(e){return i.Buffer.isBuffer(e)?new n(e):d(e)})(e)}:d};function f(){var e=new o(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function h(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function p(){if(this.pos+8>this.len)throw a(this,8);return new o(h(this.buf,this.pos+=4),h(this.buf,this.pos+=4))}c.create=l(),c.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice,c.prototype.uint32=(u=4294967295,function(){if(u=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return u;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return u}),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return h(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|h(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},c.prototype.string=function(){var e=this.bytes();return s.read(e,0,e.length)},c.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){n=e,c.create=l(),n._configure();var t=i.Long?"toLong":"toNumber";i.merge(c.prototype,{int64:function(){return f.call(this)[t](!1)},uint64:function(){return f.call(this)[t](!0)},sint64:function(){return f.call(this).zzDecode()[t](!1)},fixed64:function(){return p.call(this)[t](!0)},sfixed64:function(){return p.call(this)[t](!1)}})}},5477:(e,t,r)=>{"use strict";e.exports=o;var n=r(5109);(o.prototype=Object.create(n.prototype)).constructor=o;var i=r(1429);function o(e){n.call(this,e)}o._configure=function(){i.Buffer&&(o.prototype._slice=i.Buffer.prototype.slice)},o.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},o._configure()},4508:e=>{"use strict";e.exports={}},5988:(e,t,r)=>{"use strict";t.Service=r(1365)},1365:(e,t,r)=>{"use strict";e.exports=i;var n=r(1429);function i(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}(i.prototype=Object.create(n.EventEmitter.prototype)).constructor=i,i.prototype.rpcCall=function e(t,r,i,o,s){if(!o)throw TypeError("request must be specified");var a=this;if(!s)return n.asPromise(e,a,t,r,i,o);if(a.rpcImpl)try{return a.rpcImpl(t,r[a.requestDelimited?"encodeDelimited":"encode"](o).finish(),(function(e,r){if(e)return a.emit("error",e,t),s(e);if(null!==r){if(!(r instanceof i))try{r=i[a.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return a.emit("error",e,t),s(e)}return a.emit("data",r,t),s(null,r)}a.end(!0)}))}catch(e){return a.emit("error",e,t),void setTimeout((function(){s(e)}),0)}else setTimeout((function(){s(Error("already ended"))}),0)},i.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},9340:(e,t,r)=>{"use strict";e.exports=i;var n=r(1429);function i(e,t){this.lo=e>>>0,this.hi=t>>>0}var o=i.zero=new i(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var s=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(e){if(0===e)return o;var t=e<0;t&&(e=-e);var r=e>>>0,n=(e-r)/4294967296>>>0;return t&&(n=~n>>>0,r=~r>>>0,++r>4294967295&&(r=0,++n>4294967295&&(n=0))),new i(r,n)},i.from=function(e){if("number"==typeof e)return i.fromNumber(e);if(n.isString(e)){if(!n.Long)return i.fromNumber(parseInt(e,10));e=n.Long.fromString(e)}return e.low||e.high?new i(e.low>>>0,e.high>>>0):o},i.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},i.prototype.toLong=function(e){return n.Long?new n.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;i.fromHash=function(e){return e===s?o:new i((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},i.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},i.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},1429:function(e,t,r){"use strict";var n=t;function i(e,t,r){for(var n=Object.keys(t),i=0;i<n.length;++i)void 0!==e[n[i]]&&r||(e[n[i]]=t[n[i]]);return e}function o(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&i(this,r)}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,writable:!0,enumerable:!1,configurable:!0},name:{get:()=>e,set:void 0,enumerable:!1,configurable:!0},toString:{value(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),t}n.asPromise=r(4537),n.base64=r(7419),n.EventEmitter=r(9211),n.float=r(945),n.inquire=r(7199),n.utf8=r(4997),n.pool=r(6662),n.LongBits=r(9340),n.isNode=Boolean(void 0!==r.g&&r.g&&r.g.process&&r.g.process.versions&&r.g.process.versions.node),n.global=n.isNode&&r.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},n.isString=function(e){return"string"==typeof e||e instanceof String},n.isObject=function(e){return e&&"object"==typeof e},n.isset=n.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(e){return"number"==typeof e?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},n.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash},n.longFromHash=function(e,t){var r=n.LongBits.fromHash(e);return n.Long?n.Long.fromBits(r.lo,r.hi,t):r.toNumber(Boolean(t))},n.merge=i,n.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},n.newError=o,n.ProtocolError=o("ProtocolError"),n.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},n.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var e=n.Buffer;e?(n._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},n._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):n._Buffer_from=n._Buffer_allocUnsafe=null}},7768:(e,t,r)=>{"use strict";e.exports=l;var n,i=r(1429),o=i.LongBits,s=i.base64,a=i.utf8;function c(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function u(){}function d(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function l(){this.len=0,this.head=new c(u,0,0),this.tail=this.head,this.states=null}var f=function(){return i.Buffer?function(){return(l.create=function(){return new n})()}:function(){return new l}};function h(e,t,r){t[r]=255&e}function p(e,t){this.len=e,this.next=void 0,this.val=t}function y(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function m(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}l.create=f(),l.alloc=function(e){return new i.Array(e)},i.Array!==Array&&(l.alloc=i.pool(l.alloc,i.Array.prototype.subarray)),l.prototype._push=function(e,t,r){return this.tail=this.tail.next=new c(e,t,r),this.len+=t,this},p.prototype=Object.create(c.prototype),p.prototype.fn=function(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e},l.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new p((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},l.prototype.int32=function(e){return e<0?this._push(y,10,o.fromNumber(e)):this.uint32(e)},l.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},l.prototype.uint64=function(e){var t=o.from(e);return this._push(y,t.length(),t)},l.prototype.int64=l.prototype.uint64,l.prototype.sint64=function(e){var t=o.from(e).zzEncode();return this._push(y,t.length(),t)},l.prototype.bool=function(e){return this._push(h,1,e?1:0)},l.prototype.fixed32=function(e){return this._push(m,4,e>>>0)},l.prototype.sfixed32=l.prototype.fixed32,l.prototype.fixed64=function(e){var t=o.from(e);return this._push(m,4,t.lo)._push(m,4,t.hi)},l.prototype.sfixed64=l.prototype.fixed64,l.prototype.float=function(e){return this._push(i.float.writeFloatLE,4,e)},l.prototype.double=function(e){return this._push(i.float.writeDoubleLE,8,e)};var g=i.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};l.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(h,1,0);if(i.isString(e)){var r=l.alloc(t=s.length(e));s.decode(e,r,0),e=r}return this.uint32(t)._push(g,t,e)},l.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(h,1,0)},l.prototype.fork=function(){return this.states=new d(this),this.head=this.tail=new c(u,0,0),this.len=0,this},l.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(u,0,0),this.len=0),this},l.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},l.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},l._configure=function(e){n=e,l.create=f(),n._configure()}},3676:(e,t,r)=>{"use strict";e.exports=o;var n=r(7768);(o.prototype=Object.create(n.prototype)).constructor=o;var i=r(1429);function o(){n.call(this)}function s(e,t,r){e.length<40?i.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}o._configure=function(){o.alloc=i._Buffer_allocUnsafe,o.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&"set"===i.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}},o.prototype.bytes=function(e){i.isString(e)&&(e=i._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(o.writeBytesBuffer,t,e),this},o.prototype.string=function(e){var t=i.Buffer.byteLength(e);return this.uint32(t),t&&this._push(s,t,e),this},o._configure()},7754:(e,t,r)=>{"use strict";r.r(t),r.d(t,{authn:()=>a,ciphertext:()=>c,composite:()=>h,contact:()=>y,content:()=>f,conversationReference:()=>d,fetcher:()=>n,invitation:()=>u,keystore:()=>m,message:()=>l,messageApi:()=>i,privateKey:()=>p,publicKey:()=>s,signature:()=>o});var n={};r.r(n),r.d(n,{b64Decode:()=>S,b64Encode:()=>w,fetchReq:()=>k,fetchStreamingRequest:()=>A,renderURLSearchParams:()=>x,replacer:()=>_});var i={};r.r(i),r.d(i,{MessageApi:()=>M,SortDirection:()=>O});var o={};r.r(o),r.d(o,{Signature:()=>se,Signature_ECDSACompact:()=>ce,Signature_WalletECDSACompact:()=>de,protobufPackage:()=>oe});var s={};r.r(s),r.d(s,{PublicKey:()=>ke,PublicKeyBundle:()=>Ne,PublicKey_Secp256k1Uncompressed:()=>Pe,SignedPublicKey:()=>Ee,SignedPublicKeyBundle:()=>Se,UnsignedPublicKey:()=>ge,UnsignedPublicKey_Secp256k1Uncompressed:()=>ve,protobufPackage:()=>ye});var a={};r.r(a),r.d(a,{AuthData:()=>Ke,Token:()=>Be,protobufPackage:()=>Ie});var c={};r.r(c),r.d(c,{Ciphertext:()=>Le,Ciphertext_Aes256gcmHkdfsha256:()=>Ve,SignedEciesCiphertext:()=>ze,SignedEciesCiphertext_Ecies:()=>He,protobufPackage:()=>Fe});var u={};r.r(u),r.d(u,{InvitationV1:()=>Qe,InvitationV1_Aes256gcmHkdfsha256:()=>tt,InvitationV1_Context:()=>rt,InvitationV1_Context_MetadataEntry:()=>nt,SealedInvitation:()=>ct,SealedInvitationHeaderV1:()=>ot,SealedInvitationV1:()=>at,protobufPackage:()=>Ye});var d={};r.r(d),r.d(d,{ConversationReference:()=>yt,protobufPackage:()=>ht});var l={};r.r(l),r.d(l,{DecodedMessage:()=>xt,Message:()=>Pt,MessageHeaderV1:()=>vt,MessageHeaderV2:()=>_t,MessageV1:()=>Et,MessageV2:()=>At,protobufPackage:()=>gt});var f={};r.r(f),r.d(f,{Compression:()=>Bt,ContentTypeId:()=>Ut,EncodedContent:()=>jt,EncodedContent_ParametersEntry:()=>Ft,SignedContent:()=>qt,compressionFromJSON:()=>Ct,compressionToJSON:()=>Kt,protobufPackage:()=>Rt});var h={};r.r(h),r.d(h,{Composite:()=>Wt,Composite_Part:()=>$t,protobufPackage:()=>Ht});var p={};r.r(p),r.d(p,{EncryptedPrivateKeyBundle:()=>lr,EncryptedPrivateKeyBundleV1:()=>dr,PrivateKey:()=>ir,PrivateKeyBundle:()=>cr,PrivateKeyBundleV1:()=>ar,PrivateKeyBundleV2:()=>rr,PrivateKey_Secp256k1:()=>sr,SignedPrivateKey:()=>Qt,SignedPrivateKey_Secp256k1:()=>tr,protobufPackage:()=>Xt});var y={};r.r(y),r.d(y,{ContactBundle:()=>vr,ContactBundleV1:()=>gr,ContactBundleV2:()=>br,protobufPackage:()=>mr});var m={};r.r(m),r.d(m,{CreateAuthTokenRequest:()=>tn,CreateInviteRequest:()=>Gr,CreateInviteResponse:()=>Wr,DecryptResponse:()=>Or,DecryptResponse_Response:()=>Mr,DecryptResponse_Response_Success:()=>Ir,DecryptV1Request:()=>Pr,DecryptV1Request_Request:()=>xr,DecryptV2Request:()=>Rr,DecryptV2Request_Request:()=>Cr,EncryptResponse:()=>jr,EncryptResponse_Response:()=>Fr,EncryptResponse_Response_Success:()=>Lr,EncryptV1Request:()=>Kr,EncryptV1Request_Request:()=>Dr,EncryptV2Request:()=>qr,EncryptV2Request_Request:()=>Jr,ErrorCode:()=>Sr,KeystoreError:()=>Ar,SaveInvitesRequest:()=>$r,SaveInvitesRequest_Request:()=>Xr,SaveInvitesResponse:()=>Yr,SaveInvitesResponse_Response:()=>Qr,SaveInvitesResponse_Response_Success:()=>en,SignDigestRequest:()=>nn,TopicMap:()=>on,TopicMap_TopicData:()=>an,TopicMap_TopicsEntry:()=>cn,errorCodeFromJSON:()=>_r,errorCodeToJSON:()=>kr,protobufPackage:()=>Er});var g=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};const b=new Array(64),v=new Array(123);for(let e=0;e<64;)v[b[e]=e<26?e+65:e<52?e+71:e<62?e-4:e-59|43]=e++;function w(e,t,r){let n=null;const i=[];let o,s=0,a=0;for(;t<r;){const r=e[t++];switch(a){case 0:i[s++]=b[r>>2],o=(3&r)<<4,a=1;break;case 1:i[s++]=b[o|r>>4],o=(15&r)<<2,a=2;break;case 2:i[s++]=b[o|r>>6],i[s++]=b[63&r],a=0}s>8191&&((n||(n=[])).push(String.fromCharCode.apply(String,i)),s=0)}return a&&(i[s++]=b[o],i[s++]=61,1===a&&(i[s++]=61)),n?(s&&n.push(String.fromCharCode.apply(String,i.slice(0,s))),n.join("")):String.fromCharCode.apply(String,i.slice(0,s))}const E="invalid encoding";function S(e){const t=[];let r,n=0,i=0;for(let o=0;o<e.length;){let s=e.charCodeAt(o++);if(61===s&&i>1)break;if(void 0===(s=v[s]))throw Error(E);switch(i){case 0:r=s,i=1;break;case 1:t[n++]=r<<2|(48&s)>>4,r=s,i=2;break;case 2:t[n++]=(15&r)<<4|(60&s)>>2,r=s,i=3;break;case 3:t[n++]=(3&r)<<6|s,i=0}}if(1===i)throw Error(E);return new Uint8Array(t)}function _(e,t){return t&&t.constructor===Uint8Array?w(t,0,t.length):t}function k(e,t){const r=t||{},{pathPrefix:n}=r,i=g(r,["pathPrefix"]);return fetch(n?`${n}${e}`:e,i).then((e=>e.json().then((t=>{if(!e.ok)throw t;return t}))))}function A(e,t,r){return n=this,i=void 0,s=function*(){const n=r||{},{pathPrefix:i}=n,o=g(n,["pathPrefix"]),s=i?`${i}${e}`:e,a=yield fetch(s,o);if(!a.ok){const e=yield a.json(),t=e.error&&e.error.message?e.error.message:"";throw new Error(t)}if(!a.body)throw new Error("response doesnt have a body");var c;yield a.body.pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({start(e){e.buf="",e.pos=0},transform(e,t){for(void 0===t.buf&&(t.buf=""),void 0===t.pos&&(t.pos=0),t.buf+=e;t.pos<t.buf.length;)if("\n"===t.buf[t.pos]){const e=t.buf.substring(0,t.pos),r=JSON.parse(e);t.enqueue(r.result),t.buf=t.buf.substring(t.pos+1),t.pos=0}else++t.pos}})).pipeTo((c=e=>{t&&t(e)},new WritableStream({write(e){c(e)}})))},new((o=void 0)||(o=Promise))((function(e,t){function r(e){try{c(s.next(e))}catch(e){t(e)}}function a(e){try{c(s.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(r,a)}c((s=s.apply(n,i||[])).next())}));var n,i,o,s}function P(e){return["string","number","boolean"].some((t=>typeof e===t))}function N(e,t=""){return Object.keys(e).reduce(((r,n)=>{const i=e[n],o=t?[t,n].join("."):n,s=Array.isArray(i)&&i.every((e=>P(e)))&&i.length>0,a=P(i)&&!function(e){return!1===e||0===e||""===e}(i);let c={};return function(e){const t="Object"===Object.prototype.toString.call(e).slice(8,-1);if(null===e||!t||!t)return!1;const r=Object.getPrototypeOf(e);return"object"==typeof r&&r.constructor===Object.prototype.constructor}(i)?c=N(i,o):(a||s)&&(c={[o]:i}),Object.assign(Object.assign({},r),c)}),{})}function x(e,t=[]){const r=N(e),n=Object.keys(r).reduce(((e,n)=>{const i=r[n];return t.find((e=>e===n))?e:Array.isArray(i)?[...e,...i.map((e=>[n,e.toString()]))]:e=[...e,[n,i.toString()]]}),[]);return new URLSearchParams(n).toString()}var O;!function(e){e.SORT_DIRECTION_UNSPECIFIED="SORT_DIRECTION_UNSPECIFIED",e.SORT_DIRECTION_ASCENDING="SORT_DIRECTION_ASCENDING",e.SORT_DIRECTION_DESCENDING="SORT_DIRECTION_DESCENDING"}(O||(O={}));class M{static Publish(e,t){return k("/message/v1/publish",Object.assign(Object.assign({},t),{method:"POST",body:JSON.stringify(e,_)}))}static Subscribe(e,t,r){return A("/message/v1/subscribe",t,Object.assign(Object.assign({},r),{method:"POST",body:JSON.stringify(e,_)}))}static SubscribeAll(e,t,r){return A("/message/v1/subscribe-all",t,Object.assign(Object.assign({},r),{method:"POST",body:JSON.stringify(e,_)}))}static Query(e,t){return k("/message/v1/query",Object.assign(Object.assign({},t),{method:"POST",body:JSON.stringify(e,_)}))}static BatchQuery(e,t){return k("/message/v1/batch-query",Object.assign(Object.assign({},t),{method:"POST",body:JSON.stringify(e,_)}))}}var T=null;try{T=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function I(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function R(e){return!0===(e&&e.__isLong__)}function B(e){var t=Math.clz32(e&-e);return e?31-t:t}I.prototype.__isLong__,Object.defineProperty(I.prototype,"__isLong__",{value:!0}),I.isLong=R;var C={},K={};function U(e,t){var r,n,i;return t?(i=0<=(e>>>=0)&&e<256)&&(n=K[e])?n:(r=j(e,0,!0),i&&(K[e]=r),r):(i=-128<=(e|=0)&&e<128)&&(n=C[e])?n:(r=j(e,e<0?-1:0,!1),i&&(C[e]=r),r)}function D(e,t){if(isNaN(e))return t?W:H;if(t){if(e<0)return W;if(e>=J)return Q}else{if(e<=-z)return ee;if(e+1>=z)return Y}return e<0?D(-e,t).neg():j(e%V|0,e/V|0,t)}function j(e,t,r){return new I(e,t,r)}I.fromInt=U,I.fromNumber=D,I.fromBits=j;var F=Math.pow;function L(e,t,r){if(0===e.length)throw Error("empty string");if("number"==typeof t?(r=t,t=!1):t=!!t,"NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return t?W:H;if((r=r||10)<2||36<r)throw RangeError("radix");var n;if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return L(e.substring(1),t,r).neg();for(var i=D(F(r,8)),o=H,s=0;s<e.length;s+=8){var a=Math.min(8,e.length-s),c=parseInt(e.substring(s,s+a),r);if(a<8){var u=D(F(r,a));o=o.mul(u).add(D(c))}else o=(o=o.mul(i)).add(D(c))}return o.unsigned=t,o}function q(e,t){return"number"==typeof e?D(e,t):"string"==typeof e?L(e,t):j(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}I.fromString=L,I.fromValue=q;var V=4294967296,J=V*V,z=J/2,G=U(1<<24),H=U(0);I.ZERO=H;var W=U(0,!0);I.UZERO=W;var $=U(1);I.ONE=$;var Z=U(1,!0);I.UONE=Z;var X=U(-1);I.NEG_ONE=X;var Y=j(-1,2147483647,!1);I.MAX_VALUE=Y;var Q=j(-1,-1,!0);I.MAX_UNSIGNED_VALUE=Q;var ee=j(0,-2147483648,!1);I.MIN_VALUE=ee;var te=I.prototype;te.toInt=function(){return this.unsigned?this.low>>>0:this.low},te.toNumber=function(){return this.unsigned?(this.high>>>0)*V+(this.low>>>0):this.high*V+(this.low>>>0)},te.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(ee)){var t=D(e),r=this.div(t),n=r.mul(t).sub(this);return r.toString(e)+n.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var i=D(F(e,6),this.unsigned),o=this,s="";;){var a=o.div(i),c=(o.sub(a.mul(i)).toInt()>>>0).toString(e);if((o=a).isZero())return c+s;for(;c.length<6;)c="0"+c;s=""+c+s}},te.getHighBits=function(){return this.high},te.getHighBitsUnsigned=function(){return this.high>>>0},te.getLowBits=function(){return this.low},te.getLowBitsUnsigned=function(){return this.low>>>0},te.getNumBitsAbs=function(){if(this.isNegative())return this.eq(ee)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},te.isZero=function(){return 0===this.high&&0===this.low},te.eqz=te.isZero,te.isNegative=function(){return!this.unsigned&&this.high<0},te.isPositive=function(){return this.unsigned||this.high>=0},te.isOdd=function(){return 1==(1&this.low)},te.isEven=function(){return 0==(1&this.low)},te.equals=function(e){return R(e)||(e=q(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},te.eq=te.equals,te.notEquals=function(e){return!this.eq(e)},te.neq=te.notEquals,te.ne=te.notEquals,te.lessThan=function(e){return this.comp(e)<0},te.lt=te.lessThan,te.lessThanOrEqual=function(e){return this.comp(e)<=0},te.lte=te.lessThanOrEqual,te.le=te.lessThanOrEqual,te.greaterThan=function(e){return this.comp(e)>0},te.gt=te.greaterThan,te.greaterThanOrEqual=function(e){return this.comp(e)>=0},te.gte=te.greaterThanOrEqual,te.ge=te.greaterThanOrEqual,te.compare=function(e){if(R(e)||(e=q(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},te.comp=te.compare,te.negate=function(){return!this.unsigned&&this.eq(ee)?ee:this.not().add($)},te.neg=te.negate,te.add=function(e){R(e)||(e=q(e));var t=this.high>>>16,r=65535&this.high,n=this.low>>>16,i=65535&this.low,o=e.high>>>16,s=65535&e.high,a=e.low>>>16,c=0,u=0,d=0,l=0;return d+=(l+=i+(65535&e.low))>>>16,u+=(d+=n+a)>>>16,c+=(u+=r+s)>>>16,c+=t+o,j((d&=65535)<<16|(l&=65535),(c&=65535)<<16|(u&=65535),this.unsigned)},te.subtract=function(e){return R(e)||(e=q(e)),this.add(e.neg())},te.sub=te.subtract,te.multiply=function(e){if(this.isZero())return this;if(R(e)||(e=q(e)),T)return j(T.mul(this.low,this.high,e.low,e.high),T.get_high(),this.unsigned);if(e.isZero())return this.unsigned?W:H;if(this.eq(ee))return e.isOdd()?ee:H;if(e.eq(ee))return this.isOdd()?ee:H;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(G)&&e.lt(G))return D(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,r=65535&this.high,n=this.low>>>16,i=65535&this.low,o=e.high>>>16,s=65535&e.high,a=e.low>>>16,c=65535&e.low,u=0,d=0,l=0,f=0;return l+=(f+=i*c)>>>16,d+=(l+=n*c)>>>16,l&=65535,d+=(l+=i*a)>>>16,u+=(d+=r*c)>>>16,d&=65535,u+=(d+=n*a)>>>16,d&=65535,u+=(d+=i*s)>>>16,u+=t*c+r*a+n*s+i*o,j((l&=65535)<<16|(f&=65535),(u&=65535)<<16|(d&=65535),this.unsigned)},te.mul=te.multiply,te.divide=function(e){if(R(e)||(e=q(e)),e.isZero())throw Error("division by zero");var t,r,n;if(T)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?j((this.unsigned?T.div_u:T.div_s)(this.low,this.high,e.low,e.high),T.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?W:H;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return W;if(e.gt(this.shru(1)))return Z;n=W}else{if(this.eq(ee))return e.eq($)||e.eq(X)?ee:e.eq(ee)?$:(t=this.shr(1).div(e).shl(1)).eq(H)?e.isNegative()?$:X:(r=this.sub(e.mul(t)),n=t.add(r.div(e)));if(e.eq(ee))return this.unsigned?W:H;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();n=H}for(r=this;r.gte(e);){t=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var i=Math.ceil(Math.log(t)/Math.LN2),o=i<=48?1:F(2,i-48),s=D(t),a=s.mul(e);a.isNegative()||a.gt(r);)a=(s=D(t-=o,this.unsigned)).mul(e);s.isZero()&&(s=$),n=n.add(s),r=r.sub(a)}return n},te.div=te.divide,te.modulo=function(e){return R(e)||(e=q(e)),T?j((this.unsigned?T.rem_u:T.rem_s)(this.low,this.high,e.low,e.high),T.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},te.mod=te.modulo,te.rem=te.modulo,te.not=function(){return j(~this.low,~this.high,this.unsigned)},te.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},te.clz=te.countLeadingZeros,te.countTrailingZeros=function(){return this.low?B(this.low):B(this.high)+32},te.ctz=te.countTrailingZeros,te.and=function(e){return R(e)||(e=q(e)),j(this.low&e.low,this.high&e.high,this.unsigned)},te.or=function(e){return R(e)||(e=q(e)),j(this.low|e.low,this.high|e.high,this.unsigned)},te.xor=function(e){return R(e)||(e=q(e)),j(this.low^e.low,this.high^e.high,this.unsigned)},te.shiftLeft=function(e){return R(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?j(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):j(0,this.low<<e-32,this.unsigned)},te.shl=te.shiftLeft,te.shiftRight=function(e){return R(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?j(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):j(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},te.shr=te.shiftRight,te.shiftRightUnsigned=function(e){return R(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?j(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):j(32===e?this.high:this.high>>>e-32,0,this.unsigned)},te.shru=te.shiftRightUnsigned,te.shr_u=te.shiftRightUnsigned,te.rotateLeft=function(e){var t;return R(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?j(this.high,this.low,this.unsigned):e<32?(t=32-e,j(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(t=32-(e-=32),j(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))},te.rotl=te.rotateLeft,te.rotateRight=function(e){var t;return R(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?j(this.high,this.low,this.unsigned):e<32?(t=32-e,j(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(t=32-(e-=32),j(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))},te.rotr=te.rotateRight,te.toSigned=function(){return this.unsigned?j(this.low,this.high,!1):this},te.toUnsigned=function(){return this.unsigned?this:j(this.low,this.high,!0)},te.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},te.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},te.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},I.fromBytes=function(e,t,r){return r?I.fromBytesLE(e,t):I.fromBytesBE(e,t)},I.fromBytesLE=function(e,t){return new I(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},I.fromBytesBE=function(e,t){return new I(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};const re=I;var ne=r(930),ie=r.n(ne);const oe="xmtp.message_contents",se={encode:(e,t=ie().Writer.create())=>(void 0!==e.ecdsaCompact&&ce.encode(e.ecdsaCompact,t.uint32(10).fork()).ldelim(),void 0!==e.walletEcdsaCompact&&de.encode(e.walletEcdsaCompact,t.uint32(18).fork()).ldelim(),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i={ecdsaCompact:void 0,walletEcdsaCompact:void 0};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.ecdsaCompact=ce.decode(r,r.uint32());break;case 2:i.walletEcdsaCompact=de.decode(r,r.uint32());break;default:r.skipType(7&e)}}return i},fromJSON:e=>({ecdsaCompact:pe(e.ecdsaCompact)?ce.fromJSON(e.ecdsaCompact):void 0,walletEcdsaCompact:pe(e.walletEcdsaCompact)?de.fromJSON(e.walletEcdsaCompact):void 0}),toJSON(e){const t={};return void 0!==e.ecdsaCompact&&(t.ecdsaCompact=e.ecdsaCompact?ce.toJSON(e.ecdsaCompact):void 0),void 0!==e.walletEcdsaCompact&&(t.walletEcdsaCompact=e.walletEcdsaCompact?de.toJSON(e.walletEcdsaCompact):void 0),t},fromPartial(e){const t={ecdsaCompact:void 0,walletEcdsaCompact:void 0};return t.ecdsaCompact=void 0!==e.ecdsaCompact&&null!==e.ecdsaCompact?ce.fromPartial(e.ecdsaCompact):void 0,t.walletEcdsaCompact=void 0!==e.walletEcdsaCompact&&null!==e.walletEcdsaCompact?de.fromPartial(e.walletEcdsaCompact):void 0,t}};function ae(){return{bytes:new Uint8Array,recovery:0}}const ce={encode:(e,t=ie().Writer.create())=>(0!==e.bytes.length&&t.uint32(10).bytes(e.bytes),0!==e.recovery&&t.uint32(16).uint32(e.recovery),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i=ae();for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.bytes=r.bytes();break;case 2:i.recovery=r.uint32();break;default:r.skipType(7&e)}}return i},fromJSON:e=>({bytes:pe(e.bytes)?fe(e.bytes):new Uint8Array,recovery:pe(e.recovery)?Number(e.recovery):0}),toJSON(e){const t={};return void 0!==e.bytes&&(t.bytes=he(void 0!==e.bytes?e.bytes:new Uint8Array)),void 0!==e.recovery&&(t.recovery=Math.round(e.recovery)),t},fromPartial(e){var t,r;const n=ae();return n.bytes=null!==(t=e.bytes)&&void 0!==t?t:new Uint8Array,n.recovery=null!==(r=e.recovery)&&void 0!==r?r:0,n}};function ue(){return{bytes:new Uint8Array,recovery:0}}const de={encode:(e,t=ie().Writer.create())=>(0!==e.bytes.length&&t.uint32(10).bytes(e.bytes),0!==e.recovery&&t.uint32(16).uint32(e.recovery),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i=ue();for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.bytes=r.bytes();break;case 2:i.recovery=r.uint32();break;default:r.skipType(7&e)}}return i},fromJSON:e=>({bytes:pe(e.bytes)?fe(e.bytes):new Uint8Array,recovery:pe(e.recovery)?Number(e.recovery):0}),toJSON(e){const t={};return void 0!==e.bytes&&(t.bytes=he(void 0!==e.bytes?e.bytes:new Uint8Array)),void 0!==e.recovery&&(t.recovery=Math.round(e.recovery)),t},fromPartial(e){var t,r;const n=ue();return n.bytes=null!==(t=e.bytes)&&void 0!==t?t:new Uint8Array,n.recovery=null!==(r=e.recovery)&&void 0!==r?r:0,n}};var le=(()=>{if(void 0!==le)return le;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw"Unable to locate global object"})();function fe(e){if(le.Buffer)return Uint8Array.from(le.Buffer.from(e,"base64"));{const t=le.atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;++e)r[e]=t.charCodeAt(e);return r}}function he(e){if(le.Buffer)return le.Buffer.from(e).toString("base64");{const t=[];return e.forEach((e=>{t.push(String.fromCharCode(e))})),le.btoa(t.join(""))}}function pe(e){return null!=e}ie().util.Long!==re&&(ie().util.Long=re,ie().configure());const ye="xmtp.message_contents";function me(){return{createdNs:re.UZERO,secp256k1Uncompressed:void 0}}const ge={encode:(e,t=ie().Writer.create())=>(e.createdNs.isZero()||t.uint32(8).uint64(e.createdNs),void 0!==e.secp256k1Uncompressed&&ve.encode(e.secp256k1Uncompressed,t.uint32(26).fork()).ldelim(),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i=me();for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.createdNs=r.uint64();break;case 3:i.secp256k1Uncompressed=ve.decode(r,r.uint32());break;default:r.skipType(7&e)}}return i},fromJSON:e=>({createdNs:Te(e.createdNs)?re.fromValue(e.createdNs):re.UZERO,secp256k1Uncompressed:Te(e.secp256k1Uncompressed)?ve.fromJSON(e.secp256k1Uncompressed):void 0}),toJSON(e){const t={};return void 0!==e.createdNs&&(t.createdNs=(e.createdNs||re.UZERO).toString()),void 0!==e.secp256k1Uncompressed&&(t.secp256k1Uncompressed=e.secp256k1Uncompressed?ve.toJSON(e.secp256k1Uncompressed):void 0),t},fromPartial(e){const t=me();return t.createdNs=void 0!==e.createdNs&&null!==e.createdNs?re.fromValue(e.createdNs):re.UZERO,t.secp256k1Uncompressed=void 0!==e.secp256k1Uncompressed&&null!==e.secp256k1Uncompressed?ve.fromPartial(e.secp256k1Uncompressed):void 0,t}};function be(){return{bytes:new Uint8Array}}const ve={encode:(e,t=ie().Writer.create())=>(0!==e.bytes.length&&t.uint32(10).bytes(e.bytes),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i=be();for(;r.pos<n;){const e=r.uint32();e>>>3==1?i.bytes=r.bytes():r.skipType(7&e)}return i},fromJSON:e=>({bytes:Te(e.bytes)?Oe(e.bytes):new Uint8Array}),toJSON(e){const t={};return void 0!==e.bytes&&(t.bytes=Me(void 0!==e.bytes?e.bytes:new Uint8Array)),t},fromPartial(e){var t;const r=be();return r.bytes=null!==(t=e.bytes)&&void 0!==t?t:new Uint8Array,r}};function we(){return{keyBytes:new Uint8Array,signature:void 0}}const Ee={encode:(e,t=ie().Writer.create())=>(0!==e.keyBytes.length&&t.uint32(10).bytes(e.keyBytes),void 0!==e.signature&&se.encode(e.signature,t.uint32(18).fork()).ldelim(),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i=we();for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.keyBytes=r.bytes();break;case 2:i.signature=se.decode(r,r.uint32());break;default:r.skipType(7&e)}}return i},fromJSON:e=>({keyBytes:Te(e.keyBytes)?Oe(e.keyBytes):new Uint8Array,signature:Te(e.signature)?se.fromJSON(e.signature):void 0}),toJSON(e){const t={};return void 0!==e.keyBytes&&(t.keyBytes=Me(void 0!==e.keyBytes?e.keyBytes:new Uint8Array)),void 0!==e.signature&&(t.signature=e.signature?se.toJSON(e.signature):void 0),t},fromPartial(e){var t;const r=we();return r.keyBytes=null!==(t=e.keyBytes)&&void 0!==t?t:new Uint8Array,r.signature=void 0!==e.signature&&null!==e.signature?se.fromPartial(e.signature):void 0,r}},Se={encode:(e,t=ie().Writer.create())=>(void 0!==e.identityKey&&Ee.encode(e.identityKey,t.uint32(10).fork()).ldelim(),void 0!==e.preKey&&Ee.encode(e.preKey,t.uint32(18).fork()).ldelim(),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i={identityKey:void 0,preKey:void 0};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.identityKey=Ee.decode(r,r.uint32());break;case 2:i.preKey=Ee.decode(r,r.uint32());break;default:r.skipType(7&e)}}return i},fromJSON:e=>({identityKey:Te(e.identityKey)?Ee.fromJSON(e.identityKey):void 0,preKey:Te(e.preKey)?Ee.fromJSON(e.preKey):void 0}),toJSON(e){const t={};return void 0!==e.identityKey&&(t.identityKey=e.identityKey?Ee.toJSON(e.identityKey):void 0),void 0!==e.preKey&&(t.preKey=e.preKey?Ee.toJSON(e.preKey):void 0),t},fromPartial(e){const t={identityKey:void 0,preKey:void 0};return t.identityKey=void 0!==e.identityKey&&null!==e.identityKey?Ee.fromPartial(e.identityKey):void 0,t.preKey=void 0!==e.preKey&&null!==e.preKey?Ee.fromPartial(e.preKey):void 0,t}};function _e(){return{timestamp:re.UZERO,signature:void 0,secp256k1Uncompressed:void 0}}const ke={encode:(e,t=ie().Writer.create())=>(e.timestamp.isZero()||t.uint32(8).uint64(e.timestamp),void 0!==e.signature&&se.encode(e.signature,t.uint32(18).fork()).ldelim(),void 0!==e.secp256k1Uncompressed&&Pe.encode(e.secp256k1Uncompressed,t.uint32(26).fork()).ldelim(),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i=_e();for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.timestamp=r.uint64();break;case 2:i.signature=se.decode(r,r.uint32());break;case 3:i.secp256k1Uncompressed=Pe.decode(r,r.uint32());break;default:r.skipType(7&e)}}return i},fromJSON:e=>({timestamp:Te(e.timestamp)?re.fromValue(e.timestamp):re.UZERO,signature:Te(e.signature)?se.fromJSON(e.signature):void 0,secp256k1Uncompressed:Te(e.secp256k1Uncompressed)?Pe.fromJSON(e.secp256k1Uncompressed):void 0}),toJSON(e){const t={};return void 0!==e.timestamp&&(t.timestamp=(e.timestamp||re.UZERO).toString()),void 0!==e.signature&&(t.signature=e.signature?se.toJSON(e.signature):void 0),void 0!==e.secp256k1Uncompressed&&(t.secp256k1Uncompressed=e.secp256k1Uncompressed?Pe.toJSON(e.secp256k1Uncompressed):void 0),t},fromPartial(e){const t=_e();return t.timestamp=void 0!==e.timestamp&&null!==e.timestamp?re.fromValue(e.timestamp):re.UZERO,t.signature=void 0!==e.signature&&null!==e.signature?se.fromPartial(e.signature):void 0,t.secp256k1Uncompressed=void 0!==e.secp256k1Uncompressed&&null!==e.secp256k1Uncompressed?Pe.fromPartial(e.secp256k1Uncompressed):void 0,t}};function Ae(){return{bytes:new Uint8Array}}const Pe={encode:(e,t=ie().Writer.create())=>(0!==e.bytes.length&&t.uint32(10).bytes(e.bytes),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i=Ae();for(;r.pos<n;){const e=r.uint32();e>>>3==1?i.bytes=r.bytes():r.skipType(7&e)}return i},fromJSON:e=>({bytes:Te(e.bytes)?Oe(e.bytes):new Uint8Array}),toJSON(e){const t={};return void 0!==e.bytes&&(t.bytes=Me(void 0!==e.bytes?e.bytes:new Uint8Array)),t},fromPartial(e){var t;const r=Ae();return r.bytes=null!==(t=e.bytes)&&void 0!==t?t:new Uint8Array,r}},Ne={encode:(e,t=ie().Writer.create())=>(void 0!==e.identityKey&&ke.encode(e.identityKey,t.uint32(10).fork()).ldelim(),void 0!==e.preKey&&ke.encode(e.preKey,t.uint32(18).fork()).ldelim(),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i={identityKey:void 0,preKey:void 0};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.identityKey=ke.decode(r,r.uint32());break;case 2:i.preKey=ke.decode(r,r.uint32());break;default:r.skipType(7&e)}}return i},fromJSON:e=>({identityKey:Te(e.identityKey)?ke.fromJSON(e.identityKey):void 0,preKey:Te(e.preKey)?ke.fromJSON(e.preKey):void 0}),toJSON(e){const t={};return void 0!==e.identityKey&&(t.identityKey=e.identityKey?ke.toJSON(e.identityKey):void 0),void 0!==e.preKey&&(t.preKey=e.preKey?ke.toJSON(e.preKey):void 0),t},fromPartial(e){const t={identityKey:void 0,preKey:void 0};return t.identityKey=void 0!==e.identityKey&&null!==e.identityKey?ke.fromPartial(e.identityKey):void 0,t.preKey=void 0!==e.preKey&&null!==e.preKey?ke.fromPartial(e.preKey):void 0,t}};var xe=(()=>{if(void 0!==xe)return xe;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw"Unable to locate global object"})();function Oe(e){if(xe.Buffer)return Uint8Array.from(xe.Buffer.from(e,"base64"));{const t=xe.atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;++e)r[e]=t.charCodeAt(e);return r}}function Me(e){if(xe.Buffer)return xe.Buffer.from(e).toString("base64");{const t=[];return e.forEach((e=>{t.push(String.fromCharCode(e))})),xe.btoa(t.join(""))}}function Te(e){return null!=e}ie().util.Long!==re&&(ie().util.Long=re,ie().configure());const Ie="xmtp.message_api.v1";function Re(){return{identityKey:void 0,authDataBytes:new Uint8Array,authDataSignature:void 0}}const Be={encode:(e,t=ie().Writer.create())=>(void 0!==e.identityKey&&ke.encode(e.identityKey,t.uint32(10).fork()).ldelim(),0!==e.authDataBytes.length&&t.uint32(18).bytes(e.authDataBytes),void 0!==e.authDataSignature&&se.encode(e.authDataSignature,t.uint32(26).fork()).ldelim(),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i=Re();for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.identityKey=ke.decode(r,r.uint32());break;case 2:i.authDataBytes=r.bytes();break;case 3:i.authDataSignature=se.decode(r,r.uint32());break;default:r.skipType(7&e)}}return i},fromJSON:e=>({identityKey:je(e.identityKey)?ke.fromJSON(e.identityKey):void 0,authDataBytes:je(e.authDataBytes)?De(e.authDataBytes):new Uint8Array,authDataSignature:je(e.authDataSignature)?se.fromJSON(e.authDataSignature):void 0}),toJSON(e){const t={};return void 0!==e.identityKey&&(t.identityKey=e.identityKey?ke.toJSON(e.identityKey):void 0),void 0!==e.authDataBytes&&(t.authDataBytes=function(e){if(Ue.Buffer)return Ue.Buffer.from(e).toString("base64");{const t=[];return e.forEach((e=>{t.push(String.fromCharCode(e))})),Ue.btoa(t.join(""))}}(void 0!==e.authDataBytes?e.authDataBytes:new Uint8Array)),void 0!==e.authDataSignature&&(t.authDataSignature=e.authDataSignature?se.toJSON(e.authDataSignature):void 0),t},fromPartial(e){var t;const r=Re();return r.identityKey=void 0!==e.identityKey&&null!==e.identityKey?ke.fromPartial(e.identityKey):void 0,r.authDataBytes=null!==(t=e.authDataBytes)&&void 0!==t?t:new Uint8Array,r.authDataSignature=void 0!==e.authDataSignature&&null!==e.authDataSignature?se.fromPartial(e.authDataSignature):void 0,r}};function Ce(){return{walletAddr:"",createdNs:re.UZERO}}const Ke={encode:(e,t=ie().Writer.create())=>(""!==e.walletAddr&&t.uint32(10).string(e.walletAddr),e.createdNs.isZero()||t.uint32(16).uint64(e.createdNs),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i=Ce();for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.walletAddr=r.string();break;case 2:i.createdNs=r.uint64();break;default:r.skipType(7&e)}}return i},fromJSON:e=>({walletAddr:je(e.walletAddr)?String(e.walletAddr):"",createdNs:je(e.createdNs)?re.fromValue(e.createdNs):re.UZERO}),toJSON(e){const t={};return void 0!==e.walletAddr&&(t.walletAddr=e.walletAddr),void 0!==e.createdNs&&(t.createdNs=(e.createdNs||re.UZERO).toString()),t},fromPartial(e){var t;const r=Ce();return r.walletAddr=null!==(t=e.walletAddr)&&void 0!==t?t:"",r.createdNs=void 0!==e.createdNs&&null!==e.createdNs?re.fromValue(e.createdNs):re.UZERO,r}};var Ue=(()=>{if(void 0!==Ue)return Ue;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw"Unable to locate global object"})();function De(e){if(Ue.Buffer)return Uint8Array.from(Ue.Buffer.from(e,"base64"));{const t=Ue.atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;++e)r[e]=t.charCodeAt(e);return r}}function je(e){return null!=e}ie().util.Long!==re&&(ie().util.Long=re,ie().configure());const Fe="xmtp.message_contents",Le={encode:(e,t=ie().Writer.create())=>(void 0!==e.aes256GcmHkdfSha256&&Ve.encode(e.aes256GcmHkdfSha256,t.uint32(10).fork()).ldelim(),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i={aes256GcmHkdfSha256:void 0};for(;r.pos<n;){const e=r.uint32();e>>>3==1?i.aes256GcmHkdfSha256=Ve.decode(r,r.uint32()):r.skipType(7&e)}return i},fromJSON:e=>({aes256GcmHkdfSha256:Xe(e.aes256GcmHkdfSha256)?Ve.fromJSON(e.aes256GcmHkdfSha256):void 0}),toJSON(e){const t={};return void 0!==e.aes256GcmHkdfSha256&&(t.aes256GcmHkdfSha256=e.aes256GcmHkdfSha256?Ve.toJSON(e.aes256GcmHkdfSha256):void 0),t},fromPartial(e){const t={aes256GcmHkdfSha256:void 0};return t.aes256GcmHkdfSha256=void 0!==e.aes256GcmHkdfSha256&&null!==e.aes256GcmHkdfSha256?Ve.fromPartial(e.aes256GcmHkdfSha256):void 0,t}};function qe(){return{hkdfSalt:new Uint8Array,gcmNonce:new Uint8Array,payload:new Uint8Array}}const Ve={encode:(e,t=ie().Writer.create())=>(0!==e.hkdfSalt.length&&t.uint32(10).bytes(e.hkdfSalt),0!==e.gcmNonce.length&&t.uint32(18).bytes(e.gcmNonce),0!==e.payload.length&&t.uint32(26).bytes(e.payload),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i=qe();for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.hkdfSalt=r.bytes();break;case 2:i.gcmNonce=r.bytes();break;case 3:i.payload=r.bytes();break;default:r.skipType(7&e)}}return i},fromJSON:e=>({hkdfSalt:Xe(e.hkdfSalt)?$e(e.hkdfSalt):new Uint8Array,gcmNonce:Xe(e.gcmNonce)?$e(e.gcmNonce):new Uint8Array,payload:Xe(e.payload)?$e(e.payload):new Uint8Array}),toJSON(e){const t={};return void 0!==e.hkdfSalt&&(t.hkdfSalt=Ze(void 0!==e.hkdfSalt?e.hkdfSalt:new Uint8Array)),void 0!==e.gcmNonce&&(t.gcmNonce=Ze(void 0!==e.gcmNonce?e.gcmNonce:new Uint8Array)),void 0!==e.payload&&(t.payload=Ze(void 0!==e.payload?e.payload:new Uint8Array)),t},fromPartial(e){var t,r,n;const i=qe();return i.hkdfSalt=null!==(t=e.hkdfSalt)&&void 0!==t?t:new Uint8Array,i.gcmNonce=null!==(r=e.gcmNonce)&&void 0!==r?r:new Uint8Array,i.payload=null!==(n=e.payload)&&void 0!==n?n:new Uint8Array,i}};function Je(){return{eciesBytes:new Uint8Array,signature:void 0}}const ze={encode:(e,t=ie().Writer.create())=>(0!==e.eciesBytes.length&&t.uint32(10).bytes(e.eciesBytes),void 0!==e.signature&&se.encode(e.signature,t.uint32(18).fork()).ldelim(),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i=Je();for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.eciesBytes=r.bytes();break;case 2:i.signature=se.decode(r,r.uint32());break;default:r.skipType(7&e)}}return i},fromJSON:e=>({eciesBytes:Xe(e.eciesBytes)?$e(e.eciesBytes):new Uint8Array,signature:Xe(e.signature)?se.fromJSON(e.signature):void 0}),toJSON(e){const t={};return void 0!==e.eciesBytes&&(t.eciesBytes=Ze(void 0!==e.eciesBytes?e.eciesBytes:new Uint8Array)),void 0!==e.signature&&(t.signature=e.signature?se.toJSON(e.signature):void 0),t},fromPartial(e){var t;const r=Je();return r.eciesBytes=null!==(t=e.eciesBytes)&&void 0!==t?t:new Uint8Array,r.signature=void 0!==e.signature&&null!==e.signature?se.fromPartial(e.signature):void 0,r}};function Ge(){return{ephemeralPublicKey:new Uint8Array,iv:new Uint8Array,mac:new Uint8Array,ciphertext:new Uint8Array}}const He={encode:(e,t=ie().Writer.create())=>(0!==e.ephemeralPublicKey.length&&t.uint32(10).bytes(e.ephemeralPublicKey),0!==e.iv.length&&t.uint32(18).bytes(e.iv),0!==e.mac.length&&t.uint32(26).bytes(e.mac),0!==e.ciphertext.length&&t.uint32(34).bytes(e.ciphertext),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i=Ge();for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.ephemeralPublicKey=r.bytes();break;case 2:i.iv=r.bytes();break;case 3:i.mac=r.bytes();break;case 4:i.ciphertext=r.bytes();break;default:r.skipType(7&e)}}return i},fromJSON:e=>({ephemeralPublicKey:Xe(e.ephemeralPublicKey)?$e(e.ephemeralPublicKey):new Uint8Array,iv:Xe(e.iv)?$e(e.iv):new Uint8Array,mac:Xe(e.mac)?$e(e.mac):new Uint8Array,ciphertext:Xe(e.ciphertext)?$e(e.ciphertext):new Uint8Array}),toJSON(e){const t={};return void 0!==e.ephemeralPublicKey&&(t.ephemeralPublicKey=Ze(void 0!==e.ephemeralPublicKey?e.ephemeralPublicKey:new Uint8Array)),void 0!==e.iv&&(t.iv=Ze(void 0!==e.iv?e.iv:new Uint8Array)),void 0!==e.mac&&(t.mac=Ze(void 0!==e.mac?e.mac:new Uint8Array)),void 0!==e.ciphertext&&(t.ciphertext=Ze(void 0!==e.ciphertext?e.ciphertext:new Uint8Array)),t},fromPartial(e){var t,r,n,i;const o=Ge();return o.ephemeralPublicKey=null!==(t=e.ephemeralPublicKey)&&void 0!==t?t:new Uint8Array,o.iv=null!==(r=e.iv)&&void 0!==r?r:new Uint8Array,o.mac=null!==(n=e.mac)&&void 0!==n?n:new Uint8Array,o.ciphertext=null!==(i=e.ciphertext)&&void 0!==i?i:new Uint8Array,o}};var We=(()=>{if(void 0!==We)return We;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw"Unable to locate global object"})();function $e(e){if(We.Buffer)return Uint8Array.from(We.Buffer.from(e,"base64"));{const t=We.atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;++e)r[e]=t.charCodeAt(e);return r}}function Ze(e){if(We.Buffer)return We.Buffer.from(e).toString("base64");{const t=[];return e.forEach((e=>{t.push(String.fromCharCode(e))})),We.btoa(t.join(""))}}function Xe(e){return null!=e}ie().util.Long!==re&&(ie().util.Long=re,ie().configure());const Ye="xmtp.message_contents",Qe={encode:(e,t=ie().Writer.create())=>(""!==e.topic&&t.uint32(10).string(e.topic),void 0!==e.context&&rt.encode(e.context,t.uint32(18).fork()).ldelim(),void 0!==e.aes256GcmHkdfSha256&&tt.encode(e.aes256GcmHkdfSha256,t.uint32(26).fork()).ldelim(),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i={topic:"",context:void 0,aes256GcmHkdfSha256:void 0};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.topic=r.string();break;case 2:i.context=rt.decode(r,r.uint32());break;case 3:i.aes256GcmHkdfSha256=tt.decode(r,r.uint32());break;default:r.skipType(7&e)}}return i},fromJSON:e=>({topic:ft(e.topic)?String(e.topic):"",context:ft(e.context)?rt.fromJSON(e.context):void 0,aes256GcmHkdfSha256:ft(e.aes256GcmHkdfSha256)?tt.fromJSON(e.aes256GcmHkdfSha256):void 0}),toJSON(e){const t={};return void 0!==e.topic&&(t.topic=e.topic),void 0!==e.context&&(t.context=e.context?rt.toJSON(e.context):void 0),void 0!==e.aes256GcmHkdfSha256&&(t.aes256GcmHkdfSha256=e.aes256GcmHkdfSha256?tt.toJSON(e.aes256GcmHkdfSha256):void 0),t},fromPartial(e){var t;const r={topic:"",context:void 0,aes256GcmHkdfSha256:void 0};return r.topic=null!==(t=e.topic)&&void 0!==t?t:"",r.context=void 0!==e.context&&null!==e.context?rt.fromPartial(e.context):void 0,r.aes256GcmHkdfSha256=void 0!==e.aes256GcmHkdfSha256&&null!==e.aes256GcmHkdfSha256?tt.fromPartial(e.aes256GcmHkdfSha256):void 0,r}};function et(){return{keyMaterial:new Uint8Array}}const tt={encode:(e,t=ie().Writer.create())=>(0!==e.keyMaterial.length&&t.uint32(10).bytes(e.keyMaterial),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i=et();for(;r.pos<n;){const e=r.uint32();e>>>3==1?i.keyMaterial=r.bytes():r.skipType(7&e)}return i},fromJSON:e=>({keyMaterial:ft(e.keyMaterial)?dt(e.keyMaterial):new Uint8Array}),toJSON(e){const t={};return void 0!==e.keyMaterial&&(t.keyMaterial=lt(void 0!==e.keyMaterial?e.keyMaterial:new Uint8Array)),t},fromPartial(e){var t;const r=et();return r.keyMaterial=null!==(t=e.keyMaterial)&&void 0!==t?t:new Uint8Array,r}},rt={encode:(e,t=ie().Writer.create())=>(""!==e.conversationId&&t.uint32(10).string(e.conversationId),Object.entries(e.metadata).forEach((([e,r])=>{nt.encode({key:e,value:r},t.uint32(18).fork()).ldelim()})),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i={conversationId:"",metadata:{}};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.conversationId=r.string();break;case 2:const t=nt.decode(r,r.uint32());void 0!==t.value&&(i.metadata[t.key]=t.value);break;default:r.skipType(7&e)}}return i},fromJSON(e){return{conversationId:ft(e.conversationId)?String(e.conversationId):"",metadata:(t=e.metadata,"object"==typeof t&&null!==t?Object.entries(e.metadata).reduce(((e,[t,r])=>(e[t]=String(r),e)),{}):{})};var t},toJSON(e){const t={};return void 0!==e.conversationId&&(t.conversationId=e.conversationId),t.metadata={},e.metadata&&Object.entries(e.metadata).forEach((([e,r])=>{t.metadata[e]=r})),t},fromPartial(e){var t,r;const n={conversationId:"",metadata:{}};return n.conversationId=null!==(t=e.conversationId)&&void 0!==t?t:"",n.metadata=Object.entries(null!==(r=e.metadata)&&void 0!==r?r:{}).reduce(((e,[t,r])=>(void 0!==r&&(e[t]=String(r)),e)),{}),n}},nt={encode:(e,t=ie().Writer.create())=>(""!==e.key&&t.uint32(10).string(e.key),""!==e.value&&t.uint32(18).string(e.value),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i={key:"",value:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.key=r.string();break;case 2:i.value=r.string();break;default:r.skipType(7&e)}}return i},fromJSON:e=>({key:ft(e.key)?String(e.key):"",value:ft(e.value)?String(e.value):""}),toJSON(e){const t={};return void 0!==e.key&&(t.key=e.key),void 0!==e.value&&(t.value=e.value),t},fromPartial(e){var t,r;const n={key:"",value:""};return n.key=null!==(t=e.key)&&void 0!==t?t:"",n.value=null!==(r=e.value)&&void 0!==r?r:"",n}};function it(){return{sender:void 0,recipient:void 0,createdNs:re.UZERO}}const ot={encode:(e,t=ie().Writer.create())=>(void 0!==e.sender&&Se.encode(e.sender,t.uint32(10).fork()).ldelim(),void 0!==e.recipient&&Se.encode(e.recipient,t.uint32(18).fork()).ldelim(),e.createdNs.isZero()||t.uint32(24).uint64(e.createdNs),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i=it();for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.sender=Se.decode(r,r.uint32());break;case 2:i.recipient=Se.decode(r,r.uint32());break;case 3:i.createdNs=r.uint64();break;default:r.skipType(7&e)}}return i},fromJSON:e=>({sender:ft(e.sender)?Se.fromJSON(e.sender):void 0,recipient:ft(e.recipient)?Se.fromJSON(e.recipient):void 0,createdNs:ft(e.createdNs)?re.fromValue(e.createdNs):re.UZERO}),toJSON(e){const t={};return void 0!==e.sender&&(t.sender=e.sender?Se.toJSON(e.sender):void 0),void 0!==e.recipient&&(t.recipient=e.recipient?Se.toJSON(e.recipient):void 0),void 0!==e.createdNs&&(t.createdNs=(e.createdNs||re.UZERO).toString()),t},fromPartial(e){const t=it();return t.sender=void 0!==e.sender&&null!==e.sender?Se.fromPartial(e.sender):void 0,t.recipient=void 0!==e.recipient&&null!==e.recipient?Se.fromPartial(e.recipient):void 0,t.createdNs=void 0!==e.createdNs&&null!==e.createdNs?re.fromValue(e.createdNs):re.UZERO,t}};function st(){return{headerBytes:new Uint8Array,ciphertext:void 0}}const at={encode:(e,t=ie().Writer.create())=>(0!==e.headerBytes.length&&t.uint32(10).bytes(e.headerBytes),void 0!==e.ciphertext&&Le.encode(e.ciphertext,t.uint32(18).fork()).ldelim(),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i=st();for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.headerBytes=r.bytes();break;case 2:i.ciphertext=Le.decode(r,r.uint32());break;default:r.skipType(7&e)}}return i},fromJSON:e=>({headerBytes:ft(e.headerBytes)?dt(e.headerBytes):new Uint8Array,ciphertext:ft(e.ciphertext)?Le.fromJSON(e.ciphertext):void 0}),toJSON(e){const t={};return void 0!==e.headerBytes&&(t.headerBytes=lt(void 0!==e.headerBytes?e.headerBytes:new Uint8Array)),void 0!==e.ciphertext&&(t.ciphertext=e.ciphertext?Le.toJSON(e.ciphertext):void 0),t},fromPartial(e){var t;const r=st();return r.headerBytes=null!==(t=e.headerBytes)&&void 0!==t?t:new Uint8Array,r.ciphertext=void 0!==e.ciphertext&&null!==e.ciphertext?Le.fromPartial(e.ciphertext):void 0,r}},ct={encode:(e,t=ie().Writer.create())=>(void 0!==e.v1&&at.encode(e.v1,t.uint32(10).fork()).ldelim(),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i={v1:void 0};for(;r.pos<n;){const e=r.uint32();e>>>3==1?i.v1=at.decode(r,r.uint32()):r.skipType(7&e)}return i},fromJSON:e=>({v1:ft(e.v1)?at.fromJSON(e.v1):void 0}),toJSON(e){const t={};return void 0!==e.v1&&(t.v1=e.v1?at.toJSON(e.v1):void 0),t},fromPartial(e){const t={v1:void 0};return t.v1=void 0!==e.v1&&null!==e.v1?at.fromPartial(e.v1):void 0,t}};var ut=(()=>{if(void 0!==ut)return ut;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw"Unable to locate global object"})();function dt(e){if(ut.Buffer)return Uint8Array.from(ut.Buffer.from(e,"base64"));{const t=ut.atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;++e)r[e]=t.charCodeAt(e);return r}}function lt(e){if(ut.Buffer)return ut.Buffer.from(e).toString("base64");{const t=[];return e.forEach((e=>{t.push(String.fromCharCode(e))})),ut.btoa(t.join(""))}}function ft(e){return null!=e}ie().util.Long!==re&&(ie().util.Long=re,ie().configure());const ht="xmtp.message_contents";function pt(){return{topic:"",peerAddress:"",createdNs:re.UZERO,context:void 0}}const yt={encode:(e,t=ie().Writer.create())=>(""!==e.topic&&t.uint32(10).string(e.topic),""!==e.peerAddress&&t.uint32(18).string(e.peerAddress),e.createdNs.isZero()||t.uint32(24).uint64(e.createdNs),void 0!==e.context&&rt.encode(e.context,t.uint32(34).fork()).ldelim(),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i=pt();for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.topic=r.string();break;case 2:i.peerAddress=r.string();break;case 3:i.createdNs=r.uint64();break;case 4:i.context=rt.decode(r,r.uint32());break;default:r.skipType(7&e)}}return i},fromJSON:e=>({topic:mt(e.topic)?String(e.topic):"",peerAddress:mt(e.peerAddress)?String(e.peerAddress):"",createdNs:mt(e.createdNs)?re.fromValue(e.createdNs):re.UZERO,context:mt(e.context)?rt.fromJSON(e.context):void 0}),toJSON(e){const t={};return void 0!==e.topic&&(t.topic=e.topic),void 0!==e.peerAddress&&(t.peerAddress=e.peerAddress),void 0!==e.createdNs&&(t.createdNs=(e.createdNs||re.UZERO).toString()),void 0!==e.context&&(t.context=e.context?rt.toJSON(e.context):void 0),t},fromPartial(e){var t,r;const n=pt();return n.topic=null!==(t=e.topic)&&void 0!==t?t:"",n.peerAddress=null!==(r=e.peerAddress)&&void 0!==r?r:"",n.createdNs=void 0!==e.createdNs&&null!==e.createdNs?re.fromValue(e.createdNs):re.UZERO,n.context=void 0!==e.context&&null!==e.context?rt.fromPartial(e.context):void 0,n}};function mt(e){return null!=e}ie().util.Long!==re&&(ie().util.Long=re,ie().configure());const gt="xmtp.message_contents";function bt(){return{sender:void 0,recipient:void 0,timestamp:re.UZERO}}const vt={encode:(e,t=ie().Writer.create())=>(void 0!==e.sender&&Ne.encode(e.sender,t.uint32(10).fork()).ldelim(),void 0!==e.recipient&&Ne.encode(e.recipient,t.uint32(18).fork()).ldelim(),e.timestamp.isZero()||t.uint32(24).uint64(e.timestamp),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i=bt();for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.sender=Ne.decode(r,r.uint32());break;case 2:i.recipient=Ne.decode(r,r.uint32());break;case 3:i.timestamp=r.uint64();break;default:r.skipType(7&e)}}return i},fromJSON:e=>({sender:It(e.sender)?Ne.fromJSON(e.sender):void 0,recipient:It(e.recipient)?Ne.fromJSON(e.recipient):void 0,timestamp:It(e.timestamp)?re.fromValue(e.timestamp):re.UZERO}),toJSON(e){const t={};return void 0!==e.sender&&(t.sender=e.sender?Ne.toJSON(e.sender):void 0),void 0!==e.recipient&&(t.recipient=e.recipient?Ne.toJSON(e.recipient):void 0),void 0!==e.timestamp&&(t.timestamp=(e.timestamp||re.UZERO).toString()),t},fromPartial(e){const t=bt();return t.sender=void 0!==e.sender&&null!==e.sender?Ne.fromPartial(e.sender):void 0,t.recipient=void 0!==e.recipient&&null!==e.recipient?Ne.fromPartial(e.recipient):void 0,t.timestamp=void 0!==e.timestamp&&null!==e.timestamp?re.fromValue(e.timestamp):re.UZERO,t}};function wt(){return{headerBytes:new Uint8Array,ciphertext:void 0}}const Et={encode:(e,t=ie().Writer.create())=>(0!==e.headerBytes.length&&t.uint32(10).bytes(e.headerBytes),void 0!==e.ciphertext&&Le.encode(e.ciphertext,t.uint32(18).fork()).ldelim(),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i=wt();for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.headerBytes=r.bytes();break;case 2:i.ciphertext=Le.decode(r,r.uint32());break;default:r.skipType(7&e)}}return i},fromJSON:e=>({headerBytes:It(e.headerBytes)?Mt(e.headerBytes):new Uint8Array,ciphertext:It(e.ciphertext)?Le.fromJSON(e.ciphertext):void 0}),toJSON(e){const t={};return void 0!==e.headerBytes&&(t.headerBytes=Tt(void 0!==e.headerBytes?e.headerBytes:new Uint8Array)),void 0!==e.ciphertext&&(t.ciphertext=e.ciphertext?Le.toJSON(e.ciphertext):void 0),t},fromPartial(e){var t;const r=wt();return r.headerBytes=null!==(t=e.headerBytes)&&void 0!==t?t:new Uint8Array,r.ciphertext=void 0!==e.ciphertext&&null!==e.ciphertext?Le.fromPartial(e.ciphertext):void 0,r}};function St(){return{createdNs:re.UZERO,topic:""}}const _t={encode:(e,t=ie().Writer.create())=>(e.createdNs.isZero()||t.uint32(8).uint64(e.createdNs),""!==e.topic&&t.uint32(18).string(e.topic),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i=St();for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.createdNs=r.uint64();break;case 2:i.topic=r.string();break;default:r.skipType(7&e)}}return i},fromJSON:e=>({createdNs:It(e.createdNs)?re.fromValue(e.createdNs):re.UZERO,topic:It(e.topic)?String(e.topic):""}),toJSON(e){const t={};return void 0!==e.createdNs&&(t.createdNs=(e.createdNs||re.UZERO).toString()),void 0!==e.topic&&(t.topic=e.topic),t},fromPartial(e){var t;const r=St();return r.createdNs=void 0!==e.createdNs&&null!==e.createdNs?re.fromValue(e.createdNs):re.UZERO,r.topic=null!==(t=e.topic)&&void 0!==t?t:"",r}};function kt(){return{headerBytes:new Uint8Array,ciphertext:void 0}}const At={encode:(e,t=ie().Writer.create())=>(0!==e.headerBytes.length&&t.uint32(10).bytes(e.headerBytes),void 0!==e.ciphertext&&Le.encode(e.ciphertext,t.uint32(18).fork()).ldelim(),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i=kt();for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.headerBytes=r.bytes();break;case 2:i.ciphertext=Le.decode(r,r.uint32());break;default:r.skipType(7&e)}}return i},fromJSON:e=>({headerBytes:It(e.headerBytes)?Mt(e.headerBytes):new Uint8Array,ciphertext:It(e.ciphertext)?Le.fromJSON(e.ciphertext):void 0}),toJSON(e){const t={};return void 0!==e.headerBytes&&(t.headerBytes=Tt(void 0!==e.headerBytes?e.headerBytes:new Uint8Array)),void 0!==e.ciphertext&&(t.ciphertext=e.ciphertext?Le.toJSON(e.ciphertext):void 0),t},fromPartial(e){var t;const r=kt();return r.headerBytes=null!==(t=e.headerBytes)&&void 0!==t?t:new Uint8Array,r.ciphertext=void 0!==e.ciphertext&&null!==e.ciphertext?Le.fromPartial(e.ciphertext):void 0,r}},Pt={encode:(e,t=ie().Writer.create())=>(void 0!==e.v1&&Et.encode(e.v1,t.uint32(10).fork()).ldelim(),void 0!==e.v2&&At.encode(e.v2,t.uint32(18).fork()).ldelim(),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i={v1:void 0,v2:void 0};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.v1=Et.decode(r,r.uint32());break;case 2:i.v2=At.decode(r,r.uint32());break;default:r.skipType(7&e)}}return i},fromJSON:e=>({v1:It(e.v1)?Et.fromJSON(e.v1):void 0,v2:It(e.v2)?At.fromJSON(e.v2):void 0}),toJSON(e){const t={};return void 0!==e.v1&&(t.v1=e.v1?Et.toJSON(e.v1):void 0),void 0!==e.v2&&(t.v2=e.v2?At.toJSON(e.v2):void 0),t},fromPartial(e){const t={v1:void 0,v2:void 0};return t.v1=void 0!==e.v1&&null!==e.v1?Et.fromPartial(e.v1):void 0,t.v2=void 0!==e.v2&&null!==e.v2?At.fromPartial(e.v2):void 0,t}};function Nt(){return{id:"",messageVersion:"",senderAddress:"",recipientAddress:void 0,sentNs:re.UZERO,contentTopic:"",conversation:void 0,contentBytes:new Uint8Array}}const xt={encode:(e,t=ie().Writer.create())=>(""!==e.id&&t.uint32(10).string(e.id),""!==e.messageVersion&&t.uint32(18).string(e.messageVersion),""!==e.senderAddress&&t.uint32(26).string(e.senderAddress),void 0!==e.recipientAddress&&t.uint32(34).string(e.recipientAddress),e.sentNs.isZero()||t.uint32(40).uint64(e.sentNs),""!==e.contentTopic&&t.uint32(50).string(e.contentTopic),void 0!==e.conversation&&yt.encode(e.conversation,t.uint32(58).fork()).ldelim(),0!==e.contentBytes.length&&t.uint32(66).bytes(e.contentBytes),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i=Nt();for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.id=r.string();break;case 2:i.messageVersion=r.string();break;case 3:i.senderAddress=r.string();break;case 4:i.recipientAddress=r.string();break;case 5:i.sentNs=r.uint64();break;case 6:i.contentTopic=r.string();break;case 7:i.conversation=yt.decode(r,r.uint32());break;case 8:i.contentBytes=r.bytes();break;default:r.skipType(7&e)}}return i},fromJSON:e=>({id:It(e.id)?String(e.id):"",messageVersion:It(e.messageVersion)?String(e.messageVersion):"",senderAddress:It(e.senderAddress)?String(e.senderAddress):"",recipientAddress:It(e.recipientAddress)?String(e.recipientAddress):void 0,sentNs:It(e.sentNs)?re.fromValue(e.sentNs):re.UZERO,contentTopic:It(e.contentTopic)?String(e.contentTopic):"",conversation:It(e.conversation)?yt.fromJSON(e.conversation):void 0,contentBytes:It(e.contentBytes)?Mt(e.contentBytes):new Uint8Array}),toJSON(e){const t={};return void 0!==e.id&&(t.id=e.id),void 0!==e.messageVersion&&(t.messageVersion=e.messageVersion),void 0!==e.senderAddress&&(t.senderAddress=e.senderAddress),void 0!==e.recipientAddress&&(t.recipientAddress=e.recipientAddress),void 0!==e.sentNs&&(t.sentNs=(e.sentNs||re.UZERO).toString()),void 0!==e.contentTopic&&(t.contentTopic=e.contentTopic),void 0!==e.conversation&&(t.conversation=e.conversation?yt.toJSON(e.conversation):void 0),void 0!==e.contentBytes&&(t.contentBytes=Tt(void 0!==e.contentBytes?e.contentBytes:new Uint8Array)),t},fromPartial(e){var t,r,n,i,o,s;const a=Nt();return a.id=null!==(t=e.id)&&void 0!==t?t:"",a.messageVersion=null!==(r=e.messageVersion)&&void 0!==r?r:"",a.senderAddress=null!==(n=e.senderAddress)&&void 0!==n?n:"",a.recipientAddress=null!==(i=e.recipientAddress)&&void 0!==i?i:void 0,a.sentNs=void 0!==e.sentNs&&null!==e.sentNs?re.fromValue(e.sentNs):re.UZERO,a.contentTopic=null!==(o=e.contentTopic)&&void 0!==o?o:"",a.conversation=void 0!==e.conversation&&null!==e.conversation?yt.fromPartial(e.conversation):void 0,a.contentBytes=null!==(s=e.contentBytes)&&void 0!==s?s:new Uint8Array,a}};var Ot=(()=>{if(void 0!==Ot)return Ot;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw"Unable to locate global object"})();function Mt(e){if(Ot.Buffer)return Uint8Array.from(Ot.Buffer.from(e,"base64"));{const t=Ot.atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;++e)r[e]=t.charCodeAt(e);return r}}function Tt(e){if(Ot.Buffer)return Ot.Buffer.from(e).toString("base64");{const t=[];return e.forEach((e=>{t.push(String.fromCharCode(e))})),Ot.btoa(t.join(""))}}function It(e){return null!=e}ie().util.Long!==re&&(ie().util.Long=re,ie().configure());const Rt="xmtp.message_contents";var Bt;function Ct(e){switch(e){case 0:case"COMPRESSION_DEFLATE":return Bt.COMPRESSION_DEFLATE;case 1:case"COMPRESSION_GZIP":return Bt.COMPRESSION_GZIP;default:return Bt.UNRECOGNIZED}}function Kt(e){switch(e){case Bt.COMPRESSION_DEFLATE:return"COMPRESSION_DEFLATE";case Bt.COMPRESSION_GZIP:return"COMPRESSION_GZIP";case Bt.UNRECOGNIZED:default:return"UNRECOGNIZED"}}!function(e){e[e.COMPRESSION_DEFLATE=0]="COMPRESSION_DEFLATE",e[e.COMPRESSION_GZIP=1]="COMPRESSION_GZIP",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(Bt||(Bt={}));const Ut={encode:(e,t=ie().Writer.create())=>(""!==e.authorityId&&t.uint32(10).string(e.authorityId),""!==e.typeId&&t.uint32(18).string(e.typeId),0!==e.versionMajor&&t.uint32(24).uint32(e.versionMajor),0!==e.versionMinor&&t.uint32(32).uint32(e.versionMinor),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i={authorityId:"",typeId:"",versionMajor:0,versionMinor:0};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.authorityId=r.string();break;case 2:i.typeId=r.string();break;case 3:i.versionMajor=r.uint32();break;case 4:i.versionMinor=r.uint32();break;default:r.skipType(7&e)}}return i},fromJSON:e=>({authorityId:Gt(e.authorityId)?String(e.authorityId):"",typeId:Gt(e.typeId)?String(e.typeId):"",versionMajor:Gt(e.versionMajor)?Number(e.versionMajor):0,versionMinor:Gt(e.versionMinor)?Number(e.versionMinor):0}),toJSON(e){const t={};return void 0!==e.authorityId&&(t.authorityId=e.authorityId),void 0!==e.typeId&&(t.typeId=e.typeId),void 0!==e.versionMajor&&(t.versionMajor=Math.round(e.versionMajor)),void 0!==e.versionMinor&&(t.versionMinor=Math.round(e.versionMinor)),t},fromPartial(e){var t,r,n,i;const o={authorityId:"",typeId:"",versionMajor:0,versionMinor:0};return o.authorityId=null!==(t=e.authorityId)&&void 0!==t?t:"",o.typeId=null!==(r=e.typeId)&&void 0!==r?r:"",o.versionMajor=null!==(n=e.versionMajor)&&void 0!==n?n:0,o.versionMinor=null!==(i=e.versionMinor)&&void 0!==i?i:0,o}};function Dt(){return{type:void 0,parameters:{},fallback:void 0,compression:void 0,content:new Uint8Array}}const jt={encode:(e,t=ie().Writer.create())=>(void 0!==e.type&&Ut.encode(e.type,t.uint32(10).fork()).ldelim(),Object.entries(e.parameters).forEach((([e,r])=>{Ft.encode({key:e,value:r},t.uint32(18).fork()).ldelim()})),void 0!==e.fallback&&t.uint32(26).string(e.fallback),void 0!==e.compression&&t.uint32(40).int32(e.compression),0!==e.content.length&&t.uint32(34).bytes(e.content),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i=Dt();for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.type=Ut.decode(r,r.uint32());break;case 2:const t=Ft.decode(r,r.uint32());void 0!==t.value&&(i.parameters[t.key]=t.value);break;case 3:i.fallback=r.string();break;case 5:i.compression=r.int32();break;case 4:i.content=r.bytes();break;default:r.skipType(7&e)}}return i},fromJSON(e){return{type:Gt(e.type)?Ut.fromJSON(e.type):void 0,parameters:(t=e.parameters,"object"==typeof t&&null!==t?Object.entries(e.parameters).reduce(((e,[t,r])=>(e[t]=String(r),e)),{}):{}),fallback:Gt(e.fallback)?String(e.fallback):void 0,compression:Gt(e.compression)?Ct(e.compression):void 0,content:Gt(e.content)?Jt(e.content):new Uint8Array};var t},toJSON(e){const t={};return void 0!==e.type&&(t.type=e.type?Ut.toJSON(e.type):void 0),t.parameters={},e.parameters&&Object.entries(e.parameters).forEach((([e,r])=>{t.parameters[e]=r})),void 0!==e.fallback&&(t.fallback=e.fallback),void 0!==e.compression&&(t.compression=void 0!==e.compression?Kt(e.compression):void 0),void 0!==e.content&&(t.content=zt(void 0!==e.content?e.content:new Uint8Array)),t},fromPartial(e){var t,r,n,i;const o=Dt();return o.type=void 0!==e.type&&null!==e.type?Ut.fromPartial(e.type):void 0,o.parameters=Object.entries(null!==(t=e.parameters)&&void 0!==t?t:{}).reduce(((e,[t,r])=>(void 0!==r&&(e[t]=String(r)),e)),{}),o.fallback=null!==(r=e.fallback)&&void 0!==r?r:void 0,o.compression=null!==(n=e.compression)&&void 0!==n?n:void 0,o.content=null!==(i=e.content)&&void 0!==i?i:new Uint8Array,o}},Ft={encode:(e,t=ie().Writer.create())=>(""!==e.key&&t.uint32(10).string(e.key),""!==e.value&&t.uint32(18).string(e.value),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i={key:"",value:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.key=r.string();break;case 2:i.value=r.string();break;default:r.skipType(7&e)}}return i},fromJSON:e=>({key:Gt(e.key)?String(e.key):"",value:Gt(e.value)?String(e.value):""}),toJSON(e){const t={};return void 0!==e.key&&(t.key=e.key),void 0!==e.value&&(t.value=e.value),t},fromPartial(e){var t,r;const n={key:"",value:""};return n.key=null!==(t=e.key)&&void 0!==t?t:"",n.value=null!==(r=e.value)&&void 0!==r?r:"",n}};function Lt(){return{payload:new Uint8Array,sender:void 0,signature:void 0}}const qt={encode:(e,t=ie().Writer.create())=>(0!==e.payload.length&&t.uint32(10).bytes(e.payload),void 0!==e.sender&&Se.encode(e.sender,t.uint32(18).fork()).ldelim(),void 0!==e.signature&&se.encode(e.signature,t.uint32(26).fork()).ldelim(),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i=Lt();for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.payload=r.bytes();break;case 2:i.sender=Se.decode(r,r.uint32());break;case 3:i.signature=se.decode(r,r.uint32());break;default:r.skipType(7&e)}}return i},fromJSON:e=>({payload:Gt(e.payload)?Jt(e.payload):new Uint8Array,sender:Gt(e.sender)?Se.fromJSON(e.sender):void 0,signature:Gt(e.signature)?se.fromJSON(e.signature):void 0}),toJSON(e){const t={};return void 0!==e.payload&&(t.payload=zt(void 0!==e.payload?e.payload:new Uint8Array)),void 0!==e.sender&&(t.sender=e.sender?Se.toJSON(e.sender):void 0),void 0!==e.signature&&(t.signature=e.signature?se.toJSON(e.signature):void 0),t},fromPartial(e){var t;const r=Lt();return r.payload=null!==(t=e.payload)&&void 0!==t?t:new Uint8Array,r.sender=void 0!==e.sender&&null!==e.sender?Se.fromPartial(e.sender):void 0,r.signature=void 0!==e.signature&&null!==e.signature?se.fromPartial(e.signature):void 0,r}};var Vt=(()=>{if(void 0!==Vt)return Vt;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw"Unable to locate global object"})();function Jt(e){if(Vt.Buffer)return Uint8Array.from(Vt.Buffer.from(e,"base64"));{const t=Vt.atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;++e)r[e]=t.charCodeAt(e);return r}}function zt(e){if(Vt.Buffer)return Vt.Buffer.from(e).toString("base64");{const t=[];return e.forEach((e=>{t.push(String.fromCharCode(e))})),Vt.btoa(t.join(""))}}function Gt(e){return null!=e}ie().util.Long!==re&&(ie().util.Long=re,ie().configure());const Ht="xmtp.message_contents",Wt={encode(e,t=ie().Writer.create()){for(const r of e.parts)$t.encode(r,t.uint32(10).fork()).ldelim();return t},decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i={parts:[]};for(;r.pos<n;){const e=r.uint32();e>>>3==1?i.parts.push($t.decode(r,r.uint32())):r.skipType(7&e)}return i},fromJSON:e=>({parts:Array.isArray(null==e?void 0:e.parts)?e.parts.map((e=>$t.fromJSON(e))):[]}),toJSON(e){const t={};return e.parts?t.parts=e.parts.map((e=>e?$t.toJSON(e):void 0)):t.parts=[],t},fromPartial(e){var t;const r={parts:[]};return r.parts=(null===(t=e.parts)||void 0===t?void 0:t.map((e=>$t.fromPartial(e))))||[],r}},$t={encode:(e,t=ie().Writer.create())=>(void 0!==e.part&&jt.encode(e.part,t.uint32(10).fork()).ldelim(),void 0!==e.composite&&Wt.encode(e.composite,t.uint32(18).fork()).ldelim(),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i={part:void 0,composite:void 0};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.part=jt.decode(r,r.uint32());break;case 2:i.composite=Wt.decode(r,r.uint32());break;default:r.skipType(7&e)}}return i},fromJSON:e=>({part:Zt(e.part)?jt.fromJSON(e.part):void 0,composite:Zt(e.composite)?Wt.fromJSON(e.composite):void 0}),toJSON(e){const t={};return void 0!==e.part&&(t.part=e.part?jt.toJSON(e.part):void 0),void 0!==e.composite&&(t.composite=e.composite?Wt.toJSON(e.composite):void 0),t},fromPartial(e){const t={part:void 0,composite:void 0};return t.part=void 0!==e.part&&null!==e.part?jt.fromPartial(e.part):void 0,t.composite=void 0!==e.composite&&null!==e.composite?Wt.fromPartial(e.composite):void 0,t}};function Zt(e){return null!=e}ie().util.Long!==re&&(ie().util.Long=re,ie().configure());const Xt="xmtp.message_contents";function Yt(){return{createdNs:re.UZERO,secp256k1:void 0,publicKey:void 0}}const Qt={encode:(e,t=ie().Writer.create())=>(e.createdNs.isZero()||t.uint32(8).uint64(e.createdNs),void 0!==e.secp256k1&&tr.encode(e.secp256k1,t.uint32(18).fork()).ldelim(),void 0!==e.publicKey&&Ee.encode(e.publicKey,t.uint32(26).fork()).ldelim(),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i=Yt();for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.createdNs=r.uint64();break;case 2:i.secp256k1=tr.decode(r,r.uint32());break;case 3:i.publicKey=Ee.decode(r,r.uint32());break;default:r.skipType(7&e)}}return i},fromJSON:e=>({createdNs:yr(e.createdNs)?re.fromValue(e.createdNs):re.UZERO,secp256k1:yr(e.secp256k1)?tr.fromJSON(e.secp256k1):void 0,publicKey:yr(e.publicKey)?Ee.fromJSON(e.publicKey):void 0}),toJSON(e){const t={};return void 0!==e.createdNs&&(t.createdNs=(e.createdNs||re.UZERO).toString()),void 0!==e.secp256k1&&(t.secp256k1=e.secp256k1?tr.toJSON(e.secp256k1):void 0),void 0!==e.publicKey&&(t.publicKey=e.publicKey?Ee.toJSON(e.publicKey):void 0),t},fromPartial(e){const t=Yt();return t.createdNs=void 0!==e.createdNs&&null!==e.createdNs?re.fromValue(e.createdNs):re.UZERO,t.secp256k1=void 0!==e.secp256k1&&null!==e.secp256k1?tr.fromPartial(e.secp256k1):void 0,t.publicKey=void 0!==e.publicKey&&null!==e.publicKey?Ee.fromPartial(e.publicKey):void 0,t}};function er(){return{bytes:new Uint8Array}}const tr={encode:(e,t=ie().Writer.create())=>(0!==e.bytes.length&&t.uint32(10).bytes(e.bytes),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i=er();for(;r.pos<n;){const e=r.uint32();e>>>3==1?i.bytes=r.bytes():r.skipType(7&e)}return i},fromJSON:e=>({bytes:yr(e.bytes)?hr(e.bytes):new Uint8Array}),toJSON(e){const t={};return void 0!==e.bytes&&(t.bytes=pr(void 0!==e.bytes?e.bytes:new Uint8Array)),t},fromPartial(e){var t;const r=er();return r.bytes=null!==(t=e.bytes)&&void 0!==t?t:new Uint8Array,r}},rr={encode(e,t=ie().Writer.create()){void 0!==e.identityKey&&Qt.encode(e.identityKey,t.uint32(10).fork()).ldelim();for(const r of e.preKeys)Qt.encode(r,t.uint32(18).fork()).ldelim();return t},decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i={identityKey:void 0,preKeys:[]};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.identityKey=Qt.decode(r,r.uint32());break;case 2:i.preKeys.push(Qt.decode(r,r.uint32()));break;default:r.skipType(7&e)}}return i},fromJSON:e=>({identityKey:yr(e.identityKey)?Qt.fromJSON(e.identityKey):void 0,preKeys:Array.isArray(null==e?void 0:e.preKeys)?e.preKeys.map((e=>Qt.fromJSON(e))):[]}),toJSON(e){const t={};return void 0!==e.identityKey&&(t.identityKey=e.identityKey?Qt.toJSON(e.identityKey):void 0),e.preKeys?t.preKeys=e.preKeys.map((e=>e?Qt.toJSON(e):void 0)):t.preKeys=[],t},fromPartial(e){var t;const r={identityKey:void 0,preKeys:[]};return r.identityKey=void 0!==e.identityKey&&null!==e.identityKey?Qt.fromPartial(e.identityKey):void 0,r.preKeys=(null===(t=e.preKeys)||void 0===t?void 0:t.map((e=>Qt.fromPartial(e))))||[],r}};function nr(){return{timestamp:re.UZERO,secp256k1:void 0,publicKey:void 0}}const ir={encode:(e,t=ie().Writer.create())=>(e.timestamp.isZero()||t.uint32(8).uint64(e.timestamp),void 0!==e.secp256k1&&sr.encode(e.secp256k1,t.uint32(18).fork()).ldelim(),void 0!==e.publicKey&&ke.encode(e.publicKey,t.uint32(26).fork()).ldelim(),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i=nr();for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.timestamp=r.uint64();break;case 2:i.secp256k1=sr.decode(r,r.uint32());break;case 3:i.publicKey=ke.decode(r,r.uint32());break;default:r.skipType(7&e)}}return i},fromJSON:e=>({timestamp:yr(e.timestamp)?re.fromValue(e.timestamp):re.UZERO,secp256k1:yr(e.secp256k1)?sr.fromJSON(e.secp256k1):void 0,publicKey:yr(e.publicKey)?ke.fromJSON(e.publicKey):void 0}),toJSON(e){const t={};return void 0!==e.timestamp&&(t.timestamp=(e.timestamp||re.UZERO).toString()),void 0!==e.secp256k1&&(t.secp256k1=e.secp256k1?sr.toJSON(e.secp256k1):void 0),void 0!==e.publicKey&&(t.publicKey=e.publicKey?ke.toJSON(e.publicKey):void 0),t},fromPartial(e){const t=nr();return t.timestamp=void 0!==e.timestamp&&null!==e.timestamp?re.fromValue(e.timestamp):re.UZERO,t.secp256k1=void 0!==e.secp256k1&&null!==e.secp256k1?sr.fromPartial(e.secp256k1):void 0,t.publicKey=void 0!==e.publicKey&&null!==e.publicKey?ke.fromPartial(e.publicKey):void 0,t}};function or(){return{bytes:new Uint8Array}}const sr={encode:(e,t=ie().Writer.create())=>(0!==e.bytes.length&&t.uint32(10).bytes(e.bytes),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i=or();for(;r.pos<n;){const e=r.uint32();e>>>3==1?i.bytes=r.bytes():r.skipType(7&e)}return i},fromJSON:e=>({bytes:yr(e.bytes)?hr(e.bytes):new Uint8Array}),toJSON(e){const t={};return void 0!==e.bytes&&(t.bytes=pr(void 0!==e.bytes?e.bytes:new Uint8Array)),t},fromPartial(e){var t;const r=or();return r.bytes=null!==(t=e.bytes)&&void 0!==t?t:new Uint8Array,r}},ar={encode(e,t=ie().Writer.create()){void 0!==e.identityKey&&ir.encode(e.identityKey,t.uint32(10).fork()).ldelim();for(const r of e.preKeys)ir.encode(r,t.uint32(18).fork()).ldelim();return t},decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i={identityKey:void 0,preKeys:[]};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.identityKey=ir.decode(r,r.uint32());break;case 2:i.preKeys.push(ir.decode(r,r.uint32()));break;default:r.skipType(7&e)}}return i},fromJSON:e=>({identityKey:yr(e.identityKey)?ir.fromJSON(e.identityKey):void 0,preKeys:Array.isArray(null==e?void 0:e.preKeys)?e.preKeys.map((e=>ir.fromJSON(e))):[]}),toJSON(e){const t={};return void 0!==e.identityKey&&(t.identityKey=e.identityKey?ir.toJSON(e.identityKey):void 0),e.preKeys?t.preKeys=e.preKeys.map((e=>e?ir.toJSON(e):void 0)):t.preKeys=[],t},fromPartial(e){var t;const r={identityKey:void 0,preKeys:[]};return r.identityKey=void 0!==e.identityKey&&null!==e.identityKey?ir.fromPartial(e.identityKey):void 0,r.preKeys=(null===(t=e.preKeys)||void 0===t?void 0:t.map((e=>ir.fromPartial(e))))||[],r}},cr={encode:(e,t=ie().Writer.create())=>(void 0!==e.v1&&ar.encode(e.v1,t.uint32(10).fork()).ldelim(),void 0!==e.v2&&rr.encode(e.v2,t.uint32(18).fork()).ldelim(),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i={v1:void 0,v2:void 0};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.v1=ar.decode(r,r.uint32());break;case 2:i.v2=rr.decode(r,r.uint32());break;default:r.skipType(7&e)}}return i},fromJSON:e=>({v1:yr(e.v1)?ar.fromJSON(e.v1):void 0,v2:yr(e.v2)?rr.fromJSON(e.v2):void 0}),toJSON(e){const t={};return void 0!==e.v1&&(t.v1=e.v1?ar.toJSON(e.v1):void 0),void 0!==e.v2&&(t.v2=e.v2?rr.toJSON(e.v2):void 0),t},fromPartial(e){const t={v1:void 0,v2:void 0};return t.v1=void 0!==e.v1&&null!==e.v1?ar.fromPartial(e.v1):void 0,t.v2=void 0!==e.v2&&null!==e.v2?rr.fromPartial(e.v2):void 0,t}};function ur(){return{walletPreKey:new Uint8Array,ciphertext:void 0}}const dr={encode:(e,t=ie().Writer.create())=>(0!==e.walletPreKey.length&&t.uint32(10).bytes(e.walletPreKey),void 0!==e.ciphertext&&Le.encode(e.ciphertext,t.uint32(18).fork()).ldelim(),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i=ur();for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.walletPreKey=r.bytes();break;case 2:i.ciphertext=Le.decode(r,r.uint32());break;default:r.skipType(7&e)}}return i},fromJSON:e=>({walletPreKey:yr(e.walletPreKey)?hr(e.walletPreKey):new Uint8Array,ciphertext:yr(e.ciphertext)?Le.fromJSON(e.ciphertext):void 0}),toJSON(e){const t={};return void 0!==e.walletPreKey&&(t.walletPreKey=pr(void 0!==e.walletPreKey?e.walletPreKey:new Uint8Array)),void 0!==e.ciphertext&&(t.ciphertext=e.ciphertext?Le.toJSON(e.ciphertext):void 0),t},fromPartial(e){var t;const r=ur();return r.walletPreKey=null!==(t=e.walletPreKey)&&void 0!==t?t:new Uint8Array,r.ciphertext=void 0!==e.ciphertext&&null!==e.ciphertext?Le.fromPartial(e.ciphertext):void 0,r}},lr={encode:(e,t=ie().Writer.create())=>(void 0!==e.v1&&dr.encode(e.v1,t.uint32(10).fork()).ldelim(),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i={v1:void 0};for(;r.pos<n;){const e=r.uint32();e>>>3==1?i.v1=dr.decode(r,r.uint32()):r.skipType(7&e)}return i},fromJSON:e=>({v1:yr(e.v1)?dr.fromJSON(e.v1):void 0}),toJSON(e){const t={};return void 0!==e.v1&&(t.v1=e.v1?dr.toJSON(e.v1):void 0),t},fromPartial(e){const t={v1:void 0};return t.v1=void 0!==e.v1&&null!==e.v1?dr.fromPartial(e.v1):void 0,t}};var fr=(()=>{if(void 0!==fr)return fr;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw"Unable to locate global object"})();function hr(e){if(fr.Buffer)return Uint8Array.from(fr.Buffer.from(e,"base64"));{const t=fr.atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;++e)r[e]=t.charCodeAt(e);return r}}function pr(e){if(fr.Buffer)return fr.Buffer.from(e).toString("base64");{const t=[];return e.forEach((e=>{t.push(String.fromCharCode(e))})),fr.btoa(t.join(""))}}function yr(e){return null!=e}ie().util.Long!==re&&(ie().util.Long=re,ie().configure());const mr="xmtp.message_contents",gr={encode:(e,t=ie().Writer.create())=>(void 0!==e.keyBundle&&Ne.encode(e.keyBundle,t.uint32(10).fork()).ldelim(),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i={keyBundle:void 0};for(;r.pos<n;){const e=r.uint32();e>>>3==1?i.keyBundle=Ne.decode(r,r.uint32()):r.skipType(7&e)}return i},fromJSON:e=>({keyBundle:wr(e.keyBundle)?Ne.fromJSON(e.keyBundle):void 0}),toJSON(e){const t={};return void 0!==e.keyBundle&&(t.keyBundle=e.keyBundle?Ne.toJSON(e.keyBundle):void 0),t},fromPartial(e){const t={keyBundle:void 0};return t.keyBundle=void 0!==e.keyBundle&&null!==e.keyBundle?Ne.fromPartial(e.keyBundle):void 0,t}},br={encode:(e,t=ie().Writer.create())=>(void 0!==e.keyBundle&&Se.encode(e.keyBundle,t.uint32(10).fork()).ldelim(),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i={keyBundle:void 0};for(;r.pos<n;){const e=r.uint32();e>>>3==1?i.keyBundle=Se.decode(r,r.uint32()):r.skipType(7&e)}return i},fromJSON:e=>({keyBundle:wr(e.keyBundle)?Se.fromJSON(e.keyBundle):void 0}),toJSON(e){const t={};return void 0!==e.keyBundle&&(t.keyBundle=e.keyBundle?Se.toJSON(e.keyBundle):void 0),t},fromPartial(e){const t={keyBundle:void 0};return t.keyBundle=void 0!==e.keyBundle&&null!==e.keyBundle?Se.fromPartial(e.keyBundle):void 0,t}},vr={encode:(e,t=ie().Writer.create())=>(void 0!==e.v1&&gr.encode(e.v1,t.uint32(10).fork()).ldelim(),void 0!==e.v2&&br.encode(e.v2,t.uint32(18).fork()).ldelim(),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i={v1:void 0,v2:void 0};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.v1=gr.decode(r,r.uint32());break;case 2:i.v2=br.decode(r,r.uint32());break;default:r.skipType(7&e)}}return i},fromJSON:e=>({v1:wr(e.v1)?gr.fromJSON(e.v1):void 0,v2:wr(e.v2)?br.fromJSON(e.v2):void 0}),toJSON(e){const t={};return void 0!==e.v1&&(t.v1=e.v1?gr.toJSON(e.v1):void 0),void 0!==e.v2&&(t.v2=e.v2?br.toJSON(e.v2):void 0),t},fromPartial(e){const t={v1:void 0,v2:void 0};return t.v1=void 0!==e.v1&&null!==e.v1?gr.fromPartial(e.v1):void 0,t.v2=void 0!==e.v2&&null!==e.v2?br.fromPartial(e.v2):void 0,t}};function wr(e){return null!=e}ie().util.Long!==re&&(ie().util.Long=re,ie().configure());const Er="xmtp.keystore_api.v1";var Sr;function _r(e){switch(e){case 0:case"ERROR_CODE_UNSPECIFIED":return Sr.ERROR_CODE_UNSPECIFIED;case 1:case"ERROR_CODE_INVALID_INPUT":return Sr.ERROR_CODE_INVALID_INPUT;case 2:case"ERROR_CODE_NO_MATCHING_PREKEY":return Sr.ERROR_CODE_NO_MATCHING_PREKEY;default:return Sr.UNRECOGNIZED}}function kr(e){switch(e){case Sr.ERROR_CODE_UNSPECIFIED:return"ERROR_CODE_UNSPECIFIED";case Sr.ERROR_CODE_INVALID_INPUT:return"ERROR_CODE_INVALID_INPUT";case Sr.ERROR_CODE_NO_MATCHING_PREKEY:return"ERROR_CODE_NO_MATCHING_PREKEY";case Sr.UNRECOGNIZED:default:return"UNRECOGNIZED"}}!function(e){e[e.ERROR_CODE_UNSPECIFIED=0]="ERROR_CODE_UNSPECIFIED",e[e.ERROR_CODE_INVALID_INPUT=1]="ERROR_CODE_INVALID_INPUT",e[e.ERROR_CODE_NO_MATCHING_PREKEY=2]="ERROR_CODE_NO_MATCHING_PREKEY",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(Sr||(Sr={}));const Ar={encode:(e,t=ie().Writer.create())=>(""!==e.message&&t.uint32(10).string(e.message),0!==e.code&&t.uint32(16).int32(e.code),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i={message:"",code:0};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.message=r.string();break;case 2:i.code=r.int32();break;default:r.skipType(7&e)}}return i},fromJSON:e=>({message:fn(e.message)?String(e.message):"",code:fn(e.code)?_r(e.code):0}),toJSON(e){const t={};return void 0!==e.message&&(t.message=e.message),void 0!==e.code&&(t.code=kr(e.code)),t},fromPartial(e){var t,r;const n={message:"",code:0};return n.message=null!==(t=e.message)&&void 0!==t?t:"",n.code=null!==(r=e.code)&&void 0!==r?r:0,n}},Pr={encode(e,t=ie().Writer.create()){for(const r of e.requests)xr.encode(r,t.uint32(10).fork()).ldelim();return t},decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i={requests:[]};for(;r.pos<n;){const e=r.uint32();e>>>3==1?i.requests.push(xr.decode(r,r.uint32())):r.skipType(7&e)}return i},fromJSON:e=>({requests:Array.isArray(null==e?void 0:e.requests)?e.requests.map((e=>xr.fromJSON(e))):[]}),toJSON(e){const t={};return e.requests?t.requests=e.requests.map((e=>e?xr.toJSON(e):void 0)):t.requests=[],t},fromPartial(e){var t;const r={requests:[]};return r.requests=(null===(t=e.requests)||void 0===t?void 0:t.map((e=>xr.fromPartial(e))))||[],r}};function Nr(){return{payload:void 0,peerKeys:void 0,headerBytes:new Uint8Array,isSender:!1}}const xr={encode:(e,t=ie().Writer.create())=>(void 0!==e.payload&&Le.encode(e.payload,t.uint32(10).fork()).ldelim(),void 0!==e.peerKeys&&Ne.encode(e.peerKeys,t.uint32(18).fork()).ldelim(),0!==e.headerBytes.length&&t.uint32(26).bytes(e.headerBytes),!0===e.isSender&&t.uint32(32).bool(e.isSender),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i=Nr();for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.payload=Le.decode(r,r.uint32());break;case 2:i.peerKeys=Ne.decode(r,r.uint32());break;case 3:i.headerBytes=r.bytes();break;case 4:i.isSender=r.bool();break;default:r.skipType(7&e)}}return i},fromJSON:e=>({payload:fn(e.payload)?Le.fromJSON(e.payload):void 0,peerKeys:fn(e.peerKeys)?Ne.fromJSON(e.peerKeys):void 0,headerBytes:fn(e.headerBytes)?dn(e.headerBytes):new Uint8Array,isSender:!!fn(e.isSender)&&Boolean(e.isSender)}),toJSON(e){const t={};return void 0!==e.payload&&(t.payload=e.payload?Le.toJSON(e.payload):void 0),void 0!==e.peerKeys&&(t.peerKeys=e.peerKeys?Ne.toJSON(e.peerKeys):void 0),void 0!==e.headerBytes&&(t.headerBytes=ln(void 0!==e.headerBytes?e.headerBytes:new Uint8Array)),void 0!==e.isSender&&(t.isSender=e.isSender),t},fromPartial(e){var t,r;const n=Nr();return n.payload=void 0!==e.payload&&null!==e.payload?Le.fromPartial(e.payload):void 0,n.peerKeys=void 0!==e.peerKeys&&null!==e.peerKeys?Ne.fromPartial(e.peerKeys):void 0,n.headerBytes=null!==(t=e.headerBytes)&&void 0!==t?t:new Uint8Array,n.isSender=null!==(r=e.isSender)&&void 0!==r&&r,n}},Or={encode(e,t=ie().Writer.create()){for(const r of e.responses)Mr.encode(r,t.uint32(10).fork()).ldelim();return t},decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i={responses:[]};for(;r.pos<n;){const e=r.uint32();e>>>3==1?i.responses.push(Mr.decode(r,r.uint32())):r.skipType(7&e)}return i},fromJSON:e=>({responses:Array.isArray(null==e?void 0:e.responses)?e.responses.map((e=>Mr.fromJSON(e))):[]}),toJSON(e){const t={};return e.responses?t.responses=e.responses.map((e=>e?Mr.toJSON(e):void 0)):t.responses=[],t},fromPartial(e){var t;const r={responses:[]};return r.responses=(null===(t=e.responses)||void 0===t?void 0:t.map((e=>Mr.fromPartial(e))))||[],r}},Mr={encode:(e,t=ie().Writer.create())=>(void 0!==e.result&&Ir.encode(e.result,t.uint32(10).fork()).ldelim(),void 0!==e.error&&Ar.encode(e.error,t.uint32(18).fork()).ldelim(),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i={result:void 0,error:void 0};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.result=Ir.decode(r,r.uint32());break;case 2:i.error=Ar.decode(r,r.uint32());break;default:r.skipType(7&e)}}return i},fromJSON:e=>({result:fn(e.result)?Ir.fromJSON(e.result):void 0,error:fn(e.error)?Ar.fromJSON(e.error):void 0}),toJSON(e){const t={};return void 0!==e.result&&(t.result=e.result?Ir.toJSON(e.result):void 0),void 0!==e.error&&(t.error=e.error?Ar.toJSON(e.error):void 0),t},fromPartial(e){const t={result:void 0,error:void 0};return t.result=void 0!==e.result&&null!==e.result?Ir.fromPartial(e.result):void 0,t.error=void 0!==e.error&&null!==e.error?Ar.fromPartial(e.error):void 0,t}};function Tr(){return{decrypted:new Uint8Array}}const Ir={encode:(e,t=ie().Writer.create())=>(0!==e.decrypted.length&&t.uint32(10).bytes(e.decrypted),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i=Tr();for(;r.pos<n;){const e=r.uint32();e>>>3==1?i.decrypted=r.bytes():r.skipType(7&e)}return i},fromJSON:e=>({decrypted:fn(e.decrypted)?dn(e.decrypted):new Uint8Array}),toJSON(e){const t={};return void 0!==e.decrypted&&(t.decrypted=ln(void 0!==e.decrypted?e.decrypted:new Uint8Array)),t},fromPartial(e){var t;const r=Tr();return r.decrypted=null!==(t=e.decrypted)&&void 0!==t?t:new Uint8Array,r}},Rr={encode(e,t=ie().Writer.create()){for(const r of e.requests)Cr.encode(r,t.uint32(10).fork()).ldelim();return t},decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i={requests:[]};for(;r.pos<n;){const e=r.uint32();e>>>3==1?i.requests.push(Cr.decode(r,r.uint32())):r.skipType(7&e)}return i},fromJSON:e=>({requests:Array.isArray(null==e?void 0:e.requests)?e.requests.map((e=>Cr.fromJSON(e))):[]}),toJSON(e){const t={};return e.requests?t.requests=e.requests.map((e=>e?Cr.toJSON(e):void 0)):t.requests=[],t},fromPartial(e){var t;const r={requests:[]};return r.requests=(null===(t=e.requests)||void 0===t?void 0:t.map((e=>Cr.fromPartial(e))))||[],r}};function Br(){return{payload:void 0,headerBytes:new Uint8Array,contentTopic:""}}const Cr={encode:(e,t=ie().Writer.create())=>(void 0!==e.payload&&Le.encode(e.payload,t.uint32(10).fork()).ldelim(),0!==e.headerBytes.length&&t.uint32(18).bytes(e.headerBytes),""!==e.contentTopic&&t.uint32(26).string(e.contentTopic),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i=Br();for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.payload=Le.decode(r,r.uint32());break;case 2:i.headerBytes=r.bytes();break;case 3:i.contentTopic=r.string();break;default:r.skipType(7&e)}}return i},fromJSON:e=>({payload:fn(e.payload)?Le.fromJSON(e.payload):void 0,headerBytes:fn(e.headerBytes)?dn(e.headerBytes):new Uint8Array,contentTopic:fn(e.contentTopic)?String(e.contentTopic):""}),toJSON(e){const t={};return void 0!==e.payload&&(t.payload=e.payload?Le.toJSON(e.payload):void 0),void 0!==e.headerBytes&&(t.headerBytes=ln(void 0!==e.headerBytes?e.headerBytes:new Uint8Array)),void 0!==e.contentTopic&&(t.contentTopic=e.contentTopic),t},fromPartial(e){var t,r;const n=Br();return n.payload=void 0!==e.payload&&null!==e.payload?Le.fromPartial(e.payload):void 0,n.headerBytes=null!==(t=e.headerBytes)&&void 0!==t?t:new Uint8Array,n.contentTopic=null!==(r=e.contentTopic)&&void 0!==r?r:"",n}},Kr={encode(e,t=ie().Writer.create()){for(const r of e.requests)Dr.encode(r,t.uint32(10).fork()).ldelim();return t},decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i={requests:[]};for(;r.pos<n;){const e=r.uint32();e>>>3==1?i.requests.push(Dr.decode(r,r.uint32())):r.skipType(7&e)}return i},fromJSON:e=>({requests:Array.isArray(null==e?void 0:e.requests)?e.requests.map((e=>Dr.fromJSON(e))):[]}),toJSON(e){const t={};return e.requests?t.requests=e.requests.map((e=>e?Dr.toJSON(e):void 0)):t.requests=[],t},fromPartial(e){var t;const r={requests:[]};return r.requests=(null===(t=e.requests)||void 0===t?void 0:t.map((e=>Dr.fromPartial(e))))||[],r}};function Ur(){return{recipient:void 0,payload:new Uint8Array,headerBytes:new Uint8Array}}const Dr={encode:(e,t=ie().Writer.create())=>(void 0!==e.recipient&&Ne.encode(e.recipient,t.uint32(10).fork()).ldelim(),0!==e.payload.length&&t.uint32(18).bytes(e.payload),0!==e.headerBytes.length&&t.uint32(26).bytes(e.headerBytes),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i=Ur();for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.recipient=Ne.decode(r,r.uint32());break;case 2:i.payload=r.bytes();break;case 3:i.headerBytes=r.bytes();break;default:r.skipType(7&e)}}return i},fromJSON:e=>({recipient:fn(e.recipient)?Ne.fromJSON(e.recipient):void 0,payload:fn(e.payload)?dn(e.payload):new Uint8Array,headerBytes:fn(e.headerBytes)?dn(e.headerBytes):new Uint8Array}),toJSON(e){const t={};return void 0!==e.recipient&&(t.recipient=e.recipient?Ne.toJSON(e.recipient):void 0),void 0!==e.payload&&(t.payload=ln(void 0!==e.payload?e.payload:new Uint8Array)),void 0!==e.headerBytes&&(t.headerBytes=ln(void 0!==e.headerBytes?e.headerBytes:new Uint8Array)),t},fromPartial(e){var t,r;const n=Ur();return n.recipient=void 0!==e.recipient&&null!==e.recipient?Ne.fromPartial(e.recipient):void 0,n.payload=null!==(t=e.payload)&&void 0!==t?t:new Uint8Array,n.headerBytes=null!==(r=e.headerBytes)&&void 0!==r?r:new Uint8Array,n}},jr={encode(e,t=ie().Writer.create()){for(const r of e.responses)Fr.encode(r,t.uint32(10).fork()).ldelim();return t},decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i={responses:[]};for(;r.pos<n;){const e=r.uint32();e>>>3==1?i.responses.push(Fr.decode(r,r.uint32())):r.skipType(7&e)}return i},fromJSON:e=>({responses:Array.isArray(null==e?void 0:e.responses)?e.responses.map((e=>Fr.fromJSON(e))):[]}),toJSON(e){const t={};return e.responses?t.responses=e.responses.map((e=>e?Fr.toJSON(e):void 0)):t.responses=[],t},fromPartial(e){var t;const r={responses:[]};return r.responses=(null===(t=e.responses)||void 0===t?void 0:t.map((e=>Fr.fromPartial(e))))||[],r}},Fr={encode:(e,t=ie().Writer.create())=>(void 0!==e.result&&Lr.encode(e.result,t.uint32(10).fork()).ldelim(),void 0!==e.error&&Ar.encode(e.error,t.uint32(18).fork()).ldelim(),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i={result:void 0,error:void 0};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.result=Lr.decode(r,r.uint32());break;case 2:i.error=Ar.decode(r,r.uint32());break;default:r.skipType(7&e)}}return i},fromJSON:e=>({result:fn(e.result)?Lr.fromJSON(e.result):void 0,error:fn(e.error)?Ar.fromJSON(e.error):void 0}),toJSON(e){const t={};return void 0!==e.result&&(t.result=e.result?Lr.toJSON(e.result):void 0),void 0!==e.error&&(t.error=e.error?Ar.toJSON(e.error):void 0),t},fromPartial(e){const t={result:void 0,error:void 0};return t.result=void 0!==e.result&&null!==e.result?Lr.fromPartial(e.result):void 0,t.error=void 0!==e.error&&null!==e.error?Ar.fromPartial(e.error):void 0,t}},Lr={encode:(e,t=ie().Writer.create())=>(void 0!==e.encrypted&&Le.encode(e.encrypted,t.uint32(10).fork()).ldelim(),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i={encrypted:void 0};for(;r.pos<n;){const e=r.uint32();e>>>3==1?i.encrypted=Le.decode(r,r.uint32()):r.skipType(7&e)}return i},fromJSON:e=>({encrypted:fn(e.encrypted)?Le.fromJSON(e.encrypted):void 0}),toJSON(e){const t={};return void 0!==e.encrypted&&(t.encrypted=e.encrypted?Le.toJSON(e.encrypted):void 0),t},fromPartial(e){const t={encrypted:void 0};return t.encrypted=void 0!==e.encrypted&&null!==e.encrypted?Le.fromPartial(e.encrypted):void 0,t}},qr={encode(e,t=ie().Writer.create()){for(const r of e.requests)Jr.encode(r,t.uint32(10).fork()).ldelim();return t},decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i={requests:[]};for(;r.pos<n;){const e=r.uint32();e>>>3==1?i.requests.push(Jr.decode(r,r.uint32())):r.skipType(7&e)}return i},fromJSON:e=>({requests:Array.isArray(null==e?void 0:e.requests)?e.requests.map((e=>Jr.fromJSON(e))):[]}),toJSON(e){const t={};return e.requests?t.requests=e.requests.map((e=>e?Jr.toJSON(e):void 0)):t.requests=[],t},fromPartial(e){var t;const r={requests:[]};return r.requests=(null===(t=e.requests)||void 0===t?void 0:t.map((e=>Jr.fromPartial(e))))||[],r}};function Vr(){return{payload:new Uint8Array,headerBytes:new Uint8Array,contentTopic:""}}const Jr={encode:(e,t=ie().Writer.create())=>(0!==e.payload.length&&t.uint32(10).bytes(e.payload),0!==e.headerBytes.length&&t.uint32(18).bytes(e.headerBytes),""!==e.contentTopic&&t.uint32(26).string(e.contentTopic),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i=Vr();for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.payload=r.bytes();break;case 2:i.headerBytes=r.bytes();break;case 3:i.contentTopic=r.string();break;default:r.skipType(7&e)}}return i},fromJSON:e=>({payload:fn(e.payload)?dn(e.payload):new Uint8Array,headerBytes:fn(e.headerBytes)?dn(e.headerBytes):new Uint8Array,contentTopic:fn(e.contentTopic)?String(e.contentTopic):""}),toJSON(e){const t={};return void 0!==e.payload&&(t.payload=ln(void 0!==e.payload?e.payload:new Uint8Array)),void 0!==e.headerBytes&&(t.headerBytes=ln(void 0!==e.headerBytes?e.headerBytes:new Uint8Array)),void 0!==e.contentTopic&&(t.contentTopic=e.contentTopic),t},fromPartial(e){var t,r,n;const i=Vr();return i.payload=null!==(t=e.payload)&&void 0!==t?t:new Uint8Array,i.headerBytes=null!==(r=e.headerBytes)&&void 0!==r?r:new Uint8Array,i.contentTopic=null!==(n=e.contentTopic)&&void 0!==n?n:"",i}};function zr(){return{context:void 0,recipient:void 0,createdNs:re.UZERO}}const Gr={encode:(e,t=ie().Writer.create())=>(void 0!==e.context&&rt.encode(e.context,t.uint32(10).fork()).ldelim(),void 0!==e.recipient&&Se.encode(e.recipient,t.uint32(18).fork()).ldelim(),e.createdNs.isZero()||t.uint32(24).uint64(e.createdNs),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i=zr();for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.context=rt.decode(r,r.uint32());break;case 2:i.recipient=Se.decode(r,r.uint32());break;case 3:i.createdNs=r.uint64();break;default:r.skipType(7&e)}}return i},fromJSON:e=>({context:fn(e.context)?rt.fromJSON(e.context):void 0,recipient:fn(e.recipient)?Se.fromJSON(e.recipient):void 0,createdNs:fn(e.createdNs)?re.fromValue(e.createdNs):re.UZERO}),toJSON(e){const t={};return void 0!==e.context&&(t.context=e.context?rt.toJSON(e.context):void 0),void 0!==e.recipient&&(t.recipient=e.recipient?Se.toJSON(e.recipient):void 0),void 0!==e.createdNs&&(t.createdNs=(e.createdNs||re.UZERO).toString()),t},fromPartial(e){const t=zr();return t.context=void 0!==e.context&&null!==e.context?rt.fromPartial(e.context):void 0,t.recipient=void 0!==e.recipient&&null!==e.recipient?Se.fromPartial(e.recipient):void 0,t.createdNs=void 0!==e.createdNs&&null!==e.createdNs?re.fromValue(e.createdNs):re.UZERO,t}};function Hr(){return{conversation:void 0,payload:new Uint8Array}}const Wr={encode:(e,t=ie().Writer.create())=>(void 0!==e.conversation&&yt.encode(e.conversation,t.uint32(10).fork()).ldelim(),0!==e.payload.length&&t.uint32(18).bytes(e.payload),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i=Hr();for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.conversation=yt.decode(r,r.uint32());break;case 2:i.payload=r.bytes();break;default:r.skipType(7&e)}}return i},fromJSON:e=>({conversation:fn(e.conversation)?yt.fromJSON(e.conversation):void 0,payload:fn(e.payload)?dn(e.payload):new Uint8Array}),toJSON(e){const t={};return void 0!==e.conversation&&(t.conversation=e.conversation?yt.toJSON(e.conversation):void 0),void 0!==e.payload&&(t.payload=ln(void 0!==e.payload?e.payload:new Uint8Array)),t},fromPartial(e){var t;const r=Hr();return r.conversation=void 0!==e.conversation&&null!==e.conversation?yt.fromPartial(e.conversation):void 0,r.payload=null!==(t=e.payload)&&void 0!==t?t:new Uint8Array,r}},$r={encode(e,t=ie().Writer.create()){for(const r of e.requests)Xr.encode(r,t.uint32(10).fork()).ldelim();return t},decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i={requests:[]};for(;r.pos<n;){const e=r.uint32();e>>>3==1?i.requests.push(Xr.decode(r,r.uint32())):r.skipType(7&e)}return i},fromJSON:e=>({requests:Array.isArray(null==e?void 0:e.requests)?e.requests.map((e=>Xr.fromJSON(e))):[]}),toJSON(e){const t={};return e.requests?t.requests=e.requests.map((e=>e?Xr.toJSON(e):void 0)):t.requests=[],t},fromPartial(e){var t;const r={requests:[]};return r.requests=(null===(t=e.requests)||void 0===t?void 0:t.map((e=>Xr.fromPartial(e))))||[],r}};function Zr(){return{contentTopic:"",timestampNs:re.UZERO,payload:new Uint8Array}}const Xr={encode:(e,t=ie().Writer.create())=>(""!==e.contentTopic&&t.uint32(10).string(e.contentTopic),e.timestampNs.isZero()||t.uint32(16).uint64(e.timestampNs),0!==e.payload.length&&t.uint32(26).bytes(e.payload),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i=Zr();for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.contentTopic=r.string();break;case 2:i.timestampNs=r.uint64();break;case 3:i.payload=r.bytes();break;default:r.skipType(7&e)}}return i},fromJSON:e=>({contentTopic:fn(e.contentTopic)?String(e.contentTopic):"",timestampNs:fn(e.timestampNs)?re.fromValue(e.timestampNs):re.UZERO,payload:fn(e.payload)?dn(e.payload):new Uint8Array}),toJSON(e){const t={};return void 0!==e.contentTopic&&(t.contentTopic=e.contentTopic),void 0!==e.timestampNs&&(t.timestampNs=(e.timestampNs||re.UZERO).toString()),void 0!==e.payload&&(t.payload=ln(void 0!==e.payload?e.payload:new Uint8Array)),t},fromPartial(e){var t,r;const n=Zr();return n.contentTopic=null!==(t=e.contentTopic)&&void 0!==t?t:"",n.timestampNs=void 0!==e.timestampNs&&null!==e.timestampNs?re.fromValue(e.timestampNs):re.UZERO,n.payload=null!==(r=e.payload)&&void 0!==r?r:new Uint8Array,n}},Yr={encode(e,t=ie().Writer.create()){for(const r of e.responses)Qr.encode(r,t.uint32(10).fork()).ldelim();return t},decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i={responses:[]};for(;r.pos<n;){const e=r.uint32();e>>>3==1?i.responses.push(Qr.decode(r,r.uint32())):r.skipType(7&e)}return i},fromJSON:e=>({responses:Array.isArray(null==e?void 0:e.responses)?e.responses.map((e=>Qr.fromJSON(e))):[]}),toJSON(e){const t={};return e.responses?t.responses=e.responses.map((e=>e?Qr.toJSON(e):void 0)):t.responses=[],t},fromPartial(e){var t;const r={responses:[]};return r.responses=(null===(t=e.responses)||void 0===t?void 0:t.map((e=>Qr.fromPartial(e))))||[],r}},Qr={encode:(e,t=ie().Writer.create())=>(void 0!==e.result&&en.encode(e.result,t.uint32(10).fork()).ldelim(),void 0!==e.error&&Ar.encode(e.error,t.uint32(18).fork()).ldelim(),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i={result:void 0,error:void 0};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.result=en.decode(r,r.uint32());break;case 2:i.error=Ar.decode(r,r.uint32());break;default:r.skipType(7&e)}}return i},fromJSON:e=>({result:fn(e.result)?en.fromJSON(e.result):void 0,error:fn(e.error)?Ar.fromJSON(e.error):void 0}),toJSON(e){const t={};return void 0!==e.result&&(t.result=e.result?en.toJSON(e.result):void 0),void 0!==e.error&&(t.error=e.error?Ar.toJSON(e.error):void 0),t},fromPartial(e){const t={result:void 0,error:void 0};return t.result=void 0!==e.result&&null!==e.result?en.fromPartial(e.result):void 0,t.error=void 0!==e.error&&null!==e.error?Ar.fromPartial(e.error):void 0,t}},en={encode:(e,t=ie().Writer.create())=>(void 0!==e.conversation&&yt.encode(e.conversation,t.uint32(10).fork()).ldelim(),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i={conversation:void 0};for(;r.pos<n;){const e=r.uint32();e>>>3==1?i.conversation=yt.decode(r,r.uint32()):r.skipType(7&e)}return i},fromJSON:e=>({conversation:fn(e.conversation)?yt.fromJSON(e.conversation):void 0}),toJSON(e){const t={};return void 0!==e.conversation&&(t.conversation=e.conversation?yt.toJSON(e.conversation):void 0),t},fromPartial(e){const t={conversation:void 0};return t.conversation=void 0!==e.conversation&&null!==e.conversation?yt.fromPartial(e.conversation):void 0,t}},tn={encode:(e,t=ie().Writer.create())=>(void 0!==e.timestampNs&&t.uint32(8).uint64(e.timestampNs),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i={timestampNs:void 0};for(;r.pos<n;){const e=r.uint32();e>>>3==1?i.timestampNs=r.uint64():r.skipType(7&e)}return i},fromJSON:e=>({timestampNs:fn(e.timestampNs)?re.fromValue(e.timestampNs):void 0}),toJSON(e){const t={};return void 0!==e.timestampNs&&(t.timestampNs=(e.timestampNs||void 0).toString()),t},fromPartial(e){const t={timestampNs:void 0};return t.timestampNs=void 0!==e.timestampNs&&null!==e.timestampNs?re.fromValue(e.timestampNs):void 0,t}};function rn(){return{digest:new Uint8Array,identityKey:void 0,prekeyIndex:void 0}}const nn={encode:(e,t=ie().Writer.create())=>(0!==e.digest.length&&t.uint32(10).bytes(e.digest),void 0!==e.identityKey&&t.uint32(16).bool(e.identityKey),void 0!==e.prekeyIndex&&t.uint32(24).uint32(e.prekeyIndex),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i=rn();for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.digest=r.bytes();break;case 2:i.identityKey=r.bool();break;case 3:i.prekeyIndex=r.uint32();break;default:r.skipType(7&e)}}return i},fromJSON:e=>({digest:fn(e.digest)?dn(e.digest):new Uint8Array,identityKey:fn(e.identityKey)?Boolean(e.identityKey):void 0,prekeyIndex:fn(e.prekeyIndex)?Number(e.prekeyIndex):void 0}),toJSON(e){const t={};return void 0!==e.digest&&(t.digest=ln(void 0!==e.digest?e.digest:new Uint8Array)),void 0!==e.identityKey&&(t.identityKey=e.identityKey),void 0!==e.prekeyIndex&&(t.prekeyIndex=Math.round(e.prekeyIndex)),t},fromPartial(e){var t,r,n;const i=rn();return i.digest=null!==(t=e.digest)&&void 0!==t?t:new Uint8Array,i.identityKey=null!==(r=e.identityKey)&&void 0!==r?r:void 0,i.prekeyIndex=null!==(n=e.prekeyIndex)&&void 0!==n?n:void 0,i}},on={encode:(e,t=ie().Writer.create())=>(Object.entries(e.topics).forEach((([e,r])=>{cn.encode({key:e,value:r},t.uint32(10).fork()).ldelim()})),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i={topics:{}};for(;r.pos<n;){const e=r.uint32();if(e>>>3==1){const e=cn.decode(r,r.uint32());void 0!==e.value&&(i.topics[e.key]=e.value)}else r.skipType(7&e)}return i},fromJSON(e){return{topics:(t=e.topics,"object"==typeof t&&null!==t?Object.entries(e.topics).reduce(((e,[t,r])=>(e[t]=an.fromJSON(r),e)),{}):{})};var t},toJSON(e){const t={topics:{}};return e.topics&&Object.entries(e.topics).forEach((([e,r])=>{t.topics[e]=an.toJSON(r)})),t},fromPartial(e){var t;const r={topics:{}};return r.topics=Object.entries(null!==(t=e.topics)&&void 0!==t?t:{}).reduce(((e,[t,r])=>(void 0!==r&&(e[t]=an.fromPartial(r)),e)),{}),r}};function sn(){return{createdNs:re.UZERO,peerAddress:"",invitation:void 0}}const an={encode:(e,t=ie().Writer.create())=>(e.createdNs.isZero()||t.uint32(8).uint64(e.createdNs),""!==e.peerAddress&&t.uint32(18).string(e.peerAddress),void 0!==e.invitation&&Qe.encode(e.invitation,t.uint32(26).fork()).ldelim(),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i=sn();for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.createdNs=r.uint64();break;case 2:i.peerAddress=r.string();break;case 3:i.invitation=Qe.decode(r,r.uint32());break;default:r.skipType(7&e)}}return i},fromJSON:e=>({createdNs:fn(e.createdNs)?re.fromValue(e.createdNs):re.UZERO,peerAddress:fn(e.peerAddress)?String(e.peerAddress):"",invitation:fn(e.invitation)?Qe.fromJSON(e.invitation):void 0}),toJSON(e){const t={};return void 0!==e.createdNs&&(t.createdNs=(e.createdNs||re.UZERO).toString()),void 0!==e.peerAddress&&(t.peerAddress=e.peerAddress),void 0!==e.invitation&&(t.invitation=e.invitation?Qe.toJSON(e.invitation):void 0),t},fromPartial(e){var t;const r=sn();return r.createdNs=void 0!==e.createdNs&&null!==e.createdNs?re.fromValue(e.createdNs):re.UZERO,r.peerAddress=null!==(t=e.peerAddress)&&void 0!==t?t:"",r.invitation=void 0!==e.invitation&&null!==e.invitation?Qe.fromPartial(e.invitation):void 0,r}},cn={encode:(e,t=ie().Writer.create())=>(""!==e.key&&t.uint32(10).string(e.key),void 0!==e.value&&an.encode(e.value,t.uint32(18).fork()).ldelim(),t),decode(e,t){const r=e instanceof ie().Reader?e:new(ie().Reader)(e);let n=void 0===t?r.len:r.pos+t;const i={key:"",value:void 0};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:i.key=r.string();break;case 2:i.value=an.decode(r,r.uint32());break;default:r.skipType(7&e)}}return i},fromJSON:e=>({key:fn(e.key)?String(e.key):"",value:fn(e.value)?an.fromJSON(e.value):void 0}),toJSON(e){const t={};return void 0!==e.key&&(t.key=e.key),void 0!==e.value&&(t.value=e.value?an.toJSON(e.value):void 0),t},fromPartial(e){var t;const r={key:"",value:void 0};return r.key=null!==(t=e.key)&&void 0!==t?t:"",r.value=void 0!==e.value&&null!==e.value?an.fromPartial(e.value):void 0,r}};var un=(()=>{if(void 0!==un)return un;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw"Unable to locate global object"})();function dn(e){if(un.Buffer)return Uint8Array.from(un.Buffer.from(e,"base64"));{const t=un.atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;++e)r[e]=t.charCodeAt(e);return r}}function ln(e){if(un.Buffer)return un.Buffer.from(e).toString("base64");{const t=[];return e.forEach((e=>{t.push(String.fromCharCode(e))})),un.btoa(t.join(""))}}function fn(e){return null!=e}ie().util.Long!==re&&(ie().util.Long=re,ie().configure())},8826:function(e){"use strict";!function(t){function r(e){return parseInt(e)===e}function n(e){if(!r(e.length))return!1;for(var t=0;t<e.length;t++)if(!r(e[t])||e[t]<0||e[t]>255)return!1;return!0}function i(e,t){if(e.buffer&&ArrayBuffer.isView(e)&&"Uint8Array"===e.name)return t&&(e=e.slice?e.slice():Array.prototype.slice.call(e)),e;if(Array.isArray(e)){if(!n(e))throw new Error("Array contains invalid value: "+e);return new Uint8Array(e)}if(r(e.length)&&n(e))return new Uint8Array(e);throw new Error("unsupported array-like object")}function o(e){return new Uint8Array(e)}function s(e,t,r,n,i){null==n&&null==i||(e=e.slice?e.slice(n,i):Array.prototype.slice.call(e,n,i)),t.set(e,r)}var a,c={toBytes:function(e){var t=[],r=0;for(e=encodeURI(e);r<e.length;){var n=e.charCodeAt(r++);37===n?(t.push(parseInt(e.substr(r,2),16)),r+=2):t.push(n)}return i(t)},fromBytes:function(e){for(var t=[],r=0;r<e.length;){var n=e[r];n<128?(t.push(String.fromCharCode(n)),r++):n>191&&n<224?(t.push(String.fromCharCode((31&n)<<6|63&e[r+1])),r+=2):(t.push(String.fromCharCode((15&n)<<12|(63&e[r+1])<<6|63&e[r+2])),r+=3)}return t.join("")}},u=(a="0123456789abcdef",{toBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},fromBytes:function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];t.push(a[(240&n)>>4]+a[15&n])}return t.join("")}}),d={16:10,24:12,32:14},l=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],f=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],h=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],p=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],y=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],m=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],g=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],b=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],v=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],w=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],E=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],S=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],_=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],k=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],A=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function P(e){for(var t=[],r=0;r<e.length;r+=4)t.push(e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3]);return t}var N=function(e){if(!(this instanceof N))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:i(e,!0)}),this._prepare()};N.prototype._prepare=function(){var e=d[this.key.length];if(null==e)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var t=0;t<=e;t++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);var r,n=4*(e+1),i=this.key.length/4,o=P(this.key);for(t=0;t<i;t++)r=t>>2,this._Ke[r][t%4]=o[t],this._Kd[e-r][t%4]=o[t];for(var s,a=0,c=i;c<n;){if(s=o[i-1],o[0]^=f[s>>16&255]<<24^f[s>>8&255]<<16^f[255&s]<<8^f[s>>24&255]^l[a]<<24,a+=1,8!=i)for(t=1;t<i;t++)o[t]^=o[t-1];else{for(t=1;t<i/2;t++)o[t]^=o[t-1];for(s=o[i/2-1],o[i/2]^=f[255&s]^f[s>>8&255]<<8^f[s>>16&255]<<16^f[s>>24&255]<<24,t=i/2+1;t<i;t++)o[t]^=o[t-1]}for(t=0;t<i&&c<n;)u=c>>2,h=c%4,this._Ke[u][h]=o[t],this._Kd[e-u][h]=o[t++],c++}for(var u=1;u<e;u++)for(var h=0;h<4;h++)s=this._Kd[u][h],this._Kd[u][h]=S[s>>24&255]^_[s>>16&255]^k[s>>8&255]^A[255&s]},N.prototype.encrypt=function(e){if(16!=e.length)throw new Error("invalid plaintext size (must be 16 bytes)");for(var t=this._Ke.length-1,r=[0,0,0,0],n=P(e),i=0;i<4;i++)n[i]^=this._Ke[0][i];for(var s=1;s<t;s++){for(i=0;i<4;i++)r[i]=p[n[i]>>24&255]^y[n[(i+1)%4]>>16&255]^m[n[(i+2)%4]>>8&255]^g[255&n[(i+3)%4]]^this._Ke[s][i];n=r.slice()}var a,c=o(16);for(i=0;i<4;i++)a=this._Ke[t][i],c[4*i]=255&(f[n[i]>>24&255]^a>>24),c[4*i+1]=255&(f[n[(i+1)%4]>>16&255]^a>>16),c[4*i+2]=255&(f[n[(i+2)%4]>>8&255]^a>>8),c[4*i+3]=255&(f[255&n[(i+3)%4]]^a);return c},N.prototype.decrypt=function(e){if(16!=e.length)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var t=this._Kd.length-1,r=[0,0,0,0],n=P(e),i=0;i<4;i++)n[i]^=this._Kd[0][i];for(var s=1;s<t;s++){for(i=0;i<4;i++)r[i]=b[n[i]>>24&255]^v[n[(i+3)%4]>>16&255]^w[n[(i+2)%4]>>8&255]^E[255&n[(i+1)%4]]^this._Kd[s][i];n=r.slice()}var a,c=o(16);for(i=0;i<4;i++)a=this._Kd[t][i],c[4*i]=255&(h[n[i]>>24&255]^a>>24),c[4*i+1]=255&(h[n[(i+3)%4]>>16&255]^a>>16),c[4*i+2]=255&(h[n[(i+2)%4]>>8&255]^a>>8),c[4*i+3]=255&(h[255&n[(i+1)%4]]^a);return c};var x=function(e){if(!(this instanceof x))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new N(e)};x.prototype.encrypt=function(e){if((e=i(e)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var t=o(e.length),r=o(16),n=0;n<e.length;n+=16)s(e,r,0,n,n+16),s(r=this._aes.encrypt(r),t,n);return t},x.prototype.decrypt=function(e){if((e=i(e)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var t=o(e.length),r=o(16),n=0;n<e.length;n+=16)s(e,r,0,n,n+16),s(r=this._aes.decrypt(r),t,n);return t};var O=function(e,t){if(!(this instanceof O))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",t){if(16!=t.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else t=o(16);this._lastCipherblock=i(t,!0),this._aes=new N(e)};O.prototype.encrypt=function(e){if((e=i(e)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var t=o(e.length),r=o(16),n=0;n<e.length;n+=16){s(e,r,0,n,n+16);for(var a=0;a<16;a++)r[a]^=this._lastCipherblock[a];this._lastCipherblock=this._aes.encrypt(r),s(this._lastCipherblock,t,n)}return t},O.prototype.decrypt=function(e){if((e=i(e)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var t=o(e.length),r=o(16),n=0;n<e.length;n+=16){s(e,r,0,n,n+16),r=this._aes.decrypt(r);for(var a=0;a<16;a++)t[n+a]=r[a]^this._lastCipherblock[a];s(e,this._lastCipherblock,0,n,n+16)}return t};var M=function(e,t,r){if(!(this instanceof M))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",t){if(16!=t.length)throw new Error("invalid initialation vector size (must be 16 size)")}else t=o(16);r||(r=1),this.segmentSize=r,this._shiftRegister=i(t,!0),this._aes=new N(e)};M.prototype.encrypt=function(e){if(e.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var t,r=i(e,!0),n=0;n<r.length;n+=this.segmentSize){t=this._aes.encrypt(this._shiftRegister);for(var o=0;o<this.segmentSize;o++)r[n+o]^=t[o];s(this._shiftRegister,this._shiftRegister,0,this.segmentSize),s(r,this._shiftRegister,16-this.segmentSize,n,n+this.segmentSize)}return r},M.prototype.decrypt=function(e){if(e.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var t,r=i(e,!0),n=0;n<r.length;n+=this.segmentSize){t=this._aes.encrypt(this._shiftRegister);for(var o=0;o<this.segmentSize;o++)r[n+o]^=t[o];s(this._shiftRegister,this._shiftRegister,0,this.segmentSize),s(e,this._shiftRegister,16-this.segmentSize,n,n+this.segmentSize)}return r};var T=function(e,t){if(!(this instanceof T))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",t){if(16!=t.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else t=o(16);this._lastPrecipher=i(t,!0),this._lastPrecipherIndex=16,this._aes=new N(e)};T.prototype.encrypt=function(e){for(var t=i(e,!0),r=0;r<t.length;r++)16===this._lastPrecipherIndex&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),t[r]^=this._lastPrecipher[this._lastPrecipherIndex++];return t},T.prototype.decrypt=T.prototype.encrypt;var I=function(e){if(!(this instanceof I))throw Error("Counter must be instanitated with `new`");0===e||e||(e=1),"number"==typeof e?(this._counter=o(16),this.setValue(e)):this.setBytes(e)};I.prototype.setValue=function(e){if("number"!=typeof e||parseInt(e)!=e)throw new Error("invalid counter value (must be an integer)");for(var t=15;t>=0;--t)this._counter[t]=e%256,e>>=8},I.prototype.setBytes=function(e){if(16!=(e=i(e,!0)).length)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=e},I.prototype.increment=function(){for(var e=15;e>=0;e--){if(255!==this._counter[e]){this._counter[e]++;break}this._counter[e]=0}};var R=function(e,t){if(!(this instanceof R))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",t instanceof I||(t=new I(t)),this._counter=t,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new N(e)};R.prototype.encrypt=function(e){for(var t=i(e,!0),r=0;r<t.length;r++)16===this._remainingCounterIndex&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),t[r]^=this._remainingCounter[this._remainingCounterIndex++];return t},R.prototype.decrypt=R.prototype.encrypt;var B={AES:N,Counter:I,ModeOfOperation:{ecb:x,cbc:O,cfb:M,ofb:T,ctr:R},utils:{hex:u,utf8:c},padding:{pkcs7:{pad:function(e){var t=16-(e=i(e,!0)).length%16,r=o(e.length+t);s(e,r);for(var n=e.length;n<r.length;n++)r[n]=t;return r},strip:function(e){if((e=i(e,!0)).length<16)throw new Error("PKCS#7 invalid length");var t=e[e.length-1];if(t>16)throw new Error("PKCS#7 padding byte out of range");for(var r=e.length-t,n=0;n<t;n++)if(e[r+n]!==t)throw new Error("PKCS#7 invalid padding byte");var a=o(r);return s(e,a,0,0,r),a}}},_arrayTest:{coerceArray:i,createArray:o,copyArray:s}};e.exports=B}()},5078:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4778),i=r(2403),o=function(){function e(e){this._semaphore=new i.default(1,e)}return e.prototype.acquire=function(){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(e){switch(e.label){case 0:return[4,this._semaphore.acquire()];case 1:return[2,e.sent()[1]]}}))}))},e.prototype.runExclusive=function(e){return this._semaphore.runExclusive((function(){return e()}))},e.prototype.isLocked=function(){return this._semaphore.isLocked()},e.prototype.waitForUnlock=function(){return this._semaphore.waitForUnlock()},e.prototype.release=function(){this._semaphore.isLocked()&&this._semaphore.release()},e.prototype.cancel=function(){return this._semaphore.cancel()},e}();t.default=o},2403:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4778),i=r(1764),o=function(){function e(e,t){void 0===t&&(t=i.E_CANCELED),this._value=e,this._cancelError=t,this._weightedQueues=[],this._weightedWaiters=[]}return e.prototype.acquire=function(e){var t=this;if(void 0===e&&(e=1),e<=0)throw new Error("invalid weight ".concat(e,": must be positive"));return new Promise((function(r,n){t._weightedQueues[e-1]||(t._weightedQueues[e-1]=[]),t._weightedQueues[e-1].push({resolve:r,reject:n}),t._dispatch()}))},e.prototype.runExclusive=function(e,t){return void 0===t&&(t=1),n.__awaiter(this,void 0,void 0,(function(){var r,i,o;return n.__generator(this,(function(n){switch(n.label){case 0:return[4,this.acquire(t)];case 1:r=n.sent(),i=r[0],o=r[1],n.label=2;case 2:return n.trys.push([2,,4,5]),[4,e(i)];case 3:return[2,n.sent()];case 4:return o(),[7];case 5:return[2]}}))}))},e.prototype.waitForUnlock=function(e){var t=this;if(void 0===e&&(e=1),e<=0)throw new Error("invalid weight ".concat(e,": must be positive"));return new Promise((function(r){t._weightedWaiters[e-1]||(t._weightedWaiters[e-1]=[]),t._weightedWaiters[e-1].push(r),t._dispatch()}))},e.prototype.isLocked=function(){return this._value<=0},e.prototype.getValue=function(){return this._value},e.prototype.setValue=function(e){this._value=e,this._dispatch()},e.prototype.release=function(e){if(void 0===e&&(e=1),e<=0)throw new Error("invalid weight ".concat(e,": must be positive"));this._value+=e,this._dispatch()},e.prototype.cancel=function(){var e=this;this._weightedQueues.forEach((function(t){return t.forEach((function(t){return t.reject(e._cancelError)}))})),this._weightedQueues=[]},e.prototype._dispatch=function(){for(var e,t=this._value;t>0;t--){var r=null===(e=this._weightedQueues[t-1])||void 0===e?void 0:e.shift();if(r){var n=this._value,i=t;this._value-=t,t=this._value+1,r.resolve([n,this._newReleaser(i)])}}this._drainUnlockWaiters()},e.prototype._newReleaser=function(e){var t=this,r=!1;return function(){r||(r=!0,t.release(e))}},e.prototype._drainUnlockWaiters=function(){for(var e=this._value;e>0;e--)this._weightedWaiters[e-1]&&(this._weightedWaiters[e-1].forEach((function(e){return e()})),this._weightedWaiters[e-1]=[])},e}();t.default=o},1764:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.E_CANCELED=t.E_ALREADY_LOCKED=t.E_TIMEOUT=void 0,t.E_TIMEOUT=new Error("timeout while waiting for mutex to become available"),t.E_ALREADY_LOCKED=new Error("mutex already locked"),t.E_CANCELED=new Error("request for lock canceled")},8125:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tryAcquire=t.withTimeout=t.Semaphore=t.Mutex=void 0;var n=r(4778),i=r(5078);Object.defineProperty(t,"Mutex",{enumerable:!0,get:function(){return i.default}});var o=r(2403);Object.defineProperty(t,"Semaphore",{enumerable:!0,get:function(){return o.default}});var s=r(1960);Object.defineProperty(t,"withTimeout",{enumerable:!0,get:function(){return s.withTimeout}});var a=r(3143);Object.defineProperty(t,"tryAcquire",{enumerable:!0,get:function(){return a.tryAcquire}}),n.__exportStar(r(1764),t)},3143:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tryAcquire=void 0;var n=r(1764),i=r(1960);t.tryAcquire=function(e,t){return void 0===t&&(t=n.E_ALREADY_LOCKED),(0,i.withTimeout)(e,0,t)}},1960:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withTimeout=void 0;var n=r(4778),i=r(1764);t.withTimeout=function(e,t,r){var o=this;return void 0===r&&(r=i.E_TIMEOUT),{acquire:function(i){if(void 0!==i&&i<=0)throw new Error("invalid weight ".concat(i,": must be positive"));return new Promise((function(s,a){return n.__awaiter(o,void 0,void 0,(function(){var o,c,u,d;return n.__generator(this,(function(n){switch(n.label){case 0:o=!1,c=setTimeout((function(){o=!0,a(r)}),t),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.acquire(i)];case 2:return u=n.sent(),o?(Array.isArray(u)?u[1]:u)():(clearTimeout(c),s(u)),[3,4];case 3:return d=n.sent(),o||(clearTimeout(c),a(d)),[3,4];case 4:return[2]}}))}))}))},runExclusive:function(e,t){return n.__awaiter(this,void 0,void 0,(function(){var r,i;return n.__generator(this,(function(n){switch(n.label){case 0:r=function(){},n.label=1;case 1:return n.trys.push([1,,7,8]),[4,this.acquire(t)];case 2:return i=n.sent(),Array.isArray(i)?(r=i[1],[4,e(i[0])]):[3,4];case 3:return[2,n.sent()];case 4:return r=i,[4,e()];case 5:return[2,n.sent()];case 6:return[3,8];case 7:return r(),[7];case 8:return[2]}}))}))},release:function(t){e.release(t)},cancel:function(){return e.cancel()},waitForUnlock:function(n){if(void 0!==n&&n<=0)throw new Error("invalid weight ".concat(n,": must be positive"));return new Promise((function(i,o){e.waitForUnlock(n).then(i),setTimeout((function(){return o(r)}),t)}))},isLocked:function(){return e.isLocked()},getValue:function(){return e.getValue()},setValue:function(t){return e.setValue(t)}}}},4778:(e,t,r)=>{"use strict";r.r(t),r.d(t,{__extends:()=>i,__assign:()=>o,__rest:()=>s,__decorate:()=>a,__param:()=>c,__metadata:()=>u,__awaiter:()=>d,__generator:()=>l,__createBinding:()=>f,__exportStar:()=>h,__values:()=>p,__read:()=>y,__spread:()=>m,__spreadArrays:()=>g,__spreadArray:()=>b,__await:()=>v,__asyncGenerator:()=>w,__asyncDelegator:()=>E,__asyncValues:()=>S,__makeTemplateObject:()=>_,__importStar:()=>A,__importDefault:()=>P,__classPrivateFieldGet:()=>N,__classPrivateFieldSet:()=>x,__classPrivateFieldIn:()=>O});var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var o=function(){return o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)};function s(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}function a(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}function c(e,t){return function(r,n){t(r,n,e)}}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function d(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))}function l(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}var f=Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]};function h(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||f(t,e,r)}function p(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function y(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(y(arguments[t]));return e}function g(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n}function b(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}function v(e){return this instanceof v?(this.v=e,this):new v(e)}function w(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),o=[];return n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n;function s(e){i[e]&&(n[e]=function(t){return new Promise((function(r,n){o.push([e,t,r,n])>1||a(e,t)}))})}function a(e,t){try{(r=i[e](t)).value instanceof v?Promise.resolve(r.value.v).then(c,u):d(o[0][2],r)}catch(e){d(o[0][3],e)}var r}function c(e){a("next",e)}function u(e){a("throw",e)}function d(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function E(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:v(e[n](t)),done:"return"===n}:i?i(t):t}:i}}function S(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=p(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,i){!function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}(n,i,(t=e[r](t)).done,t.value)}))}}}function _(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var k=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function A(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&f(t,e,r);return k(t,e),t}function P(e){return e&&e.__esModule?e:{default:e}}function N(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function x(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r}function O(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}},2882:e=>{"use strict";for(var t="qpzry9x8gf2tvdw0s3jn54khce6mua7l",r={},n=0;n<t.length;n++){var i=t.charAt(n);if(void 0!==r[i])throw new TypeError(i+" is ambiguous");r[i]=n}function o(e){var t=e>>25;return(33554431&e)<<5^996825010&-(t>>0&1)^642813549&-(t>>1&1)^513874426&-(t>>2&1)^1027748829&-(t>>3&1)^705979059&-(t>>4&1)}function s(e){for(var t=1,r=0;r<e.length;++r){var n=e.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+e+")";t=o(t)^n>>5}for(t=o(t),r=0;r<e.length;++r){var i=e.charCodeAt(r);t=o(t)^31&i}return t}function a(e,t){if(t=t||90,e.length<8)return e+" too short";if(e.length>t)return"Exceeds length limit";var n=e.toLowerCase(),i=e.toUpperCase();if(e!==n&&e!==i)return"Mixed-case string "+e;var a=(e=n).lastIndexOf("1");if(-1===a)return"No separator character for "+e;if(0===a)return"Missing prefix for "+e;var c=e.slice(0,a),u=e.slice(a+1);if(u.length<6)return"Data too short";var d=s(c);if("string"==typeof d)return d;for(var l=[],f=0;f<u.length;++f){var h=u.charAt(f),p=r[h];if(void 0===p)return"Unknown character "+h;d=o(d)^p,f+6>=u.length||l.push(p)}return 1!==d?"Invalid checksum for "+e:{prefix:c,words:l}}function c(e,t,r,n){for(var i=0,o=0,s=(1<<r)-1,a=[],c=0;c<e.length;++c)for(i=i<<t|e[c],o+=t;o>=r;)o-=r,a.push(i>>o&s);if(n)o>0&&a.push(i<<r-o&s);else{if(o>=t)return"Excess padding";if(i<<r-o&s)return"Non-zero padding"}return a}e.exports={decodeUnsafe:function(){var e=a.apply(null,arguments);if("object"==typeof e)return e},decode:function(e){var t=a.apply(null,arguments);if("object"==typeof t)return t;throw new Error(t)},encode:function(e,r,n){if(n=n||90,e.length+7+r.length>n)throw new TypeError("Exceeds length limit");var i=s(e=e.toLowerCase());if("string"==typeof i)throw new Error(i);for(var a=e+"1",c=0;c<r.length;++c){var u=r[c];if(u>>5!=0)throw new Error("Non 5-bit word");i=o(i)^u,a+=t.charAt(u)}for(c=0;c<6;++c)i=o(i);for(i^=1,c=0;c<6;++c)a+=t.charAt(i>>5*(5-c)&31);return a},toWordsUnsafe:function(e){var t=c(e,8,5,!0);if(Array.isArray(t))return t},toWords:function(e){var t=c(e,8,5,!0);if(Array.isArray(t))return t;throw new Error(t)},fromWordsUnsafe:function(e){var t=c(e,5,8,!1);if(Array.isArray(t))return t},fromWords:function(e){var t=c(e,5,8,!1);if(Array.isArray(t))return t;throw new Error(t)}}},3550:function(e,t,r){!function(e,t){"use strict";function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function o(e,t,r){if(o.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var s;"object"==typeof e?e.exports=o:t.BN=o,o.BN=o,o.wordSize=26;try{s="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:r(6601).Buffer}catch(e){}function a(e,t){var r=e.charCodeAt(t);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function c(e,t,r){var n=a(e,r);return r-1>=t&&(n|=a(e,r-1)<<4),n}function u(e,t,r,n){for(var i=0,o=Math.min(e.length,r),s=t;s<o;s++){var a=e.charCodeAt(s)-48;i*=n,i+=a>=49?a-49+10:a>=17?a-17+10:a}return i}o.isBN=function(e){return e instanceof o||null!==e&&"object"==typeof e&&e.constructor.wordSize===o.wordSize&&Array.isArray(e.words)},o.max=function(e,t){return e.cmp(t)>0?e:t},o.min=function(e,t){return e.cmp(t)<0?e:t},o.prototype._init=function(e,t,r){if("number"==typeof e)return this._initNumber(e,t,r);if("object"==typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,r):(this._parseBase(e,t,i),"le"===r&&this._initArray(this.toArray(),t,r)))},o.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},o.prototype._initArray=function(e,t,r){if(n("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===r)for(i=e.length-1,o=0;i>=0;i-=3)s=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===r)for(i=0,o=0;i<e.length;i+=3)s=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this.strip()},o.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,s=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)i=c(e,t,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else for(n=(e.length-t)%2==0?t+1:t;n<e.length;n+=2)i=c(e,t,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;this.strip()},o.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=t)n++;n--,i=i/t|0;for(var o=e.length-r,s=o%n,a=Math.min(o,o-s)+r,c=0,d=r;d<a;d+=n)c=u(e,d,d+n,t),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==s){var l=1;for(c=u(e,d,e.length,t),d=0;d<s;d++)l*=t;this.imuln(l),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this.strip()},o.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},o.prototype.clone=function(){var e=new o(null);return this.copy(e),e},o.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function h(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var i=0|e.words[0],o=0|t.words[0],s=i*o,a=67108863&s,c=s/67108864|0;r.words[0]=a;for(var u=1;u<n;u++){for(var d=c>>>26,l=67108863&c,f=Math.min(u,t.length-1),h=Math.max(0,u-e.length+1);h<=f;h++){var p=u-h|0;d+=(s=(i=0|e.words[p])*(o=0|t.words[h])+l)/67108864|0,l=67108863&s}r.words[u]=0|l,c=0|d}return 0!==c?r.words[u]=0|c:r.length--,r.strip()}o.prototype.toString=function(e,t){var r;if(t=0|t||1,16===(e=e||10)||"hex"===e){r="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],c=(16777215&(a<<i|o)).toString(16);r=0!=(o=a>>>24-i&16777215)||s!==this.length-1?d[6-c.length]+c+r:c+r,(i+=2)>=26&&(i-=26,s--)}for(0!==o&&(r=o.toString(16)+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var u=l[e],h=f[e];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var y=p.modn(h).toString(e);r=(p=p.idivn(h)).isZero()?y+r:d[u-y.length]+y+r}for(this.isZero()&&(r="0"+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(e,t){return n(void 0!==s),this.toArrayLike(s,e,t)},o.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},o.prototype.toArrayLike=function(e,t,r){var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0"),this.strip();var s,a,c="le"===t,u=new e(o),d=this.clone();if(c){for(a=0;!d.isZero();a++)s=d.andln(255),d.iushrn(8),u[a]=s;for(;a<o;a++)u[a]=0}else{for(a=0;a<o-i;a++)u[a]=0;for(a=0;!d.isZero();a++)s=d.andln(255),d.iushrn(8),u[o-a-1]=s}return u},Math.clz32?o.prototype._countBits=function(e){return 32-Math.clz32(e)}:o.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},o.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 0==(8191&t)&&(r+=13,t>>>=13),0==(127&t)&&(r+=7,t>>>=7),0==(15&t)&&(r+=4,t>>>=4),0==(3&t)&&(r+=2,t>>>=2),0==(1&t)&&r++,r},o.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},o.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},o.prototype.ior=function(e){return n(0==(this.negative|e.negative)),this.iuor(e)},o.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},o.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},o.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this.strip()},o.prototype.iand=function(e){return n(0==(this.negative|e.negative)),this.iuand(e)},o.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},o.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},o.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this.strip()},o.prototype.ixor=function(e){return n(0==(this.negative|e.negative)),this.iuxor(e)},o.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},o.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},o.prototype.inotn=function(e){n("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},o.prototype.notn=function(e){return this.clone().inotn(e)},o.prototype.setn=function(e,t){n("number"==typeof e&&e>=0);var r=e/26|0,i=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},o.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var i=0,o=0;o<n.length;o++)t=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&t,i=t>>>26;for(;0!==i&&o<r.length;o++)t=(0|r.words[o])+i,this.words[o]=67108863&t,i=t>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},o.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=e):(r=e,n=this);for(var o=0,s=0;s<n.length;s++)o=(t=(0|r.words[s])-(0|n.words[s])+o)>>26,this.words[s]=67108863&t;for(;0!==o&&s<r.length;s++)o=(t=(0|r.words[s])+o)>>26,this.words[s]=67108863&t;if(0===o&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(e){return this.clone().isub(e)};var p=function(e,t,r){var n,i,o,s=e.words,a=t.words,c=r.words,u=0,d=0|s[0],l=8191&d,f=d>>>13,h=0|s[1],p=8191&h,y=h>>>13,m=0|s[2],g=8191&m,b=m>>>13,v=0|s[3],w=8191&v,E=v>>>13,S=0|s[4],_=8191&S,k=S>>>13,A=0|s[5],P=8191&A,N=A>>>13,x=0|s[6],O=8191&x,M=x>>>13,T=0|s[7],I=8191&T,R=T>>>13,B=0|s[8],C=8191&B,K=B>>>13,U=0|s[9],D=8191&U,j=U>>>13,F=0|a[0],L=8191&F,q=F>>>13,V=0|a[1],J=8191&V,z=V>>>13,G=0|a[2],H=8191&G,W=G>>>13,$=0|a[3],Z=8191&$,X=$>>>13,Y=0|a[4],Q=8191&Y,ee=Y>>>13,te=0|a[5],re=8191&te,ne=te>>>13,ie=0|a[6],oe=8191&ie,se=ie>>>13,ae=0|a[7],ce=8191&ae,ue=ae>>>13,de=0|a[8],le=8191&de,fe=de>>>13,he=0|a[9],pe=8191&he,ye=he>>>13;r.negative=e.negative^t.negative,r.length=19;var me=(u+(n=Math.imul(l,L))|0)+((8191&(i=(i=Math.imul(l,q))+Math.imul(f,L)|0))<<13)|0;u=((o=Math.imul(f,q))+(i>>>13)|0)+(me>>>26)|0,me&=67108863,n=Math.imul(p,L),i=(i=Math.imul(p,q))+Math.imul(y,L)|0,o=Math.imul(y,q);var ge=(u+(n=n+Math.imul(l,J)|0)|0)+((8191&(i=(i=i+Math.imul(l,z)|0)+Math.imul(f,J)|0))<<13)|0;u=((o=o+Math.imul(f,z)|0)+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,n=Math.imul(g,L),i=(i=Math.imul(g,q))+Math.imul(b,L)|0,o=Math.imul(b,q),n=n+Math.imul(p,J)|0,i=(i=i+Math.imul(p,z)|0)+Math.imul(y,J)|0,o=o+Math.imul(y,z)|0;var be=(u+(n=n+Math.imul(l,H)|0)|0)+((8191&(i=(i=i+Math.imul(l,W)|0)+Math.imul(f,H)|0))<<13)|0;u=((o=o+Math.imul(f,W)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(w,L),i=(i=Math.imul(w,q))+Math.imul(E,L)|0,o=Math.imul(E,q),n=n+Math.imul(g,J)|0,i=(i=i+Math.imul(g,z)|0)+Math.imul(b,J)|0,o=o+Math.imul(b,z)|0,n=n+Math.imul(p,H)|0,i=(i=i+Math.imul(p,W)|0)+Math.imul(y,H)|0,o=o+Math.imul(y,W)|0;var ve=(u+(n=n+Math.imul(l,Z)|0)|0)+((8191&(i=(i=i+Math.imul(l,X)|0)+Math.imul(f,Z)|0))<<13)|0;u=((o=o+Math.imul(f,X)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(_,L),i=(i=Math.imul(_,q))+Math.imul(k,L)|0,o=Math.imul(k,q),n=n+Math.imul(w,J)|0,i=(i=i+Math.imul(w,z)|0)+Math.imul(E,J)|0,o=o+Math.imul(E,z)|0,n=n+Math.imul(g,H)|0,i=(i=i+Math.imul(g,W)|0)+Math.imul(b,H)|0,o=o+Math.imul(b,W)|0,n=n+Math.imul(p,Z)|0,i=(i=i+Math.imul(p,X)|0)+Math.imul(y,Z)|0,o=o+Math.imul(y,X)|0;var we=(u+(n=n+Math.imul(l,Q)|0)|0)+((8191&(i=(i=i+Math.imul(l,ee)|0)+Math.imul(f,Q)|0))<<13)|0;u=((o=o+Math.imul(f,ee)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(P,L),i=(i=Math.imul(P,q))+Math.imul(N,L)|0,o=Math.imul(N,q),n=n+Math.imul(_,J)|0,i=(i=i+Math.imul(_,z)|0)+Math.imul(k,J)|0,o=o+Math.imul(k,z)|0,n=n+Math.imul(w,H)|0,i=(i=i+Math.imul(w,W)|0)+Math.imul(E,H)|0,o=o+Math.imul(E,W)|0,n=n+Math.imul(g,Z)|0,i=(i=i+Math.imul(g,X)|0)+Math.imul(b,Z)|0,o=o+Math.imul(b,X)|0,n=n+Math.imul(p,Q)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(y,Q)|0,o=o+Math.imul(y,ee)|0;var Ee=(u+(n=n+Math.imul(l,re)|0)|0)+((8191&(i=(i=i+Math.imul(l,ne)|0)+Math.imul(f,re)|0))<<13)|0;u=((o=o+Math.imul(f,ne)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(O,L),i=(i=Math.imul(O,q))+Math.imul(M,L)|0,o=Math.imul(M,q),n=n+Math.imul(P,J)|0,i=(i=i+Math.imul(P,z)|0)+Math.imul(N,J)|0,o=o+Math.imul(N,z)|0,n=n+Math.imul(_,H)|0,i=(i=i+Math.imul(_,W)|0)+Math.imul(k,H)|0,o=o+Math.imul(k,W)|0,n=n+Math.imul(w,Z)|0,i=(i=i+Math.imul(w,X)|0)+Math.imul(E,Z)|0,o=o+Math.imul(E,X)|0,n=n+Math.imul(g,Q)|0,i=(i=i+Math.imul(g,ee)|0)+Math.imul(b,Q)|0,o=o+Math.imul(b,ee)|0,n=n+Math.imul(p,re)|0,i=(i=i+Math.imul(p,ne)|0)+Math.imul(y,re)|0,o=o+Math.imul(y,ne)|0;var Se=(u+(n=n+Math.imul(l,oe)|0)|0)+((8191&(i=(i=i+Math.imul(l,se)|0)+Math.imul(f,oe)|0))<<13)|0;u=((o=o+Math.imul(f,se)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(I,L),i=(i=Math.imul(I,q))+Math.imul(R,L)|0,o=Math.imul(R,q),n=n+Math.imul(O,J)|0,i=(i=i+Math.imul(O,z)|0)+Math.imul(M,J)|0,o=o+Math.imul(M,z)|0,n=n+Math.imul(P,H)|0,i=(i=i+Math.imul(P,W)|0)+Math.imul(N,H)|0,o=o+Math.imul(N,W)|0,n=n+Math.imul(_,Z)|0,i=(i=i+Math.imul(_,X)|0)+Math.imul(k,Z)|0,o=o+Math.imul(k,X)|0,n=n+Math.imul(w,Q)|0,i=(i=i+Math.imul(w,ee)|0)+Math.imul(E,Q)|0,o=o+Math.imul(E,ee)|0,n=n+Math.imul(g,re)|0,i=(i=i+Math.imul(g,ne)|0)+Math.imul(b,re)|0,o=o+Math.imul(b,ne)|0,n=n+Math.imul(p,oe)|0,i=(i=i+Math.imul(p,se)|0)+Math.imul(y,oe)|0,o=o+Math.imul(y,se)|0;var _e=(u+(n=n+Math.imul(l,ce)|0)|0)+((8191&(i=(i=i+Math.imul(l,ue)|0)+Math.imul(f,ce)|0))<<13)|0;u=((o=o+Math.imul(f,ue)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(C,L),i=(i=Math.imul(C,q))+Math.imul(K,L)|0,o=Math.imul(K,q),n=n+Math.imul(I,J)|0,i=(i=i+Math.imul(I,z)|0)+Math.imul(R,J)|0,o=o+Math.imul(R,z)|0,n=n+Math.imul(O,H)|0,i=(i=i+Math.imul(O,W)|0)+Math.imul(M,H)|0,o=o+Math.imul(M,W)|0,n=n+Math.imul(P,Z)|0,i=(i=i+Math.imul(P,X)|0)+Math.imul(N,Z)|0,o=o+Math.imul(N,X)|0,n=n+Math.imul(_,Q)|0,i=(i=i+Math.imul(_,ee)|0)+Math.imul(k,Q)|0,o=o+Math.imul(k,ee)|0,n=n+Math.imul(w,re)|0,i=(i=i+Math.imul(w,ne)|0)+Math.imul(E,re)|0,o=o+Math.imul(E,ne)|0,n=n+Math.imul(g,oe)|0,i=(i=i+Math.imul(g,se)|0)+Math.imul(b,oe)|0,o=o+Math.imul(b,se)|0,n=n+Math.imul(p,ce)|0,i=(i=i+Math.imul(p,ue)|0)+Math.imul(y,ce)|0,o=o+Math.imul(y,ue)|0;var ke=(u+(n=n+Math.imul(l,le)|0)|0)+((8191&(i=(i=i+Math.imul(l,fe)|0)+Math.imul(f,le)|0))<<13)|0;u=((o=o+Math.imul(f,fe)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(D,L),i=(i=Math.imul(D,q))+Math.imul(j,L)|0,o=Math.imul(j,q),n=n+Math.imul(C,J)|0,i=(i=i+Math.imul(C,z)|0)+Math.imul(K,J)|0,o=o+Math.imul(K,z)|0,n=n+Math.imul(I,H)|0,i=(i=i+Math.imul(I,W)|0)+Math.imul(R,H)|0,o=o+Math.imul(R,W)|0,n=n+Math.imul(O,Z)|0,i=(i=i+Math.imul(O,X)|0)+Math.imul(M,Z)|0,o=o+Math.imul(M,X)|0,n=n+Math.imul(P,Q)|0,i=(i=i+Math.imul(P,ee)|0)+Math.imul(N,Q)|0,o=o+Math.imul(N,ee)|0,n=n+Math.imul(_,re)|0,i=(i=i+Math.imul(_,ne)|0)+Math.imul(k,re)|0,o=o+Math.imul(k,ne)|0,n=n+Math.imul(w,oe)|0,i=(i=i+Math.imul(w,se)|0)+Math.imul(E,oe)|0,o=o+Math.imul(E,se)|0,n=n+Math.imul(g,ce)|0,i=(i=i+Math.imul(g,ue)|0)+Math.imul(b,ce)|0,o=o+Math.imul(b,ue)|0,n=n+Math.imul(p,le)|0,i=(i=i+Math.imul(p,fe)|0)+Math.imul(y,le)|0,o=o+Math.imul(y,fe)|0;var Ae=(u+(n=n+Math.imul(l,pe)|0)|0)+((8191&(i=(i=i+Math.imul(l,ye)|0)+Math.imul(f,pe)|0))<<13)|0;u=((o=o+Math.imul(f,ye)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul(D,J),i=(i=Math.imul(D,z))+Math.imul(j,J)|0,o=Math.imul(j,z),n=n+Math.imul(C,H)|0,i=(i=i+Math.imul(C,W)|0)+Math.imul(K,H)|0,o=o+Math.imul(K,W)|0,n=n+Math.imul(I,Z)|0,i=(i=i+Math.imul(I,X)|0)+Math.imul(R,Z)|0,o=o+Math.imul(R,X)|0,n=n+Math.imul(O,Q)|0,i=(i=i+Math.imul(O,ee)|0)+Math.imul(M,Q)|0,o=o+Math.imul(M,ee)|0,n=n+Math.imul(P,re)|0,i=(i=i+Math.imul(P,ne)|0)+Math.imul(N,re)|0,o=o+Math.imul(N,ne)|0,n=n+Math.imul(_,oe)|0,i=(i=i+Math.imul(_,se)|0)+Math.imul(k,oe)|0,o=o+Math.imul(k,se)|0,n=n+Math.imul(w,ce)|0,i=(i=i+Math.imul(w,ue)|0)+Math.imul(E,ce)|0,o=o+Math.imul(E,ue)|0,n=n+Math.imul(g,le)|0,i=(i=i+Math.imul(g,fe)|0)+Math.imul(b,le)|0,o=o+Math.imul(b,fe)|0;var Pe=(u+(n=n+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,ye)|0)+Math.imul(y,pe)|0))<<13)|0;u=((o=o+Math.imul(y,ye)|0)+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,n=Math.imul(D,H),i=(i=Math.imul(D,W))+Math.imul(j,H)|0,o=Math.imul(j,W),n=n+Math.imul(C,Z)|0,i=(i=i+Math.imul(C,X)|0)+Math.imul(K,Z)|0,o=o+Math.imul(K,X)|0,n=n+Math.imul(I,Q)|0,i=(i=i+Math.imul(I,ee)|0)+Math.imul(R,Q)|0,o=o+Math.imul(R,ee)|0,n=n+Math.imul(O,re)|0,i=(i=i+Math.imul(O,ne)|0)+Math.imul(M,re)|0,o=o+Math.imul(M,ne)|0,n=n+Math.imul(P,oe)|0,i=(i=i+Math.imul(P,se)|0)+Math.imul(N,oe)|0,o=o+Math.imul(N,se)|0,n=n+Math.imul(_,ce)|0,i=(i=i+Math.imul(_,ue)|0)+Math.imul(k,ce)|0,o=o+Math.imul(k,ue)|0,n=n+Math.imul(w,le)|0,i=(i=i+Math.imul(w,fe)|0)+Math.imul(E,le)|0,o=o+Math.imul(E,fe)|0;var Ne=(u+(n=n+Math.imul(g,pe)|0)|0)+((8191&(i=(i=i+Math.imul(g,ye)|0)+Math.imul(b,pe)|0))<<13)|0;u=((o=o+Math.imul(b,ye)|0)+(i>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,n=Math.imul(D,Z),i=(i=Math.imul(D,X))+Math.imul(j,Z)|0,o=Math.imul(j,X),n=n+Math.imul(C,Q)|0,i=(i=i+Math.imul(C,ee)|0)+Math.imul(K,Q)|0,o=o+Math.imul(K,ee)|0,n=n+Math.imul(I,re)|0,i=(i=i+Math.imul(I,ne)|0)+Math.imul(R,re)|0,o=o+Math.imul(R,ne)|0,n=n+Math.imul(O,oe)|0,i=(i=i+Math.imul(O,se)|0)+Math.imul(M,oe)|0,o=o+Math.imul(M,se)|0,n=n+Math.imul(P,ce)|0,i=(i=i+Math.imul(P,ue)|0)+Math.imul(N,ce)|0,o=o+Math.imul(N,ue)|0,n=n+Math.imul(_,le)|0,i=(i=i+Math.imul(_,fe)|0)+Math.imul(k,le)|0,o=o+Math.imul(k,fe)|0;var xe=(u+(n=n+Math.imul(w,pe)|0)|0)+((8191&(i=(i=i+Math.imul(w,ye)|0)+Math.imul(E,pe)|0))<<13)|0;u=((o=o+Math.imul(E,ye)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,n=Math.imul(D,Q),i=(i=Math.imul(D,ee))+Math.imul(j,Q)|0,o=Math.imul(j,ee),n=n+Math.imul(C,re)|0,i=(i=i+Math.imul(C,ne)|0)+Math.imul(K,re)|0,o=o+Math.imul(K,ne)|0,n=n+Math.imul(I,oe)|0,i=(i=i+Math.imul(I,se)|0)+Math.imul(R,oe)|0,o=o+Math.imul(R,se)|0,n=n+Math.imul(O,ce)|0,i=(i=i+Math.imul(O,ue)|0)+Math.imul(M,ce)|0,o=o+Math.imul(M,ue)|0,n=n+Math.imul(P,le)|0,i=(i=i+Math.imul(P,fe)|0)+Math.imul(N,le)|0,o=o+Math.imul(N,fe)|0;var Oe=(u+(n=n+Math.imul(_,pe)|0)|0)+((8191&(i=(i=i+Math.imul(_,ye)|0)+Math.imul(k,pe)|0))<<13)|0;u=((o=o+Math.imul(k,ye)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,n=Math.imul(D,re),i=(i=Math.imul(D,ne))+Math.imul(j,re)|0,o=Math.imul(j,ne),n=n+Math.imul(C,oe)|0,i=(i=i+Math.imul(C,se)|0)+Math.imul(K,oe)|0,o=o+Math.imul(K,se)|0,n=n+Math.imul(I,ce)|0,i=(i=i+Math.imul(I,ue)|0)+Math.imul(R,ce)|0,o=o+Math.imul(R,ue)|0,n=n+Math.imul(O,le)|0,i=(i=i+Math.imul(O,fe)|0)+Math.imul(M,le)|0,o=o+Math.imul(M,fe)|0;var Me=(u+(n=n+Math.imul(P,pe)|0)|0)+((8191&(i=(i=i+Math.imul(P,ye)|0)+Math.imul(N,pe)|0))<<13)|0;u=((o=o+Math.imul(N,ye)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,n=Math.imul(D,oe),i=(i=Math.imul(D,se))+Math.imul(j,oe)|0,o=Math.imul(j,se),n=n+Math.imul(C,ce)|0,i=(i=i+Math.imul(C,ue)|0)+Math.imul(K,ce)|0,o=o+Math.imul(K,ue)|0,n=n+Math.imul(I,le)|0,i=(i=i+Math.imul(I,fe)|0)+Math.imul(R,le)|0,o=o+Math.imul(R,fe)|0;var Te=(u+(n=n+Math.imul(O,pe)|0)|0)+((8191&(i=(i=i+Math.imul(O,ye)|0)+Math.imul(M,pe)|0))<<13)|0;u=((o=o+Math.imul(M,ye)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(D,ce),i=(i=Math.imul(D,ue))+Math.imul(j,ce)|0,o=Math.imul(j,ue),n=n+Math.imul(C,le)|0,i=(i=i+Math.imul(C,fe)|0)+Math.imul(K,le)|0,o=o+Math.imul(K,fe)|0;var Ie=(u+(n=n+Math.imul(I,pe)|0)|0)+((8191&(i=(i=i+Math.imul(I,ye)|0)+Math.imul(R,pe)|0))<<13)|0;u=((o=o+Math.imul(R,ye)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul(D,le),i=(i=Math.imul(D,fe))+Math.imul(j,le)|0,o=Math.imul(j,fe);var Re=(u+(n=n+Math.imul(C,pe)|0)|0)+((8191&(i=(i=i+Math.imul(C,ye)|0)+Math.imul(K,pe)|0))<<13)|0;u=((o=o+Math.imul(K,ye)|0)+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863;var Be=(u+(n=Math.imul(D,pe))|0)+((8191&(i=(i=Math.imul(D,ye))+Math.imul(j,pe)|0))<<13)|0;return u=((o=Math.imul(j,ye))+(i>>>13)|0)+(Be>>>26)|0,Be&=67108863,c[0]=me,c[1]=ge,c[2]=be,c[3]=ve,c[4]=we,c[5]=Ee,c[6]=Se,c[7]=_e,c[8]=ke,c[9]=Ae,c[10]=Pe,c[11]=Ne,c[12]=xe,c[13]=Oe,c[14]=Me,c[15]=Te,c[16]=Ie,c[17]=Re,c[18]=Be,0!==u&&(c[19]=u,r.length++),r};function y(e,t,r){return(new m).mulp(e,t,r)}function m(e,t){this.x=e,this.y=t}Math.imul||(p=h),o.prototype.mulTo=function(e,t){var r,n=this.length+e.length;return r=10===this.length&&10===e.length?p(this,e,t):n<63?h(this,e,t):n<1024?function(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,c=Math.min(o,t.length-1),u=Math.max(0,o-e.length+1);u<=c;u++){var d=o-u,l=(0|e.words[d])*(0|t.words[u]),f=67108863&l;a=67108863&(f=f+a|0),i+=(s=(s=s+(l/67108864|0)|0)+(f>>>26)|0)>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r.strip()}(this,e,t):y(this,e,t),r},m.prototype.makeRBT=function(e){for(var t=new Array(e),r=o.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},m.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,i=0;i<t;i++)n|=(1&e)<<t-i-1,e>>=1;return n},m.prototype.permute=function(e,t,r,n,i,o){for(var s=0;s<o;s++)n[s]=t[e[s]],i[s]=r[e[s]]},m.prototype.transform=function(e,t,r,n,i,o){this.permute(o,e,t,r,n,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,c=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),d=0;d<i;d+=a)for(var l=c,f=u,h=0;h<s;h++){var p=r[d+h],y=n[d+h],m=r[d+h+s],g=n[d+h+s],b=l*m-f*g;g=l*g+f*m,m=b,r[d+h]=p+m,n[d+h]=y+g,r[d+h+s]=p-m,n[d+h+s]=y-g,h!==a&&(b=c*l-u*f,f=c*f+u*l,l=b)}},m.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},m.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=e[n];e[n]=e[r-n-1],e[r-n-1]=i,i=t[n],t[n]=-t[r-n-1],t[r-n-1]=-i}},m.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var i=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=67108863&i,r=i<67108864?0:i/67108864|0}return e},m.prototype.convert13b=function(e,t,r,i){for(var o=0,s=0;s<t;s++)o+=0|e[s],r[2*s]=8191&o,o>>>=13,r[2*s+1]=8191&o,o>>>=13;for(s=2*t;s<i;++s)r[s]=0;n(0===o),n(0==(-8192&o))},m.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},m.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(n),o=this.stub(n),s=new Array(n),a=new Array(n),c=new Array(n),u=new Array(n),d=new Array(n),l=new Array(n),f=r.words;f.length=n,this.convert13b(e.words,e.length,s,n),this.convert13b(t.words,t.length,u,n),this.transform(s,o,a,c,n,i),this.transform(u,o,d,l,n,i);for(var h=0;h<n;h++){var p=a[h]*d[h]-c[h]*l[h];c[h]=a[h]*l[h]+c[h]*d[h],a[h]=p}return this.conjugate(a,c,n),this.transform(a,c,f,o,n,i),this.conjugate(f,o,n),this.normalize13b(f,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r.strip()},o.prototype.mul=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},o.prototype.mulf=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),y(this,e,t)},o.prototype.imul=function(e){return this.clone().mulTo(e,this)},o.prototype.imuln=function(e){n("number"==typeof e),n(e<67108864);for(var t=0,r=0;r<this.length;r++){var i=(0|this.words[r])*e,o=(67108863&i)+(67108863&t);t>>=26,t+=i/67108864|0,t+=o>>>26,this.words[r]=67108863&o}return 0!==t&&(this.words[r]=t,this.length++),this},o.prototype.muln=function(e){return this.clone().imuln(e)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,i=r%26;t[r]=(e.words[n]&1<<i)>>>i}return t}(e);if(0===t.length)return new o(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var i=r.sqr();n<t.length;n++,i=i.sqr())0!==t[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(e){n("number"==typeof e&&e>=0);var t,r=e%26,i=(e-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var s=0;for(t=0;t<this.length;t++){var a=this.words[t]&o,c=(0|this.words[t])-a<<r;this.words[t]=c|s,s=a>>>26-r}s&&(this.words[t]=s,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},o.prototype.iushrn=function(e,t,r){var i;n("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var o=e%26,s=Math.min((e-o)/26,this.length),a=67108863^67108863>>>o<<o,c=r;if(i-=s,i=Math.max(0,i),c){for(var u=0;u<s;u++)c.words[u]=this.words[u];c.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var d=0;for(u=this.length-1;u>=0&&(0!==d||u>=i);u--){var l=0|this.words[u];this.words[u]=d<<26-o|l>>>o,d=l&a}return c&&0!==d&&(c.words[c.length++]=d),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(e,t,r){return n(0===this.negative),this.iushrn(e,t,r)},o.prototype.shln=function(e){return this.clone().ishln(e)},o.prototype.ushln=function(e){return this.clone().iushln(e)},o.prototype.shrn=function(e){return this.clone().ishrn(e)},o.prototype.ushrn=function(e){return this.clone().iushrn(e)},o.prototype.testn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26,i=1<<t;return!(this.length<=r||!(this.words[r]&i))},o.prototype.imaskn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(e){return this.clone().imaskn(e)},o.prototype.iaddn=function(e){return n("number"==typeof e),n(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},o.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},o.prototype.isubn=function(e){if(n("number"==typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},o.prototype.addn=function(e){return this.clone().iaddn(e)},o.prototype.subn=function(e){return this.clone().isubn(e)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(e,t,r){var i,o,s=e.length+r;this._expand(s);var a=0;for(i=0;i<e.length;i++){o=(0|this.words[i+r])+a;var c=(0|e.words[i])*t;a=((o-=67108863&c)>>26)-(c/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)a=(o=(0|this.words[i+r])+a)>>26,this.words[i+r]=67108863&o;if(0===a)return this.strip();for(n(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(e,t){var r=(this.length,e.length),n=this.clone(),i=e,s=0|i.words[i.length-1];0!=(r=26-this._countBits(s))&&(i=i.ushln(r),n.iushln(r),s=0|i.words[i.length-1]);var a,c=n.length-i.length;if("mod"!==t){(a=new o(null)).length=c+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var d=n.clone()._ishlnsubmul(i,1,c);0===d.negative&&(n=d,a&&(a.words[c]=1));for(var l=c-1;l>=0;l--){var f=67108864*(0|n.words[i.length+l])+(0|n.words[i.length+l-1]);for(f=Math.min(f/s|0,67108863),n._ishlnsubmul(i,f,l);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(i,1,l),n.isZero()||(n.negative^=1);a&&(a.words[l]=f)}return a&&a.strip(),n.strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},o.prototype.divmod=function(e,t,r){return n(!e.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(i=a.div.neg()),"div"!==t&&(s=a.mod.neg(),r&&0!==s.negative&&s.iadd(e)),{div:i,mod:s}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(i=a.div.neg()),{div:i,mod:a.mod}):0!=(this.negative&e.negative)?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(s=a.mod.neg(),r&&0!==s.negative&&s.isub(e)),{div:a.div,mod:s}):e.length>this.length||this.cmp(e)<0?{div:new o(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new o(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new o(this.modn(e.words[0]))}:this._wordDiv(e,t);var i,s,a},o.prototype.div=function(e){return this.divmod(e,"div",!1).div},o.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},o.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},o.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),i=e.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},o.prototype.modn=function(e){n(e<=67108863);for(var t=(1<<26)%e,r=0,i=this.length-1;i>=0;i--)r=(t*r+(0|this.words[i]))%e;return r},o.prototype.idivn=function(e){n(e<=67108863);for(var t=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*t;this.words[r]=i/e|0,t=i%e}return this.strip()},o.prototype.divn=function(e){return this.clone().idivn(e)},o.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new o(1),s=new o(0),a=new o(0),c=new o(1),u=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++u;for(var d=r.clone(),l=t.clone();!t.isZero();){for(var f=0,h=1;0==(t.words[0]&h)&&f<26;++f,h<<=1);if(f>0)for(t.iushrn(f);f-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(d),s.isub(l)),i.iushrn(1),s.iushrn(1);for(var p=0,y=1;0==(r.words[0]&y)&&p<26;++p,y<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(a.isOdd()||c.isOdd())&&(a.iadd(d),c.isub(l)),a.iushrn(1),c.iushrn(1);t.cmp(r)>=0?(t.isub(r),i.isub(a),s.isub(c)):(r.isub(t),a.isub(i),c.isub(s))}return{a,b:c,gcd:r.iushln(u)}},o.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,s=new o(1),a=new o(0),c=r.clone();t.cmpn(1)>0&&r.cmpn(1)>0;){for(var u=0,d=1;0==(t.words[0]&d)&&u<26;++u,d<<=1);if(u>0)for(t.iushrn(u);u-- >0;)s.isOdd()&&s.iadd(c),s.iushrn(1);for(var l=0,f=1;0==(r.words[0]&f)&&l<26;++l,f<<=1);if(l>0)for(r.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);t.cmp(r)>=0?(t.isub(r),s.isub(a)):(r.isub(t),a.isub(s))}return(i=0===t.cmpn(1)?s:a).cmpn(0)<0&&i.iadd(e),i},o.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=t.cmp(r);if(i<0){var o=t;t=r,r=o}else if(0===i||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},o.prototype.invm=function(e){return this.egcd(e).a.umod(e)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(e){return this.words[0]&e},o.prototype.bincn=function(e){n("number"==typeof e);var t=e%26,r=(e-t)/26,i=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,s=r;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)t=1;else{r&&(e=-e),n(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},o.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},o.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|e.words[r];if(n!==i){n<i?t=-1:n>i&&(t=1);break}}return t},o.prototype.gtn=function(e){return 1===this.cmpn(e)},o.prototype.gt=function(e){return 1===this.cmp(e)},o.prototype.gten=function(e){return this.cmpn(e)>=0},o.prototype.gte=function(e){return this.cmp(e)>=0},o.prototype.ltn=function(e){return-1===this.cmpn(e)},o.prototype.lt=function(e){return-1===this.cmp(e)},o.prototype.lten=function(e){return this.cmpn(e)<=0},o.prototype.lte=function(e){return this.cmp(e)<=0},o.prototype.eqn=function(e){return 0===this.cmpn(e)},o.prototype.eq=function(e){return 0===this.cmp(e)},o.red=function(e){return new _(e)},o.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(e){return this.red=e,this},o.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},o.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},o.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},o.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},o.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},o.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},o.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},o.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var g={k256:null,p224:null,p192:null,p25519:null};function b(e,t){this.name=e,this.p=new o(t,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function E(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function S(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function _(e){if("string"==typeof e){var t=o._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function k(e){_.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var e=new o(null);return e.words=new Array(Math.ceil(this.n/13)),e},b.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},b.prototype.split=function(e,t){e.iushrn(this.n,0,t)},b.prototype.imulK=function(e){return e.imul(this.k)},i(v,b),v.prototype.split=function(e,t){for(var r=4194303,n=Math.min(e.length,9),i=0;i<n;i++)t.words[i]=e.words[i];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var o=e.words[9];for(t.words[t.length++]=o&r,i=10;i<e.length;i++){var s=0|e.words[i];e.words[i-10]=(s&r)<<4|o>>>22,o=s}o>>>=22,e.words[i-10]=o,0===o&&e.length>10?e.length-=10:e.length-=9},v.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(w,b),i(E,b),i(S,b),S.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,i=67108863&n;n>>>=26,e.words[r]=i,t=n}return 0!==t&&(e.words[e.length++]=t),e},o._prime=function(e){if(g[e])return g[e];var t;if("k256"===e)t=new v;else if("p224"===e)t=new w;else if("p192"===e)t=new E;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new S}return g[e]=t,t},_.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},_.prototype._verify2=function(e,t){n(0==(e.negative|t.negative),"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},_.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},_.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},_.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},_.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},_.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},_.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},_.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},_.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},_.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},_.prototype.isqr=function(e){return this.imul(e,e.clone())},_.prototype.sqr=function(e){return this.mul(e,e)},_.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2==1),3===t){var r=this.m.add(new o(1)).iushrn(2);return this.pow(e,r)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);n(!i.isZero());var a=new o(1).toRed(this),c=a.redNeg(),u=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new o(2*d*d).toRed(this);0!==this.pow(d,u).cmp(c);)d.redIAdd(c);for(var l=this.pow(d,i),f=this.pow(e,i.addn(1).iushrn(1)),h=this.pow(e,i),p=s;0!==h.cmp(a);){for(var y=h,m=0;0!==y.cmp(a);m++)y=y.redSqr();n(m<p);var g=this.pow(l,new o(1).iushln(p-m-1));f=f.redMul(g),l=g.redSqr(),h=h.redMul(l),p=m}return f},_.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},_.prototype.pow=function(e,t){if(t.isZero())return new o(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var i=r[0],s=0,a=0,c=t.bitLength()%26;for(0===c&&(c=26),n=t.length-1;n>=0;n--){for(var u=t.words[n],d=c-1;d>=0;d--){var l=u>>d&1;i!==r[0]&&(i=this.sqr(i)),0!==l||0!==s?(s<<=1,s|=l,(4==++a||0===n&&0===d)&&(i=this.mul(i,r[s]),a=0,s=0)):a=0}c=26}return i},_.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},_.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},o.mont=function(e){return new k(e)},i(k,_),k.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},k.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},k.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},k.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new o(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},k.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e=r.nmd(e),this)},9931:(e,t,r)=>{var n;function i(e){this.rand=e}if(e.exports=function(e){return n||(n=new i(null)),n.generate(e)},e.exports.Rand=i,i.prototype.generate=function(e){return this._rand(e)},i.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),r=0;r<t.length;r++)t[r]=this.rand.getByte();return t},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?i.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?i.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:"object"==typeof window&&(i.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var o=r(9214);if("function"!=typeof o.randomBytes)throw new Error("Not supported");i.prototype._rand=function(e){return o.randomBytes(e)}}catch(e){}},6266:(e,t,r)=>{"use strict";var n=t;n.version=r(8597).i8,n.utils=r(953),n.rand=r(9931),n.curve=r(8254),n.curves=r(5427),n.ec=r(7954),n.eddsa=r(5980)},4918:(e,t,r)=>{"use strict";var n=r(3550),i=r(953),o=i.getNAF,s=i.getJSF,a=i.assert;function c(e,t){this.type=e,this.p=new n(t.p,16),this.red=t.prime?n.red(t.prime):n.mont(this.p),this.zero=new n(0).toRed(this.red),this.one=new n(1).toRed(this.red),this.two=new n(2).toRed(this.red),this.n=t.n&&new n(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function u(e,t){this.curve=e,this.type=t,this.precomputed=null}e.exports=c,c.prototype.point=function(){throw new Error("Not implemented")},c.prototype.validate=function(){throw new Error("Not implemented")},c.prototype._fixedNafMul=function(e,t){a(e.precomputed);var r=e._getDoubles(),n=o(t,1,this._bitLength),i=(1<<r.step+1)-(r.step%2==0?2:1);i/=3;var s,c,u=[];for(s=0;s<n.length;s+=r.step){c=0;for(var d=s+r.step-1;d>=s;d--)c=(c<<1)+n[d];u.push(c)}for(var l=this.jpoint(null,null,null),f=this.jpoint(null,null,null),h=i;h>0;h--){for(s=0;s<u.length;s++)(c=u[s])===h?f=f.mixedAdd(r.points[s]):c===-h&&(f=f.mixedAdd(r.points[s].neg()));l=l.add(f)}return l.toP()},c.prototype._wnafMul=function(e,t){var r=4,n=e._getNAFPoints(r);r=n.wnd;for(var i=n.points,s=o(t,r,this._bitLength),c=this.jpoint(null,null,null),u=s.length-1;u>=0;u--){for(var d=0;u>=0&&0===s[u];u--)d++;if(u>=0&&d++,c=c.dblp(d),u<0)break;var l=s[u];a(0!==l),c="affine"===e.type?l>0?c.mixedAdd(i[l-1>>1]):c.mixedAdd(i[-l-1>>1].neg()):l>0?c.add(i[l-1>>1]):c.add(i[-l-1>>1].neg())}return"affine"===e.type?c.toP():c},c.prototype._wnafMulAdd=function(e,t,r,n,i){var a,c,u,d=this._wnafT1,l=this._wnafT2,f=this._wnafT3,h=0;for(a=0;a<n;a++){var p=(u=t[a])._getNAFPoints(e);d[a]=p.wnd,l[a]=p.points}for(a=n-1;a>=1;a-=2){var y=a-1,m=a;if(1===d[y]&&1===d[m]){var g=[t[y],null,null,t[m]];0===t[y].y.cmp(t[m].y)?(g[1]=t[y].add(t[m]),g[2]=t[y].toJ().mixedAdd(t[m].neg())):0===t[y].y.cmp(t[m].y.redNeg())?(g[1]=t[y].toJ().mixedAdd(t[m]),g[2]=t[y].add(t[m].neg())):(g[1]=t[y].toJ().mixedAdd(t[m]),g[2]=t[y].toJ().mixedAdd(t[m].neg()));var b=[-3,-1,-5,-7,0,7,5,1,3],v=s(r[y],r[m]);for(h=Math.max(v[0].length,h),f[y]=new Array(h),f[m]=new Array(h),c=0;c<h;c++){var w=0|v[0][c],E=0|v[1][c];f[y][c]=b[3*(w+1)+(E+1)],f[m][c]=0,l[y]=g}}else f[y]=o(r[y],d[y],this._bitLength),f[m]=o(r[m],d[m],this._bitLength),h=Math.max(f[y].length,h),h=Math.max(f[m].length,h)}var S=this.jpoint(null,null,null),_=this._wnafT4;for(a=h;a>=0;a--){for(var k=0;a>=0;){var A=!0;for(c=0;c<n;c++)_[c]=0|f[c][a],0!==_[c]&&(A=!1);if(!A)break;k++,a--}if(a>=0&&k++,S=S.dblp(k),a<0)break;for(c=0;c<n;c++){var P=_[c];0!==P&&(P>0?u=l[c][P-1>>1]:P<0&&(u=l[c][-P-1>>1].neg()),S="affine"===u.type?S.mixedAdd(u):S.add(u))}}for(a=0;a<n;a++)l[a]=null;return i?S:S.toP()},c.BasePoint=u,u.prototype.eq=function(){throw new Error("Not implemented")},u.prototype.validate=function(){return this.curve.validate(this)},c.prototype.decodePoint=function(e,t){e=i.toArray(e,t);var r=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*r)return 6===e[0]?a(e[e.length-1]%2==0):7===e[0]&&a(e[e.length-1]%2==1),this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));if((2===e[0]||3===e[0])&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),3===e[0]);throw new Error("Unknown point format")},u.prototype.encodeCompressed=function(e){return this.encode(e,!0)},u.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))},u.prototype.encode=function(e,t){return i.encode(this._encode(t),e)},u.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},u.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},u.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;i<t;i+=e){for(var o=0;o<e;o++)n=n.dbl();r.push(n)}return{step:e,points:r}},u.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,n=1===r?null:this.dbl(),i=1;i<r;i++)t[i]=t[i-1].add(n);return{wnd:e,points:t}},u.prototype._getBeta=function(){return null},u.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t}},1138:(e,t,r)=>{"use strict";var n=r(953),i=r(3550),o=r(5717),s=r(4918),a=n.assert;function c(e){this.twisted=1!=(0|e.a),this.mOneA=this.twisted&&-1==(0|e.a),this.extended=this.mOneA,s.call(this,"edwards",e),this.a=new i(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new i(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new i(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),a(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|e.c)}function u(e,t,r,n,o){s.BasePoint.call(this,e,"projective"),null===t&&null===r&&null===n?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new i(t,16),this.y=new i(r,16),this.z=n?new i(n,16):this.curve.one,this.t=o&&new i(o,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}o(c,s),e.exports=c,c.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},c.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},c.prototype.jpoint=function(e,t,r,n){return this.point(e,t,r,n)},c.prototype.pointFromX=function(e,t){(e=new i(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),n=this.c2.redSub(this.a.redMul(r)),o=this.one.redSub(this.c2.redMul(this.d).redMul(r)),s=n.redMul(o.redInvm()),a=s.redSqrt();if(0!==a.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");var c=a.fromRed().isOdd();return(t&&!c||!t&&c)&&(a=a.redNeg()),this.point(e,a)},c.prototype.pointFromY=function(e,t){(e=new i(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),n=r.redSub(this.c2),o=r.redMul(this.d).redMul(this.c2).redSub(this.a),s=n.redMul(o.redInvm());if(0===s.cmp(this.zero)){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var a=s.redSqrt();if(0!==a.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");return a.fromRed().isOdd()!==t&&(a=a.redNeg()),this.point(a,e)},c.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),r=e.y.redSqr(),n=t.redMul(this.a).redAdd(r),i=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(r)));return 0===n.cmp(i)},o(u,s.BasePoint),c.prototype.pointFromJSON=function(e){return u.fromJSON(this,e)},c.prototype.point=function(e,t,r,n){return new u(this,e,t,r,n)},u.fromJSON=function(e,t){return new u(e,t[0],t[1],t[2])},u.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},u.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},u.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var n=this.curve._mulA(e),i=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),o=n.redAdd(t),s=o.redSub(r),a=n.redSub(t),c=i.redMul(s),u=o.redMul(a),d=i.redMul(a),l=s.redMul(o);return this.curve.point(c,u,l,d)},u.prototype._projDbl=function(){var e,t,r,n,i,o,s=this.x.redAdd(this.y).redSqr(),a=this.x.redSqr(),c=this.y.redSqr();if(this.curve.twisted){var u=(n=this.curve._mulA(a)).redAdd(c);this.zOne?(e=s.redSub(a).redSub(c).redMul(u.redSub(this.curve.two)),t=u.redMul(n.redSub(c)),r=u.redSqr().redSub(u).redSub(u)):(i=this.z.redSqr(),o=u.redSub(i).redISub(i),e=s.redSub(a).redISub(c).redMul(o),t=u.redMul(n.redSub(c)),r=u.redMul(o))}else n=a.redAdd(c),i=this.curve._mulC(this.z).redSqr(),o=n.redSub(i).redSub(i),e=this.curve._mulC(s.redISub(n)).redMul(o),t=this.curve._mulC(n).redMul(a.redISub(c)),r=n.redMul(o);return this.curve.point(e,t,r)},u.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},u.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),r=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),n=this.t.redMul(this.curve.dd).redMul(e.t),i=this.z.redMul(e.z.redAdd(e.z)),o=r.redSub(t),s=i.redSub(n),a=i.redAdd(n),c=r.redAdd(t),u=o.redMul(s),d=a.redMul(c),l=o.redMul(c),f=s.redMul(a);return this.curve.point(u,d,f,l)},u.prototype._projAdd=function(e){var t,r,n=this.z.redMul(e.z),i=n.redSqr(),o=this.x.redMul(e.x),s=this.y.redMul(e.y),a=this.curve.d.redMul(o).redMul(s),c=i.redSub(a),u=i.redAdd(a),d=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(o).redISub(s),l=n.redMul(c).redMul(d);return this.curve.twisted?(t=n.redMul(u).redMul(s.redSub(this.curve._mulA(o))),r=c.redMul(u)):(t=n.redMul(u).redMul(s.redSub(o)),r=this.curve._mulC(c).redMul(u)),this.curve.point(l,t,r)},u.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},u.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},u.prototype.mulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!1)},u.prototype.jmulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!0)},u.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},u.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},u.prototype.getX=function(){return this.normalize(),this.x.fromRed()},u.prototype.getY=function(){return this.normalize(),this.y.fromRed()},u.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},u.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var r=e.clone(),n=this.curve.redN.redMul(this.z);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(n),0===this.x.cmp(t))return!0}},u.prototype.toP=u.prototype.normalize,u.prototype.mixedAdd=u.prototype.add},8254:(e,t,r)=>{"use strict";var n=t;n.base=r(4918),n.short=r(6673),n.mont=r(2881),n.edwards=r(1138)},2881:(e,t,r)=>{"use strict";var n=r(3550),i=r(5717),o=r(4918),s=r(953);function a(e){o.call(this,"mont",e),this.a=new n(e.a,16).toRed(this.red),this.b=new n(e.b,16).toRed(this.red),this.i4=new n(4).toRed(this.red).redInvm(),this.two=new n(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function c(e,t,r){o.BasePoint.call(this,e,"projective"),null===t&&null===r?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new n(t,16),this.z=new n(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}i(a,o),e.exports=a,a.prototype.validate=function(e){var t=e.normalize().x,r=t.redSqr(),n=r.redMul(t).redAdd(r.redMul(this.a)).redAdd(t);return 0===n.redSqrt().redSqr().cmp(n)},i(c,o.BasePoint),a.prototype.decodePoint=function(e,t){return this.point(s.toArray(e,t),1)},a.prototype.point=function(e,t){return new c(this,e,t)},a.prototype.pointFromJSON=function(e){return c.fromJSON(this,e)},c.prototype.precompute=function(){},c.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},c.fromJSON=function(e,t){return new c(e,t[0],t[1]||e.one)},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},c.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),r=e.redSub(t),n=e.redMul(t),i=r.redMul(t.redAdd(this.curve.a24.redMul(r)));return this.curve.point(n,i)},c.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.diffAdd=function(e,t){var r=this.x.redAdd(this.z),n=this.x.redSub(this.z),i=e.x.redAdd(e.z),o=e.x.redSub(e.z).redMul(r),s=i.redMul(n),a=t.z.redMul(o.redAdd(s).redSqr()),c=t.x.redMul(o.redISub(s).redSqr());return this.curve.point(a,c)},c.prototype.mul=function(e){for(var t=e.clone(),r=this,n=this.curve.point(null,null),i=[];0!==t.cmpn(0);t.iushrn(1))i.push(t.andln(1));for(var o=i.length-1;o>=0;o--)0===i[o]?(r=r.diffAdd(n,this),n=n.dbl()):(n=r.diffAdd(n,this),r=r.dbl());return n},c.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},c.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},c.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},6673:(e,t,r)=>{"use strict";var n=r(953),i=r(3550),o=r(5717),s=r(4918),a=n.assert;function c(e){s.call(this,"short",e),this.a=new i(e.a,16).toRed(this.red),this.b=new i(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function u(e,t,r,n){s.BasePoint.call(this,e,"affine"),null===t&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new i(t,16),this.y=new i(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function d(e,t,r,n){s.BasePoint.call(this,e,"jacobian"),null===t&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new i(0)):(this.x=new i(t,16),this.y=new i(r,16),this.z=new i(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}o(c,s),e.exports=c,c.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,r;if(e.beta)t=new i(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);t=(t=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(e.lambda)r=new i(e.lambda,16);else{var o=this._getEndoRoots(this.n);0===this.g.mul(o[0]).x.cmp(this.g.x.redMul(t))?r=o[0]:(r=o[1],a(0===this.g.mul(r).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:r,basis:e.basis?e.basis.map((function(e){return{a:new i(e.a,16),b:new i(e.b,16)}})):this._getEndoBasis(r)}}},c.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:i.mont(e),r=new i(2).toRed(t).redInvm(),n=r.redNeg(),o=new i(3).toRed(t).redNeg().redSqrt().redMul(r);return[n.redAdd(o).fromRed(),n.redSub(o).fromRed()]},c.prototype._getEndoBasis=function(e){for(var t,r,n,o,s,a,c,u,d,l=this.n.ushrn(Math.floor(this.n.bitLength()/2)),f=e,h=this.n.clone(),p=new i(1),y=new i(0),m=new i(0),g=new i(1),b=0;0!==f.cmpn(0);){var v=h.div(f);u=h.sub(v.mul(f)),d=m.sub(v.mul(p));var w=g.sub(v.mul(y));if(!n&&u.cmp(l)<0)t=c.neg(),r=p,n=u.neg(),o=d;else if(n&&2==++b)break;c=u,h=f,f=u,m=p,p=d,g=y,y=w}s=u.neg(),a=d;var E=n.sqr().add(o.sqr());return s.sqr().add(a.sqr()).cmp(E)>=0&&(s=t,a=r),n.negative&&(n=n.neg(),o=o.neg()),s.negative&&(s=s.neg(),a=a.neg()),[{a:n,b:o},{a:s,b:a}]},c.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],n=t[1],i=n.b.mul(e).divRound(this.n),o=r.b.neg().mul(e).divRound(this.n),s=i.mul(r.a),a=o.mul(n.a),c=i.mul(r.b),u=o.mul(n.b);return{k1:e.sub(s).sub(a),k2:c.add(u).neg()}},c.prototype.pointFromX=function(e,t){(e=new i(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(0!==n.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var o=n.fromRed().isOdd();return(t&&!o||!t&&o)&&(n=n.redNeg()),this.point(e,n)},c.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,n=this.a.redMul(t),i=t.redSqr().redMul(t).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(i).cmpn(0)},c.prototype._endoWnafMulAdd=function(e,t,r){for(var n=this._endoWnafT1,i=this._endoWnafT2,o=0;o<e.length;o++){var s=this._endoSplit(t[o]),a=e[o],c=a._getBeta();s.k1.negative&&(s.k1.ineg(),a=a.neg(!0)),s.k2.negative&&(s.k2.ineg(),c=c.neg(!0)),n[2*o]=a,n[2*o+1]=c,i[2*o]=s.k1,i[2*o+1]=s.k2}for(var u=this._wnafMulAdd(1,n,i,2*o,r),d=0;d<2*o;d++)n[d]=null,i[d]=null;return u},o(u,s.BasePoint),c.prototype.point=function(e,t,r){return new u(this,e,t,r)},c.prototype.pointFromJSON=function(e,t){return u.fromJSON(this,e,t)},u.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,n=function(e){return r.point(e.x.redMul(r.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return t}},u.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},u.fromJSON=function(e,t,r){"string"==typeof t&&(t=JSON.parse(t));var n=e.point(t[0],t[1],r);if(!t[2])return n;function i(t){return e.point(t[0],t[1],r)}var o=t[2];return n.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[n].concat(o.doubles.points.map(i))},naf:o.naf&&{wnd:o.naf.wnd,points:[n].concat(o.naf.points.map(i))}},n},u.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},u.prototype.isInfinity=function(){return this.inf},u.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),n=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},u.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),n=e.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(n),o=i.redSqr().redISub(this.x.redAdd(this.x)),s=i.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,s)},u.prototype.getX=function(){return this.x.fromRed()},u.prototype.getY=function(){return this.y.fromRed()},u.prototype.mul=function(e){return e=new i(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},u.prototype.mulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},u.prototype.jmulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i,!0):this.curve._wnafMulAdd(1,n,i,2,!0)},u.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},u.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,n=function(e){return e.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return t},u.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},o(d,s.BasePoint),c.prototype.jpoint=function(e,t,r){return new d(this,e,t,r)},d.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),n=this.y.redMul(t).redMul(e);return this.curve.point(r,n)},d.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},d.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(t),i=e.x.redMul(r),o=this.y.redMul(t.redMul(e.z)),s=e.y.redMul(r.redMul(this.z)),a=n.redSub(i),c=o.redSub(s);if(0===a.cmpn(0))return 0!==c.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),d=u.redMul(a),l=n.redMul(u),f=c.redSqr().redIAdd(d).redISub(l).redISub(l),h=c.redMul(l.redISub(f)).redISub(o.redMul(d)),p=this.z.redMul(e.z).redMul(a);return this.curve.jpoint(f,h,p)},d.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,n=e.x.redMul(t),i=this.y,o=e.y.redMul(t).redMul(this.z),s=r.redSub(n),a=i.redSub(o);if(0===s.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=s.redSqr(),u=c.redMul(s),d=r.redMul(c),l=a.redSqr().redIAdd(u).redISub(d).redISub(d),f=a.redMul(d.redISub(l)).redISub(i.redMul(u)),h=this.z.redMul(s);return this.curve.jpoint(l,f,h)},d.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var r=this;for(t=0;t<e;t++)r=r.dbl();return r}var n=this.curve.a,i=this.curve.tinv,o=this.x,s=this.y,a=this.z,c=a.redSqr().redSqr(),u=s.redAdd(s);for(t=0;t<e;t++){var d=o.redSqr(),l=u.redSqr(),f=l.redSqr(),h=d.redAdd(d).redIAdd(d).redIAdd(n.redMul(c)),p=o.redMul(l),y=h.redSqr().redISub(p.redAdd(p)),m=p.redISub(y),g=h.redMul(m);g=g.redIAdd(g).redISub(f);var b=u.redMul(a);t+1<e&&(c=c.redMul(f)),o=y,a=b,u=g}return this.curve.jpoint(o,u.redMul(i),a)},d.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},d.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(n).redISub(o);s=s.redIAdd(s);var a=n.redAdd(n).redIAdd(n),c=a.redSqr().redISub(s).redISub(s),u=o.redIAdd(o);u=(u=u.redIAdd(u)).redIAdd(u),e=c,t=a.redMul(s.redISub(c)).redISub(u),r=this.y.redAdd(this.y)}else{var d=this.x.redSqr(),l=this.y.redSqr(),f=l.redSqr(),h=this.x.redAdd(l).redSqr().redISub(d).redISub(f);h=h.redIAdd(h);var p=d.redAdd(d).redIAdd(d),y=p.redSqr(),m=f.redIAdd(f);m=(m=m.redIAdd(m)).redIAdd(m),e=y.redISub(h).redISub(h),t=p.redMul(h.redISub(e)).redISub(m),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(e,t,r)},d.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(n).redISub(o);s=s.redIAdd(s);var a=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),c=a.redSqr().redISub(s).redISub(s);e=c;var u=o.redIAdd(o);u=(u=u.redIAdd(u)).redIAdd(u),t=a.redMul(s.redISub(c)).redISub(u),r=this.y.redAdd(this.y)}else{var d=this.z.redSqr(),l=this.y.redSqr(),f=this.x.redMul(l),h=this.x.redSub(d).redMul(this.x.redAdd(d));h=h.redAdd(h).redIAdd(h);var p=f.redIAdd(f),y=(p=p.redIAdd(p)).redAdd(p);e=h.redSqr().redISub(y),r=this.y.redAdd(this.z).redSqr().redISub(l).redISub(d);var m=l.redSqr();m=(m=(m=m.redIAdd(m)).redIAdd(m)).redIAdd(m),t=h.redMul(p.redISub(e)).redISub(m)}return this.curve.jpoint(e,t,r)},d.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),o=t.redSqr(),s=r.redSqr(),a=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(i)),c=t.redAdd(t),u=(c=c.redIAdd(c)).redMul(s),d=a.redSqr().redISub(u.redAdd(u)),l=u.redISub(d),f=s.redSqr();f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var h=a.redMul(l).redISub(f),p=r.redAdd(r).redMul(n);return this.curve.jpoint(d,h,p)},d.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),n=t.redSqr(),i=e.redAdd(e).redIAdd(e),o=i.redSqr(),s=this.x.redAdd(t).redSqr().redISub(e).redISub(n),a=(s=(s=(s=s.redIAdd(s)).redAdd(s).redIAdd(s)).redISub(o)).redSqr(),c=n.redIAdd(n);c=(c=(c=c.redIAdd(c)).redIAdd(c)).redIAdd(c);var u=i.redIAdd(s).redSqr().redISub(o).redISub(a).redISub(c),d=t.redMul(u);d=(d=d.redIAdd(d)).redIAdd(d);var l=this.x.redMul(a).redISub(d);l=(l=l.redIAdd(l)).redIAdd(l);var f=this.y.redMul(u.redMul(c.redISub(u)).redISub(s.redMul(a)));f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var h=this.z.redAdd(s).redSqr().redISub(r).redISub(a);return this.curve.jpoint(l,f,h)},d.prototype.mul=function(e,t){return e=new i(e,t),this.curve._wnafMul(this,e)},d.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var n=t.redMul(this.z),i=r.redMul(e.z);return 0===this.y.redMul(i).redISub(e.y.redMul(n)).cmpn(0)},d.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(r))return!0;for(var n=e.clone(),i=this.curve.redN.redMul(t);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),0===this.x.cmp(r))return!0}},d.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},d.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},5427:(e,t,r)=>{"use strict";var n,i=t,o=r(3715),s=r(8254),a=r(953).assert;function c(e){"short"===e.type?this.curve=new s.short(e):"edwards"===e.type?this.curve=new s.edwards(e):this.curve=new s.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,a(this.g.validate(),"Invalid curve"),a(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function u(e,t){Object.defineProperty(i,e,{configurable:!0,enumerable:!0,get:function(){var r=new c(t);return Object.defineProperty(i,e,{configurable:!0,enumerable:!0,value:r}),r}})}i.PresetCurve=c,u("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:o.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),u("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:o.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),u("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:o.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),u("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:o.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),u("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:o.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),u("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["9"]}),u("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{n=r(1037)}catch(e){n=void 0}u("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:o.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",n]})},7954:(e,t,r)=>{"use strict";var n=r(3550),i=r(2156),o=r(953),s=r(5427),a=r(9931),c=o.assert,u=r(1251),d=r(611);function l(e){if(!(this instanceof l))return new l(e);"string"==typeof e&&(c(Object.prototype.hasOwnProperty.call(s,e),"Unknown curve "+e),e=s[e]),e instanceof s.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}e.exports=l,l.prototype.keyPair=function(e){return new u(this,e)},l.prototype.keyFromPrivate=function(e,t){return u.fromPrivate(this,e,t)},l.prototype.keyFromPublic=function(e,t){return u.fromPublic(this,e,t)},l.prototype.genKeyPair=function(e){e||(e={});for(var t=new i({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||a(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),o=this.n.sub(new n(2));;){var s=new n(t.generate(r));if(!(s.cmp(o)>0))return s.iaddn(1),this.keyFromPrivate(s)}},l.prototype._truncateToN=function(e,t){var r=8*e.byteLength()-this.n.bitLength();return r>0&&(e=e.ushrn(r)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},l.prototype.sign=function(e,t,r,o){"object"==typeof r&&(o=r,r=null),o||(o={}),t=this.keyFromPrivate(t,r),e=this._truncateToN(new n(e,16));for(var s=this.n.byteLength(),a=t.getPrivate().toArray("be",s),c=e.toArray("be",s),u=new i({hash:this.hash,entropy:a,nonce:c,pers:o.pers,persEnc:o.persEnc||"utf8"}),l=this.n.sub(new n(1)),f=0;;f++){var h=o.k?o.k(f):new n(u.generate(this.n.byteLength()));if(!((h=this._truncateToN(h,!0)).cmpn(1)<=0||h.cmp(l)>=0)){var p=this.g.mul(h);if(!p.isInfinity()){var y=p.getX(),m=y.umod(this.n);if(0!==m.cmpn(0)){var g=h.invm(this.n).mul(m.mul(t.getPrivate()).iadd(e));if(0!==(g=g.umod(this.n)).cmpn(0)){var b=(p.getY().isOdd()?1:0)|(0!==y.cmp(m)?2:0);return o.canonical&&g.cmp(this.nh)>0&&(g=this.n.sub(g),b^=1),new d({r:m,s:g,recoveryParam:b})}}}}}},l.prototype.verify=function(e,t,r,i){e=this._truncateToN(new n(e,16)),r=this.keyFromPublic(r,i);var o=(t=new d(t,"hex")).r,s=t.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var a,c=s.invm(this.n),u=c.mul(e).umod(this.n),l=c.mul(o).umod(this.n);return this.curve._maxwellTrick?!(a=this.g.jmulAdd(u,r.getPublic(),l)).isInfinity()&&a.eqXToP(o):!(a=this.g.mulAdd(u,r.getPublic(),l)).isInfinity()&&0===a.getX().umod(this.n).cmp(o)},l.prototype.recoverPubKey=function(e,t,r,i){c((3&r)===r,"The recovery param is more than two bits"),t=new d(t,i);var o=this.n,s=new n(e),a=t.r,u=t.s,l=1&r,f=r>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&f)throw new Error("Unable to find sencond key candinate");a=f?this.curve.pointFromX(a.add(this.curve.n),l):this.curve.pointFromX(a,l);var h=t.r.invm(o),p=o.sub(s).mul(h).umod(o),y=u.mul(h).umod(o);return this.g.mulAdd(p,a,y)},l.prototype.getKeyRecoveryParam=function(e,t,r,n){if(null!==(t=new d(t,n)).recoveryParam)return t.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(e,t,i)}catch(e){continue}if(o.eq(r))return i}throw new Error("Unable to find valid recovery factor")}},1251:(e,t,r)=>{"use strict";var n=r(3550),i=r(953).assert;function o(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}e.exports=o,o.fromPublic=function(e,t,r){return t instanceof o?t:new o(e,{pub:t,pubEnc:r})},o.fromPrivate=function(e,t,r){return t instanceof o?t:new o(e,{priv:t,privEnc:r})},o.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},o.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},o.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},o.prototype._importPrivate=function(e,t){this.priv=new n(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},o.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?i(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||i(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},o.prototype.derive=function(e){return e.validate()||i(e.validate(),"public point not validated"),e.mul(this.priv).getX()},o.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},o.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},o.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},611:(e,t,r)=>{"use strict";var n=r(3550),i=r(953),o=i.assert;function s(e,t){if(e instanceof s)return e;this._importDER(e,t)||(o(e.r&&e.s,"Signature without r or s"),this.r=new n(e.r,16),this.s=new n(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}function a(){this.place=0}function c(e,t){var r=e[t.place++];if(!(128&r))return r;var n=15&r;if(0===n||n>4)return!1;for(var i=0,o=0,s=t.place;o<n;o++,s++)i<<=8,i|=e[s],i>>>=0;return!(i<=127)&&(t.place=s,i)}function u(e){for(var t=0,r=e.length-1;!e[t]&&!(128&e[t+1])&&t<r;)t++;return 0===t?e:e.slice(t)}function d(e,t){if(t<128)e.push(t);else{var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|r);--r;)e.push(t>>>(r<<3)&255);e.push(t)}}e.exports=s,s.prototype._importDER=function(e,t){e=i.toArray(e,t);var r=new a;if(48!==e[r.place++])return!1;var o=c(e,r);if(!1===o)return!1;if(o+r.place!==e.length)return!1;if(2!==e[r.place++])return!1;var s=c(e,r);if(!1===s)return!1;var u=e.slice(r.place,s+r.place);if(r.place+=s,2!==e[r.place++])return!1;var d=c(e,r);if(!1===d)return!1;if(e.length!==d+r.place)return!1;var l=e.slice(r.place,d+r.place);if(0===u[0]){if(!(128&u[1]))return!1;u=u.slice(1)}if(0===l[0]){if(!(128&l[1]))return!1;l=l.slice(1)}return this.r=new n(u),this.s=new n(l),this.recoveryParam=null,!0},s.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&r[0]&&(r=[0].concat(r)),t=u(t),r=u(r);!(r[0]||128&r[1]);)r=r.slice(1);var n=[2];d(n,t.length),(n=n.concat(t)).push(2),d(n,r.length);var o=n.concat(r),s=[48];return d(s,o.length),s=s.concat(o),i.encode(s,e)}},5980:(e,t,r)=>{"use strict";var n=r(3715),i=r(5427),o=r(953),s=o.assert,a=o.parseBytes,c=r(9087),u=r(3622);function d(e){if(s("ed25519"===e,"only tested with ed25519 so far"),!(this instanceof d))return new d(e);e=i[e].curve,this.curve=e,this.g=e.g,this.g.precompute(e.n.bitLength()+1),this.pointClass=e.point().constructor,this.encodingLength=Math.ceil(e.n.bitLength()/8),this.hash=n.sha512}e.exports=d,d.prototype.sign=function(e,t){e=a(e);var r=this.keyFromSecret(t),n=this.hashInt(r.messagePrefix(),e),i=this.g.mul(n),o=this.encodePoint(i),s=this.hashInt(o,r.pubBytes(),e).mul(r.priv()),c=n.add(s).umod(this.curve.n);return this.makeSignature({R:i,S:c,Rencoded:o})},d.prototype.verify=function(e,t,r){e=a(e),t=this.makeSignature(t);var n=this.keyFromPublic(r),i=this.hashInt(t.Rencoded(),n.pubBytes(),e),o=this.g.mul(t.S());return t.R().add(n.pub().mul(i)).eq(o)},d.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return o.intFromLE(e.digest()).umod(this.curve.n)},d.prototype.keyFromPublic=function(e){return c.fromPublic(this,e)},d.prototype.keyFromSecret=function(e){return c.fromSecret(this,e)},d.prototype.makeSignature=function(e){return e instanceof u?e:new u(this,e)},d.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t},d.prototype.decodePoint=function(e){var t=(e=o.parseBytes(e)).length-1,r=e.slice(0,t).concat(-129&e[t]),n=0!=(128&e[t]),i=o.intFromLE(r);return this.curve.pointFromY(i,n)},d.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},d.prototype.decodeInt=function(e){return o.intFromLE(e)},d.prototype.isPoint=function(e){return e instanceof this.pointClass}},9087:(e,t,r)=>{"use strict";var n=r(953),i=n.assert,o=n.parseBytes,s=n.cachedProperty;function a(e,t){this.eddsa=e,this._secret=o(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=o(t.pub)}a.fromPublic=function(e,t){return t instanceof a?t:new a(e,{pub:t})},a.fromSecret=function(e,t){return t instanceof a?t:new a(e,{secret:t})},a.prototype.secret=function(){return this._secret},s(a,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),s(a,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),s(a,"privBytes",(function(){var e=this.eddsa,t=this.hash(),r=e.encodingLength-1,n=t.slice(0,e.encodingLength);return n[0]&=248,n[r]&=127,n[r]|=64,n})),s(a,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),s(a,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),s(a,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),a.prototype.sign=function(e){return i(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},a.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},a.prototype.getSecret=function(e){return i(this._secret,"KeyPair is public only"),n.encode(this.secret(),e)},a.prototype.getPublic=function(e){return n.encode(this.pubBytes(),e)},e.exports=a},3622:(e,t,r)=>{"use strict";var n=r(3550),i=r(953),o=i.assert,s=i.cachedProperty,a=i.parseBytes;function c(e,t){this.eddsa=e,"object"!=typeof t&&(t=a(t)),Array.isArray(t)&&(t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),o(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof n&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}s(c,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),s(c,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),s(c,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),s(c,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),c.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},c.prototype.toHex=function(){return i.encode(this.toBytes(),"hex").toUpperCase()},e.exports=c},1037:e=>{e.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},953:(e,t,r)=>{"use strict";var n=t,i=r(3550),o=r(9746),s=r(4504);n.assert=o,n.toArray=s.toArray,n.zero2=s.zero2,n.toHex=s.toHex,n.encode=s.encode,n.getNAF=function(e,t,r){var n=new Array(Math.max(e.bitLength(),r)+1);n.fill(0);for(var i=1<<t+1,o=e.clone(),s=0;s<n.length;s++){var a,c=o.andln(i-1);o.isOdd()?(a=c>(i>>1)-1?(i>>1)-c:c,o.isubn(a)):a=0,n[s]=a,o.iushrn(1)}return n},n.getJSF=function(e,t){var r=[[],[]];e=e.clone(),t=t.clone();for(var n,i=0,o=0;e.cmpn(-i)>0||t.cmpn(-o)>0;){var s,a,c=e.andln(3)+i&3,u=t.andln(3)+o&3;3===c&&(c=-1),3===u&&(u=-1),s=0==(1&c)?0:3!=(n=e.andln(7)+i&7)&&5!==n||2!==u?c:-c,r[0].push(s),a=0==(1&u)?0:3!=(n=t.andln(7)+o&7)&&5!==n||2!==c?u:-u,r[1].push(a),2*i===s+1&&(i=1-i),2*o===a+1&&(o=1-o),e.iushrn(1),t.iushrn(1)}return r},n.cachedProperty=function(e,t,r){var n="_"+t;e.prototype[t]=function(){return void 0!==this[n]?this[n]:this[n]=r.call(this)}},n.parseBytes=function(e){return"string"==typeof e?n.toArray(e,"hex"):e},n.intFromLE=function(e){return new i(e,"hex","le")}},9982:(e,t,r)=>{"use strict";r.r(t),r.d(t,{BaseContract:()=>In,BigNumber:()=>W,Contract:()=>Rn,ContractFactory:()=>Bn,FixedNumber:()=>zn,Signer:()=>cr,VoidSigner:()=>ur,Wallet:()=>vo,Wordlist:()=>Ei,constants:()=>i,errors:()=>m,ethers:()=>c,getDefaultProvider:()=>Ga,logger:()=>lc,providers:()=>o,utils:()=>a,version:()=>dc,wordlists:()=>Ai});var n={};r.r(n),r.d(n,{decode:()=>Pe,encode:()=>_e});var i={};r.r(i),r.d(i,{AddressZero:()=>So,EtherSymbol:()=>ko,HashZero:()=>_o,MaxInt256:()=>yt,MaxUint256:()=>ht,MinInt256:()=>pt,NegativeOne:()=>ct,One:()=>dt,Two:()=>lt,WeiPerEther:()=>ft,Zero:()=>ut});var o={};r.r(o),r.d(o,{AlchemyProvider:()=>na,AlchemyWebSocketProvider:()=>ra,BaseProvider:()=>Rs,CloudflareProvider:()=>oa,EtherscanProvider:()=>pa,FallbackProvider:()=>Oa,Formatter:()=>cs,InfuraProvider:()=>Ba,InfuraWebSocketProvider:()=>Ra,IpcProvider:()=>Ma,JsonRpcBatchProvider:()=>Ca,JsonRpcProvider:()=>zs,JsonRpcSigner:()=>qs,NodesmithProvider:()=>Ua,PocketProvider:()=>Fa,Provider:()=>nr,Resolver:()=>Ms,StaticJsonRpcProvider:()=>Ys,UrlJsonRpcProvider:()=>Qs,Web3Provider:()=>Ja,WebSocketProvider:()=>Zs,getDefaultProvider:()=>Ga,getNetwork:()=>Io,isCommunityResourcable:()=>us,isCommunityResource:()=>ds,showThrottleMessage:()=>fs});var s={};r.r(s),r.d(s,{decode:()=>$o,encode:()=>Zo});var a={};r.r(a),r.d(a,{AbiCoder:()=>zt,ConstructorFragment:()=>Bt,ErrorFragment:()=>Ut,EventFragment:()=>Mt,FormatTypes:()=>At,Fragment:()=>Ot,FunctionFragment:()=>Ct,HDNode:()=>Ki,Indexed:()=>Xt,Interface:()=>er,LogDescription:()=>Wt,Logger:()=>b,ParamType:()=>Nt,RLP:()=>n,SigningKey:()=>Xr,SupportedAlgorithm:()=>hi,TransactionDescription:()=>$t,TransactionTypes:()=>tn,UnicodeNormalizationForm:()=>je,Utf8ErrorFuncs:()=>qe,Utf8ErrorReason:()=>Fe,_TypedDataEncoder:()=>di,_fetchData:()=>ts,_toEscapedUtf8String:()=>Ge,accessListify:()=>ln,arrayify:()=>A,base58:()=>fi,base64:()=>s,checkProperties:()=>ne,checkResultErrors:()=>fe,commify:()=>oc,computeAddress:()=>an,computeHmac:()=>bi,computePublicKey:()=>Qr,concat:()=>P,deepCopy:()=>ce,defaultAbiCoder:()=>Gt,defaultPath:()=>Ci,defineReadOnly:()=>ee,entropyToMnemonic:()=>ji,fetchJson:()=>rs,formatBytes32String:()=>tc,formatEther:()=>cc,formatUnits:()=>sc,getAccountPath:()=>Li,getAddress:()=>Re,getContractAddress:()=>Ke,getCreate2Address:()=>Ue,getIcapAddress:()=>Ce,getJsonWalletAddress:()=>oo,getStatic:()=>te,hashMessage:()=>Wn,hexConcat:()=>B,hexDataLength:()=>I,hexDataSlice:()=>R,hexStripZeros:()=>K,hexValue:()=>C,hexZeroPad:()=>U,hexlify:()=>T,id:()=>Ze,isAddress:()=>Be,isBytes:()=>k,isBytesLike:()=>S,isHexString:()=>O,isValidMnemonic:()=>Fi,isValidName:()=>Ho,joinSignature:()=>j,keccak256:()=>be,mnemonicToEntropy:()=>Di,mnemonicToSeed:()=>Ui,namehash:()=>Wo,nameprep:()=>Vo,parseBytes32String:()=>rc,parseEther:()=>uc,parseTransaction:()=>gn,parseUnits:()=>ac,poll:()=>ns,randomBytes:()=>zi,recoverAddress:()=>cn,recoverPublicKey:()=>Yr,resolveProperties:()=>re,ripemd160:()=>yi,serializeTransaction:()=>yn,sha256:()=>mi,sha512:()=>gi,shallowCopy:()=>ie,shuffled:()=>ya,solidityKeccak256:()=>Qa,solidityPack:()=>Ya,soliditySha256:()=>ec,splitSignature:()=>D,stripZeros:()=>N,toUtf8Bytes:()=>Je,toUtf8CodePoints:()=>$e,toUtf8String:()=>We,verifyMessage:()=>wo,verifyTypedData:()=>Eo,zeroPad:()=>x});var c={};r.r(c),r.d(c,{BaseContract:()=>In,BigNumber:()=>W,Contract:()=>Rn,ContractFactory:()=>Bn,FixedNumber:()=>zn,Signer:()=>cr,VoidSigner:()=>ur,Wallet:()=>vo,Wordlist:()=>Ei,constants:()=>i,errors:()=>m,getDefaultProvider:()=>Ga,logger:()=>lc,providers:()=>o,utils:()=>a,version:()=>dc,wordlists:()=>Ai});let u=!1,d=!1;const l={debug:1,default:2,info:2,warning:3,error:4,off:5};let f=l.default,h=null;const p=function(){try{const e=[];if(["NFD","NFC","NFKD","NFKC"].forEach((t=>{try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}})),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(e){return e.message}return null}();var y,m;!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(y||(y={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED"}(m||(m={}));const g="0123456789abcdef";class b{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const r=e.toLowerCase();null==l[r]&&this.throwArgumentError("invalid log level name","logLevel",e),f>l[r]||console.log.apply(console,t)}debug(...e){this._log(b.levels.DEBUG,e)}info(...e){this._log(b.levels.INFO,e)}warn(...e){this._log(b.levels.WARNING,e)}makeError(e,t,r){if(d)return this.makeError("censored error",t,{});t||(t=b.errors.UNKNOWN_ERROR),r||(r={});const n=[];Object.keys(r).forEach((e=>{const t=r[e];try{if(t instanceof Uint8Array){let r="";for(let e=0;e<t.length;e++)r+=g[t[e]>>4],r+=g[15&t[e]];n.push(e+"=Uint8Array(0x"+r+")")}else n.push(e+"="+JSON.stringify(t))}catch(t){n.push(e+"="+JSON.stringify(r[e].toString()))}})),n.push(`code=${t}`),n.push(`version=${this.version}`);const i=e;n.length&&(e+=" ("+n.join(", ")+")");const o=new Error(e);return o.reason=i,o.code=t,Object.keys(r).forEach((function(e){o[e]=r[e]})),o}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,b.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,n){e||this.throwError(t,r,n)}assertArgument(e,t,r,n){e||this.throwArgumentError(t,r,n)}checkNormalize(e){null==e&&(e="platform missing String.prototype.normalize"),p&&this.throwError("platform missing String.prototype.normalize",b.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:p})}checkSafeUint53(e,t){"number"==typeof e&&(null==t&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,b.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,b.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,r){r=r?": "+r:"",e<t&&this.throwError("missing argument"+r,b.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+r,b.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){e!==Object&&null!=e||this.throwError("missing new",b.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",b.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):e!==Object&&null!=e||this.throwError("missing new",b.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return h||(h=new b("logger/5.5.0")),h}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",b.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),u){if(!e)return;this.globalLogger().throwError("error censorship permanent",b.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}d=!!e,u=!!t}static setLogLevel(e){const t=l[e.toLowerCase()];null!=t?f=t:b.globalLogger().warn("invalid log level - "+e)}static from(e){return new b(e)}}b.errors=m,b.levels=y;const v=new b("bytes/5.5.0");function w(e){return!!e.toHexString}function E(e){return e.slice||(e.slice=function(){const t=Array.prototype.slice.call(arguments);return E(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function S(e){return O(e)&&!(e.length%2)||k(e)}function _(e){return"number"==typeof e&&e==e&&e%1==0}function k(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"==typeof e)return!1;if(!_(e.length)||e.length<0)return!1;for(let t=0;t<e.length;t++){const r=e[t];if(!_(r)||r<0||r>=256)return!1}return!0}function A(e,t){if(t||(t={}),"number"==typeof e){v.checkSafeUint53(e,"invalid arrayify value");const t=[];for(;e;)t.unshift(255&e),e=parseInt(String(e/256));return 0===t.length&&t.push(0),E(new Uint8Array(t))}if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),w(e)&&(e=e.toHexString()),O(e)){let r=e.substring(2);r.length%2&&("left"===t.hexPad?r="0x0"+r.substring(2):"right"===t.hexPad?r+="0":v.throwArgumentError("hex data is odd-length","value",e));const n=[];for(let e=0;e<r.length;e+=2)n.push(parseInt(r.substring(e,e+2),16));return E(new Uint8Array(n))}return k(e)?E(new Uint8Array(e)):v.throwArgumentError("invalid arrayify value","value",e)}function P(e){const t=e.map((e=>A(e))),r=t.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(r);return t.reduce(((e,t)=>(n.set(t,e),e+t.length)),0),E(n)}function N(e){let t=A(e);if(0===t.length)return t;let r=0;for(;r<t.length&&0===t[r];)r++;return r&&(t=t.slice(r)),t}function x(e,t){(e=A(e)).length>t&&v.throwArgumentError("value out of range","value",arguments[0]);const r=new Uint8Array(t);return r.set(e,t-e.length),E(r)}function O(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/)||t&&e.length!==2+2*t)}const M="0123456789abcdef";function T(e,t){if(t||(t={}),"number"==typeof e){v.checkSafeUint53(e,"invalid hexlify value");let t="";for(;e;)t=M[15&e]+t,e=Math.floor(e/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if("bigint"==typeof e)return(e=e.toString(16)).length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),w(e))return e.toHexString();if(O(e))return e.length%2&&("left"===t.hexPad?e="0x0"+e.substring(2):"right"===t.hexPad?e+="0":v.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if(k(e)){let t="0x";for(let r=0;r<e.length;r++){let n=e[r];t+=M[(240&n)>>4]+M[15&n]}return t}return v.throwArgumentError("invalid hexlify value","value",e)}function I(e){if("string"!=typeof e)e=T(e);else if(!O(e)||e.length%2)return null;return(e.length-2)/2}function R(e,t,r){return"string"!=typeof e?e=T(e):(!O(e)||e.length%2)&&v.throwArgumentError("invalid hexData","value",e),t=2+2*t,null!=r?"0x"+e.substring(t,2+2*r):"0x"+e.substring(t)}function B(e){let t="0x";return e.forEach((e=>{t+=T(e).substring(2)})),t}function C(e){const t=K(T(e,{hexPad:"left"}));return"0x"===t?"0x0":t}function K(e){"string"!=typeof e&&(e=T(e)),O(e)||v.throwArgumentError("invalid hex string","value",e),e=e.substring(2);let t=0;for(;t<e.length&&"0"===e[t];)t++;return"0x"+e.substring(t)}function U(e,t){for("string"!=typeof e?e=T(e):O(e)||v.throwArgumentError("invalid hex string","value",e),e.length>2*t+2&&v.throwArgumentError("value out of range","value",arguments[1]);e.length<2*t+2;)e="0x0"+e.substring(2);return e}function D(e){const t={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0};if(S(e)){const r=A(e);65!==r.length&&v.throwArgumentError("invalid signature string; must be 65 bytes","signature",e),t.r=T(r.slice(0,32)),t.s=T(r.slice(32,64)),t.v=r[64],t.v<27&&(0===t.v||1===t.v?t.v+=27:v.throwArgumentError("signature invalid v byte","signature",e)),t.recoveryParam=1-t.v%2,t.recoveryParam&&(r[32]|=128),t._vs=T(r.slice(32,64))}else{if(t.r=e.r,t.s=e.s,t.v=e.v,t.recoveryParam=e.recoveryParam,t._vs=e._vs,null!=t._vs){const r=x(A(t._vs),32);t._vs=T(r);const n=r[0]>=128?1:0;null==t.recoveryParam?t.recoveryParam=n:t.recoveryParam!==n&&v.throwArgumentError("signature recoveryParam mismatch _vs","signature",e),r[0]&=127;const i=T(r);null==t.s?t.s=i:t.s!==i&&v.throwArgumentError("signature v mismatch _vs","signature",e)}if(null==t.recoveryParam)null==t.v?v.throwArgumentError("signature missing v and recoveryParam","signature",e):0===t.v||1===t.v?t.recoveryParam=t.v:t.recoveryParam=1-t.v%2;else if(null==t.v)t.v=27+t.recoveryParam;else{const r=0===t.v||1===t.v?t.v:1-t.v%2;t.recoveryParam!==r&&v.throwArgumentError("signature recoveryParam mismatch v","signature",e)}null!=t.r&&O(t.r)?t.r=U(t.r,32):v.throwArgumentError("signature missing or invalid r","signature",e),null!=t.s&&O(t.s)?t.s=U(t.s,32):v.throwArgumentError("signature missing or invalid s","signature",e);const r=A(t.s);r[0]>=128&&v.throwArgumentError("signature s out of range","signature",e),t.recoveryParam&&(r[0]|=128);const n=T(r);t._vs&&(O(t._vs)||v.throwArgumentError("signature invalid _vs","signature",e),t._vs=U(t._vs,32)),null==t._vs?t._vs=n:t._vs!==n&&v.throwArgumentError("signature _vs mismatch v and s","signature",e)}return t}function j(e){return T(P([(e=D(e)).r,e.s,e.recoveryParam?"0x1c":"0x1b"]))}var F=r(3550),L=r.n(F);const q="bignumber/5.5.0";var V=L().BN;const J=new b(q),z={},G=9007199254740991;let H=!1;class W{constructor(e,t){J.checkNew(new.target,W),e!==z&&J.throwError("cannot call constructor directly; use BigNumber.from",b.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=t,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return Z(X(this).fromTwos(e))}toTwos(e){return Z(X(this).toTwos(e))}abs(){return"-"===this._hex[0]?W.from(this._hex.substring(1)):this}add(e){return Z(X(this).add(X(e)))}sub(e){return Z(X(this).sub(X(e)))}div(e){return W.from(e).isZero()&&Y("division by zero","div"),Z(X(this).div(X(e)))}mul(e){return Z(X(this).mul(X(e)))}mod(e){const t=X(e);return t.isNeg()&&Y("cannot modulo negative values","mod"),Z(X(this).umod(t))}pow(e){const t=X(e);return t.isNeg()&&Y("cannot raise to negative values","pow"),Z(X(this).pow(t))}and(e){const t=X(e);return(this.isNegative()||t.isNeg())&&Y("cannot 'and' negative values","and"),Z(X(this).and(t))}or(e){const t=X(e);return(this.isNegative()||t.isNeg())&&Y("cannot 'or' negative values","or"),Z(X(this).or(t))}xor(e){const t=X(e);return(this.isNegative()||t.isNeg())&&Y("cannot 'xor' negative values","xor"),Z(X(this).xor(t))}mask(e){return(this.isNegative()||e<0)&&Y("cannot mask negative values","mask"),Z(X(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&Y("cannot shift negative values","shl"),Z(X(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&Y("cannot shift negative values","shr"),Z(X(this).shrn(e))}eq(e){return X(this).eq(X(e))}lt(e){return X(this).lt(X(e))}lte(e){return X(this).lte(X(e))}gt(e){return X(this).gt(X(e))}gte(e){return X(this).gte(X(e))}isNegative(){return"-"===this._hex[0]}isZero(){return X(this).isZero()}toNumber(){try{return X(this).toNumber()}catch(e){Y("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch(e){}return J.throwError("this platform does not support BigInt",b.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(10===arguments[0]?H||(H=!0,J.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):16===arguments[0]?J.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",b.errors.UNEXPECTED_ARGUMENT,{}):J.throwError("BigNumber.toString does not accept parameters",b.errors.UNEXPECTED_ARGUMENT,{})),X(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof W)return e;if("string"==typeof e)return e.match(/^-?0x[0-9a-f]+$/i)?new W(z,$(e)):e.match(/^-?[0-9]+$/)?new W(z,$(new V(e))):J.throwArgumentError("invalid BigNumber string","value",e);if("number"==typeof e)return e%1&&Y("underflow","BigNumber.from",e),(e>=G||e<=-G)&&Y("overflow","BigNumber.from",e),W.from(String(e));const t=e;if("bigint"==typeof t)return W.from(t.toString());if(k(t))return W.from(T(t));if(t)if(t.toHexString){const e=t.toHexString();if("string"==typeof e)return W.from(e)}else{let e=t._hex;if(null==e&&"BigNumber"===t.type&&(e=t.hex),"string"==typeof e&&(O(e)||"-"===e[0]&&O(e.substring(1))))return W.from(e)}return J.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!(!e||!e._isBigNumber)}}function $(e){if("string"!=typeof e)return $(e.toString(16));if("-"===e[0])return"-"===(e=e.substring(1))[0]&&J.throwArgumentError("invalid hex","value",e),"0x00"===(e=$(e))?e:"-"+e;if("0x"!==e.substring(0,2)&&(e="0x"+e),"0x"===e)return"0x00";for(e.length%2&&(e="0x0"+e.substring(2));e.length>4&&"0x00"===e.substring(0,4);)e="0x"+e.substring(4);return e}function Z(e){return W.from($(e))}function X(e){const t=W.from(e).toHexString();return"-"===t[0]?new V("-"+t.substring(3),16):new V(t.substring(2),16)}function Y(e,t,r){const n={fault:e,operation:t};return null!=r&&(n.value=r),J.throwError(e,b.errors.NUMERIC_FAULT,n)}const Q=new b("properties/5.5.0");function ee(e,t,r){Object.defineProperty(e,t,{enumerable:!0,value:r,writable:!1})}function te(e,t){for(let r=0;r<32;r++){if(e[t])return e[t];if(!e.prototype||"object"!=typeof e.prototype)break;e=Object.getPrototypeOf(e.prototype).constructor}return null}function re(e){return t=this,r=void 0,i=function*(){const t=Object.keys(e).map((t=>{const r=e[t];return Promise.resolve(r).then((e=>({key:t,value:e})))}));return(yield Promise.all(t)).reduce(((e,t)=>(e[t.key]=t.value,e)),{})},new((n=void 0)||(n=Promise))((function(e,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(s,a)}c((i=i.apply(t,r||[])).next())}));var t,r,n,i}function ne(e,t){e&&"object"==typeof e||Q.throwArgumentError("invalid object","object",e),Object.keys(e).forEach((r=>{t[r]||Q.throwArgumentError("invalid object key - "+r,"transaction:"+r,e)}))}function ie(e){const t={};for(const r in e)t[r]=e[r];return t}const oe={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function se(e){if(null==e||oe[typeof e])return!0;if(Array.isArray(e)||"object"==typeof e){if(!Object.isFrozen(e))return!1;const t=Object.keys(e);for(let r=0;r<t.length;r++){let n=null;try{n=e[t[r]]}catch(e){continue}if(!se(n))return!1}return!0}return Q.throwArgumentError("Cannot deepCopy "+typeof e,"object",e)}function ae(e){if(se(e))return e;if(Array.isArray(e))return Object.freeze(e.map((e=>ce(e))));if("object"==typeof e){const t={};for(const r in e){const n=e[r];void 0!==n&&ee(t,r,ce(n))}return t}return Q.throwArgumentError("Cannot deepCopy "+typeof e,"object",e)}function ce(e){return ae(e)}class ue{constructor(e){for(const t in e)this[t]=ce(e[t])}}const de="abi/5.5.0",le=new b(de);function fe(e){const t=[],r=function(e,n){if(Array.isArray(n))for(let i in n){const o=e.slice();o.push(i);try{r(o,n[i])}catch(e){t.push({path:o,error:e})}}};return r([],e),t}class he{constructor(e,t,r,n){this.name=e,this.type=t,this.localName=r,this.dynamic=n}_throwError(e,t){le.throwArgumentError(e,this.localName,t)}}class pe{constructor(e){ee(this,"wordSize",e||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(e)}get data(){return B(this._data)}get length(){return this._dataLength}_writeData(e){return this._data.push(e),this._dataLength+=e.length,e.length}appendWriter(e){return this._writeData(P(e._data))}writeBytes(e){let t=A(e);const r=t.length%this.wordSize;return r&&(t=P([t,this._padding.slice(r)])),this._writeData(t)}_getValue(e){let t=A(W.from(e));return t.length>this.wordSize&&le.throwError("value out-of-bounds",b.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:t.length}),t.length%this.wordSize&&(t=P([this._padding.slice(t.length%this.wordSize),t])),t}writeValue(e){return this._writeData(this._getValue(e))}writeUpdatableValue(){const e=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,t=>{this._data[e]=this._getValue(t)}}}class ye{constructor(e,t,r,n){ee(this,"_data",A(e)),ee(this,"wordSize",t||32),ee(this,"_coerceFunc",r),ee(this,"allowLoose",n),this._offset=0}get data(){return T(this._data)}get consumed(){return this._offset}static coerce(e,t){let r=e.match("^u?int([0-9]+)$");return r&&parseInt(r[1])<=48&&(t=t.toNumber()),t}coerce(e,t){return this._coerceFunc?this._coerceFunc(e,t):ye.coerce(e,t)}_peekBytes(e,t,r){let n=Math.ceil(t/this.wordSize)*this.wordSize;return this._offset+n>this._data.length&&(this.allowLoose&&r&&this._offset+t<=this._data.length?n=t:le.throwError("data out-of-bounds",b.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+n})),this._data.slice(this._offset,this._offset+n)}subReader(e){return new ye(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(e,t){let r=this._peekBytes(0,e,!!t);return this._offset+=r.length,r.slice(0,e)}readValue(){return W.from(this.readBytes(this.wordSize))}}var me=r(1094),ge=r.n(me);function be(e){return"0x"+ge().keccak_256(A(e))}const ve=new b("rlp/5.5.0");function we(e){const t=[];for(;e;)t.unshift(255&e),e>>=8;return t}function Ee(e,t,r){let n=0;for(let i=0;i<r;i++)n=256*n+e[t+i];return n}function Se(e){if(Array.isArray(e)){let t=[];if(e.forEach((function(e){t=t.concat(Se(e))})),t.length<=55)return t.unshift(192+t.length),t;const r=we(t.length);return r.unshift(247+r.length),r.concat(t)}S(e)||ve.throwArgumentError("RLP object must be BytesLike","object",e);const t=Array.prototype.slice.call(A(e));if(1===t.length&&t[0]<=127)return t;if(t.length<=55)return t.unshift(128+t.length),t;const r=we(t.length);return r.unshift(183+r.length),r.concat(t)}function _e(e){return T(Se(e))}function ke(e,t,r,n){const i=[];for(;r<t+1+n;){const o=Ae(e,r);i.push(o.result),(r+=o.consumed)>t+1+n&&ve.throwError("child data too short",b.errors.BUFFER_OVERRUN,{})}return{consumed:1+n,result:i}}function Ae(e,t){if(0===e.length&&ve.throwError("data too short",b.errors.BUFFER_OVERRUN,{}),e[t]>=248){const r=e[t]-247;t+1+r>e.length&&ve.throwError("data short segment too short",b.errors.BUFFER_OVERRUN,{});const n=Ee(e,t+1,r);return t+1+r+n>e.length&&ve.throwError("data long segment too short",b.errors.BUFFER_OVERRUN,{}),ke(e,t,t+1+r,r+n)}if(e[t]>=192){const r=e[t]-192;return t+1+r>e.length&&ve.throwError("data array too short",b.errors.BUFFER_OVERRUN,{}),ke(e,t,t+1,r)}if(e[t]>=184){const r=e[t]-183;t+1+r>e.length&&ve.throwError("data array too short",b.errors.BUFFER_OVERRUN,{});const n=Ee(e,t+1,r);return t+1+r+n>e.length&&ve.throwError("data array too short",b.errors.BUFFER_OVERRUN,{}),{consumed:1+r+n,result:T(e.slice(t+1+r,t+1+r+n))}}if(e[t]>=128){const r=e[t]-128;return t+1+r>e.length&&ve.throwError("data too short",b.errors.BUFFER_OVERRUN,{}),{consumed:1+r,result:T(e.slice(t+1,t+1+r))}}return{consumed:1,result:T(e[t])}}function Pe(e){const t=A(e),r=Ae(t,0);return r.consumed!==t.length&&ve.throwArgumentError("invalid rlp data","data",e),r.result}const Ne=new b("address/5.5.0");function xe(e){O(e,20)||Ne.throwArgumentError("invalid address","address",e);const t=(e=e.toLowerCase()).substring(2).split(""),r=new Uint8Array(40);for(let e=0;e<40;e++)r[e]=t[e].charCodeAt(0);const n=A(be(r));for(let e=0;e<40;e+=2)n[e>>1]>>4>=8&&(t[e]=t[e].toUpperCase()),(15&n[e>>1])>=8&&(t[e+1]=t[e+1].toUpperCase());return"0x"+t.join("")}const Oe={};for(let e=0;e<10;e++)Oe[String(e)]=String(e);for(let e=0;e<26;e++)Oe[String.fromCharCode(65+e)]=String(10+e);const Me=Math.floor((Te=9007199254740991,Math.log10?Math.log10(Te):Math.log(Te)/Math.LN10));var Te;function Ie(e){let t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map((e=>Oe[e])).join("");for(;t.length>=Me;){let e=t.substring(0,Me);t=parseInt(e,10)%97+t.substring(e.length)}let r=String(98-parseInt(t,10)%97);for(;r.length<2;)r="0"+r;return r}function Re(e){let t=null;if("string"!=typeof e&&Ne.throwArgumentError("invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/))"0x"!==e.substring(0,2)&&(e="0x"+e),t=xe(e),e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&t!==e&&Ne.throwArgumentError("bad address checksum","address",e);else if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(e.substring(2,4)!==Ie(e)&&Ne.throwArgumentError("bad icap checksum","address",e),r=e.substring(4),t=new V(r,36).toString(16);t.length<40;)t="0"+t;t=xe("0x"+t)}else Ne.throwArgumentError("invalid address","address",e);var r;return t}function Be(e){try{return Re(e),!0}catch(e){}return!1}function Ce(e){let t=(r=Re(e).substring(2),new V(r,16).toString(36)).toUpperCase();for(var r;t.length<30;)t="0"+t;return"XE"+Ie("XE00"+t)+t}function Ke(e){let t=null;try{t=Re(e.from)}catch(t){Ne.throwArgumentError("missing from address","transaction",e)}return Re(R(be(_e([t,N(A(W.from(e.nonce).toHexString()))])),12))}function Ue(e,t,r){return 32!==I(t)&&Ne.throwArgumentError("salt must be 32 bytes","salt",t),32!==I(r)&&Ne.throwArgumentError("initCodeHash must be 32 bytes","initCodeHash",r),Re(R(be(P(["0xff",Re(e),t,r])),12))}const De=new b("strings/5.5.0");var je,Fe;function Le(e,t,r,n,i){if(e===Fe.BAD_PREFIX||e===Fe.UNEXPECTED_CONTINUE){let e=0;for(let n=t+1;n<r.length&&r[n]>>6==2;n++)e++;return e}return e===Fe.OVERRUN?r.length-t-1:0}!function(e){e.current="",e.NFC="NFC",e.NFD="NFD",e.NFKC="NFKC",e.NFKD="NFKD"}(je||(je={})),function(e){e.UNEXPECTED_CONTINUE="unexpected continuation byte",e.BAD_PREFIX="bad codepoint prefix",e.OVERRUN="string overrun",e.MISSING_CONTINUE="missing continuation byte",e.OUT_OF_RANGE="out of UTF-8 range",e.UTF16_SURROGATE="UTF-16 surrogate",e.OVERLONG="overlong representation"}(Fe||(Fe={}));const qe=Object.freeze({error:function(e,t,r,n,i){return De.throwArgumentError(`invalid codepoint at offset ${t}; ${e}`,"bytes",r)},ignore:Le,replace:function(e,t,r,n,i){return e===Fe.OVERLONG?(n.push(i),0):(n.push(65533),Le(e,t,r))}});function Ve(e,t){null==t&&(t=qe.error),e=A(e);const r=[];let n=0;for(;n<e.length;){const i=e[n++];if(i>>7==0){r.push(i);continue}let o=null,s=null;if(192==(224&i))o=1,s=127;else if(224==(240&i))o=2,s=2047;else{if(240!=(248&i)){n+=t(128==(192&i)?Fe.UNEXPECTED_CONTINUE:Fe.BAD_PREFIX,n-1,e,r);continue}o=3,s=65535}if(n-1+o>=e.length){n+=t(Fe.OVERRUN,n-1,e,r);continue}let a=i&(1<<8-o-1)-1;for(let i=0;i<o;i++){let i=e[n];if(128!=(192&i)){n+=t(Fe.MISSING_CONTINUE,n,e,r),a=null;break}a=a<<6|63&i,n++}null!==a&&(a>1114111?n+=t(Fe.OUT_OF_RANGE,n-1-o,e,r,a):a>=55296&&a<=57343?n+=t(Fe.UTF16_SURROGATE,n-1-o,e,r,a):a<=s?n+=t(Fe.OVERLONG,n-1-o,e,r,a):r.push(a))}return r}function Je(e,t=je.current){t!=je.current&&(De.checkNormalize(),e=e.normalize(t));let r=[];for(let t=0;t<e.length;t++){const n=e.charCodeAt(t);if(n<128)r.push(n);else if(n<2048)r.push(n>>6|192),r.push(63&n|128);else if(55296==(64512&n)){t++;const i=e.charCodeAt(t);if(t>=e.length||56320!=(64512&i))throw new Error("invalid utf-8 string");const o=65536+((1023&n)<<10)+(1023&i);r.push(o>>18|240),r.push(o>>12&63|128),r.push(o>>6&63|128),r.push(63&o|128)}else r.push(n>>12|224),r.push(n>>6&63|128),r.push(63&n|128)}return A(r)}function ze(e){const t="0000"+e.toString(16);return"\\u"+t.substring(t.length-4)}function Ge(e,t){return'"'+Ve(e,t).map((e=>{if(e<256){switch(e){case 8:return"\\b";case 9:return"\\t";case 10:return"\\n";case 13:return"\\r";case 34:return'\\"';case 92:return"\\\\"}if(e>=32&&e<127)return String.fromCharCode(e)}return e<=65535?ze(e):ze(55296+((e-=65536)>>10&1023))+ze(56320+(1023&e))})).join("")+'"'}function He(e){return e.map((e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10&1023),56320+(1023&e))))).join("")}function We(e,t){return He(Ve(e,t))}function $e(e,t=je.current){return Ve(Je(e,t))}function Ze(e){return be(Je(e))}class Xe extends he{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){try{t=Re(t)}catch(e){this._throwError(e.message,t)}return e.writeValue(t)}decode(e){return Re(U(e.readValue().toHexString(),20))}}class Ye extends he{constructor(e){super(e.name,e.type,void 0,e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}const Qe=new b(de);function et(e,t,r){let n=null;if(Array.isArray(r))n=r;else if(r&&"object"==typeof r){let e={};n=t.map((t=>{const n=t.localName;return n||Qe.throwError("cannot encode object for signature with missing names",b.errors.INVALID_ARGUMENT,{argument:"values",coder:t,value:r}),e[n]&&Qe.throwError("cannot encode object for signature with duplicate names",b.errors.INVALID_ARGUMENT,{argument:"values",coder:t,value:r}),e[n]=!0,r[n]}))}else Qe.throwArgumentError("invalid tuple value","tuple",r);t.length!==n.length&&Qe.throwArgumentError("types/value length mismatch","tuple",r);let i=new pe(e.wordSize),o=new pe(e.wordSize),s=[];t.forEach(((e,t)=>{let r=n[t];if(e.dynamic){let t=o.length;e.encode(o,r);let n=i.writeUpdatableValue();s.push((e=>{n(e+t)}))}else e.encode(i,r)})),s.forEach((e=>{e(i.length)}));let a=e.appendWriter(i);return a+=e.appendWriter(o),a}function tt(e,t){let r=[],n=e.subReader(0);t.forEach((t=>{let i=null;if(t.dynamic){let r=e.readValue(),o=n.subReader(r.toNumber());try{i=t.decode(o)}catch(e){if(e.code===b.errors.BUFFER_OVERRUN)throw e;i=e,i.baseType=t.name,i.name=t.localName,i.type=t.type}}else try{i=t.decode(e)}catch(e){if(e.code===b.errors.BUFFER_OVERRUN)throw e;i=e,i.baseType=t.name,i.name=t.localName,i.type=t.type}null!=i&&r.push(i)}));const i=t.reduce(((e,t)=>{const r=t.localName;return r&&(e[r]||(e[r]=0),e[r]++),e}),{});t.forEach(((e,t)=>{let n=e.localName;if(!n||1!==i[n])return;if("length"===n&&(n="_length"),null!=r[n])return;const o=r[t];o instanceof Error?Object.defineProperty(r,n,{enumerable:!0,get:()=>{throw o}}):r[n]=o}));for(let e=0;e<r.length;e++){const t=r[e];t instanceof Error&&Object.defineProperty(r,e,{enumerable:!0,get:()=>{throw t}})}return Object.freeze(r)}class rt extends he{constructor(e,t,r){super("array",e.type+"["+(t>=0?t:"")+"]",r,-1===t||e.dynamic),this.coder=e,this.length=t}defaultValue(){const e=this.coder.defaultValue(),t=[];for(let r=0;r<this.length;r++)t.push(e);return t}encode(e,t){Array.isArray(t)||this._throwError("expected array value",t);let r=this.length;-1===r&&(r=t.length,e.writeValue(t.length)),Qe.checkArgumentCount(t.length,r,"coder array"+(this.localName?" "+this.localName:""));let n=[];for(let e=0;e<t.length;e++)n.push(this.coder);return et(e,n,t)}decode(e){let t=this.length;-1===t&&(t=e.readValue().toNumber(),32*t>e._data.length&&Qe.throwError("insufficient data length",b.errors.BUFFER_OVERRUN,{length:e._data.length,count:t}));let r=[];for(let e=0;e<t;e++)r.push(new Ye(this.coder));return e.coerce(this.name,tt(e,r))}}class nt extends he{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){return e.writeValue(t?1:0)}decode(e){return e.coerce(this.type,!e.readValue().isZero())}}class it extends he{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=A(t);let r=e.writeValue(t.length);return r+=e.writeBytes(t),r}decode(e){return e.readBytes(e.readValue().toNumber(),!0)}}class ot extends it{constructor(e){super("bytes",e)}decode(e){return e.coerce(this.name,T(super.decode(e)))}}class st extends he{constructor(e,t){let r="bytes"+String(e);super(r,r,t,!1),this.size=e}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(e,t){let r=A(t);return r.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(r)}decode(e){return e.coerce(this.name,T(e.readBytes(this.size)))}}class at extends he{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return null!=t&&this._throwError("not null",t),e.writeBytes([])}decode(e){return e.readBytes(0),e.coerce(this.name,null)}}const ct=W.from(-1),ut=W.from(0),dt=W.from(1),lt=W.from(2),ft=W.from("1000000000000000000"),ht=W.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),pt=W.from("-0x8000000000000000000000000000000000000000000000000000000000000000"),yt=W.from("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class mt extends he{constructor(e,t,r){const n=(t?"int":"uint")+8*e;super(n,n,r,!1),this.size=e,this.signed=t}defaultValue(){return 0}encode(e,t){let r=W.from(t),n=ht.mask(8*e.wordSize);if(this.signed){let e=n.mask(8*this.size-1);(r.gt(e)||r.lt(e.add(dt).mul(ct)))&&this._throwError("value out-of-bounds",t)}else(r.lt(ut)||r.gt(n.mask(8*this.size)))&&this._throwError("value out-of-bounds",t);return r=r.toTwos(8*this.size).mask(8*this.size),this.signed&&(r=r.fromTwos(8*this.size).toTwos(8*e.wordSize)),e.writeValue(r)}decode(e){let t=e.readValue().mask(8*this.size);return this.signed&&(t=t.fromTwos(8*this.size)),e.coerce(this.name,t)}}class gt extends it{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,Je(t))}decode(e){return We(super.decode(e))}}class bt extends he{constructor(e,t){let r=!1;const n=[];e.forEach((e=>{e.dynamic&&(r=!0),n.push(e.type)})),super("tuple","tuple("+n.join(",")+")",t,r),this.coders=e}defaultValue(){const e=[];this.coders.forEach((t=>{e.push(t.defaultValue())}));const t=this.coders.reduce(((e,t)=>{const r=t.localName;return r&&(e[r]||(e[r]=0),e[r]++),e}),{});return this.coders.forEach(((r,n)=>{let i=r.localName;i&&1===t[i]&&("length"===i&&(i="_length"),null==e[i]&&(e[i]=e[n]))})),Object.freeze(e)}encode(e,t){return et(e,this.coders,t)}decode(e){return e.coerce(this.name,tt(e,this.coders))}}const vt=new b(de),wt={};let Et={calldata:!0,memory:!0,storage:!0},St={calldata:!0,memory:!0};function _t(e,t){if("bytes"===e||"string"===e){if(Et[t])return!0}else if("address"===e){if("payable"===t)return!0}else if((e.indexOf("[")>=0||"tuple"===e)&&St[t])return!0;return(Et[t]||"payable"===t)&&vt.throwArgumentError("invalid modifier","name",t),!1}function kt(e,t){for(let r in t)ee(e,r,t[r])}const At=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),Pt=new RegExp(/^(.*)\[([0-9]*)\]$/);class Nt{constructor(e,t){e!==wt&&vt.throwError("use fromString",b.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),kt(this,t);let r=this.type.match(Pt);kt(this,r?{arrayLength:parseInt(r[2]||"-1"),arrayChildren:Nt.fromObject({type:r[1],components:this.components}),baseType:"array"}:{arrayLength:null,arrayChildren:null,baseType:null!=this.components?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(e){if(e||(e=At.sighash),At[e]||vt.throwArgumentError("invalid format type","format",e),e===At.json){let t={type:"tuple"===this.baseType?"tuple":this.type,name:this.name||void 0};return"boolean"==typeof this.indexed&&(t.indexed=this.indexed),this.components&&(t.components=this.components.map((t=>JSON.parse(t.format(e))))),JSON.stringify(t)}let t="";return"array"===this.baseType?(t+=this.arrayChildren.format(e),t+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):"tuple"===this.baseType?(e!==At.sighash&&(t+=this.type),t+="("+this.components.map((t=>t.format(e))).join(e===At.full?", ":",")+")"):t+=this.type,e!==At.sighash&&(!0===this.indexed&&(t+=" indexed"),e===At.full&&this.name&&(t+=" "+this.name)),t}static from(e,t){return"string"==typeof e?Nt.fromString(e,t):Nt.fromObject(e)}static fromObject(e){return Nt.isParamType(e)?e:new Nt(wt,{name:e.name||null,type:Dt(e.type),indexed:null==e.indexed?null:!!e.indexed,components:e.components?e.components.map(Nt.fromObject):null})}static fromString(e,t){return r=function(e,t){let r=e;function n(t){vt.throwArgumentError(`unexpected character at position ${t}`,"param",e)}function i(e){let r={type:"",name:"",parent:e,state:{allowType:!0}};return t&&(r.indexed=!1),r}e=e.replace(/\s/g," ");let o={type:"",name:"",state:{allowType:!0}},s=o;for(let r=0;r<e.length;r++){let o=e[r];switch(o){case"(":s.state.allowType&&""===s.type?s.type="tuple":s.state.allowParams||n(r),s.state.allowType=!1,s.type=Dt(s.type),s.components=[i(s)],s=s.components[0];break;case")":delete s.state,"indexed"===s.name&&(t||n(r),s.indexed=!0,s.name=""),_t(s.type,s.name)&&(s.name=""),s.type=Dt(s.type);let e=s;s=s.parent,s||n(r),delete e.parent,s.state.allowParams=!1,s.state.allowName=!0,s.state.allowArray=!0;break;case",":delete s.state,"indexed"===s.name&&(t||n(r),s.indexed=!0,s.name=""),_t(s.type,s.name)&&(s.name=""),s.type=Dt(s.type);let a=i(s.parent);s.parent.components.push(a),delete s.parent,s=a;break;case" ":s.state.allowType&&""!==s.type&&(s.type=Dt(s.type),delete s.state.allowType,s.state.allowName=!0,s.state.allowParams=!0),s.state.allowName&&""!==s.name&&("indexed"===s.name?(t||n(r),s.indexed&&n(r),s.indexed=!0,s.name=""):_t(s.type,s.name)?s.name="":s.state.allowName=!1);break;case"[":s.state.allowArray||n(r),s.type+=o,s.state.allowArray=!1,s.state.allowName=!1,s.state.readArray=!0;break;case"]":s.state.readArray||n(r),s.type+=o,s.state.readArray=!1,s.state.allowArray=!0,s.state.allowName=!0;break;default:s.state.allowType?(s.type+=o,s.state.allowParams=!0,s.state.allowArray=!0):s.state.allowName?(s.name+=o,delete s.state.allowArray):s.state.readArray?s.type+=o:n(r)}}return s.parent&&vt.throwArgumentError("unexpected eof","param",e),delete o.state,"indexed"===s.name?(t||n(r.length-7),s.indexed&&n(r.length-7),s.indexed=!0,s.name=""):_t(s.type,s.name)&&(s.name=""),o.type=Dt(o.type),o}(e,!!t),Nt.fromObject({name:r.name,type:r.type,indexed:r.indexed,components:r.components});var r}static isParamType(e){return!(null==e||!e._isParamType)}}function xt(e,t){return function(e){e=e.trim();let t=[],r="",n=0;for(let i=0;i<e.length;i++){let o=e[i];","===o&&0===n?(t.push(r),r=""):(r+=o,"("===o?n++:")"===o&&(n--,-1===n&&vt.throwArgumentError("unbalanced parenthesis","value",e)))}return r&&t.push(r),t}(e).map((e=>Nt.fromString(e,t)))}class Ot{constructor(e,t){e!==wt&&vt.throwError("use a static from method",b.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),kt(this,t),this._isFragment=!0,Object.freeze(this)}static from(e){return Ot.isFragment(e)?e:"string"==typeof e?Ot.fromString(e):Ot.fromObject(e)}static fromObject(e){if(Ot.isFragment(e))return e;switch(e.type){case"function":return Ct.fromObject(e);case"event":return Mt.fromObject(e);case"constructor":return Bt.fromObject(e);case"error":return Ut.fromObject(e);case"fallback":case"receive":return null}return vt.throwArgumentError("invalid fragment object","value",e)}static fromString(e){return"event"===(e=(e=(e=e.replace(/\s/g," ")).replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," ")).trim()).split(" ")[0]?Mt.fromString(e.substring(5).trim()):"function"===e.split(" ")[0]?Ct.fromString(e.substring(8).trim()):"constructor"===e.split("(")[0].trim()?Bt.fromString(e.trim()):"error"===e.split(" ")[0]?Ut.fromString(e.substring(5).trim()):vt.throwArgumentError("unsupported fragment","value",e)}static isFragment(e){return!(!e||!e._isFragment)}}class Mt extends Ot{format(e){if(e||(e=At.sighash),At[e]||vt.throwArgumentError("invalid format type","format",e),e===At.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))});let t="";return e!==At.sighash&&(t+="event "),t+=this.name+"("+this.inputs.map((t=>t.format(e))).join(e===At.full?", ":",")+") ",e!==At.sighash&&this.anonymous&&(t+="anonymous "),t.trim()}static from(e){return"string"==typeof e?Mt.fromString(e):Mt.fromObject(e)}static fromObject(e){if(Mt.isEventFragment(e))return e;"event"!==e.type&&vt.throwArgumentError("invalid event object","value",e);const t={name:Ft(e.name),anonymous:e.anonymous,inputs:e.inputs?e.inputs.map(Nt.fromObject):[],type:"event"};return new Mt(wt,t)}static fromString(e){let t=e.match(Lt);t||vt.throwArgumentError("invalid event string","value",e);let r=!1;return t[3].split(" ").forEach((e=>{switch(e.trim()){case"anonymous":r=!0;break;case"":break;default:vt.warn("unknown modifier: "+e)}})),Mt.fromObject({name:t[1].trim(),anonymous:r,inputs:xt(t[2],!0),type:"event"})}static isEventFragment(e){return e&&e._isFragment&&"event"===e.type}}function Tt(e,t){t.gas=null;let r=e.split("@");return 1!==r.length?(r.length>2&&vt.throwArgumentError("invalid human-readable ABI signature","value",e),r[1].match(/^[0-9]+$/)||vt.throwArgumentError("invalid human-readable ABI signature gas","value",e),t.gas=W.from(r[1]),r[0]):e}function It(e,t){t.constant=!1,t.payable=!1,t.stateMutability="nonpayable",e.split(" ").forEach((e=>{switch(e.trim()){case"constant":t.constant=!0;break;case"payable":t.payable=!0,t.stateMutability="payable";break;case"nonpayable":t.payable=!1,t.stateMutability="nonpayable";break;case"pure":t.constant=!0,t.stateMutability="pure";break;case"view":t.constant=!0,t.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+e)}}))}function Rt(e){let t={constant:!1,payable:!0,stateMutability:"payable"};return null!=e.stateMutability?(t.stateMutability=e.stateMutability,t.constant="view"===t.stateMutability||"pure"===t.stateMutability,null!=e.constant&&!!e.constant!==t.constant&&vt.throwArgumentError("cannot have constant function with mutability "+t.stateMutability,"value",e),t.payable="payable"===t.stateMutability,null!=e.payable&&!!e.payable!==t.payable&&vt.throwArgumentError("cannot have payable function with mutability "+t.stateMutability,"value",e)):null!=e.payable?(t.payable=!!e.payable,null!=e.constant||t.payable||"constructor"===e.type||vt.throwArgumentError("unable to determine stateMutability","value",e),t.constant=!!e.constant,t.constant?t.stateMutability="view":t.stateMutability=t.payable?"payable":"nonpayable",t.payable&&t.constant&&vt.throwArgumentError("cannot have constant payable function","value",e)):null!=e.constant?(t.constant=!!e.constant,t.payable=!t.constant,t.stateMutability=t.constant?"view":"payable"):"constructor"!==e.type&&vt.throwArgumentError("unable to determine stateMutability","value",e),t}class Bt extends Ot{format(e){if(e||(e=At.sighash),At[e]||vt.throwArgumentError("invalid format type","format",e),e===At.json)return JSON.stringify({type:"constructor",stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))});e===At.sighash&&vt.throwError("cannot format a constructor for sighash",b.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let t="constructor("+this.inputs.map((t=>t.format(e))).join(e===At.full?", ":",")+") ";return this.stateMutability&&"nonpayable"!==this.stateMutability&&(t+=this.stateMutability+" "),t.trim()}static from(e){return"string"==typeof e?Bt.fromString(e):Bt.fromObject(e)}static fromObject(e){if(Bt.isConstructorFragment(e))return e;"constructor"!==e.type&&vt.throwArgumentError("invalid constructor object","value",e);let t=Rt(e);t.constant&&vt.throwArgumentError("constructor cannot be constant","value",e);const r={name:null,type:e.type,inputs:e.inputs?e.inputs.map(Nt.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?W.from(e.gas):null};return new Bt(wt,r)}static fromString(e){let t={type:"constructor"},r=(e=Tt(e,t)).match(Lt);return r&&"constructor"===r[1].trim()||vt.throwArgumentError("invalid constructor string","value",e),t.inputs=xt(r[2].trim(),!1),It(r[3].trim(),t),Bt.fromObject(t)}static isConstructorFragment(e){return e&&e._isFragment&&"constructor"===e.type}}class Ct extends Bt{format(e){if(e||(e=At.sighash),At[e]||vt.throwArgumentError("invalid format type","format",e),e===At.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map((t=>JSON.parse(t.format(e)))),outputs:this.outputs.map((t=>JSON.parse(t.format(e))))});let t="";return e!==At.sighash&&(t+="function "),t+=this.name+"("+this.inputs.map((t=>t.format(e))).join(e===At.full?", ":",")+") ",e!==At.sighash&&(this.stateMutability?"nonpayable"!==this.stateMutability&&(t+=this.stateMutability+" "):this.constant&&(t+="view "),this.outputs&&this.outputs.length&&(t+="returns ("+this.outputs.map((t=>t.format(e))).join(", ")+") "),null!=this.gas&&(t+="@"+this.gas.toString()+" ")),t.trim()}static from(e){return"string"==typeof e?Ct.fromString(e):Ct.fromObject(e)}static fromObject(e){if(Ct.isFunctionFragment(e))return e;"function"!==e.type&&vt.throwArgumentError("invalid function object","value",e);let t=Rt(e);const r={type:e.type,name:Ft(e.name),constant:t.constant,inputs:e.inputs?e.inputs.map(Nt.fromObject):[],outputs:e.outputs?e.outputs.map(Nt.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?W.from(e.gas):null};return new Ct(wt,r)}static fromString(e){let t={type:"function"},r=(e=Tt(e,t)).split(" returns ");r.length>2&&vt.throwArgumentError("invalid function string","value",e);let n=r[0].match(Lt);if(n||vt.throwArgumentError("invalid function signature","value",e),t.name=n[1].trim(),t.name&&Ft(t.name),t.inputs=xt(n[2],!1),It(n[3].trim(),t),r.length>1){let n=r[1].match(Lt);""==n[1].trim()&&""==n[3].trim()||vt.throwArgumentError("unexpected tokens","value",e),t.outputs=xt(n[2],!1)}else t.outputs=[];return Ct.fromObject(t)}static isFunctionFragment(e){return e&&e._isFragment&&"function"===e.type}}function Kt(e){const t=e.format();return"Error(string)"!==t&&"Panic(uint256)"!==t||vt.throwArgumentError(`cannot specify user defined ${t} error`,"fragment",e),e}class Ut extends Ot{format(e){if(e||(e=At.sighash),At[e]||vt.throwArgumentError("invalid format type","format",e),e===At.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))});let t="";return e!==At.sighash&&(t+="error "),t+=this.name+"("+this.inputs.map((t=>t.format(e))).join(e===At.full?", ":",")+") ",t.trim()}static from(e){return"string"==typeof e?Ut.fromString(e):Ut.fromObject(e)}static fromObject(e){if(Ut.isErrorFragment(e))return e;"error"!==e.type&&vt.throwArgumentError("invalid error object","value",e);const t={type:e.type,name:Ft(e.name),inputs:e.inputs?e.inputs.map(Nt.fromObject):[]};return Kt(new Ut(wt,t))}static fromString(e){let t={type:"error"},r=e.match(Lt);return r||vt.throwArgumentError("invalid error signature","value",e),t.name=r[1].trim(),t.name&&Ft(t.name),t.inputs=xt(r[2],!1),Kt(Ut.fromObject(t))}static isErrorFragment(e){return e&&e._isFragment&&"error"===e.type}}function Dt(e){return e.match(/^uint($|[^1-9])/)?e="uint256"+e.substring(4):e.match(/^int($|[^1-9])/)&&(e="int256"+e.substring(3)),e}const jt=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function Ft(e){return e&&e.match(jt)||vt.throwArgumentError(`invalid identifier "${e}"`,"value",e),e}const Lt=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$"),qt=new b(de),Vt=new RegExp(/^bytes([0-9]*)$/),Jt=new RegExp(/^(u?int)([0-9]*)$/);class zt{constructor(e){qt.checkNew(new.target,zt),ee(this,"coerceFunc",e||null)}_getCoder(e){switch(e.baseType){case"address":return new Xe(e.name);case"bool":return new nt(e.name);case"string":return new gt(e.name);case"bytes":return new ot(e.name);case"array":return new rt(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new bt((e.components||[]).map((e=>this._getCoder(e))),e.name);case"":return new at(e.name)}let t=e.type.match(Jt);if(t){let r=parseInt(t[2]||"256");return(0===r||r>256||r%8!=0)&&qt.throwArgumentError("invalid "+t[1]+" bit length","param",e),new mt(r/8,"int"===t[1],e.name)}if(t=e.type.match(Vt),t){let r=parseInt(t[1]);return(0===r||r>32)&&qt.throwArgumentError("invalid bytes length","param",e),new st(r,e.name)}return qt.throwArgumentError("invalid type","type",e.type)}_getWordSize(){return 32}_getReader(e,t){return new ye(e,this._getWordSize(),this.coerceFunc,t)}_getWriter(){return new pe(this._getWordSize())}getDefaultValue(e){const t=e.map((e=>this._getCoder(Nt.from(e))));return new bt(t,"_").defaultValue()}encode(e,t){e.length!==t.length&&qt.throwError("types/values length mismatch",b.errors.INVALID_ARGUMENT,{count:{types:e.length,values:t.length},value:{types:e,values:t}});const r=e.map((e=>this._getCoder(Nt.from(e)))),n=new bt(r,"_"),i=this._getWriter();return n.encode(i,t),i.data}decode(e,t,r){const n=e.map((e=>this._getCoder(Nt.from(e))));return new bt(n,"_").decode(this._getReader(A(t),r))}}const Gt=new zt,Ht=new b(de);class Wt extends ue{}class $t extends ue{}class Zt extends ue{}class Xt extends ue{static isIndexed(e){return!(!e||!e._isIndexed)}}const Yt={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function Qt(e,t){const r=new Error(`deferred error during ABI decoding triggered accessing ${e}`);return r.error=t,r}class er{constructor(e){Ht.checkNew(new.target,er);let t=[];t="string"==typeof e?JSON.parse(e):e,ee(this,"fragments",t.map((e=>Ot.from(e))).filter((e=>null!=e))),ee(this,"_abiCoder",te(new.target,"getAbiCoder")()),ee(this,"functions",{}),ee(this,"errors",{}),ee(this,"events",{}),ee(this,"structs",{}),this.fragments.forEach((e=>{let t=null;switch(e.type){case"constructor":return this.deploy?void Ht.warn("duplicate definition - constructor"):void ee(this,"deploy",e);case"function":t=this.functions;break;case"event":t=this.events;break;case"error":t=this.errors;break;default:return}let r=e.format();t[r]?Ht.warn("duplicate definition - "+r):t[r]=e})),this.deploy||ee(this,"deploy",Bt.from({payable:!1,type:"constructor"})),ee(this,"_isInterface",!0)}format(e){e||(e=At.full),e===At.sighash&&Ht.throwArgumentError("interface does not support formatting sighash","format",e);const t=this.fragments.map((t=>t.format(e)));return e===At.json?JSON.stringify(t.map((e=>JSON.parse(e)))):t}static getAbiCoder(){return Gt}static getAddress(e){return Re(e)}static getSighash(e){return R(Ze(e.format()),0,4)}static getEventTopic(e){return Ze(e.format())}getFunction(e){if(O(e)){for(const t in this.functions)if(e===this.getSighash(t))return this.functions[t];Ht.throwArgumentError("no matching function","sighash",e)}if(-1===e.indexOf("(")){const t=e.trim(),r=Object.keys(this.functions).filter((e=>e.split("(")[0]===t));return 0===r.length?Ht.throwArgumentError("no matching function","name",t):r.length>1&&Ht.throwArgumentError("multiple matching functions","name",t),this.functions[r[0]]}const t=this.functions[Ct.fromString(e).format()];return t||Ht.throwArgumentError("no matching function","signature",e),t}getEvent(e){if(O(e)){const t=e.toLowerCase();for(const e in this.events)if(t===this.getEventTopic(e))return this.events[e];Ht.throwArgumentError("no matching event","topichash",t)}if(-1===e.indexOf("(")){const t=e.trim(),r=Object.keys(this.events).filter((e=>e.split("(")[0]===t));return 0===r.length?Ht.throwArgumentError("no matching event","name",t):r.length>1&&Ht.throwArgumentError("multiple matching events","name",t),this.events[r[0]]}const t=this.events[Mt.fromString(e).format()];return t||Ht.throwArgumentError("no matching event","signature",e),t}getError(e){if(O(e)){const t=te(this.constructor,"getSighash");for(const r in this.errors)if(e===t(this.errors[r]))return this.errors[r];Ht.throwArgumentError("no matching error","sighash",e)}if(-1===e.indexOf("(")){const t=e.trim(),r=Object.keys(this.errors).filter((e=>e.split("(")[0]===t));return 0===r.length?Ht.throwArgumentError("no matching error","name",t):r.length>1&&Ht.throwArgumentError("multiple matching errors","name",t),this.errors[r[0]]}const t=this.errors[Ct.fromString(e).format()];return t||Ht.throwArgumentError("no matching error","signature",e),t}getSighash(e){if("string"==typeof e)try{e=this.getFunction(e)}catch(t){try{e=this.getError(e)}catch(e){throw t}}return te(this.constructor,"getSighash")(e)}getEventTopic(e){return"string"==typeof e&&(e=this.getEvent(e)),te(this.constructor,"getEventTopic")(e)}_decodeParams(e,t){return this._abiCoder.decode(e,t)}_encodeParams(e,t){return this._abiCoder.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){"string"==typeof e&&(e=this.getError(e));const r=A(t);return T(r.slice(0,4))!==this.getSighash(e)&&Ht.throwArgumentError(`data signature does not match error ${e.name}.`,"data",T(r)),this._decodeParams(e.inputs,r.slice(4))}encodeErrorResult(e,t){return"string"==typeof e&&(e=this.getError(e)),T(P([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionData(e,t){"string"==typeof e&&(e=this.getFunction(e));const r=A(t);return T(r.slice(0,4))!==this.getSighash(e)&&Ht.throwArgumentError(`data signature does not match function ${e.name}.`,"data",T(r)),this._decodeParams(e.inputs,r.slice(4))}encodeFunctionData(e,t){return"string"==typeof e&&(e=this.getFunction(e)),T(P([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionResult(e,t){"string"==typeof e&&(e=this.getFunction(e));let r=A(t),n=null,i=null,o=null,s=null;switch(r.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(e.outputs,r)}catch(e){}break;case 4:{const e=T(r.slice(0,4)),t=Yt[e];if(t)i=this._abiCoder.decode(t.inputs,r.slice(4)),o=t.name,s=t.signature,t.reason&&(n=i[0]);else try{const t=this.getError(e);i=this._abiCoder.decode(t.inputs,r.slice(4)),o=t.name,s=t.format()}catch(e){console.log(e)}break}}return Ht.throwError("call revert exception",b.errors.CALL_EXCEPTION,{method:e.format(),errorArgs:i,errorName:o,errorSignature:s,reason:n})}encodeFunctionResult(e,t){return"string"==typeof e&&(e=this.getFunction(e)),T(this._abiCoder.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){"string"==typeof e&&(e=this.getEvent(e)),t.length>e.inputs.length&&Ht.throwError("too many arguments for "+e.format(),b.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:t});let r=[];e.anonymous||r.push(this.getEventTopic(e));const n=(e,t)=>"string"===e.type?Ze(t):"bytes"===e.type?be(T(t)):("address"===e.type&&this._abiCoder.encode(["address"],[t]),U(T(t),32));for(t.forEach(((t,i)=>{let o=e.inputs[i];o.indexed?null==t?r.push(null):"array"===o.baseType||"tuple"===o.baseType?Ht.throwArgumentError("filtering with tuples or arrays not supported","contract."+o.name,t):Array.isArray(t)?r.push(t.map((e=>n(o,e)))):r.push(n(o,t)):null!=t&&Ht.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+o.name,t)}));r.length&&null===r[r.length-1];)r.pop();return r}encodeEventLog(e,t){"string"==typeof e&&(e=this.getEvent(e));const r=[],n=[],i=[];return e.anonymous||r.push(this.getEventTopic(e)),t.length!==e.inputs.length&&Ht.throwArgumentError("event arguments/values mismatch","values",t),e.inputs.forEach(((e,o)=>{const s=t[o];if(e.indexed)if("string"===e.type)r.push(Ze(s));else if("bytes"===e.type)r.push(be(s));else{if("tuple"===e.baseType||"array"===e.baseType)throw new Error("not implemented");r.push(this._abiCoder.encode([e.type],[s]))}else n.push(e),i.push(s)})),{data:this._abiCoder.encode(n,i),topics:r}}decodeEventLog(e,t,r){if("string"==typeof e&&(e=this.getEvent(e)),null!=r&&!e.anonymous){let t=this.getEventTopic(e);O(r[0],32)&&r[0].toLowerCase()===t||Ht.throwError("fragment/topic mismatch",b.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:t,value:r[0]}),r=r.slice(1)}let n=[],i=[],o=[];e.inputs.forEach(((e,t)=>{e.indexed?"string"===e.type||"bytes"===e.type||"tuple"===e.baseType||"array"===e.baseType?(n.push(Nt.fromObject({type:"bytes32",name:e.name})),o.push(!0)):(n.push(e),o.push(!1)):(i.push(e),o.push(!1))}));let s=null!=r?this._abiCoder.decode(n,P(r)):null,a=this._abiCoder.decode(i,t,!0),c=[],u=0,d=0;e.inputs.forEach(((e,t)=>{if(e.indexed)if(null==s)c[t]=new Xt({_isIndexed:!0,hash:null});else if(o[t])c[t]=new Xt({_isIndexed:!0,hash:s[d++]});else try{c[t]=s[d++]}catch(e){c[t]=e}else try{c[t]=a[u++]}catch(e){c[t]=e}if(e.name&&null==c[e.name]){const r=c[t];r instanceof Error?Object.defineProperty(c,e.name,{enumerable:!0,get:()=>{throw Qt(`property ${JSON.stringify(e.name)}`,r)}}):c[e.name]=r}}));for(let e=0;e<c.length;e++){const t=c[e];t instanceof Error&&Object.defineProperty(c,e,{enumerable:!0,get:()=>{throw Qt(`index ${e}`,t)}})}return Object.freeze(c)}parseTransaction(e){let t=this.getFunction(e.data.substring(0,10).toLowerCase());return t?new $t({args:this._abiCoder.decode(t.inputs,"0x"+e.data.substring(10)),functionFragment:t,name:t.name,signature:t.format(),sighash:this.getSighash(t),value:W.from(e.value||"0")}):null}parseLog(e){let t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new Wt({eventFragment:t,name:t.name,signature:t.format(),topic:this.getEventTopic(t),args:this.decodeEventLog(t,e.data,e.topics)})}parseError(e){const t=T(e);let r=this.getError(t.substring(0,10).toLowerCase());return r?new Zt({args:this._abiCoder.decode(r.inputs,"0x"+t.substring(10)),errorFragment:r,name:r.name,signature:r.format(),sighash:this.getSighash(r)}):null}static isInterface(e){return!(!e||!e._isInterface)}}const tr=new b("abstract-provider/5.5.1");class rr extends ue{static isForkEvent(e){return!(!e||!e._isForkEvent)}}class nr{constructor(){tr.checkAbstract(new.target,nr),ee(this,"_isProvider",!0)}getFeeData(){return e=this,t=void 0,n=function*(){const{block:e,gasPrice:t}=yield re({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch((e=>null))});let r=null,n=null;return e&&e.baseFeePerGas&&(n=W.from("2500000000"),r=e.baseFeePerGas.mul(2).add(n)),{maxFeePerGas:r,maxPriorityFeePerGas:n,gasPrice:t}},new((r=void 0)||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}));var e,t,r,n}addListener(e,t){return this.on(e,t)}removeListener(e,t){return this.off(e,t)}static isProvider(e){return!(!e||!e._isProvider)}}var ir=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};const or=new b("abstract-signer/5.5.0"),sr=["accessList","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],ar=[b.errors.INSUFFICIENT_FUNDS,b.errors.NONCE_EXPIRED,b.errors.REPLACEMENT_UNDERPRICED];class cr{constructor(){or.checkAbstract(new.target,cr),ee(this,"_isSigner",!0)}getBalance(e){return ir(this,void 0,void 0,(function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)}))}getTransactionCount(e){return ir(this,void 0,void 0,(function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)}))}estimateGas(e){return ir(this,void 0,void 0,(function*(){this._checkProvider("estimateGas");const t=yield re(this.checkTransaction(e));return yield this.provider.estimateGas(t)}))}call(e,t){return ir(this,void 0,void 0,(function*(){this._checkProvider("call");const r=yield re(this.checkTransaction(e));return yield this.provider.call(r,t)}))}sendTransaction(e){return ir(this,void 0,void 0,(function*(){this._checkProvider("sendTransaction");const t=yield this.populateTransaction(e),r=yield this.signTransaction(t);return yield this.provider.sendTransaction(r)}))}getChainId(){return ir(this,void 0,void 0,(function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId}))}getGasPrice(){return ir(this,void 0,void 0,(function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()}))}getFeeData(){return ir(this,void 0,void 0,(function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()}))}resolveName(e){return ir(this,void 0,void 0,(function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)}))}checkTransaction(e){for(const t in e)-1===sr.indexOf(t)&&or.throwArgumentError("invalid transaction key: "+t,"transaction",e);const t=ie(e);return null==t.from?t.from=this.getAddress():t.from=Promise.all([Promise.resolve(t.from),this.getAddress()]).then((t=>(t[0].toLowerCase()!==t[1].toLowerCase()&&or.throwArgumentError("from address mismatch","transaction",e),t[0]))),t}populateTransaction(e){return ir(this,void 0,void 0,(function*(){const t=yield re(this.checkTransaction(e));null!=t.to&&(t.to=Promise.resolve(t.to).then((e=>ir(this,void 0,void 0,(function*(){if(null==e)return null;const t=yield this.resolveName(e);return null==t&&or.throwArgumentError("provided ENS name resolves to null","tx.to",e),t})))),t.to.catch((e=>{})));const r=null!=t.maxFeePerGas||null!=t.maxPriorityFeePerGas;if(null==t.gasPrice||2!==t.type&&!r?0!==t.type&&1!==t.type||!r||or.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e):or.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e),2!==t.type&&null!=t.type||null==t.maxFeePerGas||null==t.maxPriorityFeePerGas)if(0===t.type||1===t.type)null==t.gasPrice&&(t.gasPrice=this.getGasPrice());else{const e=yield this.getFeeData();if(null==t.type)if(null!=e.maxFeePerGas&&null!=e.maxPriorityFeePerGas)if(t.type=2,null!=t.gasPrice){const e=t.gasPrice;delete t.gasPrice,t.maxFeePerGas=e,t.maxPriorityFeePerGas=e}else null==t.maxFeePerGas&&(t.maxFeePerGas=e.maxFeePerGas),null==t.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas);else null!=e.gasPrice?(r&&or.throwError("network does not support EIP-1559",b.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),null==t.gasPrice&&(t.gasPrice=e.gasPrice),t.type=0):or.throwError("failed to get consistent fee data",b.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else 2===t.type&&(null==t.maxFeePerGas&&(t.maxFeePerGas=e.maxFeePerGas),null==t.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas))}else t.type=2;return null==t.nonce&&(t.nonce=this.getTransactionCount("pending")),null==t.gasLimit&&(t.gasLimit=this.estimateGas(t).catch((e=>{if(ar.indexOf(e.code)>=0)throw e;return or.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",b.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,tx:t})}))),null==t.chainId?t.chainId=this.getChainId():t.chainId=Promise.all([Promise.resolve(t.chainId),this.getChainId()]).then((t=>(0!==t[1]&&t[0]!==t[1]&&or.throwArgumentError("chainId address mismatch","transaction",e),t[0]))),yield re(t)}))}_checkProvider(e){this.provider||or.throwError("missing provider",b.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!(!e||!e._isSigner)}}class ur extends cr{constructor(e,t){or.checkNew(new.target,ur),super(),ee(this,"address",e),ee(this,"provider",t||null)}getAddress(){return Promise.resolve(this.address)}_fail(e,t){return Promise.resolve().then((()=>{or.throwError(e,b.errors.UNSUPPORTED_OPERATION,{operation:t})}))}signMessage(e){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(e){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(e,t,r){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(e){return new ur(this.address,e)}}var dr=r(3715),lr=r.n(dr);function fr(e,t,r){return r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&r.path)}},e(r,r.exports),r.exports}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self&&self;var hr=pr;function pr(e,t){if(!e)throw new Error(t||"Assertion failed")}pr.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var yr=fr((function(e,t){var r=t;function n(e){return 1===e.length?"0"+e:e}function i(e){for(var t="",r=0;r<e.length;r++)t+=n(e[r].toString(16));return t}r.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"!=typeof e){for(var n=0;n<e.length;n++)r[n]=0|e[n];return r}if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16));else for(n=0;n<e.length;n++){var i=e.charCodeAt(n),o=i>>8,s=255&i;o?r.push(o,s):r.push(s)}return r},r.zero2=n,r.toHex=i,r.encode=function(e,t){return"hex"===t?i(e):e}})),mr=fr((function(e,t){var r=t;r.assert=hr,r.toArray=yr.toArray,r.zero2=yr.zero2,r.toHex=yr.toHex,r.encode=yr.encode,r.getNAF=function(e,t,r){var n=new Array(Math.max(e.bitLength(),r)+1);n.fill(0);for(var i=1<<t+1,o=e.clone(),s=0;s<n.length;s++){var a,c=o.andln(i-1);o.isOdd()?(a=c>(i>>1)-1?(i>>1)-c:c,o.isubn(a)):a=0,n[s]=a,o.iushrn(1)}return n},r.getJSF=function(e,t){var r=[[],[]];e=e.clone(),t=t.clone();for(var n,i=0,o=0;e.cmpn(-i)>0||t.cmpn(-o)>0;){var s,a,c=e.andln(3)+i&3,u=t.andln(3)+o&3;3===c&&(c=-1),3===u&&(u=-1),s=0==(1&c)?0:3!=(n=e.andln(7)+i&7)&&5!==n||2!==u?c:-c,r[0].push(s),a=0==(1&u)?0:3!=(n=t.andln(7)+o&7)&&5!==n||2!==c?u:-u,r[1].push(a),2*i===s+1&&(i=1-i),2*o===a+1&&(o=1-o),e.iushrn(1),t.iushrn(1)}return r},r.cachedProperty=function(e,t,r){var n="_"+t;e.prototype[t]=function(){return void 0!==this[n]?this[n]:this[n]=r.call(this)}},r.parseBytes=function(e){return"string"==typeof e?r.toArray(e,"hex"):e},r.intFromLE=function(e){return new(L())(e,"hex","le")}})),gr=mr.getNAF,br=mr.getJSF,vr=mr.assert;function wr(e,t){this.type=e,this.p=new(L())(t.p,16),this.red=t.prime?L().red(t.prime):L().mont(this.p),this.zero=new(L())(0).toRed(this.red),this.one=new(L())(1).toRed(this.red),this.two=new(L())(2).toRed(this.red),this.n=t.n&&new(L())(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Er=wr;function Sr(e,t){this.curve=e,this.type=t,this.precomputed=null}wr.prototype.point=function(){throw new Error("Not implemented")},wr.prototype.validate=function(){throw new Error("Not implemented")},wr.prototype._fixedNafMul=function(e,t){vr(e.precomputed);var r=e._getDoubles(),n=gr(t,1,this._bitLength),i=(1<<r.step+1)-(r.step%2==0?2:1);i/=3;var o,s,a=[];for(o=0;o<n.length;o+=r.step){s=0;for(var c=o+r.step-1;c>=o;c--)s=(s<<1)+n[c];a.push(s)}for(var u=this.jpoint(null,null,null),d=this.jpoint(null,null,null),l=i;l>0;l--){for(o=0;o<a.length;o++)(s=a[o])===l?d=d.mixedAdd(r.points[o]):s===-l&&(d=d.mixedAdd(r.points[o].neg()));u=u.add(d)}return u.toP()},wr.prototype._wnafMul=function(e,t){var r=4,n=e._getNAFPoints(r);r=n.wnd;for(var i=n.points,o=gr(t,r,this._bitLength),s=this.jpoint(null,null,null),a=o.length-1;a>=0;a--){for(var c=0;a>=0&&0===o[a];a--)c++;if(a>=0&&c++,s=s.dblp(c),a<0)break;var u=o[a];vr(0!==u),s="affine"===e.type?u>0?s.mixedAdd(i[u-1>>1]):s.mixedAdd(i[-u-1>>1].neg()):u>0?s.add(i[u-1>>1]):s.add(i[-u-1>>1].neg())}return"affine"===e.type?s.toP():s},wr.prototype._wnafMulAdd=function(e,t,r,n,i){var o,s,a,c=this._wnafT1,u=this._wnafT2,d=this._wnafT3,l=0;for(o=0;o<n;o++){var f=(a=t[o])._getNAFPoints(e);c[o]=f.wnd,u[o]=f.points}for(o=n-1;o>=1;o-=2){var h=o-1,p=o;if(1===c[h]&&1===c[p]){var y=[t[h],null,null,t[p]];0===t[h].y.cmp(t[p].y)?(y[1]=t[h].add(t[p]),y[2]=t[h].toJ().mixedAdd(t[p].neg())):0===t[h].y.cmp(t[p].y.redNeg())?(y[1]=t[h].toJ().mixedAdd(t[p]),y[2]=t[h].add(t[p].neg())):(y[1]=t[h].toJ().mixedAdd(t[p]),y[2]=t[h].toJ().mixedAdd(t[p].neg()));var m=[-3,-1,-5,-7,0,7,5,1,3],g=br(r[h],r[p]);for(l=Math.max(g[0].length,l),d[h]=new Array(l),d[p]=new Array(l),s=0;s<l;s++){var b=0|g[0][s],v=0|g[1][s];d[h][s]=m[3*(b+1)+(v+1)],d[p][s]=0,u[h]=y}}else d[h]=gr(r[h],c[h],this._bitLength),d[p]=gr(r[p],c[p],this._bitLength),l=Math.max(d[h].length,l),l=Math.max(d[p].length,l)}var w=this.jpoint(null,null,null),E=this._wnafT4;for(o=l;o>=0;o--){for(var S=0;o>=0;){var _=!0;for(s=0;s<n;s++)E[s]=0|d[s][o],0!==E[s]&&(_=!1);if(!_)break;S++,o--}if(o>=0&&S++,w=w.dblp(S),o<0)break;for(s=0;s<n;s++){var k=E[s];0!==k&&(k>0?a=u[s][k-1>>1]:k<0&&(a=u[s][-k-1>>1].neg()),w="affine"===a.type?w.mixedAdd(a):w.add(a))}}for(o=0;o<n;o++)u[o]=null;return i?w:w.toP()},wr.BasePoint=Sr,Sr.prototype.eq=function(){throw new Error("Not implemented")},Sr.prototype.validate=function(){return this.curve.validate(this)},wr.prototype.decodePoint=function(e,t){e=mr.toArray(e,t);var r=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*r)return 6===e[0]?vr(e[e.length-1]%2==0):7===e[0]&&vr(e[e.length-1]%2==1),this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));if((2===e[0]||3===e[0])&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),3===e[0]);throw new Error("Unknown point format")},Sr.prototype.encodeCompressed=function(e){return this.encode(e,!0)},Sr.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))},Sr.prototype.encode=function(e,t){return mr.encode(this._encode(t),e)},Sr.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},Sr.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},Sr.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;i<t;i+=e){for(var o=0;o<e;o++)n=n.dbl();r.push(n)}return{step:e,points:r}},Sr.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,n=1===r?null:this.dbl(),i=1;i<r;i++)t[i]=t[i-1].add(n);return{wnd:e,points:t}},Sr.prototype._getBeta=function(){return null},Sr.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t};var _r=fr((function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}})),kr=mr.assert;function Ar(e){Er.call(this,"short",e),this.a=new(L())(e.a,16).toRed(this.red),this.b=new(L())(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}_r(Ar,Er);var Pr=Ar;function Nr(e,t,r,n){Er.BasePoint.call(this,e,"affine"),null===t&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new(L())(t,16),this.y=new(L())(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function xr(e,t,r,n){Er.BasePoint.call(this,e,"jacobian"),null===t&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new(L())(0)):(this.x=new(L())(t,16),this.y=new(L())(r,16),this.z=new(L())(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Ar.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,r;if(e.beta)t=new(L())(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);t=(t=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(e.lambda)r=new(L())(e.lambda,16);else{var i=this._getEndoRoots(this.n);0===this.g.mul(i[0]).x.cmp(this.g.x.redMul(t))?r=i[0]:(r=i[1],kr(0===this.g.mul(r).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:r,basis:e.basis?e.basis.map((function(e){return{a:new(L())(e.a,16),b:new(L())(e.b,16)}})):this._getEndoBasis(r)}}},Ar.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:L().mont(e),r=new(L())(2).toRed(t).redInvm(),n=r.redNeg(),i=new(L())(3).toRed(t).redNeg().redSqrt().redMul(r);return[n.redAdd(i).fromRed(),n.redSub(i).fromRed()]},Ar.prototype._getEndoBasis=function(e){for(var t,r,n,i,o,s,a,c,u,d=this.n.ushrn(Math.floor(this.n.bitLength()/2)),l=e,f=this.n.clone(),h=new(L())(1),p=new(L())(0),y=new(L())(0),m=new(L())(1),g=0;0!==l.cmpn(0);){var b=f.div(l);c=f.sub(b.mul(l)),u=y.sub(b.mul(h));var v=m.sub(b.mul(p));if(!n&&c.cmp(d)<0)t=a.neg(),r=h,n=c.neg(),i=u;else if(n&&2==++g)break;a=c,f=l,l=c,y=h,h=u,m=p,p=v}o=c.neg(),s=u;var w=n.sqr().add(i.sqr());return o.sqr().add(s.sqr()).cmp(w)>=0&&(o=t,s=r),n.negative&&(n=n.neg(),i=i.neg()),o.negative&&(o=o.neg(),s=s.neg()),[{a:n,b:i},{a:o,b:s}]},Ar.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],n=t[1],i=n.b.mul(e).divRound(this.n),o=r.b.neg().mul(e).divRound(this.n),s=i.mul(r.a),a=o.mul(n.a),c=i.mul(r.b),u=o.mul(n.b);return{k1:e.sub(s).sub(a),k2:c.add(u).neg()}},Ar.prototype.pointFromX=function(e,t){(e=new(L())(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(0!==n.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var i=n.fromRed().isOdd();return(t&&!i||!t&&i)&&(n=n.redNeg()),this.point(e,n)},Ar.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,n=this.a.redMul(t),i=t.redSqr().redMul(t).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(i).cmpn(0)},Ar.prototype._endoWnafMulAdd=function(e,t,r){for(var n=this._endoWnafT1,i=this._endoWnafT2,o=0;o<e.length;o++){var s=this._endoSplit(t[o]),a=e[o],c=a._getBeta();s.k1.negative&&(s.k1.ineg(),a=a.neg(!0)),s.k2.negative&&(s.k2.ineg(),c=c.neg(!0)),n[2*o]=a,n[2*o+1]=c,i[2*o]=s.k1,i[2*o+1]=s.k2}for(var u=this._wnafMulAdd(1,n,i,2*o,r),d=0;d<2*o;d++)n[d]=null,i[d]=null;return u},_r(Nr,Er.BasePoint),Ar.prototype.point=function(e,t,r){return new Nr(this,e,t,r)},Ar.prototype.pointFromJSON=function(e,t){return Nr.fromJSON(this,e,t)},Nr.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,n=function(e){return r.point(e.x.redMul(r.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return t}},Nr.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},Nr.fromJSON=function(e,t,r){"string"==typeof t&&(t=JSON.parse(t));var n=e.point(t[0],t[1],r);if(!t[2])return n;function i(t){return e.point(t[0],t[1],r)}var o=t[2];return n.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[n].concat(o.doubles.points.map(i))},naf:o.naf&&{wnd:o.naf.wnd,points:[n].concat(o.naf.points.map(i))}},n},Nr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},Nr.prototype.isInfinity=function(){return this.inf},Nr.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),n=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},Nr.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),n=e.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(n),o=i.redSqr().redISub(this.x.redAdd(this.x)),s=i.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,s)},Nr.prototype.getX=function(){return this.x.fromRed()},Nr.prototype.getY=function(){return this.y.fromRed()},Nr.prototype.mul=function(e){return e=new(L())(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},Nr.prototype.mulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},Nr.prototype.jmulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i,!0):this.curve._wnafMulAdd(1,n,i,2,!0)},Nr.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},Nr.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,n=function(e){return e.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return t},Nr.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},_r(xr,Er.BasePoint),Ar.prototype.jpoint=function(e,t,r){return new xr(this,e,t,r)},xr.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),n=this.y.redMul(t).redMul(e);return this.curve.point(r,n)},xr.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},xr.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(t),i=e.x.redMul(r),o=this.y.redMul(t.redMul(e.z)),s=e.y.redMul(r.redMul(this.z)),a=n.redSub(i),c=o.redSub(s);if(0===a.cmpn(0))return 0!==c.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),d=u.redMul(a),l=n.redMul(u),f=c.redSqr().redIAdd(d).redISub(l).redISub(l),h=c.redMul(l.redISub(f)).redISub(o.redMul(d)),p=this.z.redMul(e.z).redMul(a);return this.curve.jpoint(f,h,p)},xr.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,n=e.x.redMul(t),i=this.y,o=e.y.redMul(t).redMul(this.z),s=r.redSub(n),a=i.redSub(o);if(0===s.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=s.redSqr(),u=c.redMul(s),d=r.redMul(c),l=a.redSqr().redIAdd(u).redISub(d).redISub(d),f=a.redMul(d.redISub(l)).redISub(i.redMul(u)),h=this.z.redMul(s);return this.curve.jpoint(l,f,h)},xr.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var r=this;for(t=0;t<e;t++)r=r.dbl();return r}var n=this.curve.a,i=this.curve.tinv,o=this.x,s=this.y,a=this.z,c=a.redSqr().redSqr(),u=s.redAdd(s);for(t=0;t<e;t++){var d=o.redSqr(),l=u.redSqr(),f=l.redSqr(),h=d.redAdd(d).redIAdd(d).redIAdd(n.redMul(c)),p=o.redMul(l),y=h.redSqr().redISub(p.redAdd(p)),m=p.redISub(y),g=h.redMul(m);g=g.redIAdd(g).redISub(f);var b=u.redMul(a);t+1<e&&(c=c.redMul(f)),o=y,a=b,u=g}return this.curve.jpoint(o,u.redMul(i),a)},xr.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},xr.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(n).redISub(o);s=s.redIAdd(s);var a=n.redAdd(n).redIAdd(n),c=a.redSqr().redISub(s).redISub(s),u=o.redIAdd(o);u=(u=u.redIAdd(u)).redIAdd(u),e=c,t=a.redMul(s.redISub(c)).redISub(u),r=this.y.redAdd(this.y)}else{var d=this.x.redSqr(),l=this.y.redSqr(),f=l.redSqr(),h=this.x.redAdd(l).redSqr().redISub(d).redISub(f);h=h.redIAdd(h);var p=d.redAdd(d).redIAdd(d),y=p.redSqr(),m=f.redIAdd(f);m=(m=m.redIAdd(m)).redIAdd(m),e=y.redISub(h).redISub(h),t=p.redMul(h.redISub(e)).redISub(m),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(e,t,r)},xr.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(n).redISub(o);s=s.redIAdd(s);var a=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),c=a.redSqr().redISub(s).redISub(s);e=c;var u=o.redIAdd(o);u=(u=u.redIAdd(u)).redIAdd(u),t=a.redMul(s.redISub(c)).redISub(u),r=this.y.redAdd(this.y)}else{var d=this.z.redSqr(),l=this.y.redSqr(),f=this.x.redMul(l),h=this.x.redSub(d).redMul(this.x.redAdd(d));h=h.redAdd(h).redIAdd(h);var p=f.redIAdd(f),y=(p=p.redIAdd(p)).redAdd(p);e=h.redSqr().redISub(y),r=this.y.redAdd(this.z).redSqr().redISub(l).redISub(d);var m=l.redSqr();m=(m=(m=m.redIAdd(m)).redIAdd(m)).redIAdd(m),t=h.redMul(p.redISub(e)).redISub(m)}return this.curve.jpoint(e,t,r)},xr.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),o=t.redSqr(),s=r.redSqr(),a=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(i)),c=t.redAdd(t),u=(c=c.redIAdd(c)).redMul(s),d=a.redSqr().redISub(u.redAdd(u)),l=u.redISub(d),f=s.redSqr();f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var h=a.redMul(l).redISub(f),p=r.redAdd(r).redMul(n);return this.curve.jpoint(d,h,p)},xr.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),n=t.redSqr(),i=e.redAdd(e).redIAdd(e),o=i.redSqr(),s=this.x.redAdd(t).redSqr().redISub(e).redISub(n),a=(s=(s=(s=s.redIAdd(s)).redAdd(s).redIAdd(s)).redISub(o)).redSqr(),c=n.redIAdd(n);c=(c=(c=c.redIAdd(c)).redIAdd(c)).redIAdd(c);var u=i.redIAdd(s).redSqr().redISub(o).redISub(a).redISub(c),d=t.redMul(u);d=(d=d.redIAdd(d)).redIAdd(d);var l=this.x.redMul(a).redISub(d);l=(l=l.redIAdd(l)).redIAdd(l);var f=this.y.redMul(u.redMul(c.redISub(u)).redISub(s.redMul(a)));f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var h=this.z.redAdd(s).redSqr().redISub(r).redISub(a);return this.curve.jpoint(l,f,h)},xr.prototype.mul=function(e,t){return e=new(L())(e,t),this.curve._wnafMul(this,e)},xr.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var n=t.redMul(this.z),i=r.redMul(e.z);return 0===this.y.redMul(i).redISub(e.y.redMul(n)).cmpn(0)},xr.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(r))return!0;for(var n=e.clone(),i=this.curve.redN.redMul(t);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),0===this.x.cmp(r))return!0}},xr.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},xr.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var Or=fr((function(e,t){var r=t;r.base=Er,r.short=Pr,r.mont=null,r.edwards=null})),Mr=fr((function(e,t){var r,n=t,i=mr.assert;function o(e){"short"===e.type?this.curve=new Or.short(e):"edwards"===e.type?this.curve=new Or.edwards(e):this.curve=new Or.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function s(e,t){Object.defineProperty(n,e,{configurable:!0,enumerable:!0,get:function(){var r=new o(t);return Object.defineProperty(n,e,{configurable:!0,enumerable:!0,value:r}),r}})}n.PresetCurve=o,s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:lr().sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:lr().sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:lr().sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:lr().sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:lr().sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:lr().sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:lr().sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=null.crash()}catch(e){r=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:lr().sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})}));function Tr(e){if(!(this instanceof Tr))return new Tr(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=yr.toArray(e.entropy,e.entropyEnc||"hex"),r=yr.toArray(e.nonce,e.nonceEnc||"hex"),n=yr.toArray(e.pers,e.persEnc||"hex");hr(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,n)}var Ir=Tr;Tr.prototype._init=function(e,t,r){var n=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},Tr.prototype._hmac=function(){return new(lr().hmac)(this.hash,this.K)},Tr.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},Tr.prototype.reseed=function(e,t,r,n){"string"!=typeof t&&(n=r,r=t,t=null),e=yr.toArray(e,t),r=yr.toArray(r,n),hr(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1},Tr.prototype.generate=function(e,t,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(n=r,r=t,t=null),r&&(r=yr.toArray(r,n||"hex"),this._update(r));for(var i=[];i.length<e;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var o=i.slice(0,e);return this._update(r),this._reseed++,yr.encode(o,t)};var Rr=mr.assert;function Br(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var Cr=Br;Br.fromPublic=function(e,t,r){return t instanceof Br?t:new Br(e,{pub:t,pubEnc:r})},Br.fromPrivate=function(e,t,r){return t instanceof Br?t:new Br(e,{priv:t,privEnc:r})},Br.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},Br.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},Br.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},Br.prototype._importPrivate=function(e,t){this.priv=new(L())(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},Br.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?Rr(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||Rr(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},Br.prototype.derive=function(e){return e.validate()||Rr(e.validate(),"public point not validated"),e.mul(this.priv).getX()},Br.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},Br.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},Br.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var Kr=mr.assert;function Ur(e,t){if(e instanceof Ur)return e;this._importDER(e,t)||(Kr(e.r&&e.s,"Signature without r or s"),this.r=new(L())(e.r,16),this.s=new(L())(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}var Dr=Ur;function jr(){this.place=0}function Fr(e,t){var r=e[t.place++];if(!(128&r))return r;var n=15&r;if(0===n||n>4)return!1;for(var i=0,o=0,s=t.place;o<n;o++,s++)i<<=8,i|=e[s],i>>>=0;return!(i<=127)&&(t.place=s,i)}function Lr(e){for(var t=0,r=e.length-1;!e[t]&&!(128&e[t+1])&&t<r;)t++;return 0===t?e:e.slice(t)}function qr(e,t){if(t<128)e.push(t);else{var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|r);--r;)e.push(t>>>(r<<3)&255);e.push(t)}}Ur.prototype._importDER=function(e,t){e=mr.toArray(e,t);var r=new jr;if(48!==e[r.place++])return!1;var n=Fr(e,r);if(!1===n)return!1;if(n+r.place!==e.length)return!1;if(2!==e[r.place++])return!1;var i=Fr(e,r);if(!1===i)return!1;var o=e.slice(r.place,i+r.place);if(r.place+=i,2!==e[r.place++])return!1;var s=Fr(e,r);if(!1===s)return!1;if(e.length!==s+r.place)return!1;var a=e.slice(r.place,s+r.place);if(0===o[0]){if(!(128&o[1]))return!1;o=o.slice(1)}if(0===a[0]){if(!(128&a[1]))return!1;a=a.slice(1)}return this.r=new(L())(o),this.s=new(L())(a),this.recoveryParam=null,!0},Ur.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&r[0]&&(r=[0].concat(r)),t=Lr(t),r=Lr(r);!(r[0]||128&r[1]);)r=r.slice(1);var n=[2];qr(n,t.length),(n=n.concat(t)).push(2),qr(n,r.length);var i=n.concat(r),o=[48];return qr(o,i.length),o=o.concat(i),mr.encode(o,e)};var Vr=function(){throw new Error("unsupported")},Jr=mr.assert;function zr(e){if(!(this instanceof zr))return new zr(e);"string"==typeof e&&(Jr(Object.prototype.hasOwnProperty.call(Mr,e),"Unknown curve "+e),e=Mr[e]),e instanceof Mr.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}var Gr=zr;zr.prototype.keyPair=function(e){return new Cr(this,e)},zr.prototype.keyFromPrivate=function(e,t){return Cr.fromPrivate(this,e,t)},zr.prototype.keyFromPublic=function(e,t){return Cr.fromPublic(this,e,t)},zr.prototype.genKeyPair=function(e){e||(e={});for(var t=new Ir({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||Vr(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),n=this.n.sub(new(L())(2));;){var i=new(L())(t.generate(r));if(!(i.cmp(n)>0))return i.iaddn(1),this.keyFromPrivate(i)}},zr.prototype._truncateToN=function(e,t){var r=8*e.byteLength()-this.n.bitLength();return r>0&&(e=e.ushrn(r)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},zr.prototype.sign=function(e,t,r,n){"object"==typeof r&&(n=r,r=null),n||(n={}),t=this.keyFromPrivate(t,r),e=this._truncateToN(new(L())(e,16));for(var i=this.n.byteLength(),o=t.getPrivate().toArray("be",i),s=e.toArray("be",i),a=new Ir({hash:this.hash,entropy:o,nonce:s,pers:n.pers,persEnc:n.persEnc||"utf8"}),c=this.n.sub(new(L())(1)),u=0;;u++){var d=n.k?n.k(u):new(L())(a.generate(this.n.byteLength()));if(!((d=this._truncateToN(d,!0)).cmpn(1)<=0||d.cmp(c)>=0)){var l=this.g.mul(d);if(!l.isInfinity()){var f=l.getX(),h=f.umod(this.n);if(0!==h.cmpn(0)){var p=d.invm(this.n).mul(h.mul(t.getPrivate()).iadd(e));if(0!==(p=p.umod(this.n)).cmpn(0)){var y=(l.getY().isOdd()?1:0)|(0!==f.cmp(h)?2:0);return n.canonical&&p.cmp(this.nh)>0&&(p=this.n.sub(p),y^=1),new Dr({r:h,s:p,recoveryParam:y})}}}}}},zr.prototype.verify=function(e,t,r,n){e=this._truncateToN(new(L())(e,16)),r=this.keyFromPublic(r,n);var i=(t=new Dr(t,"hex")).r,o=t.s;if(i.cmpn(1)<0||i.cmp(this.n)>=0)return!1;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var s,a=o.invm(this.n),c=a.mul(e).umod(this.n),u=a.mul(i).umod(this.n);return this.curve._maxwellTrick?!(s=this.g.jmulAdd(c,r.getPublic(),u)).isInfinity()&&s.eqXToP(i):!(s=this.g.mulAdd(c,r.getPublic(),u)).isInfinity()&&0===s.getX().umod(this.n).cmp(i)},zr.prototype.recoverPubKey=function(e,t,r,n){Jr((3&r)===r,"The recovery param is more than two bits"),t=new Dr(t,n);var i=this.n,o=new(L())(e),s=t.r,a=t.s,c=1&r,u=r>>1;if(s.cmp(this.curve.p.umod(this.curve.n))>=0&&u)throw new Error("Unable to find sencond key candinate");s=u?this.curve.pointFromX(s.add(this.curve.n),c):this.curve.pointFromX(s,c);var d=t.r.invm(i),l=i.sub(o).mul(d).umod(i),f=a.mul(d).umod(i);return this.g.mulAdd(l,s,f)},zr.prototype.getKeyRecoveryParam=function(e,t,r,n){if(null!==(t=new Dr(t,n)).recoveryParam)return t.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(e,t,i)}catch(e){continue}if(o.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var Hr=fr((function(e,t){var r=t;r.version="6.5.4",r.utils=mr,r.rand=function(){throw new Error("unsupported")},r.curve=Or,r.curves=Mr,r.ec=Gr,r.eddsa=null})).ec;const Wr=new b("signing-key/5.5.0");let $r=null;function Zr(){return $r||($r=new Hr("secp256k1")),$r}class Xr{constructor(e){ee(this,"curve","secp256k1"),ee(this,"privateKey",T(e));const t=Zr().keyFromPrivate(A(this.privateKey));ee(this,"publicKey","0x"+t.getPublic(!1,"hex")),ee(this,"compressedPublicKey","0x"+t.getPublic(!0,"hex")),ee(this,"_isSigningKey",!0)}_addPoint(e){const t=Zr().keyFromPublic(A(this.publicKey)),r=Zr().keyFromPublic(A(e));return"0x"+t.pub.add(r.pub).encodeCompressed("hex")}signDigest(e){const t=Zr().keyFromPrivate(A(this.privateKey)),r=A(e);32!==r.length&&Wr.throwArgumentError("bad digest length","digest",e);const n=t.sign(r,{canonical:!0});return D({recoveryParam:n.recoveryParam,r:U("0x"+n.r.toString(16),32),s:U("0x"+n.s.toString(16),32)})}computeSharedSecret(e){const t=Zr().keyFromPrivate(A(this.privateKey)),r=Zr().keyFromPublic(A(Qr(e)));return U("0x"+t.derive(r.getPublic()).toString(16),32)}static isSigningKey(e){return!(!e||!e._isSigningKey)}}function Yr(e,t){const r=D(t),n={r:A(r.r),s:A(r.s)};return"0x"+Zr().recoverPubKey(A(e),n,r.recoveryParam).encode("hex",!1)}function Qr(e,t){const r=A(e);if(32===r.length){const e=new Xr(r);return t?"0x"+Zr().keyFromPrivate(r).getPublic(!0,"hex"):e.publicKey}return 33===r.length?t?T(r):"0x"+Zr().keyFromPublic(r).getPublic(!1,"hex"):65===r.length?t?"0x"+Zr().keyFromPublic(r).getPublic(!0,"hex"):T(r):Wr.throwArgumentError("invalid public or private key","key","[REDACTED]")}const en=new b("transactions/5.5.0");var tn;function rn(e){return"0x"===e?null:Re(e)}function nn(e){return"0x"===e?ut:W.from(e)}!function(e){e[e.legacy=0]="legacy",e[e.eip2930=1]="eip2930",e[e.eip1559=2]="eip1559"}(tn||(tn={}));const on=[{name:"nonce",maxLength:32,numeric:!0},{name:"gasPrice",maxLength:32,numeric:!0},{name:"gasLimit",maxLength:32,numeric:!0},{name:"to",length:20},{name:"value",maxLength:32,numeric:!0},{name:"data"}],sn={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,type:!0,value:!0};function an(e){return Re(R(be(R(Qr(e),1)),12))}function cn(e,t){return an(Yr(A(e),t))}function un(e,t){const r=N(W.from(e).toHexString());return r.length>32&&en.throwArgumentError("invalid length for "+t,"transaction:"+t,e),r}function dn(e,t){return{address:Re(e),storageKeys:(t||[]).map(((t,r)=>(32!==I(t)&&en.throwArgumentError("invalid access list storageKey",`accessList[${e}:${r}]`,t),t.toLowerCase())))}}function ln(e){if(Array.isArray(e))return e.map(((e,t)=>Array.isArray(e)?(e.length>2&&en.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${t}]`,e),dn(e[0],e[1])):dn(e.address,e.storageKeys)));const t=Object.keys(e).map((t=>{const r=e[t].reduce(((e,t)=>(e[t]=!0,e)),{});return dn(t,Object.keys(r).sort())}));return t.sort(((e,t)=>e.address.localeCompare(t.address))),t}function fn(e){return ln(e).map((e=>[e.address,e.storageKeys]))}function hn(e,t){if(null!=e.gasPrice){const t=W.from(e.gasPrice),r=W.from(e.maxFeePerGas||0);t.eq(r)||en.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:t,maxFeePerGas:r})}const r=[un(e.chainId||0,"chainId"),un(e.nonce||0,"nonce"),un(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),un(e.maxFeePerGas||0,"maxFeePerGas"),un(e.gasLimit||0,"gasLimit"),null!=e.to?Re(e.to):"0x",un(e.value||0,"value"),e.data||"0x",fn(e.accessList||[])];if(t){const e=D(t);r.push(un(e.recoveryParam,"recoveryParam")),r.push(N(e.r)),r.push(N(e.s))}return B(["0x02",_e(r)])}function pn(e,t){const r=[un(e.chainId||0,"chainId"),un(e.nonce||0,"nonce"),un(e.gasPrice||0,"gasPrice"),un(e.gasLimit||0,"gasLimit"),null!=e.to?Re(e.to):"0x",un(e.value||0,"value"),e.data||"0x",fn(e.accessList||[])];if(t){const e=D(t);r.push(un(e.recoveryParam,"recoveryParam")),r.push(N(e.r)),r.push(N(e.s))}return B(["0x01",_e(r)])}function yn(e,t){if(null==e.type||0===e.type)return null!=e.accessList&&en.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",e),function(e,t){ne(e,sn);const r=[];on.forEach((function(t){let n=e[t.name]||[];const i={};t.numeric&&(i.hexPad="left"),n=A(T(n,i)),t.length&&n.length!==t.length&&n.length>0&&en.throwArgumentError("invalid length for "+t.name,"transaction:"+t.name,n),t.maxLength&&(n=N(n),n.length>t.maxLength&&en.throwArgumentError("invalid length for "+t.name,"transaction:"+t.name,n)),r.push(T(n))}));let n=0;if(null!=e.chainId?(n=e.chainId,"number"!=typeof n&&en.throwArgumentError("invalid transaction.chainId","transaction",e)):t&&!S(t)&&t.v>28&&(n=Math.floor((t.v-35)/2)),0!==n&&(r.push(T(n)),r.push("0x"),r.push("0x")),!t)return _e(r);const i=D(t);let o=27+i.recoveryParam;return 0!==n?(r.pop(),r.pop(),r.pop(),o+=2*n+8,i.v>28&&i.v!==o&&en.throwArgumentError("transaction.chainId/signature.v mismatch","signature",t)):i.v!==o&&en.throwArgumentError("transaction.chainId/signature.v mismatch","signature",t),r.push(T(o)),r.push(N(A(i.r))),r.push(N(A(i.s))),_e(r)}(e,t);switch(e.type){case 1:return pn(e,t);case 2:return hn(e,t)}return en.throwError(`unsupported transaction type: ${e.type}`,b.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:e.type})}function mn(e,t,r){try{const r=nn(t[0]).toNumber();if(0!==r&&1!==r)throw new Error("bad recid");e.v=r}catch(e){en.throwArgumentError("invalid v for transaction type: 1","v",t[0])}e.r=U(t[1],32),e.s=U(t[2],32);try{const t=be(r(e));e.from=cn(t,{r:e.r,s:e.s,recoveryParam:e.v})}catch(e){console.log(e)}}function gn(e){const t=A(e);if(t[0]>127)return function(e){const t=Pe(e);9!==t.length&&6!==t.length&&en.throwArgumentError("invalid raw transaction","rawTransaction",e);const r={nonce:nn(t[0]).toNumber(),gasPrice:nn(t[1]),gasLimit:nn(t[2]),to:rn(t[3]),value:nn(t[4]),data:t[5],chainId:0};if(6===t.length)return r;try{r.v=W.from(t[6]).toNumber()}catch(e){return console.log(e),r}if(r.r=U(t[7],32),r.s=U(t[8],32),W.from(r.r).isZero()&&W.from(r.s).isZero())r.chainId=r.v,r.v=0;else{r.chainId=Math.floor((r.v-35)/2),r.chainId<0&&(r.chainId=0);let n=r.v-27;const i=t.slice(0,6);0!==r.chainId&&(i.push(T(r.chainId)),i.push("0x"),i.push("0x"),n-=2*r.chainId+8);const o=be(_e(i));try{r.from=cn(o,{r:T(r.r),s:T(r.s),recoveryParam:n})}catch(e){console.log(e)}r.hash=be(e)}return r.type=null,r}(t);switch(t[0]){case 1:return function(e){const t=Pe(e.slice(1));8!==t.length&&11!==t.length&&en.throwArgumentError("invalid component count for transaction type: 1","payload",T(e));const r={type:1,chainId:nn(t[0]).toNumber(),nonce:nn(t[1]).toNumber(),gasPrice:nn(t[2]),gasLimit:nn(t[3]),to:rn(t[4]),value:nn(t[5]),data:t[6],accessList:ln(t[7])};return 8===t.length||(r.hash=be(e),mn(r,t.slice(8),pn)),r}(t);case 2:return function(e){const t=Pe(e.slice(1));9!==t.length&&12!==t.length&&en.throwArgumentError("invalid component count for transaction type: 2","payload",T(e));const r=nn(t[2]),n=nn(t[3]),i={type:2,chainId:nn(t[0]).toNumber(),nonce:nn(t[1]).toNumber(),maxPriorityFeePerGas:r,maxFeePerGas:n,gasPrice:null,gasLimit:nn(t[4]),to:rn(t[5]),value:nn(t[6]),data:t[7],accessList:ln(t[8])};return 9===t.length||(i.hash=be(e),mn(i,t.slice(9),hn)),i}(t)}return en.throwError(`unsupported transaction type: ${t[0]}`,b.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:t[0]})}var bn=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};const vn=new b("contracts/5.5.0"),wn={chainId:!0,data:!0,from:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0,customData:!0};function En(e,t){return bn(this,void 0,void 0,(function*(){const r=yield t;"string"!=typeof r&&vn.throwArgumentError("invalid address or ENS name","name",r);try{return Re(r)}catch(e){}e||vn.throwError("a provider or signer is needed to resolve ENS names",b.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});const n=yield e.resolveName(r);return null==n&&vn.throwArgumentError("resolver or addr is not configured for ENS name","name",r),n}))}function Sn(e,t,r){return bn(this,void 0,void 0,(function*(){return Array.isArray(r)?yield Promise.all(r.map(((r,n)=>Sn(e,Array.isArray(t)?t[n]:t[r.name],r)))):"address"===r.type?yield En(e,t):"tuple"===r.type?yield Sn(e,t,r.components):"array"===r.baseType?Array.isArray(t)?yield Promise.all(t.map((t=>Sn(e,t,r.arrayChildren)))):Promise.reject(vn.makeError("invalid value for array",b.errors.INVALID_ARGUMENT,{argument:"value",value:t})):t}))}function _n(e,t,r){return bn(this,void 0,void 0,(function*(){let n={};r.length===t.inputs.length+1&&"object"==typeof r[r.length-1]&&(n=ie(r.pop())),vn.checkArgumentCount(r.length,t.inputs.length,"passed to contract"),e.signer?n.from?n.from=re({override:En(e.signer,n.from),signer:e.signer.getAddress()}).then((e=>bn(this,void 0,void 0,(function*(){return Re(e.signer)!==e.override&&vn.throwError("Contract with a Signer cannot override from",b.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),e.override})))):n.from=e.signer.getAddress():n.from&&(n.from=En(e.provider,n.from));const i=yield re({args:Sn(e.signer||e.provider,r,t.inputs),address:e.resolvedAddress,overrides:re(n)||{}}),o=e.interface.encodeFunctionData(t,i.args),s={data:o,to:i.address},a=i.overrides;if(null!=a.nonce&&(s.nonce=W.from(a.nonce).toNumber()),null!=a.gasLimit&&(s.gasLimit=W.from(a.gasLimit)),null!=a.gasPrice&&(s.gasPrice=W.from(a.gasPrice)),null!=a.maxFeePerGas&&(s.maxFeePerGas=W.from(a.maxFeePerGas)),null!=a.maxPriorityFeePerGas&&(s.maxPriorityFeePerGas=W.from(a.maxPriorityFeePerGas)),null!=a.from&&(s.from=a.from),null!=a.type&&(s.type=a.type),null!=a.accessList&&(s.accessList=ln(a.accessList)),null==s.gasLimit&&null!=t.gas){let e=21e3;const r=A(o);for(let t=0;t<r.length;t++)e+=4,r[t]&&(e+=64);s.gasLimit=W.from(t.gas).add(e)}if(a.value){const e=W.from(a.value);e.isZero()||t.payable||vn.throwError("non-payable method cannot override value",b.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:n.value}),s.value=e}a.customData&&(s.customData=ie(a.customData)),delete n.nonce,delete n.gasLimit,delete n.gasPrice,delete n.from,delete n.value,delete n.type,delete n.accessList,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas,delete n.customData;const c=Object.keys(n).filter((e=>null!=n[e]));return c.length&&vn.throwError(`cannot override ${c.map((e=>JSON.stringify(e))).join(",")}`,b.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:c}),s}))}function kn(e,t){const r=t.wait.bind(t);t.wait=t=>r(t).then((t=>(t.events=t.logs.map((r=>{let n=ce(r),i=null;try{i=e.interface.parseLog(r)}catch(e){}return i&&(n.args=i.args,n.decode=(t,r)=>e.interface.decodeEventLog(i.eventFragment,t,r),n.event=i.name,n.eventSignature=i.signature),n.removeListener=()=>e.provider,n.getBlock=()=>e.provider.getBlock(t.blockHash),n.getTransaction=()=>e.provider.getTransaction(t.transactionHash),n.getTransactionReceipt=()=>Promise.resolve(t),n})),t)))}function An(e,t,r){const n=e.signer||e.provider;return function(...i){return bn(this,void 0,void 0,(function*(){let o;if(i.length===t.inputs.length+1&&"object"==typeof i[i.length-1]){const e=ie(i.pop());null!=e.blockTag&&(o=yield e.blockTag),delete e.blockTag,i.push(e)}null!=e.deployTransaction&&(yield e._deployed(o));const s=yield _n(e,t,i),a=yield n.call(s,o);try{let n=e.interface.decodeFunctionResult(t,a);return r&&1===t.outputs.length&&(n=n[0]),n}catch(t){throw t.code===b.errors.CALL_EXCEPTION&&(t.address=e.address,t.args=i,t.transaction=s),t}}))}}function Pn(e,t,r){return t.constant?An(e,t,r):function(e,t){return function(...r){return bn(this,void 0,void 0,(function*(){e.signer||vn.throwError("sending a transaction requires a signer",b.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),null!=e.deployTransaction&&(yield e._deployed());const n=yield _n(e,t,r),i=yield e.signer.sendTransaction(n);return kn(e,i),i}))}}(e,t)}function Nn(e){return!e.address||null!=e.topics&&0!==e.topics.length?(e.address||"*")+"@"+(e.topics?e.topics.map((e=>Array.isArray(e)?e.join("|"):e)).join(":"):""):"*"}class xn{constructor(e,t){ee(this,"tag",e),ee(this,"filter",t),this._listeners=[]}addListener(e,t){this._listeners.push({listener:e,once:t})}removeListener(e){let t=!1;this._listeners=this._listeners.filter((r=>!(!t&&r.listener===e&&(t=!0,1))))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map((e=>e.listener))}listenerCount(){return this._listeners.length}run(e){const t=this.listenerCount();return this._listeners=this._listeners.filter((t=>{const r=e.slice();return setTimeout((()=>{t.listener.apply(this,r)}),0),!t.once})),t}prepareEvent(e){}getEmit(e){return[e]}}class On extends xn{constructor(){super("error",null)}}class Mn extends xn{constructor(e,t,r,n){const i={address:e};let o=t.getEventTopic(r);n?(o!==n[0]&&vn.throwArgumentError("topic mismatch","topics",n),i.topics=n.slice()):i.topics=[o],super(Nn(i),i),ee(this,"address",e),ee(this,"interface",t),ee(this,"fragment",r)}prepareEvent(e){super.prepareEvent(e),e.event=this.fragment.name,e.eventSignature=this.fragment.format(),e.decode=(e,t)=>this.interface.decodeEventLog(this.fragment,e,t);try{e.args=this.interface.decodeEventLog(this.fragment,e.data,e.topics)}catch(t){e.args=null,e.decodeError=t}}getEmit(e){const t=fe(e.args);if(t.length)throw t[0].error;const r=(e.args||[]).slice();return r.push(e),r}}class Tn extends xn{constructor(e,t){super("*",{address:e}),ee(this,"address",e),ee(this,"interface",t)}prepareEvent(e){super.prepareEvent(e);try{const t=this.interface.parseLog(e);e.event=t.name,e.eventSignature=t.signature,e.decode=(e,r)=>this.interface.decodeEventLog(t.eventFragment,e,r),e.args=t.args}catch(e){}}}class In{constructor(e,t,r){vn.checkNew(new.target,Rn),ee(this,"interface",te(new.target,"getInterface")(t)),null==r?(ee(this,"provider",null),ee(this,"signer",null)):cr.isSigner(r)?(ee(this,"provider",r.provider||null),ee(this,"signer",r)):nr.isProvider(r)?(ee(this,"provider",r),ee(this,"signer",null)):vn.throwArgumentError("invalid signer or provider","signerOrProvider",r),ee(this,"callStatic",{}),ee(this,"estimateGas",{}),ee(this,"functions",{}),ee(this,"populateTransaction",{}),ee(this,"filters",{});{const e={};Object.keys(this.interface.events).forEach((t=>{const r=this.interface.events[t];ee(this.filters,t,((...e)=>({address:this.address,topics:this.interface.encodeFilterTopics(r,e)}))),e[r.name]||(e[r.name]=[]),e[r.name].push(t)})),Object.keys(e).forEach((t=>{const r=e[t];1===r.length?ee(this.filters,t,this.filters[r[0]]):vn.warn(`Duplicate definition of ${t} (${r.join(", ")})`)}))}if(ee(this,"_runningEvents",{}),ee(this,"_wrappedEmits",{}),null==e&&vn.throwArgumentError("invalid contract address or ENS name","addressOrName",e),ee(this,"address",e),this.provider)ee(this,"resolvedAddress",En(this.provider,e));else try{ee(this,"resolvedAddress",Promise.resolve(Re(e)))}catch(e){vn.throwError("provider is required to use ENS name as contract address",b.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}const n={},i={};Object.keys(this.interface.functions).forEach((e=>{const t=this.interface.functions[e];if(i[e])vn.warn(`Duplicate ABI entry for ${JSON.stringify(e)}`);else{i[e]=!0;{const r=t.name;n[`%${r}`]||(n[`%${r}`]=[]),n[`%${r}`].push(e)}null==this[e]&&ee(this,e,Pn(this,t,!0)),null==this.functions[e]&&ee(this.functions,e,Pn(this,t,!1)),null==this.callStatic[e]&&ee(this.callStatic,e,An(this,t,!0)),null==this.populateTransaction[e]&&ee(this.populateTransaction,e,function(e,t){return function(...r){return _n(e,t,r)}}(this,t)),null==this.estimateGas[e]&&ee(this.estimateGas,e,function(e,t){const r=e.signer||e.provider;return function(...n){return bn(this,void 0,void 0,(function*(){r||vn.throwError("estimate require a provider or signer",b.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});const i=yield _n(e,t,n);return yield r.estimateGas(i)}))}}(this,t))}})),Object.keys(n).forEach((e=>{const t=n[e];if(t.length>1)return;e=e.substring(1);const r=t[0];try{null==this[e]&&ee(this,e,this[r])}catch(e){}null==this.functions[e]&&ee(this.functions,e,this.functions[r]),null==this.callStatic[e]&&ee(this.callStatic,e,this.callStatic[r]),null==this.populateTransaction[e]&&ee(this.populateTransaction,e,this.populateTransaction[r]),null==this.estimateGas[e]&&ee(this.estimateGas,e,this.estimateGas[r])}))}static getContractAddress(e){return Ke(e)}static getInterface(e){return er.isInterface(e)?e:new er(e)}deployed(){return this._deployed()}_deployed(e){return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then((()=>this)):this._deployedPromise=this.provider.getCode(this.address,e).then((e=>("0x"===e&&vn.throwError("contract not deployed",b.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this)))),this._deployedPromise}fallback(e){this.signer||vn.throwError("sending a transactions require a signer",b.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});const t=ie(e||{});return["from","to"].forEach((function(e){null!=t[e]&&vn.throwError("cannot override "+e,b.errors.UNSUPPORTED_OPERATION,{operation:e})})),t.to=this.resolvedAddress,this.deployed().then((()=>this.signer.sendTransaction(t)))}connect(e){"string"==typeof e&&(e=new ur(e,this.provider));const t=new this.constructor(this.address,this.interface,e);return this.deployTransaction&&ee(t,"deployTransaction",this.deployTransaction),t}attach(e){return new this.constructor(e,this.interface,this.signer||this.provider)}static isIndexed(e){return Xt.isIndexed(e)}_normalizeRunningEvent(e){return this._runningEvents[e.tag]?this._runningEvents[e.tag]:e}_getRunningEvent(e){if("string"==typeof e){if("error"===e)return this._normalizeRunningEvent(new On);if("event"===e)return this._normalizeRunningEvent(new xn("event",null));if("*"===e)return this._normalizeRunningEvent(new Tn(this.address,this.interface));const t=this.interface.getEvent(e);return this._normalizeRunningEvent(new Mn(this.address,this.interface,t))}if(e.topics&&e.topics.length>0){try{const t=e.topics[0];if("string"!=typeof t)throw new Error("invalid topic");const r=this.interface.getEvent(t);return this._normalizeRunningEvent(new Mn(this.address,this.interface,r,e.topics))}catch(e){}const t={address:this.address,topics:e.topics};return this._normalizeRunningEvent(new xn(Nn(t),t))}return this._normalizeRunningEvent(new Tn(this.address,this.interface))}_checkRunningEvents(e){if(0===e.listenerCount()){delete this._runningEvents[e.tag];const t=this._wrappedEmits[e.tag];t&&e.filter&&(this.provider.off(e.filter,t),delete this._wrappedEmits[e.tag])}}_wrapEvent(e,t,r){const n=ce(t);return n.removeListener=()=>{r&&(e.removeListener(r),this._checkRunningEvents(e))},n.getBlock=()=>this.provider.getBlock(t.blockHash),n.getTransaction=()=>this.provider.getTransaction(t.transactionHash),n.getTransactionReceipt=()=>this.provider.getTransactionReceipt(t.transactionHash),e.prepareEvent(n),n}_addEventListener(e,t,r){if(this.provider||vn.throwError("events require a provider or a signer with a provider",b.errors.UNSUPPORTED_OPERATION,{operation:"once"}),e.addListener(t,r),this._runningEvents[e.tag]=e,!this._wrappedEmits[e.tag]){const r=r=>{let n=this._wrapEvent(e,r,t);if(null==n.decodeError)try{const t=e.getEmit(n);this.emit(e.filter,...t)}catch(e){n.decodeError=e.error}null!=e.filter&&this.emit("event",n),null!=n.decodeError&&this.emit("error",n.decodeError,n)};this._wrappedEmits[e.tag]=r,null!=e.filter&&this.provider.on(e.filter,r)}}queryFilter(e,t,r){const n=this._getRunningEvent(e),i=ie(n.filter);return"string"==typeof t&&O(t,32)?(null!=r&&vn.throwArgumentError("cannot specify toBlock with blockhash","toBlock",r),i.blockHash=t):(i.fromBlock=null!=t?t:0,i.toBlock=null!=r?r:"latest"),this.provider.getLogs(i).then((e=>e.map((e=>this._wrapEvent(n,e,null)))))}on(e,t){return this._addEventListener(this._getRunningEvent(e),t,!1),this}once(e,t){return this._addEventListener(this._getRunningEvent(e),t,!0),this}emit(e,...t){if(!this.provider)return!1;const r=this._getRunningEvent(e),n=r.run(t)>0;return this._checkRunningEvents(r),n}listenerCount(e){return this.provider?null==e?Object.keys(this._runningEvents).reduce(((e,t)=>e+this._runningEvents[t].listenerCount()),0):this._getRunningEvent(e).listenerCount():0}listeners(e){if(!this.provider)return[];if(null==e){const e=[];for(let t in this._runningEvents)this._runningEvents[t].listeners().forEach((t=>{e.push(t)}));return e}return this._getRunningEvent(e).listeners()}removeAllListeners(e){if(!this.provider)return this;if(null==e){for(const e in this._runningEvents){const t=this._runningEvents[e];t.removeAllListeners(),this._checkRunningEvents(t)}return this}const t=this._getRunningEvent(e);return t.removeAllListeners(),this._checkRunningEvents(t),this}off(e,t){if(!this.provider)return this;const r=this._getRunningEvent(e);return r.removeListener(t),this._checkRunningEvents(r),this}removeListener(e,t){return this.off(e,t)}}class Rn extends In{}class Bn{constructor(e,t,r){let n=null;n="string"==typeof t?t:k(t)?T(t):t&&"string"==typeof t.object?t.object:"!","0x"!==n.substring(0,2)&&(n="0x"+n),(!O(n)||n.length%2)&&vn.throwArgumentError("invalid bytecode","bytecode",t),r&&!cr.isSigner(r)&&vn.throwArgumentError("invalid signer","signer",r),ee(this,"bytecode",n),ee(this,"interface",te(new.target,"getInterface")(e)),ee(this,"signer",r||null)}getDeployTransaction(...e){let t={};if(e.length===this.interface.deploy.inputs.length+1&&"object"==typeof e[e.length-1]){t=ie(e.pop());for(const e in t)if(!wn[e])throw new Error("unknown transaction override "+e)}return["data","from","to"].forEach((e=>{null!=t[e]&&vn.throwError("cannot override "+e,b.errors.UNSUPPORTED_OPERATION,{operation:e})})),t.value&&(W.from(t.value).isZero()||this.interface.deploy.payable||vn.throwError("non-payable constructor cannot override value",b.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:t.value})),vn.checkArgumentCount(e.length,this.interface.deploy.inputs.length," in Contract constructor"),t.data=T(P([this.bytecode,this.interface.encodeDeploy(e)])),t}deploy(...e){return bn(this,void 0,void 0,(function*(){let t={};e.length===this.interface.deploy.inputs.length+1&&(t=e.pop()),vn.checkArgumentCount(e.length,this.interface.deploy.inputs.length," in Contract constructor");const r=yield Sn(this.signer,e,this.interface.deploy.inputs);r.push(t);const n=this.getDeployTransaction(...r),i=yield this.signer.sendTransaction(n),o=te(this.constructor,"getContractAddress")(i),s=te(this.constructor,"getContract")(o,this.interface,this.signer);return kn(s,i),ee(s,"deployTransaction",i),s}))}attach(e){return this.constructor.getContract(e,this.interface,this.signer)}connect(e){return new this.constructor(this.interface,this.bytecode,e)}static fromSolidity(e,t){null==e&&vn.throwError("missing compiler output",b.errors.MISSING_ARGUMENT,{argument:"compilerOutput"}),"string"==typeof e&&(e=JSON.parse(e));const r=e.abi;let n=null;return e.bytecode?n=e.bytecode:e.evm&&e.evm.bytecode&&(n=e.evm.bytecode),new this(r,n,t)}static getInterface(e){return Rn.getInterface(e)}static getContractAddress(e){return Ke(e)}static getContract(e,t,r){return new Rn(e,t,r)}}const Cn=new b(q),Kn={},Un=W.from(0),Dn=W.from(-1);function jn(e,t,r,n){const i={fault:t,operation:r};return void 0!==n&&(i.value=n),Cn.throwError(e,b.errors.NUMERIC_FAULT,i)}let Fn="0";for(;Fn.length<256;)Fn+=Fn;function Ln(e){if("number"!=typeof e)try{e=W.from(e).toNumber()}catch(e){}return"number"==typeof e&&e>=0&&e<=256&&!(e%1)?"1"+Fn.substring(0,e):Cn.throwArgumentError("invalid decimal size","decimals",e)}function qn(e,t){null==t&&(t=0);const r=Ln(t),n=(e=W.from(e)).lt(Un);n&&(e=e.mul(Dn));let i=e.mod(r).toString();for(;i.length<r.length-1;)i="0"+i;i=i.match(/^([0-9]*[1-9]|0)(0*)/)[1];const o=e.div(r).toString();return e=1===r.length?o:o+"."+i,n&&(e="-"+e),e}function Vn(e,t){null==t&&(t=0);const r=Ln(t);"string"==typeof e&&e.match(/^-?[0-9.]+$/)||Cn.throwArgumentError("invalid decimal value","value",e);const n="-"===e.substring(0,1);n&&(e=e.substring(1)),"."===e&&Cn.throwArgumentError("missing value","value",e);const i=e.split(".");i.length>2&&Cn.throwArgumentError("too many decimal points","value",e);let o=i[0],s=i[1];for(o||(o="0"),s||(s="0");"0"===s[s.length-1];)s=s.substring(0,s.length-1);for(s.length>r.length-1&&jn("fractional component exceeds decimals","underflow","parseFixed"),""===s&&(s="0");s.length<r.length-1;)s+="0";const a=W.from(o),c=W.from(s);let u=a.mul(r).add(c);return n&&(u=u.mul(Dn)),u}class Jn{constructor(e,t,r,n){e!==Kn&&Cn.throwError("cannot use FixedFormat constructor; use FixedFormat.from",b.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=t,this.width=r,this.decimals=n,this.name=(t?"":"u")+"fixed"+String(r)+"x"+String(n),this._multiplier=Ln(n),Object.freeze(this)}static from(e){if(e instanceof Jn)return e;"number"==typeof e&&(e=`fixed128x${e}`);let t=!0,r=128,n=18;if("string"==typeof e)if("fixed"===e);else if("ufixed"===e)t=!1;else{const i=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);i||Cn.throwArgumentError("invalid fixed format","format",e),t="u"!==i[1],r=parseInt(i[2]),n=parseInt(i[3])}else if(e){const i=(t,r,n)=>null==e[t]?n:(typeof e[t]!==r&&Cn.throwArgumentError("invalid fixed format ("+t+" not "+r+")","format."+t,e[t]),e[t]);t=i("signed","boolean",t),r=i("width","number",r),n=i("decimals","number",n)}return r%8&&Cn.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",r),n>80&&Cn.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",n),new Jn(Kn,t,r,n)}}class zn{constructor(e,t,r,n){Cn.checkNew(new.target,zn),e!==Kn&&Cn.throwError("cannot use FixedNumber constructor; use FixedNumber.from",b.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=n,this._hex=t,this._value=r,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(e){this.format.name!==e.format.name&&Cn.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",e)}addUnsafe(e){this._checkFormat(e);const t=Vn(this._value,this.format.decimals),r=Vn(e._value,e.format.decimals);return zn.fromValue(t.add(r),this.format.decimals,this.format)}subUnsafe(e){this._checkFormat(e);const t=Vn(this._value,this.format.decimals),r=Vn(e._value,e.format.decimals);return zn.fromValue(t.sub(r),this.format.decimals,this.format)}mulUnsafe(e){this._checkFormat(e);const t=Vn(this._value,this.format.decimals),r=Vn(e._value,e.format.decimals);return zn.fromValue(t.mul(r).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(e){this._checkFormat(e);const t=Vn(this._value,this.format.decimals),r=Vn(e._value,e.format.decimals);return zn.fromValue(t.mul(this.format._multiplier).div(r),this.format.decimals,this.format)}floor(){const e=this.toString().split(".");1===e.length&&e.push("0");let t=zn.from(e[0],this.format);const r=!e[1].match(/^(0*)$/);return this.isNegative()&&r&&(t=t.subUnsafe(Gn.toFormat(t.format))),t}ceiling(){const e=this.toString().split(".");1===e.length&&e.push("0");let t=zn.from(e[0],this.format);const r=!e[1].match(/^(0*)$/);return!this.isNegative()&&r&&(t=t.addUnsafe(Gn.toFormat(t.format))),t}round(e){null==e&&(e=0);const t=this.toString().split(".");if(1===t.length&&t.push("0"),(e<0||e>80||e%1)&&Cn.throwArgumentError("invalid decimal count","decimals",e),t[1].length<=e)return this;const r=zn.from("1"+Fn.substring(0,e),this.format),n=Hn.toFormat(this.format);return this.mulUnsafe(r).addUnsafe(n).floor().divUnsafe(r)}isZero(){return"0.0"===this._value||"0"===this._value}isNegative(){return"-"===this._value[0]}toString(){return this._value}toHexString(e){return null==e?this._hex:(e%8&&Cn.throwArgumentError("invalid byte width","width",e),U(W.from(this._hex).fromTwos(this.format.width).toTwos(e).toHexString(),e/8))}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return zn.fromString(this._value,e)}static fromValue(e,t,r){return null!=r||null==t||function(e){return null!=e&&(W.isBigNumber(e)||"number"==typeof e&&e%1==0||"string"==typeof e&&!!e.match(/^-?[0-9]+$/)||O(e)||"bigint"==typeof e||k(e))}(t)||(r=t,t=null),null==t&&(t=0),null==r&&(r="fixed"),zn.fromString(qn(e,t),Jn.from(r))}static fromString(e,t){null==t&&(t="fixed");const r=Jn.from(t),n=Vn(e,r.decimals);!r.signed&&n.lt(Un)&&jn("unsigned value cannot be negative","overflow","value",e);let i=null;r.signed?i=n.toTwos(r.width).toHexString():(i=n.toHexString(),i=U(i,r.width/8));const o=qn(n,r.decimals);return new zn(Kn,i,o,r)}static fromBytes(e,t){null==t&&(t="fixed");const r=Jn.from(t);if(A(e).length>r.width/8)throw new Error("overflow");let n=W.from(e);r.signed&&(n=n.fromTwos(r.width));const i=n.toTwos((r.signed?0:1)+r.width).toHexString(),o=qn(n,r.decimals);return new zn(Kn,i,o,r)}static from(e,t){if("string"==typeof e)return zn.fromString(e,t);if(k(e))return zn.fromBytes(e,t);try{return zn.fromValue(e,0,t)}catch(e){if(e.code!==b.errors.INVALID_ARGUMENT)throw e}return Cn.throwArgumentError("invalid FixedNumber value","value",e)}static isFixedNumber(e){return!(!e||!e._isFixedNumber)}}const Gn=zn.from(1),Hn=zn.from("0.5");function Wn(e){return"string"==typeof e&&(e=Je(e)),be(P([Je("Ethereum Signed Message:\n"),Je(String(e.length)),e]))}const $n="hash/5.5.0";const Zn=new b($n),Xn=new Uint8Array(32);Xn.fill(0);const Yn=W.from(-1),Qn=W.from(0),ei=W.from(1),ti=W.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),ri=U(ei.toHexString(),32),ni=U(Qn.toHexString(),32),ii={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},oi=["name","version","chainId","verifyingContract","salt"];function si(e){return function(t){return"string"!=typeof t&&Zn.throwArgumentError(`invalid domain value for ${JSON.stringify(e)}`,`domain.${e}`,t),t}}const ai={name:si("name"),version:si("version"),chainId:function(e){try{return W.from(e).toString()}catch(e){}return Zn.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",e)},verifyingContract:function(e){try{return Re(e).toLowerCase()}catch(e){}return Zn.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",e)},salt:function(e){try{const t=A(e);if(32!==t.length)throw new Error("bad length");return T(t)}catch(e){}return Zn.throwArgumentError('invalid domain value "salt"',"domain.salt",e)}};function ci(e){{const t=e.match(/^(u?)int(\d*)$/);if(t){const r=""===t[1],n=parseInt(t[2]||"256");(n%8!=0||n>256||t[2]&&t[2]!==String(n))&&Zn.throwArgumentError("invalid numeric width","type",e);const i=ti.mask(r?n-1:n),o=r?i.add(ei).mul(Yn):Qn;return function(t){const r=W.from(t);return(r.lt(o)||r.gt(i))&&Zn.throwArgumentError(`value out-of-bounds for ${e}`,"value",t),U(r.toTwos(256).toHexString(),32)}}}{const t=e.match(/^bytes(\d+)$/);if(t){const r=parseInt(t[1]);return(0===r||r>32||t[1]!==String(r))&&Zn.throwArgumentError("invalid bytes width","type",e),function(t){return A(t).length!==r&&Zn.throwArgumentError(`invalid length for ${e}`,"value",t),function(e){const t=A(e),r=t.length%32;return r?B([t,Xn.slice(r)]):T(t)}(t)}}}switch(e){case"address":return function(e){return U(Re(e),32)};case"bool":return function(e){return e?ri:ni};case"bytes":return function(e){return be(e)};case"string":return function(e){return Ze(e)}}return null}function ui(e,t){return`${e}(${t.map((({name:e,type:t})=>t+" "+e)).join(",")})`}class di{constructor(e){ee(this,"types",Object.freeze(ce(e))),ee(this,"_encoderCache",{}),ee(this,"_types",{});const t={},r={},n={};Object.keys(e).forEach((e=>{t[e]={},r[e]=[],n[e]={}}));for(const n in e){const i={};e[n].forEach((o=>{i[o.name]&&Zn.throwArgumentError(`duplicate variable name ${JSON.stringify(o.name)} in ${JSON.stringify(n)}`,"types",e),i[o.name]=!0;const s=o.type.match(/^([^\x5b]*)(\x5b|$)/)[1];s===n&&Zn.throwArgumentError(`circular type reference to ${JSON.stringify(s)}`,"types",e),ci(s)||(r[s]||Zn.throwArgumentError(`unknown type ${JSON.stringify(s)}`,"types",e),r[s].push(n),t[n][s]=!0)}))}const i=Object.keys(r).filter((e=>0===r[e].length));0===i.length?Zn.throwArgumentError("missing primary type","types",e):i.length>1&&Zn.throwArgumentError(`ambiguous primary types or unused types: ${i.map((e=>JSON.stringify(e))).join(", ")}`,"types",e),ee(this,"primaryType",i[0]),function i(o,s){s[o]&&Zn.throwArgumentError(`circular type reference to ${JSON.stringify(o)}`,"types",e),s[o]=!0,Object.keys(t[o]).forEach((e=>{r[e]&&(i(e,s),Object.keys(s).forEach((t=>{n[t][e]=!0})))})),delete s[o]}(this.primaryType,{});for(const t in n){const r=Object.keys(n[t]);r.sort(),this._types[t]=ui(t,e[t])+r.map((t=>ui(t,e[t]))).join("")}}getEncoder(e){let t=this._encoderCache[e];return t||(t=this._encoderCache[e]=this._getEncoder(e)),t}_getEncoder(e){{const t=ci(e);if(t)return t}const t=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(t){const e=t[1],r=this.getEncoder(e),n=parseInt(t[3]);return t=>{n>=0&&t.length!==n&&Zn.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",t);let i=t.map(r);return this._types[e]&&(i=i.map(be)),be(B(i))}}const r=this.types[e];if(r){const t=Ze(this._types[e]);return e=>{const n=r.map((({name:t,type:r})=>{const n=this.getEncoder(r)(e[t]);return this._types[r]?be(n):n}));return n.unshift(t),B(n)}}return Zn.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const t=this._types[e];return t||Zn.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return be(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,r){if(ci(e))return r(e,t);const n=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(n){const e=n[1],i=parseInt(n[3]);return i>=0&&t.length!==i&&Zn.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",t),t.map((t=>this._visit(e,t,r)))}const i=this.types[e];return i?i.reduce(((e,{name:n,type:i})=>(e[n]=this._visit(i,t[n],r),e)),{}):Zn.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new di(e)}static getPrimaryType(e){return di.from(e).primaryType}static hashStruct(e,t,r){return di.from(t).hashStruct(e,r)}static hashDomain(e){const t=[];for(const r in e){const n=ii[r];n||Zn.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),t.push({name:r,type:n})}return t.sort(((e,t)=>oi.indexOf(e.name)-oi.indexOf(t.name))),di.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,r){return B(["0x1901",di.hashDomain(e),di.from(t).hash(r)])}static hash(e,t,r){return be(di.encode(e,t,r))}static resolveNames(e,t,r,n){return i=this,o=void 0,a=function*(){e=ie(e);const i={};e.verifyingContract&&!O(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const o=di.from(t);o.visit(r,((e,t)=>("address"!==e||O(t,20)||(i[t]="0x"),t)));for(const e in i)i[e]=yield n(e);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),r=o.visit(r,((e,t)=>"address"===e&&i[t]?i[t]:t)),{domain:e,value:r}},new((s=void 0)||(s=Promise))((function(e,t){function r(e){try{c(a.next(e))}catch(e){t(e)}}function n(e){try{c(a.throw(e))}catch(e){t(e)}}function c(t){var i;t.done?e(t.value):(i=t.value,i instanceof s?i:new s((function(e){e(i)}))).then(r,n)}c((a=a.apply(i,o||[])).next())}));var i,o,s,a}static getPayload(e,t,r){di.hashDomain(e);const n={},i=[];oi.forEach((t=>{const r=e[t];null!=r&&(n[t]=ai[t](r),i.push({name:t,type:ii[t]}))}));const o=di.from(t),s=ie(t);return s.EIP712Domain?Zn.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",t):s.EIP712Domain=i,o.encode(r),{types:s,domain:n,primaryType:o.primaryType,message:o.visit(r,((e,t)=>{if(e.match(/^bytes(\d*)/))return T(A(t));if(e.match(/^u?int/))return W.from(t).toString();switch(e){case"address":return t.toLowerCase();case"bool":return!!t;case"string":return"string"!=typeof t&&Zn.throwArgumentError("invalid string","value",t),t}return Zn.throwArgumentError("unsupported type","type",e)}))}}}class li{constructor(e){ee(this,"alphabet",e),ee(this,"base",e.length),ee(this,"_alphabetMap",{}),ee(this,"_leader",e.charAt(0));for(let t=0;t<e.length;t++)this._alphabetMap[e.charAt(t)]=t}encode(e){let t=A(e);if(0===t.length)return"";let r=[0];for(let e=0;e<t.length;++e){let n=t[e];for(let e=0;e<r.length;++e)n+=r[e]<<8,r[e]=n%this.base,n=n/this.base|0;for(;n>0;)r.push(n%this.base),n=n/this.base|0}let n="";for(let e=0;0===t[e]&&e<t.length-1;++e)n+=this._leader;for(let e=r.length-1;e>=0;--e)n+=this.alphabet[r[e]];return n}decode(e){if("string"!=typeof e)throw new TypeError("Expected String");let t=[];if(0===e.length)return new Uint8Array(t);t.push(0);for(let r=0;r<e.length;r++){let n=this._alphabetMap[e[r]];if(void 0===n)throw new Error("Non-base"+this.base+" character");let i=n;for(let e=0;e<t.length;++e)i+=t[e]*this.base,t[e]=255&i,i>>=8;for(;i>0;)t.push(255&i),i>>=8}for(let r=0;e[r]===this._leader&&r<e.length-1;++r)t.push(0);return A(new Uint8Array(t.reverse()))}}new li("abcdefghijklmnopqrstuvwxyz234567");const fi=new li("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var hi;!function(e){e.sha256="sha256",e.sha512="sha512"}(hi||(hi={}));const pi=new b("sha2/5.5.0");function yi(e){return"0x"+lr().ripemd160().update(A(e)).digest("hex")}function mi(e){return"0x"+lr().sha256().update(A(e)).digest("hex")}function gi(e){return"0x"+lr().sha512().update(A(e)).digest("hex")}function bi(e,t,r){return hi[e]||pi.throwError("unsupported algorithm "+e,b.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:e}),"0x"+lr().hmac(lr()[e],A(t)).update(A(r)).digest("hex")}function vi(e,t,r,n,i){let o;e=A(e),t=A(t);let s=1;const a=new Uint8Array(n),c=new Uint8Array(t.length+4);let u,d;c.set(t);for(let l=1;l<=s;l++){c[t.length]=l>>24&255,c[t.length+1]=l>>16&255,c[t.length+2]=l>>8&255,c[t.length+3]=255&l;let f=A(bi(i,e,c));o||(o=f.length,d=new Uint8Array(o),s=Math.ceil(n/o),u=n-(s-1)*o),d.set(f);for(let t=1;t<r;t++){f=A(bi(i,e,f));for(let e=0;e<o;e++)d[e]^=f[e]}const h=(l-1)*o,p=l===s?u:o;a.set(A(d).slice(0,p),h)}return T(a)}const wi=new b("wordlists/5.5.0");class Ei{constructor(e){wi.checkAbstract(new.target,Ei),ee(this,"locale",e)}split(e){return e.toLowerCase().split(/ +/g)}join(e){return e.join(" ")}static check(e){const t=[];for(let r=0;r<2048;r++){const n=e.getWord(r);if(r!==e.getWordIndex(n))return"0x";t.push(n)}return Ze(t.join("\n")+"\n")}static register(e,t){t||(t=e.locale)}}let Si=null;function _i(e){if(null==Si&&(Si="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo".replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),"0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"!==Ei.check(e)))throw Si=null,new Error("BIP39 Wordlist for en (English) FAILED")}const ki=new class extends Ei{constructor(){super("en")}getWord(e){return _i(this),Si[e]}getWordIndex(e){return _i(this),Si.indexOf(e)}};Ei.register(ki);const Ai={en:ki},Pi=new b("hdnode/5.5.0"),Ni=W.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),xi=Je("Bitcoin seed"),Oi=2147483648;function Mi(e){return(1<<e)-1<<8-e}function Ti(e){return U(T(e),32)}function Ii(e){return fi.encode(P([e,R(mi(mi(e)),0,4)]))}function Ri(e){if(null==e)return Ai.en;if("string"==typeof e){const t=Ai[e];return null==t&&Pi.throwArgumentError("unknown locale","wordlist",e),t}return e}const Bi={},Ci="m/44'/60'/0'/0/0";class Ki{constructor(e,t,r,n,i,o,s,a){if(Pi.checkNew(new.target,Ki),e!==Bi)throw new Error("HDNode constructor cannot be called directly");if(t){const e=new Xr(t);ee(this,"privateKey",e.privateKey),ee(this,"publicKey",e.compressedPublicKey)}else ee(this,"privateKey",null),ee(this,"publicKey",T(r));ee(this,"parentFingerprint",n),ee(this,"fingerprint",R(yi(mi(this.publicKey)),0,4)),ee(this,"address",an(this.publicKey)),ee(this,"chainCode",i),ee(this,"index",o),ee(this,"depth",s),null==a?(ee(this,"mnemonic",null),ee(this,"path",null)):"string"==typeof a?(ee(this,"mnemonic",null),ee(this,"path",a)):(ee(this,"mnemonic",a),ee(this,"path",a.path))}get extendedKey(){if(this.depth>=256)throw new Error("Depth too large!");return Ii(P([null!=this.privateKey?"0x0488ADE4":"0x0488B21E",T(this.depth),this.parentFingerprint,U(T(this.index),4),this.chainCode,null!=this.privateKey?P(["0x00",this.privateKey]):this.publicKey]))}neuter(){return new Ki(Bi,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,this.path)}_derive(e){if(e>4294967295)throw new Error("invalid index - "+String(e));let t=this.path;t&&(t+="/"+(2147483647&e));const r=new Uint8Array(37);if(e&Oi){if(!this.privateKey)throw new Error("cannot derive child of neutered node");r.set(A(this.privateKey),1),t&&(t+="'")}else r.set(A(this.publicKey));for(let t=24;t>=0;t-=8)r[33+(t>>3)]=e>>24-t&255;const n=A(bi(hi.sha512,this.chainCode,r)),i=n.slice(0,32),o=n.slice(32);let s=null,a=null;this.privateKey?s=Ti(W.from(i).add(this.privateKey).mod(Ni)):a=new Xr(T(i))._addPoint(this.publicKey);let c=t;const u=this.mnemonic;return u&&(c=Object.freeze({phrase:u.phrase,path:t,locale:u.locale||"en"})),new Ki(Bi,s,a,this.fingerprint,Ti(o),e,this.depth+1,c)}derivePath(e){const t=e.split("/");if(0===t.length||"m"===t[0]&&0!==this.depth)throw new Error("invalid path - "+e);"m"===t[0]&&t.shift();let r=this;for(let e=0;e<t.length;e++){const n=t[e];if(n.match(/^[0-9]+'$/)){const e=parseInt(n.substring(0,n.length-1));if(e>=Oi)throw new Error("invalid path index - "+n);r=r._derive(Oi+e)}else{if(!n.match(/^[0-9]+$/))throw new Error("invalid path component - "+n);{const e=parseInt(n);if(e>=Oi)throw new Error("invalid path index - "+n);r=r._derive(e)}}}return r}static _fromSeed(e,t){const r=A(e);if(r.length<16||r.length>64)throw new Error("invalid seed");const n=A(bi(hi.sha512,xi,r));return new Ki(Bi,Ti(n.slice(0,32)),null,"0x00000000",Ti(n.slice(32)),0,0,t)}static fromMnemonic(e,t,r){return e=ji(Di(e,r=Ri(r)),r),Ki._fromSeed(Ui(e,t),{phrase:e,path:"m",locale:r.locale})}static fromSeed(e){return Ki._fromSeed(e,null)}static fromExtendedKey(e){const t=fi.decode(e);82===t.length&&Ii(t.slice(0,78))===e||Pi.throwArgumentError("invalid extended key","extendedKey","[REDACTED]");const r=t[4],n=T(t.slice(5,9)),i=parseInt(T(t.slice(9,13)).substring(2),16),o=T(t.slice(13,45)),s=t.slice(45,78);switch(T(t.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new Ki(Bi,null,T(s),n,o,i,r,null);case"0x0488ade4":case"0x04358394 ":if(0!==s[0])break;return new Ki(Bi,T(s.slice(1)),null,n,o,i,r,null)}return Pi.throwArgumentError("invalid extended key","extendedKey","[REDACTED]")}}function Ui(e,t){t||(t="");const r=Je("mnemonic"+t,je.NFKD);return vi(Je(e,je.NFKD),r,2048,64,"sha512")}function Di(e,t){t=Ri(t),Pi.checkNormalize();const r=t.split(e);if(r.length%3!=0)throw new Error("invalid mnemonic");const n=A(new Uint8Array(Math.ceil(11*r.length/8)));let i=0;for(let e=0;e<r.length;e++){let o=t.getWordIndex(r[e].normalize("NFKD"));if(-1===o)throw new Error("invalid mnemonic");for(let e=0;e<11;e++)o&1<<10-e&&(n[i>>3]|=1<<7-i%8),i++}const o=32*r.length/3,s=Mi(r.length/3);if((A(mi(n.slice(0,o/8)))[0]&s)!=(n[n.length-1]&s))throw new Error("invalid checksum");return T(n.slice(0,o/8))}function ji(e,t){if(t=Ri(t),(e=A(e)).length%4!=0||e.length<16||e.length>32)throw new Error("invalid entropy");const r=[0];let n=11;for(let t=0;t<e.length;t++)n>8?(r[r.length-1]<<=8,r[r.length-1]|=e[t],n-=8):(r[r.length-1]<<=n,r[r.length-1]|=e[t]>>8-n,r.push(e[t]&(1<<8-n)-1),n+=3);const i=e.length/4,o=A(mi(e))[0]&Mi(i);return r[r.length-1]<<=i,r[r.length-1]|=o>>8-i,t.join(r.map((e=>t.getWord(e))))}function Fi(e,t){try{return Di(e,t),!0}catch(e){}return!1}function Li(e){return("number"!=typeof e||e<0||e>=Oi||e%1)&&Pi.throwArgumentError("invalid account index","index",e),`m/44'/60'/${e}'/0/0`}const qi=new b("random/5.5.1"),Vi=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw new Error("unable to locate global object")}();let Ji=Vi.crypto||Vi.msCrypto;function zi(e){(e<=0||e>1024||e%1||e!=e)&&qi.throwArgumentError("invalid length","length",e);const t=new Uint8Array(e);return Ji.getRandomValues(t),A(t)}Ji&&Ji.getRandomValues||(qi.warn("WARNING: Missing strong random number source"),Ji={getRandomValues:function(e){return qi.throwError("no secure random source avaialble",b.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}});var Gi=r(8826),Hi=r.n(Gi);const Wi="json-wallets/5.5.0";function $i(e){return"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),A(e)}function Zi(e,t){for(e=String(e);e.length<t;)e="0"+e;return e}function Xi(e){return"string"==typeof e?Je(e,je.NFKC):A(e)}function Yi(e,t){let r=e;const n=t.toLowerCase().split("/");for(let e=0;e<n.length;e++){let t=null;for(const i in r)if(i.toLowerCase()===n[e]){t=r[i];break}if(null===t)return null;r=t}return r}function Qi(e){const t=A(e);t[6]=15&t[6]|64,t[8]=63&t[8]|128;const r=T(t);return[r.substring(2,10),r.substring(10,14),r.substring(14,18),r.substring(18,22),r.substring(22,34)].join("-")}const eo=new b(Wi);class to extends ue{isCrowdsaleAccount(e){return!(!e||!e._isCrowdsaleAccount)}}function ro(e,t){const r=JSON.parse(e);t=Xi(t);const n=Re(Yi(r,"ethaddr")),i=$i(Yi(r,"encseed"));i&&i.length%16==0||eo.throwArgumentError("invalid encseed","json",e);const o=A(vi(t,t,2e3,32,"sha256")).slice(0,16),s=i.slice(0,16),a=i.slice(16),c=new(Hi().ModeOfOperation.cbc)(o,s),u=Hi().padding.pkcs7.strip(A(c.decrypt(a)));let d="";for(let e=0;e<u.length;e++)d+=String.fromCharCode(u[e]);const l=be(Je(d));return new to({_isCrowdsaleAccount:!0,address:n,privateKey:l})}function no(e){let t=null;try{t=JSON.parse(e)}catch(e){return!1}return t.encseed&&t.ethaddr}function io(e){let t=null;try{t=JSON.parse(e)}catch(e){return!1}return!(!t.version||parseInt(t.version)!==t.version||3!==parseInt(t.version))}function oo(e){if(no(e))try{return Re(JSON.parse(e).ethaddr)}catch(e){return null}if(io(e))try{return Re(JSON.parse(e).address)}catch(e){return null}return null}var so=r(7635),ao=r.n(so);const co=new b(Wi);function uo(e){return null!=e&&e.mnemonic&&e.mnemonic.phrase}class lo extends ue{isKeystoreAccount(e){return!(!e||!e._isKeystoreAccount)}}function fo(e,t){const r=$i(Yi(e,"crypto/ciphertext"));if(T(be(P([t.slice(16,32),r]))).substring(2)!==Yi(e,"crypto/mac").toLowerCase())throw new Error("invalid password");const n=function(e,t,r){if("aes-128-ctr"===Yi(e,"crypto/cipher")){const n=$i(Yi(e,"crypto/cipherparams/iv")),i=new(Hi().Counter)(n);return A(new(Hi().ModeOfOperation.ctr)(t,i).decrypt(r))}return null}(e,t.slice(0,16),r);n||co.throwError("unsupported cipher",b.errors.UNSUPPORTED_OPERATION,{operation:"decrypt"});const i=t.slice(32,64),o=an(n);if(e.address){let t=e.address.toLowerCase();if("0x"!==t.substring(0,2)&&(t="0x"+t),Re(t)!==o)throw new Error("address mismatch")}const s={_isKeystoreAccount:!0,address:o,privateKey:T(n)};if("0.1"===Yi(e,"x-ethers/version")){const t=$i(Yi(e,"x-ethers/mnemonicCiphertext")),r=$i(Yi(e,"x-ethers/mnemonicCounter")),n=new(Hi().Counter)(r),o=new(Hi().ModeOfOperation.ctr)(i,n),a=Yi(e,"x-ethers/path")||Ci,c=Yi(e,"x-ethers/locale")||"en",u=A(o.decrypt(t));try{const e=ji(u,c),t=Ki.fromMnemonic(e,null,c).derivePath(a);if(t.privateKey!=s.privateKey)throw new Error("mnemonic mismatch");s.mnemonic=t.mnemonic}catch(e){if(e.code!==b.errors.INVALID_ARGUMENT||"wordlist"!==e.argument)throw e}}return new lo(s)}function ho(e,t,r,n,i){return A(vi(e,t,r,n,i))}function po(e,t,r,n,i){return Promise.resolve(ho(e,t,r,n,i))}function yo(e,t,r,n,i){const o=Xi(t),s=Yi(e,"crypto/kdf");if(s&&"string"==typeof s){const t=function(e,t){return co.throwArgumentError("invalid key-derivation function parameters",e,t)};if("scrypt"===s.toLowerCase()){const r=$i(Yi(e,"crypto/kdfparams/salt")),a=parseInt(Yi(e,"crypto/kdfparams/n")),c=parseInt(Yi(e,"crypto/kdfparams/r")),u=parseInt(Yi(e,"crypto/kdfparams/p"));a&&c&&u||t("kdf",s),0!=(a&a-1)&&t("N",a);const d=parseInt(Yi(e,"crypto/kdfparams/dklen"));return 32!==d&&t("dklen",d),n(o,r,a,c,u,64,i)}if("pbkdf2"===s.toLowerCase()){const n=$i(Yi(e,"crypto/kdfparams/salt"));let i=null;const s=Yi(e,"crypto/kdfparams/prf");"hmac-sha256"===s?i="sha256":"hmac-sha512"===s?i="sha512":t("prf",s);const a=parseInt(Yi(e,"crypto/kdfparams/c")),c=parseInt(Yi(e,"crypto/kdfparams/dklen"));return 32!==c&&t("dklen",c),r(o,n,a,c,i)}}return co.throwArgumentError("unsupported key-derivation function","kdf",s)}function mo(e,t,r){if(no(e)){r&&r(0);const n=ro(e,t);return r&&r(1),Promise.resolve(n)}return io(e)?function(e,t,r){return n=this,i=void 0,s=function*(){const n=JSON.parse(e);return fo(n,yield yo(n,t,po,ao().scrypt,r))},new((o=void 0)||(o=Promise))((function(e,t){function r(e){try{c(s.next(e))}catch(e){t(e)}}function a(e){try{c(s.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(r,a)}c((s=s.apply(n,i||[])).next())}));var n,i,o,s}(e,t,r):Promise.reject(new Error("invalid JSON wallet"))}var go=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};const bo=new b("wallet/5.5.0");class vo extends cr{constructor(e,t){if(bo.checkNew(new.target,vo),super(),null!=(r=e)&&O(r.privateKey,32)&&null!=r.address){const t=new Xr(e.privateKey);if(ee(this,"_signingKey",(()=>t)),ee(this,"address",an(this.publicKey)),this.address!==Re(e.address)&&bo.throwArgumentError("privateKey/address mismatch","privateKey","[REDACTED]"),function(e){const t=e.mnemonic;return t&&t.phrase}(e)){const t=e.mnemonic;ee(this,"_mnemonic",(()=>({phrase:t.phrase,path:t.path||Ci,locale:t.locale||"en"})));const r=this.mnemonic;an(Ki.fromMnemonic(r.phrase,null,r.locale).derivePath(r.path).privateKey)!==this.address&&bo.throwArgumentError("mnemonic/address mismatch","privateKey","[REDACTED]")}else ee(this,"_mnemonic",(()=>null))}else{if(Xr.isSigningKey(e))"secp256k1"!==e.curve&&bo.throwArgumentError("unsupported curve; must be secp256k1","privateKey","[REDACTED]"),ee(this,"_signingKey",(()=>e));else{"string"==typeof e&&e.match(/^[0-9a-f]*$/i)&&64===e.length&&(e="0x"+e);const t=new Xr(e);ee(this,"_signingKey",(()=>t))}ee(this,"_mnemonic",(()=>null)),ee(this,"address",an(this.publicKey))}var r;t&&!nr.isProvider(t)&&bo.throwArgumentError("invalid provider","provider",t),ee(this,"provider",t||null)}get mnemonic(){return this._mnemonic()}get privateKey(){return this._signingKey().privateKey}get publicKey(){return this._signingKey().publicKey}getAddress(){return Promise.resolve(this.address)}connect(e){return new vo(this,e)}signTransaction(e){return re(e).then((t=>{null!=t.from&&(Re(t.from)!==this.address&&bo.throwArgumentError("transaction from address mismatch","transaction.from",e.from),delete t.from);const r=this._signingKey().signDigest(be(yn(t)));return yn(t,r)}))}signMessage(e){return go(this,void 0,void 0,(function*(){return j(this._signingKey().signDigest(Wn(e)))}))}_signTypedData(e,t,r){return go(this,void 0,void 0,(function*(){const n=yield di.resolveNames(e,t,r,(e=>(null==this.provider&&bo.throwError("cannot resolve ENS names without a provider",b.errors.UNSUPPORTED_OPERATION,{operation:"resolveName",value:e}),this.provider.resolveName(e))));return j(this._signingKey().signDigest(di.hash(n.domain,t,n.value)))}))}encrypt(e,t,r){if("function"!=typeof t||r||(r=t,t={}),r&&"function"!=typeof r)throw new Error("invalid callback");return t||(t={}),function(e,t,r,n){try{if(Re(e.address)!==an(e.privateKey))throw new Error("address/privateKey mismatch");if(uo(e)){const t=e.mnemonic;if(Ki.fromMnemonic(t.phrase,null,t.locale).derivePath(t.path||Ci).privateKey!=e.privateKey)throw new Error("mnemonic mismatch")}}catch(e){return Promise.reject(e)}"function"!=typeof r||n||(n=r,r={}),r||(r={});const i=A(e.privateKey),o=Xi(t);let s=null,a=null,c=null;if(uo(e)){const t=e.mnemonic;s=A(Di(t.phrase,t.locale||"en")),a=t.path||Ci,c=t.locale||"en"}let u=r.client;u||(u="ethers.js");let d=null;d=r.salt?A(r.salt):zi(32);let l=null;if(r.iv){if(l=A(r.iv),16!==l.length)throw new Error("invalid iv")}else l=zi(16);let f=null;if(r.uuid){if(f=A(r.uuid),16!==f.length)throw new Error("invalid uuid")}else f=zi(16);let h=1<<17,p=8,y=1;return r.scrypt&&(r.scrypt.N&&(h=r.scrypt.N),r.scrypt.r&&(p=r.scrypt.r),r.scrypt.p&&(y=r.scrypt.p)),ao().scrypt(o,d,h,p,y,64,n).then((t=>{const r=(t=A(t)).slice(0,16),n=t.slice(16,32),o=t.slice(32,64),m=new(Hi().Counter)(l),g=A(new(Hi().ModeOfOperation.ctr)(r,m).encrypt(i)),b=be(P([n,g])),v={address:e.address.substring(2).toLowerCase(),id:Qi(f),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:T(l).substring(2)},ciphertext:T(g).substring(2),kdf:"scrypt",kdfparams:{salt:T(d).substring(2),n:h,dklen:32,p:y,r:p},mac:b.substring(2)}};if(s){const e=zi(16),t=new(Hi().Counter)(e),r=A(new(Hi().ModeOfOperation.ctr)(o,t).encrypt(s)),n=new Date,i=n.getUTCFullYear()+"-"+Zi(n.getUTCMonth()+1,2)+"-"+Zi(n.getUTCDate(),2)+"T"+Zi(n.getUTCHours(),2)+"-"+Zi(n.getUTCMinutes(),2)+"-"+Zi(n.getUTCSeconds(),2)+".0Z";v["x-ethers"]={client:u,gethFilename:"UTC--"+i+"--"+v.address,mnemonicCounter:T(e).substring(2),mnemonicCiphertext:T(r).substring(2),path:a,locale:c,version:"0.1"}}return JSON.stringify(v)}))}(this,e,t,r)}static createRandom(e){let t=zi(16);e||(e={}),e.extraEntropy&&(t=A(R(be(P([t,e.extraEntropy])),0,16)));const r=ji(t,e.locale);return vo.fromMnemonic(r,e.path,e.locale)}static fromEncryptedJson(e,t,r){return mo(e,t,r).then((e=>new vo(e)))}static fromEncryptedJsonSync(e,t){return new vo(function(e,t){if(no(e))return ro(e,t);if(io(e))return function(e,t){const r=JSON.parse(e);return fo(r,yo(r,t,ho,ao().syncScrypt))}(e,t);throw new Error("invalid JSON wallet")}(e,t))}static fromMnemonic(e,t,r){return t||(t=Ci),new vo(Ki.fromMnemonic(e,null,r).derivePath(t))}}function wo(e,t){return cn(Wn(e),t)}function Eo(e,t,r,n){return cn(di.hash(e,t,r),n)}const So="0x0000000000000000000000000000000000000000",_o="0x0000000000000000000000000000000000000000000000000000000000000000",ko="",Ao=new b("networks/5.5.2");function Po(e){const t=function(t,r){null==r&&(r={});const n=[];if(t.InfuraProvider)try{n.push(new t.InfuraProvider(e,r.infura))}catch(e){}if(t.EtherscanProvider)try{n.push(new t.EtherscanProvider(e,r.etherscan))}catch(e){}if(t.AlchemyProvider)try{n.push(new t.AlchemyProvider(e,r.alchemy))}catch(e){}if(t.PocketProvider){const r=["goerli","ropsten","rinkeby"];try{const i=new t.PocketProvider(e);i.network&&-1===r.indexOf(i.network.name)&&n.push(i)}catch(e){}}if(t.CloudflareProvider)try{n.push(new t.CloudflareProvider(e))}catch(e){}if(0===n.length)return null;if(t.FallbackProvider){let i=1;return null!=r.quorum?i=r.quorum:"homestead"===e&&(i=2),new t.FallbackProvider(n,i)}return n[0]};return t.renetwork=function(e){return Po(e)},t}function No(e,t){const r=function(r,n){return r.JsonRpcProvider?new r.JsonRpcProvider(e,t):null};return r.renetwork=function(t){return No(e,t)},r}const xo={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:Po("homestead")},Oo={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:Po("ropsten")},Mo={chainId:63,name:"classicMordor",_defaultProvider:No("https://www.ethercluster.com/mordor","classicMordor")},To={unspecified:{chainId:0,name:"unspecified"},homestead:xo,mainnet:xo,morden:{chainId:2,name:"morden"},ropsten:Oo,testnet:Oo,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:Po("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:Po("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:Po("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},classic:{chainId:61,name:"classic",_defaultProvider:No("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:Mo,classicTestnet:Mo,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:No("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic"},maticmum:{chainId:80001,name:"maticmum"},optimism:{chainId:10,name:"optimism"},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function Io(e){if(null==e)return null;if("number"==typeof e){for(const t in To){const r=To[t];if(r.chainId===e)return{name:r.name,chainId:r.chainId,ensAddress:r.ensAddress||null,_defaultProvider:r._defaultProvider||null}}return{chainId:e,name:"unknown"}}if("string"==typeof e){const t=To[e];return null==t?null:{name:t.name,chainId:t.chainId,ensAddress:t.ensAddress,_defaultProvider:t._defaultProvider||null}}const t=To[e.name];if(!t)return"number"!=typeof e.chainId&&Ao.throwArgumentError("invalid network chainId","network",e),e;0!==e.chainId&&e.chainId!==t.chainId&&Ao.throwArgumentError("network chainId mismatch","network",e);let r=e._defaultProvider||null;var n;return null==r&&t._defaultProvider&&(r=(n=t._defaultProvider)&&"function"==typeof n.renetwork?t._defaultProvider.renetwork(e):t._defaultProvider),{name:e.name,chainId:t.chainId,ensAddress:e.ensAddress||t.ensAddress||null,_defaultProvider:r}}function Ro(e,t){t||(t=function(e){return[parseInt(e,16)]});let r=0,n={};return e.split(",").forEach((e=>{let i=e.split(":");r+=parseInt(i[0],16),n[r]=t(i[1])})),n}function Bo(e){let t=0;return e.split(",").map((e=>{let r=e.split("-");1===r.length?r[1]="0":""===r[1]&&(r[1]="1");let n=t+parseInt(r[0],16);return t=parseInt(r[1],16),{l:n,h:t}}))}function Co(e,t){let r=0;for(let n=0;n<t.length;n++){let i=t[n];if(r+=i.l,e>=r&&e<=r+i.h&&(e-r)%(i.d||1)==0){if(i.e&&-1!==i.e.indexOf(e-r))continue;return i}}return null}const Ko=Bo("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),Uo="ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map((e=>parseInt(e,16))),Do=[{h:25,s:32,l:65},{h:30,s:32,e:[23],l:127},{h:54,s:1,e:[48],l:64,d:2},{h:14,s:1,l:57,d:2},{h:44,s:1,l:17,d:2},{h:10,s:1,e:[2,6,8],l:61,d:2},{h:16,s:1,l:68,d:2},{h:84,s:1,e:[18,24,66],l:19,d:2},{h:26,s:32,e:[17],l:435},{h:22,s:1,l:71,d:2},{h:15,s:80,l:40},{h:31,s:32,l:16},{h:32,s:1,l:80,d:2},{h:52,s:1,l:42,d:2},{h:12,s:1,l:55,d:2},{h:40,s:1,e:[38],l:15,d:2},{h:14,s:1,l:48,d:2},{h:37,s:48,l:49},{h:148,s:1,l:6351,d:2},{h:88,s:1,l:160,d:2},{h:15,s:16,l:704},{h:25,s:26,l:854},{h:25,s:32,l:55915},{h:37,s:40,l:1247},{h:25,s:-119711,l:53248},{h:25,s:-119763,l:52},{h:25,s:-119815,l:52},{h:25,s:-119867,e:[1,4,5,7,8,11,12,17],l:52},{h:25,s:-119919,l:52},{h:24,s:-119971,e:[2,7,8,17],l:52},{h:24,s:-120023,e:[2,7,13,15,16,17],l:52},{h:25,s:-120075,l:52},{h:25,s:-120127,l:52},{h:25,s:-120179,l:52},{h:25,s:-120231,l:52},{h:25,s:-120283,l:52},{h:25,s:-120335,l:52},{h:24,s:-119543,e:[17],l:56},{h:24,s:-119601,e:[17],l:58},{h:24,s:-119659,e:[17],l:58},{h:24,s:-119717,e:[17],l:58},{h:24,s:-119775,e:[17],l:58}],jo=Ro("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),Fo=Ro("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),Lo=Ro("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",(function(e){if(e.length%4!=0)throw new Error("bad data");let t=[];for(let r=0;r<e.length;r+=4)t.push(parseInt(e.substring(r,r+4),16));return t})),qo=Bo("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");function Vo(e){if(e.match(/^[a-z0-9-]*$/i)&&e.length<=59)return e.toLowerCase();let t=$e(e);var r;r=t.map((e=>{if(Uo.indexOf(e)>=0)return[];if(e>=65024&&e<=65039)return[];let t=function(e){let t=Co(e,Do);if(t)return[e+t.s];let r=jo[e];if(r)return r;let n=Fo[e];return n?[e+n[0]]:Lo[e]||null}(e);return t||[e]})),t=r.reduce(((e,t)=>(t.forEach((t=>{e.push(t)})),e)),[]),t=$e(He(t),je.NFKC),t.forEach((e=>{if(Co(e,qo))throw new Error("STRINGPREP_CONTAINS_PROHIBITED")})),t.forEach((e=>{if(Co(e,Ko))throw new Error("STRINGPREP_CONTAINS_UNASSIGNED")}));let n=He(t);if("-"===n.substring(0,1)||"--"===n.substring(2,4)||"-"===n.substring(n.length-1))throw new Error("invalid hyphen");if(n.length>63)throw new Error("too long");return n}const Jo=new b($n),zo=new Uint8Array(32);zo.fill(0);const Go=new RegExp("^((.*)\\.)?([^.]+)$");function Ho(e){try{const t=e.split(".");for(let e=0;e<t.length;e++)if(0===Vo(t[e]).length)throw new Error("empty");return!0}catch(e){}return!1}function Wo(e){"string"!=typeof e&&Jo.throwArgumentError("invalid ENS name; not a string","name",e);let t=e,r=zo;for(;t.length;){const n=t.match(Go);null!=n&&""!==n[2]||Jo.throwArgumentError("invalid ENS address; missing component","name",e),r=be(P([r,be(Je(Vo(n[3])))])),t=n[2]||""}return T(r)}function $o(e){e=atob(e);const t=[];for(let r=0;r<e.length;r++)t.push(e.charCodeAt(r));return A(t)}function Zo(e){e=A(e);let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}function Xo(e,t){return r=this,n=void 0,o=function*(){null==t&&(t={});const r={method:t.method||"GET",headers:t.headers||{},body:t.body||void 0};!0!==t.skipFetchSetup&&(r.mode="cors",r.cache="no-cache",r.credentials="same-origin",r.redirect="follow",r.referrer="client");const n=yield fetch(e,r),i=yield n.arrayBuffer(),o={};return n.headers.forEach?n.headers.forEach(((e,t)=>{o[t.toLowerCase()]=e})):n.headers.keys().forEach((e=>{o[e.toLowerCase()]=n.headers.get(e)})),{headers:o,statusCode:n.status,statusMessage:n.statusText,body:A(new Uint8Array(i))}},new((i=void 0)||(i=Promise))((function(e,t){function s(e){try{c(o.next(e))}catch(e){t(e)}}function a(e){try{c(o.throw(e))}catch(e){t(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof i?r:new i((function(e){e(r)}))).then(s,a)}c((o=o.apply(r,n||[])).next())}));var r,n,i,o}const Yo=new b("web/5.5.1");function Qo(e){return new Promise((t=>{setTimeout(t,e)}))}function es(e,t){if(null==e)return null;if("string"==typeof e)return e;if(S(e)){if(t&&("text"===t.split("/")[0]||"application/json"===t.split(";")[0].trim()))try{return We(e)}catch(e){}return T(e)}return e}function ts(e,t,r){const n="object"==typeof e&&null!=e.throttleLimit?e.throttleLimit:12;Yo.assertArgument(n>0&&n%1==0,"invalid connection throttle limit","connection.throttleLimit",n);const i="object"==typeof e?e.throttleCallback:null,o="object"==typeof e&&"number"==typeof e.throttleSlotInterval?e.throttleSlotInterval:100;Yo.assertArgument(o>0&&o%1==0,"invalid connection throttle slot interval","connection.throttleSlotInterval",o);const s={};let a=null;const c={method:"GET"};let u=!1,d=12e4;if("string"==typeof e)a=e;else if("object"==typeof e){if(null!=e&&null!=e.url||Yo.throwArgumentError("missing URL","connection.url",e),a=e.url,"number"==typeof e.timeout&&e.timeout>0&&(d=e.timeout),e.headers)for(const t in e.headers)s[t.toLowerCase()]={key:t,value:String(e.headers[t])},["if-none-match","if-modified-since"].indexOf(t.toLowerCase())>=0&&(u=!0);if(c.allowGzip=!!e.allowGzip,null!=e.user&&null!=e.password){"https:"!==a.substring(0,6)&&!0!==e.allowInsecureAuthentication&&Yo.throwError("basic authentication requires a secure https url",b.errors.INVALID_ARGUMENT,{argument:"url",url:a,user:e.user,password:"[REDACTED]"});const t=e.user+":"+e.password;s.authorization={key:"Authorization",value:"Basic "+Zo(Je(t))}}}const l=new RegExp("^data:([a-z0-9-]+/[a-z0-9-]+);base64,(.*)$","i"),f=a?a.match(l):null;if(f)try{const e={statusCode:200,statusMessage:"OK",headers:{"content-type":f[1]},body:$o(f[2])};let t=e.body;return r&&(t=r(e.body,e)),Promise.resolve(t)}catch(e){Yo.throwError("processing response error",b.errors.SERVER_ERROR,{body:es(f[1],f[2]),error:e,requestBody:null,requestMethod:"GET",url:a})}t&&(c.method="POST",c.body=t,null==s["content-type"]&&(s["content-type"]={key:"Content-Type",value:"application/octet-stream"}),null==s["content-length"]&&(s["content-length"]={key:"Content-Length",value:String(t.length)}));const h={};Object.keys(s).forEach((e=>{const t=s[e];h[t.key]=t.value})),c.headers=h;const p=function(){let e=null;return{promise:new Promise((function(t,r){d&&(e=setTimeout((()=>{null!=e&&(e=null,r(Yo.makeError("timeout",b.errors.TIMEOUT,{requestBody:es(c.body,h["content-type"]),requestMethod:c.method,timeout:d,url:a})))}),d))})),cancel:function(){null!=e&&(clearTimeout(e),e=null)}}}(),y=function(){return e=this,t=void 0,d=function*(){for(let e=0;e<n;e++){let t=null;try{if(t=yield Xo(a,c),e<n)if(301===t.statusCode||302===t.statusCode){const e=t.headers.location||"";if("GET"===c.method&&e.match(/^https:/)){a=t.headers.location;continue}}else if(429===t.statusCode){let r=!0;if(i&&(r=yield i(e,a)),r){let r=0;const n=t.headers["retry-after"];r="string"==typeof n&&n.match(/^[1-9][0-9]*$/)?1e3*parseInt(n):o*parseInt(String(Math.random()*Math.pow(2,e))),yield Qo(r);continue}}}catch(e){t=e.response,null==t&&(p.cancel(),Yo.throwError("missing response",b.errors.SERVER_ERROR,{requestBody:es(c.body,h["content-type"]),requestMethod:c.method,serverError:e,url:a}))}let s=t.body;if(u&&304===t.statusCode?s=null:(t.statusCode<200||t.statusCode>=300)&&(p.cancel(),Yo.throwError("bad response",b.errors.SERVER_ERROR,{status:t.statusCode,headers:t.headers,body:es(s,t.headers?t.headers["content-type"]:null),requestBody:es(c.body,h["content-type"]),requestMethod:c.method,url:a})),r)try{const e=yield r(s,t);return p.cancel(),e}catch(r){if(r.throttleRetry&&e<n){let t=!0;if(i&&(t=yield i(e,a)),t){const t=o*parseInt(String(Math.random()*Math.pow(2,e)));yield Qo(t);continue}}p.cancel(),Yo.throwError("processing response error",b.errors.SERVER_ERROR,{body:es(s,t.headers?t.headers["content-type"]:null),error:r,requestBody:es(c.body,h["content-type"]),requestMethod:c.method,url:a})}return p.cancel(),s}return Yo.throwError("failed response",b.errors.SERVER_ERROR,{requestBody:es(c.body,h["content-type"]),requestMethod:c.method,url:a})},new((s=void 0)||(s=Promise))((function(r,n){function i(e){try{a(d.next(e))}catch(e){n(e)}}function o(e){try{a(d.throw(e))}catch(e){n(e)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(i,o)}a((d=d.apply(e,t||[])).next())}));var e,t,s,d}();return Promise.race([p.promise,y])}function rs(e,t,r){let n=null;if(null!=t){n=Je(t);const r="string"==typeof e?{url:e}:ie(e);r.headers?0!==Object.keys(r.headers).filter((e=>"content-type"===e.toLowerCase())).length||(r.headers=ie(r.headers),r.headers["content-type"]="application/json"):r.headers={"content-type":"application/json"},e=r}return ts(e,n,((e,t)=>{let n=null;if(null!=e)try{n=JSON.parse(We(e))}catch(t){Yo.throwError("invalid JSON",b.errors.SERVER_ERROR,{body:e,error:t})}return r&&(n=r(n,t)),n}))}function ns(e,t){return t||(t={}),null==(t=ie(t)).floor&&(t.floor=0),null==t.ceiling&&(t.ceiling=1e4),null==t.interval&&(t.interval=250),new Promise((function(r,n){let i=null,o=!1;const s=()=>!o&&(o=!0,i&&clearTimeout(i),!0);t.timeout&&(i=setTimeout((()=>{s()&&n(new Error("timeout"))}),t.timeout));const a=t.retryLimit;let c=0;!function i(){return e().then((function(e){if(void 0!==e)s()&&r(e);else if(t.oncePoll)t.oncePoll.once("poll",i);else if(t.onceBlock)t.onceBlock.once("block",i);else if(!o){if(c++,c>a)return void(s()&&n(new Error("retry limit reached")));let e=t.interval*parseInt(String(Math.random()*Math.pow(2,c)));e<t.floor&&(e=t.floor),e>t.ceiling&&(e=t.ceiling),setTimeout(i,e)}return null}),(function(e){s()&&n(e)}))}()}))}var is=r(2882),os=r.n(is);const ss="providers/5.5.2",as=new b(ss);class cs{constructor(){as.checkNew(new.target,cs),this.formats=this.getDefaultFormats()}getDefaultFormats(){const e={},t=this.address.bind(this),r=this.bigNumber.bind(this),n=this.blockTag.bind(this),i=this.data.bind(this),o=this.hash.bind(this),s=this.hex.bind(this),a=this.number.bind(this),c=this.type.bind(this);return e.transaction={hash:o,type:c,accessList:cs.allowNull(this.accessList.bind(this),null),blockHash:cs.allowNull(o,null),blockNumber:cs.allowNull(a,null),transactionIndex:cs.allowNull(a,null),confirmations:cs.allowNull(a,null),from:t,gasPrice:cs.allowNull(r),maxPriorityFeePerGas:cs.allowNull(r),maxFeePerGas:cs.allowNull(r),gasLimit:r,to:cs.allowNull(t,null),value:r,nonce:a,data:i,r:cs.allowNull(this.uint256),s:cs.allowNull(this.uint256),v:cs.allowNull(a),creates:cs.allowNull(t,null),raw:cs.allowNull(i)},e.transactionRequest={from:cs.allowNull(t),nonce:cs.allowNull(a),gasLimit:cs.allowNull(r),gasPrice:cs.allowNull(r),maxPriorityFeePerGas:cs.allowNull(r),maxFeePerGas:cs.allowNull(r),to:cs.allowNull(t),value:cs.allowNull(r),data:cs.allowNull((e=>this.data(e,!0))),type:cs.allowNull(a),accessList:cs.allowNull(this.accessList.bind(this),null)},e.receiptLog={transactionIndex:a,blockNumber:a,transactionHash:o,address:t,topics:cs.arrayOf(o),data:i,logIndex:a,blockHash:o},e.receipt={to:cs.allowNull(this.address,null),from:cs.allowNull(this.address,null),contractAddress:cs.allowNull(t,null),transactionIndex:a,root:cs.allowNull(s),gasUsed:r,logsBloom:cs.allowNull(i),blockHash:o,transactionHash:o,logs:cs.arrayOf(this.receiptLog.bind(this)),blockNumber:a,confirmations:cs.allowNull(a,null),cumulativeGasUsed:r,effectiveGasPrice:cs.allowNull(r),status:cs.allowNull(a),type:c},e.block={hash:o,parentHash:o,number:a,timestamp:a,nonce:cs.allowNull(s),difficulty:this.difficulty.bind(this),gasLimit:r,gasUsed:r,miner:t,extraData:i,transactions:cs.allowNull(cs.arrayOf(o)),baseFeePerGas:cs.allowNull(r)},e.blockWithTransactions=ie(e.block),e.blockWithTransactions.transactions=cs.allowNull(cs.arrayOf(this.transactionResponse.bind(this))),e.filter={fromBlock:cs.allowNull(n,void 0),toBlock:cs.allowNull(n,void 0),blockHash:cs.allowNull(o,void 0),address:cs.allowNull(t,void 0),topics:cs.allowNull(this.topics.bind(this),void 0)},e.filterLog={blockNumber:cs.allowNull(a),blockHash:cs.allowNull(o),transactionIndex:a,removed:cs.allowNull(this.boolean.bind(this)),address:t,data:cs.allowFalsish(i,"0x"),topics:cs.arrayOf(o),transactionHash:o,logIndex:a},e}accessList(e){return ln(e||[])}number(e){return"0x"===e?0:W.from(e).toNumber()}type(e){return"0x"===e||null==e?0:W.from(e).toNumber()}bigNumber(e){return W.from(e)}boolean(e){if("boolean"==typeof e)return e;if("string"==typeof e){if("true"===(e=e.toLowerCase()))return!0;if("false"===e)return!1}throw new Error("invalid boolean - "+e)}hex(e,t){return"string"==typeof e&&(t||"0x"===e.substring(0,2)||(e="0x"+e),O(e))?e.toLowerCase():as.throwArgumentError("invalid hash","value",e)}data(e,t){const r=this.hex(e,t);if(r.length%2!=0)throw new Error("invalid data; odd-length - "+e);return r}address(e){return Re(e)}callAddress(e){if(!O(e,32))return null;const t=Re(R(e,12));return t===So?null:t}contractAddress(e){return Ke(e)}blockTag(e){if(null==e)return"latest";if("earliest"===e)return"0x0";if("latest"===e||"pending"===e)return e;if("number"==typeof e||O(e))return C(e);throw new Error("invalid blockTag")}hash(e,t){const r=this.hex(e,t);return 32!==I(r)?as.throwArgumentError("invalid hash","value",e):r}difficulty(e){if(null==e)return null;const t=W.from(e);try{return t.toNumber()}catch(e){}return null}uint256(e){if(!O(e))throw new Error("invalid uint256");return U(e,32)}_block(e,t){null!=e.author&&null==e.miner&&(e.miner=e.author);const r=null!=e._difficulty?e._difficulty:e.difficulty,n=cs.check(t,e);return n._difficulty=null==r?null:W.from(r),n}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return cs.check(this.formats.transactionRequest,e)}transactionResponse(e){null!=e.gas&&null==e.gasLimit&&(e.gasLimit=e.gas),e.to&&W.from(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),null!=e.input&&null==e.data&&(e.data=e.input),null==e.to&&null==e.creates&&(e.creates=this.contractAddress(e)),1!==e.type&&2!==e.type||null!=e.accessList||(e.accessList=[]);const t=cs.check(this.formats.transaction,e);if(null!=e.chainId){let r=e.chainId;O(r)&&(r=W.from(r).toNumber()),t.chainId=r}else{let r=e.networkId;null==r&&null==t.v&&(r=e.chainId),O(r)&&(r=W.from(r).toNumber()),"number"!=typeof r&&null!=t.v&&(r=(t.v-35)/2,r<0&&(r=0),r=parseInt(r)),"number"!=typeof r&&(r=0),t.chainId=r}return t.blockHash&&"x"===t.blockHash.replace(/0/g,"")&&(t.blockHash=null),t}transaction(e){return gn(e)}receiptLog(e){return cs.check(this.formats.receiptLog,e)}receipt(e){const t=cs.check(this.formats.receipt,e);if(null!=t.root)if(t.root.length<=4){const e=W.from(t.root).toNumber();0===e||1===e?(null!=t.status&&t.status!==e&&as.throwArgumentError("alt-root-status/status mismatch","value",{root:t.root,status:t.status}),t.status=e,delete t.root):as.throwArgumentError("invalid alt-root-status","value.root",t.root)}else 66!==t.root.length&&as.throwArgumentError("invalid root hash","value.root",t.root);return null!=t.status&&(t.byzantium=!0),t}topics(e){return Array.isArray(e)?e.map((e=>this.topics(e))):null!=e?this.hash(e,!0):null}filter(e){return cs.check(this.formats.filter,e)}filterLog(e){return cs.check(this.formats.filterLog,e)}static check(e,t){const r={};for(const n in e)try{const i=e[n](t[n]);void 0!==i&&(r[n]=i)}catch(e){throw e.checkKey=n,e.checkValue=t[n],e}return r}static allowNull(e,t){return function(r){return null==r?t:e(r)}}static allowFalsish(e,t){return function(r){return r?e(r):t}}static arrayOf(e){return function(t){if(!Array.isArray(t))throw new Error("not an array");const r=[];return t.forEach((function(t){r.push(e(t))})),r}}}function us(e){return e&&"function"==typeof e.isCommunityResource}function ds(e){return us(e)&&e.isCommunityResource()}let ls=!1;function fs(){ls||(ls=!0,console.log("========= NOTICE ========="),console.log("Request-Rate Exceeded  (this message will not be repeated)"),console.log(""),console.log("The default API keys for each service are provided as a highly-throttled,"),console.log("community resource for low-traffic projects and early prototyping."),console.log(""),console.log("While your application will continue to function, we highly recommended"),console.log("signing up for your own API keys to improve performance, increase your"),console.log("request rate/limit and enable other perks, such as metrics and advanced APIs."),console.log(""),console.log("For more details: https://docs.ethers.io/api-keys/"),console.log("=========================="))}var hs=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};const ps=new b(ss);function ys(e){return null==e?"null":(32!==I(e)&&ps.throwArgumentError("invalid topic","topic",e),e.toLowerCase())}function ms(e){for(e=e.slice();e.length>0&&null==e[e.length-1];)e.pop();return e.map((e=>{if(Array.isArray(e)){const t={};e.forEach((e=>{t[ys(e)]=!0}));const r=Object.keys(t);return r.sort(),r.join("|")}return ys(e)})).join("&")}function gs(e){if("string"==typeof e){if(32===I(e=e.toLowerCase()))return"tx:"+e;if(-1===e.indexOf(":"))return e}else{if(Array.isArray(e))return"filter:*:"+ms(e);if(rr.isForkEvent(e))throw ps.warn("not implemented"),new Error("not implemented");if(e&&"object"==typeof e)return"filter:"+(e.address||"*")+":"+ms(e.topics||[])}throw new Error("invalid event - "+e)}function bs(){return(new Date).getTime()}function vs(e){return new Promise((t=>{setTimeout(t,e)}))}const ws=["block","network","pending","poll"];class Es{constructor(e,t,r){ee(this,"tag",e),ee(this,"listener",t),ee(this,"once",r)}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const e=this.tag.split(":");return"tx"!==e[0]?null:e[1]}get filter(){const e=this.tag.split(":");if("filter"!==e[0])return null;const t=e[1],r=""===(n=e[2])?[]:n.split(/&/g).map((e=>{if(""===e)return[];const t=e.split("|").map((e=>"null"===e?null:e));return 1===t.length?t[0]:t}));var n;const i={};return r.length>0&&(i.topics=r),t&&"*"!==t&&(i.address=t),i}pollable(){return this.tag.indexOf(":")>=0||ws.indexOf(this.tag)>=0}}const Ss={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function _s(e){return U(W.from(e).toHexString(),32)}function ks(e){return fi.encode(P([e,R(mi(mi(e)),0,4)]))}const As=new RegExp("^(ipfs)://(.*)$","i"),Ps=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),As,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function Ns(e){try{return We(xs(e))}catch(e){}return null}function xs(e){if("0x"===e)return null;const t=W.from(R(e,0,32)).toNumber(),r=W.from(R(e,t,t+32)).toNumber();return R(e,t+32,t+32+r)}function Os(e){return`https://gateway.ipfs.io/ipfs/${e.substring(7)}`}class Ms{constructor(e,t,r,n){ee(this,"provider",e),ee(this,"name",r),ee(this,"address",e.formatter.address(t)),ee(this,"_resolvedAddress",n)}_fetchBytes(e,t){return hs(this,void 0,void 0,(function*(){const r={to:this.address,data:B([e,Wo(this.name),t||"0x"])};try{return xs(yield this.provider.call(r))}catch(e){return e.code,b.errors.CALL_EXCEPTION,null}}))}_getAddress(e,t){const r=Ss[String(e)];if(null==r&&ps.throwError(`unsupported coin type: ${e}`,b.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`}),"eth"===r.ilk)return this.provider.formatter.address(t);const n=A(t);if(null!=r.p2pkh){const e=t.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(e){const t=parseInt(e[1],16);if(e[2].length===2*t&&t>=1&&t<=75)return ks(P([[r.p2pkh],"0x"+e[2]]))}}if(null!=r.p2sh){const e=t.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(e){const t=parseInt(e[1],16);if(e[2].length===2*t&&t>=1&&t<=75)return ks(P([[r.p2sh],"0x"+e[2]]))}}if(null!=r.prefix){const e=n[1];let t=n[0];if(0===t?20!==e&&32!==e&&(t=-1):t=-1,t>=0&&n.length===2+e&&e>=1&&e<=75){const e=os().toWords(n.slice(2));return e.unshift(t),os().encode(r.prefix,e)}}return null}getAddress(e){return hs(this,void 0,void 0,(function*(){if(null==e&&(e=60),60===e)try{const e={to:this.address,data:"0x3b3b57de"+Wo(this.name).substring(2)},t=yield this.provider.call(e);return"0x"===t||t===_o?null:this.provider.formatter.callAddress(t)}catch(e){if(e.code===b.errors.CALL_EXCEPTION)return null;throw e}const t=yield this._fetchBytes("0xf1cb7e06",_s(e));if(null==t||"0x"===t)return null;const r=this._getAddress(e,t);return null==r&&ps.throwError("invalid or unsupported coin data",b.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:t}),r}))}getAvatar(){return hs(this,void 0,void 0,(function*(){const e=[{type:"name",content:this.name}];try{const t=yield this.getText("avatar");if(null==t)return null;for(let r=0;r<Ps.length;r++){const n=t.match(Ps[r]);if(null==n)continue;const i=n[1].toLowerCase();switch(i){case"https":return e.push({type:"url",content:t}),{linkage:e,url:t};case"data":return e.push({type:"data",content:t}),{linkage:e,url:t};case"ipfs":return e.push({type:"ipfs",content:t}),{linkage:e,url:Os(t)};case"erc721":case"erc1155":{const r="erc721"===i?"0xc87b56dd":"0x0e89341c";e.push({type:i,content:t});const o=this._resolvedAddress||(yield this.getAddress()),s=(n[2]||"").split("/");if(2!==s.length)return null;const a=yield this.provider.formatter.address(s[0]),c=U(W.from(s[1]).toHexString(),32);if("erc721"===i){const t=this.provider.formatter.callAddress(yield this.provider.call({to:a,data:B(["0x6352211e",c])}));if(o!==t)return null;e.push({type:"owner",content:t})}else if("erc1155"===i){const t=W.from(yield this.provider.call({to:a,data:B(["0x00fdd58e",U(o,32),c])}));if(t.isZero())return null;e.push({type:"balance",content:t.toString()})}const u={to:this.provider.formatter.address(s[0]),data:B([r,c])};let d=Ns(yield this.provider.call(u));if(null==d)return null;e.push({type:"metadata-url",content:d}),"erc1155"===i&&(d=d.replace("{id}",c.substring(2)),e.push({type:"metadata-url-expanded",content:d}));const l=yield rs(d);if(!l)return null;e.push({type:"metadata",content:JSON.stringify(l)});let f=l.image;if("string"!=typeof f)return null;if(f.match(/^(https:\/\/|data:)/i));else{if(null==f.match(As))return null;e.push({type:"url-ipfs",content:f}),f=Os(f)}return e.push({type:"url",content:f}),{linkage:e,url:f}}}}}catch(e){}return null}))}getContentHash(){return hs(this,void 0,void 0,(function*(){const e=yield this._fetchBytes("0xbc1c58d1");if(null==e||"0x"===e)return null;const t=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const e=parseInt(t[3],16);if(t[4].length===2*e)return"ipfs://"+fi.encode("0x"+t[1])}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);return r&&64===r[1].length?"bzz://"+r[1]:ps.throwError("invalid or unsupported content hash data",b.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})}))}getText(e){return hs(this,void 0,void 0,(function*(){let t=Je(e);t=P([_s(64),_s(t.length),t]),t.length%32!=0&&(t=P([t,U("0x",32-e.length%32)]));const r=yield this._fetchBytes("0x59d1d43c",T(t));return null==r||"0x"===r?null:We(r)}))}}let Ts=null,Is=1;class Rs extends nr{constructor(e){if(ps.checkNew(new.target,nr),super(),this._events=[],this._emitted={block:-2},this.formatter=new.target.getFormatter(),ee(this,"anyNetwork","any"===e),this.anyNetwork&&(e=this.detectNetwork()),e instanceof Promise)this._networkPromise=e,e.catch((e=>{})),this._ready().catch((e=>{}));else{const t=te(new.target,"getNetwork")(e);t?(ee(this,"_network",t),this.emit("network",t,null)):ps.throwArgumentError("invalid network","network",e)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return hs(this,void 0,void 0,(function*(){if(null==this._network){let e=null;if(this._networkPromise)try{e=yield this._networkPromise}catch(e){}null==e&&(e=yield this.detectNetwork()),e||ps.throwError("no network detected",b.errors.UNKNOWN_ERROR,{}),null==this._network&&(this.anyNetwork?this._network=e:ee(this,"_network",e),this.emit("network",e,null))}return this._network}))}get ready(){return ns((()=>this._ready().then((e=>e),(e=>{if(e.code!==b.errors.NETWORK_ERROR||"noNetwork"!==e.event)throw e}))))}static getFormatter(){return null==Ts&&(Ts=new cs),Ts}static getNetwork(e){return Io(null==e?"homestead":e)}_getInternalBlockNumber(e){return hs(this,void 0,void 0,(function*(){if(yield this._ready(),e>0)for(;this._internalBlockNumber;){const t=this._internalBlockNumber;try{const r=yield t;if(bs()-r.respTime<=e)return r.blockNumber;break}catch(e){if(this._internalBlockNumber===t)break}}const t=bs(),r=re({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then((e=>null),(e=>e))}).then((({blockNumber:e,networkError:n})=>{if(n)throw this._internalBlockNumber===r&&(this._internalBlockNumber=null),n;const i=bs();return(e=W.from(e).toNumber())<this._maxInternalBlockNumber&&(e=this._maxInternalBlockNumber),this._maxInternalBlockNumber=e,this._setFastBlockNumber(e),{blockNumber:e,reqTime:t,respTime:i}}));return this._internalBlockNumber=r,r.catch((e=>{this._internalBlockNumber===r&&(this._internalBlockNumber=null)})),(yield r).blockNumber}))}poll(){return hs(this,void 0,void 0,(function*(){const e=Is++,t=[];let r=null;try{r=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(e){return void this.emit("error",e)}if(this._setFastBlockNumber(r),this.emit("poll",e,r),r!==this._lastBlockNumber){if(-2===this._emitted.block&&(this._emitted.block=r-1),Math.abs(this._emitted.block-r)>1e3)ps.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${r})`),this.emit("error",ps.makeError("network block skew detected",b.errors.NETWORK_ERROR,{blockNumber:r,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",r);else for(let e=this._emitted.block+1;e<=r;e++)this.emit("block",e);this._emitted.block!==r&&(this._emitted.block=r,Object.keys(this._emitted).forEach((e=>{if("block"===e)return;const t=this._emitted[e];"pending"!==t&&r-t>12&&delete this._emitted[e]}))),-2===this._lastBlockNumber&&(this._lastBlockNumber=r-1),this._events.forEach((e=>{switch(e.type){case"tx":{const r=e.hash;let n=this.getTransactionReceipt(r).then((e=>e&&null!=e.blockNumber?(this._emitted["t:"+r]=e.blockNumber,this.emit(r,e),null):null)).catch((e=>{this.emit("error",e)}));t.push(n);break}case"filter":{const n=e.filter;n.fromBlock=this._lastBlockNumber+1,n.toBlock=r;const i=this.getLogs(n).then((e=>{0!==e.length&&e.forEach((e=>{this._emitted["b:"+e.blockHash]=e.blockNumber,this._emitted["t:"+e.transactionHash]=e.blockNumber,this.emit(n,e)}))})).catch((e=>{this.emit("error",e)}));t.push(i);break}}})),this._lastBlockNumber=r,Promise.all(t).then((()=>{this.emit("didPoll",e)})).catch((e=>{this.emit("error",e)}))}else this.emit("didPoll",e)}))}resetEventsBlock(e){this._lastBlockNumber=e-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return hs(this,void 0,void 0,(function*(){return ps.throwError("provider does not support network detection",b.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})}))}getNetwork(){return hs(this,void 0,void 0,(function*(){const e=yield this._ready(),t=yield this.detectNetwork();if(e.chainId!==t.chainId){if(this.anyNetwork)return this._network=t,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",t,e),yield vs(0),this._network;const r=ps.makeError("underlying network changed",b.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:t});throw this.emit("error",r),r}return e}))}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then((e=>{this._setFastBlockNumber(e)}),(e=>{})),null!=this._fastBlockNumber?this._fastBlockNumber:-1}get polling(){return null!=this._poller}set polling(e){e&&!this._poller?(this._poller=setInterval((()=>{this.poll()}),this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout((()=>{this.poll(),this._bootstrapPoll=setTimeout((()=>{this._poller||this.poll(),this._bootstrapPoll=null}),this.pollingInterval)}),0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if("number"!=typeof e||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval((()=>{this.poll()}),this._pollingInterval))}_getFastBlockNumber(){const e=bs();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then((e=>((null==this._fastBlockNumber||e>this._fastBlockNumber)&&(this._fastBlockNumber=e),this._fastBlockNumber)))),this._fastBlockNumberPromise}_setFastBlockNumber(e){null!=this._fastBlockNumber&&e<this._fastBlockNumber||(this._fastQueryDate=bs(),(null==this._fastBlockNumber||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))}waitForTransaction(e,t,r){return hs(this,void 0,void 0,(function*(){return this._waitForTransaction(e,null==t?1:t,r||0,null)}))}_waitForTransaction(e,t,r,n){return hs(this,void 0,void 0,(function*(){const i=yield this.getTransactionReceipt(e);return(i?i.confirmations:0)>=t?i:new Promise(((i,o)=>{const s=[];let a=!1;const c=function(){return!!a||(a=!0,s.forEach((e=>{e()})),!1)},u=e=>{e.confirmations<t||c()||i(e)};if(this.on(e,u),s.push((()=>{this.removeListener(e,u)})),n){let r=n.startBlock,i=null;const u=s=>hs(this,void 0,void 0,(function*(){a||(yield vs(1e3),this.getTransactionCount(n.from).then((d=>hs(this,void 0,void 0,(function*(){if(!a){if(d<=n.nonce)r=s;else{{const t=yield this.getTransaction(e);if(t&&null!=t.blockNumber)return}for(null==i&&(i=r-3,i<n.startBlock&&(i=n.startBlock));i<=s;){if(a)return;const r=yield this.getBlockWithTransactions(i);for(let i=0;i<r.transactions.length;i++){const s=r.transactions[i];if(s.hash===e)return;if(s.from===n.from&&s.nonce===n.nonce){if(a)return;const r=yield this.waitForTransaction(s.hash,t);if(c())return;let i="replaced";return s.data===n.data&&s.to===n.to&&s.value.eq(n.value)?i="repriced":"0x"===s.data&&s.from===s.to&&s.value.isZero()&&(i="cancelled"),void o(ps.makeError("transaction was replaced",b.errors.TRANSACTION_REPLACED,{cancelled:"replaced"===i||"cancelled"===i,reason:i,replacement:this._wrapTransaction(s),hash:e,receipt:r}))}}i++}}a||this.once("block",u)}}))),(e=>{a||this.once("block",u)})))}));if(a)return;this.once("block",u),s.push((()=>{this.removeListener("block",u)}))}if("number"==typeof r&&r>0){const e=setTimeout((()=>{c()||o(ps.makeError("timeout exceeded",b.errors.TIMEOUT,{timeout:r}))}),r);e.unref&&e.unref(),s.push((()=>{clearTimeout(e)}))}}))}))}getBlockNumber(){return hs(this,void 0,void 0,(function*(){return this._getInternalBlockNumber(0)}))}getGasPrice(){return hs(this,void 0,void 0,(function*(){yield this.getNetwork();const e=yield this.perform("getGasPrice",{});try{return W.from(e)}catch(t){return ps.throwError("bad result from backend",b.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:t})}}))}getBalance(e,t){return hs(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield re({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),n=yield this.perform("getBalance",r);try{return W.from(n)}catch(e){return ps.throwError("bad result from backend",b.errors.SERVER_ERROR,{method:"getBalance",params:r,result:n,error:e})}}))}getTransactionCount(e,t){return hs(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield re({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),n=yield this.perform("getTransactionCount",r);try{return W.from(n).toNumber()}catch(e){return ps.throwError("bad result from backend",b.errors.SERVER_ERROR,{method:"getTransactionCount",params:r,result:n,error:e})}}))}getCode(e,t){return hs(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield re({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),n=yield this.perform("getCode",r);try{return T(n)}catch(e){return ps.throwError("bad result from backend",b.errors.SERVER_ERROR,{method:"getCode",params:r,result:n,error:e})}}))}getStorageAt(e,t,r){return hs(this,void 0,void 0,(function*(){yield this.getNetwork();const n=yield re({address:this._getAddress(e),blockTag:this._getBlockTag(r),position:Promise.resolve(t).then((e=>C(e)))}),i=yield this.perform("getStorageAt",n);try{return T(i)}catch(e){return ps.throwError("bad result from backend",b.errors.SERVER_ERROR,{method:"getStorageAt",params:n,result:i,error:e})}}))}_wrapTransaction(e,t,r){if(null!=t&&32!==I(t))throw new Error("invalid response - sendTransaction");const n=e;return null!=t&&e.hash!==t&&ps.throwError("Transaction hash mismatch from Provider.sendTransaction.",b.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:t}),n.wait=(t,n)=>hs(this,void 0,void 0,(function*(){let i;null==t&&(t=1),null==n&&(n=0),0!==t&&null!=r&&(i={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:r});const o=yield this._waitForTransaction(e.hash,t,n,i);return null==o&&0===t?null:(this._emitted["t:"+e.hash]=o.blockNumber,0===o.status&&ps.throwError("transaction failed",b.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:o}),o)})),n}sendTransaction(e){return hs(this,void 0,void 0,(function*(){yield this.getNetwork();const t=yield Promise.resolve(e).then((e=>T(e))),r=this.formatter.transaction(e);null==r.confirmations&&(r.confirmations=0);const n=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const e=yield this.perform("sendTransaction",{signedTransaction:t});return this._wrapTransaction(r,e,n)}catch(e){throw e.transaction=r,e.transactionHash=r.hash,e}}))}_getTransactionRequest(e){return hs(this,void 0,void 0,(function*(){const t=yield e,r={};return["from","to"].forEach((e=>{null!=t[e]&&(r[e]=Promise.resolve(t[e]).then((e=>e?this._getAddress(e):null)))})),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach((e=>{null!=t[e]&&(r[e]=Promise.resolve(t[e]).then((e=>e?W.from(e):null)))})),["type"].forEach((e=>{null!=t[e]&&(r[e]=Promise.resolve(t[e]).then((e=>null!=e?e:null)))})),t.accessList&&(r.accessList=this.formatter.accessList(t.accessList)),["data"].forEach((e=>{null!=t[e]&&(r[e]=Promise.resolve(t[e]).then((e=>e?T(e):null)))})),this.formatter.transactionRequest(yield re(r))}))}_getFilter(e){return hs(this,void 0,void 0,(function*(){e=yield e;const t={};return null!=e.address&&(t.address=this._getAddress(e.address)),["blockHash","topics"].forEach((r=>{null!=e[r]&&(t[r]=e[r])})),["fromBlock","toBlock"].forEach((r=>{null!=e[r]&&(t[r]=this._getBlockTag(e[r]))})),this.formatter.filter(yield re(t))}))}call(e,t){return hs(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield re({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(t)}),n=yield this.perform("call",r);try{return T(n)}catch(e){return ps.throwError("bad result from backend",b.errors.SERVER_ERROR,{method:"call",params:r,result:n,error:e})}}))}estimateGas(e){return hs(this,void 0,void 0,(function*(){yield this.getNetwork();const t=yield re({transaction:this._getTransactionRequest(e)}),r=yield this.perform("estimateGas",t);try{return W.from(r)}catch(e){return ps.throwError("bad result from backend",b.errors.SERVER_ERROR,{method:"estimateGas",params:t,result:r,error:e})}}))}_getAddress(e){return hs(this,void 0,void 0,(function*(){"string"!=typeof(e=yield e)&&ps.throwArgumentError("invalid address or ENS name","name",e);const t=yield this.resolveName(e);return null==t&&ps.throwError("ENS name not configured",b.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`}),t}))}_getBlock(e,t){return hs(this,void 0,void 0,(function*(){yield this.getNetwork(),e=yield e;let r=-128;const n={includeTransactions:!!t};if(O(e,32))n.blockHash=e;else try{n.blockTag=yield this._getBlockTag(e),O(n.blockTag)&&(r=parseInt(n.blockTag.substring(2),16))}catch(t){ps.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}return ns((()=>hs(this,void 0,void 0,(function*(){const e=yield this.perform("getBlock",n);if(null==e)return null!=n.blockHash&&null==this._emitted["b:"+n.blockHash]||null!=n.blockTag&&r>this._emitted.block?null:void 0;if(t){let t=null;for(let r=0;r<e.transactions.length;r++){const n=e.transactions[r];if(null==n.blockNumber)n.confirmations=0;else if(null==n.confirmations){null==t&&(t=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let e=t-n.blockNumber+1;e<=0&&(e=1),n.confirmations=e}}const r=this.formatter.blockWithTransactions(e);return r.transactions=r.transactions.map((e=>this._wrapTransaction(e))),r}return this.formatter.block(e)}))),{oncePoll:this})}))}getBlock(e){return this._getBlock(e,!1)}getBlockWithTransactions(e){return this._getBlock(e,!0)}getTransaction(e){return hs(this,void 0,void 0,(function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return ns((()=>hs(this,void 0,void 0,(function*(){const r=yield this.perform("getTransaction",t);if(null==r)return null==this._emitted["t:"+e]?null:void 0;const n=this.formatter.transactionResponse(r);if(null==n.blockNumber)n.confirmations=0;else if(null==n.confirmations){let e=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-n.blockNumber+1;e<=0&&(e=1),n.confirmations=e}return this._wrapTransaction(n)}))),{oncePoll:this})}))}getTransactionReceipt(e){return hs(this,void 0,void 0,(function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return ns((()=>hs(this,void 0,void 0,(function*(){const r=yield this.perform("getTransactionReceipt",t);if(null==r)return null==this._emitted["t:"+e]?null:void 0;if(null==r.blockHash)return;const n=this.formatter.receipt(r);if(null==n.blockNumber)n.confirmations=0;else if(null==n.confirmations){let e=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-n.blockNumber+1;e<=0&&(e=1),n.confirmations=e}return n}))),{oncePoll:this})}))}getLogs(e){return hs(this,void 0,void 0,(function*(){yield this.getNetwork();const t=yield re({filter:this._getFilter(e)}),r=yield this.perform("getLogs",t);return r.forEach((e=>{null==e.removed&&(e.removed=!1)})),cs.arrayOf(this.formatter.filterLog.bind(this.formatter))(r)}))}getEtherPrice(){return hs(this,void 0,void 0,(function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})}))}_getBlockTag(e){return hs(this,void 0,void 0,(function*(){if("number"==typeof(e=yield e)&&e<0){e%1&&ps.throwArgumentError("invalid BlockTag","blockTag",e);let t=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return t+=e,t<0&&(t=0),this.formatter.blockTag(t)}return this.formatter.blockTag(e)}))}getResolver(e){return hs(this,void 0,void 0,(function*(){try{const t=yield this._getResolver(e);return null==t?null:new Ms(this,t,e)}catch(e){if(e.code===b.errors.CALL_EXCEPTION)return null;throw e}}))}_getResolver(e){return hs(this,void 0,void 0,(function*(){const t=yield this.getNetwork();t.ensAddress||ps.throwError("network does not support ENS",b.errors.UNSUPPORTED_OPERATION,{operation:"ENS",network:t.name});const r={to:t.ensAddress,data:"0x0178b8bf"+Wo(e).substring(2)};try{return this.formatter.callAddress(yield this.call(r))}catch(e){if(e.code===b.errors.CALL_EXCEPTION)return null;throw e}}))}resolveName(e){return hs(this,void 0,void 0,(function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(t){if(O(e))throw t}"string"!=typeof e&&ps.throwArgumentError("invalid ENS name","name",e);const t=yield this.getResolver(e);return t?yield t.getAddress():null}))}lookupAddress(e){return hs(this,void 0,void 0,(function*(){e=yield e;const t=(e=this.formatter.address(e)).substring(2).toLowerCase()+".addr.reverse",r=yield this._getResolver(t);if(!r)return null;let n=A(yield this.call({to:r,data:"0x691f3431"+Wo(t).substring(2)}));if(n.length<32||!W.from(n.slice(0,32)).eq(32))return null;if(n=n.slice(32),n.length<32)return null;const i=W.from(n.slice(0,32)).toNumber();if(n=n.slice(32),i>n.length)return null;const o=We(n.slice(0,i));return(yield this.resolveName(o))!=e?null:o}))}getAvatar(e){return hs(this,void 0,void 0,(function*(){let t=null;if(O(e)){const r=this.formatter.address(e),n=r.substring(2).toLowerCase()+".addr.reverse",i=yield this._getResolver(n);if(!i)return null;t=new Ms(this,i,"_",r)}else if(t=yield this.getResolver(e),!t)return null;const r=yield t.getAvatar();return null==r?null:r.url}))}perform(e,t){return ps.throwError(e+" not implemented",b.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter((e=>e.pollable())).length>0}_stopEvent(e){this.polling=this._events.filter((e=>e.pollable())).length>0}_addEventListener(e,t,r){const n=new Es(gs(e),t,r);return this._events.push(n),this._startEvent(n),this}on(e,t){return this._addEventListener(e,t,!1)}once(e,t){return this._addEventListener(e,t,!0)}emit(e,...t){let r=!1,n=[],i=gs(e);return this._events=this._events.filter((e=>e.tag!==i||(setTimeout((()=>{e.listener.apply(this,t)}),0),r=!0,!e.once||(n.push(e),!1)))),n.forEach((e=>{this._stopEvent(e)})),r}listenerCount(e){if(!e)return this._events.length;let t=gs(e);return this._events.filter((e=>e.tag===t)).length}listeners(e){if(null==e)return this._events.map((e=>e.listener));let t=gs(e);return this._events.filter((e=>e.tag===t)).map((e=>e.listener))}off(e,t){if(null==t)return this.removeAllListeners(e);const r=[];let n=!1,i=gs(e);return this._events=this._events.filter((e=>e.tag!==i||e.listener!=t||!!n||(n=!0,r.push(e),!1))),r.forEach((e=>{this._stopEvent(e)})),this}removeAllListeners(e){let t=[];if(null==e)t=this._events,this._events=[];else{const r=gs(e);this._events=this._events.filter((e=>e.tag!==r||(t.push(e),!1)))}return t.forEach((e=>{this._stopEvent(e)})),this}}var Bs=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};const Cs=new b(ss),Ks=["call","estimateGas"];function Us(e,t,r){if("call"===e&&t.code===b.errors.SERVER_ERROR){const e=t.error;if(e&&e.message.match("reverted")&&O(e.data))return e.data;Cs.throwError("missing revert data in call exception",b.errors.CALL_EXCEPTION,{error:t,data:"0x"})}let n=t.message;t.code===b.errors.SERVER_ERROR&&t.error&&"string"==typeof t.error.message?n=t.error.message:"string"==typeof t.body?n=t.body:"string"==typeof t.responseText&&(n=t.responseText),n=(n||"").toLowerCase();const i=r.transaction||r.signedTransaction;throw n.match(/insufficient funds|base fee exceeds gas limit/)&&Cs.throwError("insufficient funds for intrinsic transaction cost",b.errors.INSUFFICIENT_FUNDS,{error:t,method:e,transaction:i}),n.match(/nonce too low/)&&Cs.throwError("nonce has already been used",b.errors.NONCE_EXPIRED,{error:t,method:e,transaction:i}),n.match(/replacement transaction underpriced/)&&Cs.throwError("replacement fee too low",b.errors.REPLACEMENT_UNDERPRICED,{error:t,method:e,transaction:i}),n.match(/only replay-protected/)&&Cs.throwError("legacy pre-eip-155 transactions not supported",b.errors.UNSUPPORTED_OPERATION,{error:t,method:e,transaction:i}),Ks.indexOf(e)>=0&&n.match(/gas required exceeds allowance|always failing transaction|execution reverted/)&&Cs.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",b.errors.UNPREDICTABLE_GAS_LIMIT,{error:t,method:e,transaction:i}),t}function Ds(e){return new Promise((function(t){setTimeout(t,e)}))}function js(e){if(e.error){const t=new Error(e.error.message);throw t.code=e.error.code,t.data=e.error.data,t}return e.result}function Fs(e){return e?e.toLowerCase():e}const Ls={};class qs extends cr{constructor(e,t,r){if(Cs.checkNew(new.target,qs),super(),e!==Ls)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");ee(this,"provider",t),null==r&&(r=0),"string"==typeof r?(ee(this,"_address",this.provider.formatter.address(r)),ee(this,"_index",null)):"number"==typeof r?(ee(this,"_index",r),ee(this,"_address",null)):Cs.throwArgumentError("invalid address or index","addressOrIndex",r)}connect(e){return Cs.throwError("cannot alter JSON-RPC Signer connection",b.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new Vs(Ls,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then((e=>(e.length<=this._index&&Cs.throwError("unknown account #"+this._index,b.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(e[this._index]))))}sendUncheckedTransaction(e){e=ie(e);const t=this.getAddress().then((e=>(e&&(e=e.toLowerCase()),e)));if(null==e.gasLimit){const r=ie(e);r.from=t,e.gasLimit=this.provider.estimateGas(r)}return null!=e.to&&(e.to=Promise.resolve(e.to).then((e=>Bs(this,void 0,void 0,(function*(){if(null==e)return null;const t=yield this.provider.resolveName(e);return null==t&&Cs.throwArgumentError("provided ENS name resolves to null","tx.to",e),t}))))),re({tx:re(e),sender:t}).then((({tx:t,sender:r})=>{null!=t.from?t.from.toLowerCase()!==r&&Cs.throwArgumentError("from address mismatch","transaction",e):t.from=r;const n=this.provider.constructor.hexlifyTransaction(t,{from:!0});return this.provider.send("eth_sendTransaction",[n]).then((e=>e),(e=>Us("sendTransaction",e,n)))}))}signTransaction(e){return Cs.throwError("signing transactions is unsupported",b.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return Bs(this,void 0,void 0,(function*(){const t=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),r=yield this.sendUncheckedTransaction(e);try{return yield ns((()=>Bs(this,void 0,void 0,(function*(){const e=yield this.provider.getTransaction(r);if(null!==e)return this.provider._wrapTransaction(e,r,t)}))),{oncePoll:this.provider})}catch(e){throw e.transactionHash=r,e}}))}signMessage(e){return Bs(this,void 0,void 0,(function*(){const t="string"==typeof e?Je(e):e,r=yield this.getAddress();return yield this.provider.send("personal_sign",[T(t),r.toLowerCase()])}))}_legacySignMessage(e){return Bs(this,void 0,void 0,(function*(){const t="string"==typeof e?Je(e):e,r=yield this.getAddress();return yield this.provider.send("eth_sign",[r.toLowerCase(),T(t)])}))}_signTypedData(e,t,r){return Bs(this,void 0,void 0,(function*(){const n=yield di.resolveNames(e,t,r,(e=>this.provider.resolveName(e))),i=yield this.getAddress();return yield this.provider.send("eth_signTypedData_v4",[i.toLowerCase(),JSON.stringify(di.getPayload(n.domain,t,n.value))])}))}unlock(e){return Bs(this,void 0,void 0,(function*(){const t=this.provider,r=yield this.getAddress();return t.send("personal_unlockAccount",[r.toLowerCase(),e,null])}))}}class Vs extends qs{sendTransaction(e){return this.sendUncheckedTransaction(e).then((e=>({hash:e,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:t=>this.provider.waitForTransaction(e,t)})))}}const Js={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class zs extends Rs{constructor(e,t){Cs.checkNew(new.target,zs);let r=t;null==r&&(r=new Promise(((e,t)=>{setTimeout((()=>{this.detectNetwork().then((t=>{e(t)}),(e=>{t(e)}))}),0)}))),super(r),e||(e=te(this.constructor,"defaultUrl")()),ee(this,"connection","string"==typeof e?Object.freeze({url:e}):Object.freeze(ie(e))),this._nextId=42}get _cache(){return null==this._eventLoopCache&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout((()=>{this._cache.detectNetwork=null}),0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return Bs(this,void 0,void 0,(function*(){yield Ds(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch(t){try{e=yield this.send("net_version",[])}catch(e){}}if(null!=e){const t=te(this.constructor,"getNetwork");try{return t(W.from(e).toNumber())}catch(t){return Cs.throwError("could not detect network",b.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:t})}}return Cs.throwError("could not detect network",b.errors.NETWORK_ERROR,{event:"noNetwork"})}))}getSigner(e){return new qs(Ls,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then((e=>e.map((e=>this.formatter.address(e)))))}send(e,t){const r={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:ce(r),provider:this});const n=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(n&&this._cache[e])return this._cache[e];const i=rs(this.connection,JSON.stringify(r),js).then((e=>(this.emit("debug",{action:"response",request:r,response:e,provider:this}),e)),(e=>{throw this.emit("debug",{action:"response",error:e,request:r,provider:this}),e}));return n&&(this._cache[e]=i,setTimeout((()=>{this._cache[e]=null}),0)),i}prepareRequest(e,t){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[Fs(t.address),t.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[Fs(t.address),t.blockTag]];case"getCode":return["eth_getCode",[Fs(t.address),t.blockTag]];case"getStorageAt":return["eth_getStorageAt",[Fs(t.address),t.position,t.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[t.signedTransaction]];case"getBlock":return t.blockTag?["eth_getBlockByNumber",[t.blockTag,!!t.includeTransactions]]:t.blockHash?["eth_getBlockByHash",[t.blockHash,!!t.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[t.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[t.transactionHash]];case"call":return["eth_call",[te(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0}),t.blockTag]];case"estimateGas":return["eth_estimateGas",[te(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0})]];case"getLogs":return t.filter&&null!=t.filter.address&&(t.filter.address=Fs(t.filter.address)),["eth_getLogs",[t.filter]]}return null}perform(e,t){return Bs(this,void 0,void 0,(function*(){if("call"===e||"estimateGas"===e){const e=t.transaction;if(e&&null!=e.type&&W.from(e.type).isZero()&&null==e.maxFeePerGas&&null==e.maxPriorityFeePerGas){const r=yield this.getFeeData();null==r.maxFeePerGas&&null==r.maxPriorityFeePerGas&&((t=ie(t)).transaction=ie(e),delete t.transaction.type)}}const r=this.prepareRequest(e,t);null==r&&Cs.throwError(e+" not implemented",b.errors.NOT_IMPLEMENTED,{operation:e});try{return yield this.send(r[0],r[1])}catch(r){return Us(e,r,t)}}))}_startEvent(e){"pending"===e.tag&&this._startPending(),super._startEvent(e)}_startPending(){if(null!=this._pendingFilter)return;const e=this,t=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=t,t.then((function(r){return function n(){e.send("eth_getFilterChanges",[r]).then((function(r){if(e._pendingFilter!=t)return null;let n=Promise.resolve();return r.forEach((function(t){e._emitted["t:"+t.toLowerCase()]="pending",n=n.then((function(){return e.getTransaction(t).then((function(t){return e.emit("pending",t),null}))}))})),n.then((function(){return Ds(1e3)}))})).then((function(){if(e._pendingFilter==t)return setTimeout((function(){n()}),0),null;e.send("eth_uninstallFilter",[r])})).catch((e=>{}))}(),r})).catch((e=>{}))}_stopEvent(e){"pending"===e.tag&&0===this.listenerCount("pending")&&(this._pendingFilter=null),super._stopEvent(e)}static hexlifyTransaction(e,t){const r=ie(Js);if(t)for(const e in t)t[e]&&(r[e]=!0);ne(e,r);const n={};return["gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach((function(t){if(null==e[t])return;const r=C(e[t]);"gasLimit"===t&&(t="gas"),n[t]=r})),["from","to","data"].forEach((function(t){null!=e[t]&&(n[t]=T(e[t]))})),e.accessList&&(n.accessList=ln(e.accessList)),n}}let Gs=null;try{if(Gs=WebSocket,null==Gs)throw new Error("inject please")}catch(e){const t=new b(ss);Gs=function(){t.throwError("WebSockets not supported in this environment",b.errors.UNSUPPORTED_OPERATION,{operation:"new WebSocket()"})}}var Hs=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};const Ws=new b(ss);let $s=1;class Zs extends zs{constructor(e,t){"any"===t&&Ws.throwError("WebSocketProvider does not support 'any' network yet",b.errors.UNSUPPORTED_OPERATION,{operation:"network:any"}),super(e,t),this._pollingInterval=-1,this._wsReady=!1,ee(this,"_websocket",new Gs(this.connection.url)),ee(this,"_requests",{}),ee(this,"_subs",{}),ee(this,"_subIds",{}),ee(this,"_detectNetwork",super.detectNetwork()),this._websocket.onopen=()=>{this._wsReady=!0,Object.keys(this._requests).forEach((e=>{this._websocket.send(this._requests[e].payload)}))},this._websocket.onmessage=e=>{const t=e.data,r=JSON.parse(t);if(null!=r.id){const e=String(r.id),n=this._requests[e];if(delete this._requests[e],void 0!==r.result)n.callback(null,r.result),this.emit("debug",{action:"response",request:JSON.parse(n.payload),response:r.result,provider:this});else{let e=null;r.error?(e=new Error(r.error.message||"unknown error"),ee(e,"code",r.error.code||null),ee(e,"response",t)):e=new Error("unknown error"),n.callback(e,void 0),this.emit("debug",{action:"response",error:e,request:JSON.parse(n.payload),provider:this})}}else if("eth_subscription"===r.method){const e=this._subs[r.params.subscription];e&&e.processFunc(r.params.result)}else console.warn("this should not happen")};const r=setInterval((()=>{this.emit("poll")}),1e3);r.unref&&r.unref()}detectNetwork(){return this._detectNetwork}get pollingInterval(){return 0}resetEventsBlock(e){Ws.throwError("cannot reset events block on WebSocketProvider",b.errors.UNSUPPORTED_OPERATION,{operation:"resetEventBlock"})}set pollingInterval(e){Ws.throwError("cannot set polling interval on WebSocketProvider",b.errors.UNSUPPORTED_OPERATION,{operation:"setPollingInterval"})}poll(){return Hs(this,void 0,void 0,(function*(){return null}))}set polling(e){e&&Ws.throwError("cannot set polling on WebSocketProvider",b.errors.UNSUPPORTED_OPERATION,{operation:"setPolling"})}send(e,t){const r=$s++;return new Promise(((n,i)=>{const o=JSON.stringify({method:e,params:t,id:r,jsonrpc:"2.0"});this.emit("debug",{action:"request",request:JSON.parse(o),provider:this}),this._requests[String(r)]={callback:function(e,t){return e?i(e):n(t)},payload:o},this._wsReady&&this._websocket.send(o)}))}static defaultUrl(){return"ws://localhost:8546"}_subscribe(e,t,r){return Hs(this,void 0,void 0,(function*(){let n=this._subIds[e];null==n&&(n=Promise.all(t).then((e=>this.send("eth_subscribe",e))),this._subIds[e]=n);const i=yield n;this._subs[i]={tag:e,processFunc:r}}))}_startEvent(e){switch(e.type){case"block":this._subscribe("block",["newHeads"],(e=>{const t=W.from(e.number).toNumber();this._emitted.block=t,this.emit("block",t)}));break;case"pending":this._subscribe("pending",["newPendingTransactions"],(e=>{this.emit("pending",e)}));break;case"filter":this._subscribe(e.tag,["logs",this._getFilter(e.filter)],(t=>{null==t.removed&&(t.removed=!1),this.emit(e.filter,this.formatter.filterLog(t))}));break;case"tx":{const t=e=>{const t=e.hash;this.getTransactionReceipt(t).then((e=>{e&&this.emit(t,e)}))};t(e),this._subscribe("tx",["newHeads"],(e=>{this._events.filter((e=>"tx"===e.type)).forEach(t)}));break}case"debug":case"poll":case"willPoll":case"didPoll":case"error":break;default:console.log("unhandled:",e)}}_stopEvent(e){let t=e.tag;if("tx"===e.type){if(this._events.filter((e=>"tx"===e.type)).length)return;t="tx"}else if(this.listenerCount(e.event))return;const r=this._subIds[t];r&&(delete this._subIds[t],r.then((e=>{this._subs[e]&&(delete this._subs[e],this.send("eth_unsubscribe",[e]))})))}destroy(){return Hs(this,void 0,void 0,(function*(){this._websocket.readyState===Gs.CONNECTING&&(yield new Promise((e=>{this._websocket.onopen=function(){e(!0)},this._websocket.onerror=function(){e(!1)}}))),this._websocket.close(1e3)}))}}const Xs=new b(ss);class Ys extends zs{detectNetwork(){const e=Object.create(null,{detectNetwork:{get:()=>super.detectNetwork}});return t=this,r=void 0,i=function*(){let t=this.network;return null==t&&(t=yield e.detectNetwork.call(this),t||Xs.throwError("no network detected",b.errors.UNKNOWN_ERROR,{}),null==this._network&&(ee(this,"_network",t),this.emit("network",t,null))),t},new((n=void 0)||(n=Promise))((function(e,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(s,a)}c((i=i.apply(t,r||[])).next())}));var t,r,n,i}}class Qs extends Ys{constructor(e,t){Xs.checkAbstract(new.target,Qs),e=te(new.target,"getNetwork")(e),t=te(new.target,"getApiKey")(t),super(te(new.target,"getUrl")(e,t),e),"string"==typeof t?ee(this,"apiKey",t):null!=t&&Object.keys(t).forEach((e=>{ee(this,e,t[e])}))}_startPending(){Xs.warn("WARNING: API provider does not support pending filters")}isCommunityResource(){return!1}getSigner(e){return Xs.throwError("API provider does not support signing",b.errors.UNSUPPORTED_OPERATION,{operation:"getSigner"})}listAccounts(){return Promise.resolve([])}static getApiKey(e){return e}static getUrl(e,t){return Xs.throwError("not implemented; sub-classes must override getUrl",b.errors.NOT_IMPLEMENTED,{operation:"getUrl"})}}const ea=new b(ss),ta="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC";class ra extends Zs{constructor(e,t){const r=new na(e,t);super(r.connection.url.replace(/^http/i,"ws").replace(".alchemyapi.",".ws.alchemyapi."),r.network),ee(this,"apiKey",r.apiKey)}isCommunityResource(){return this.apiKey===ta}}class na extends Qs{static getWebSocketProvider(e,t){return new ra(e,t)}static getApiKey(e){return null==e?ta:(e&&"string"!=typeof e&&ea.throwArgumentError("invalid apiKey","apiKey",e),e)}static getUrl(e,t){let r=null;switch(e.name){case"homestead":r="eth-mainnet.alchemyapi.io/v2/";break;case"ropsten":r="eth-ropsten.alchemyapi.io/v2/";break;case"rinkeby":r="eth-rinkeby.alchemyapi.io/v2/";break;case"goerli":r="eth-goerli.alchemyapi.io/v2/";break;case"kovan":r="eth-kovan.alchemyapi.io/v2/";break;case"matic":r="polygon-mainnet.g.alchemy.com/v2/";break;case"maticmum":r="polygon-mumbai.g.alchemy.com/v2/";break;case"arbitrum":r="arb-mainnet.g.alchemy.com/v2/";break;case"arbitrum-rinkeby":r="arb-rinkeby.g.alchemy.com/v2/";break;case"optimism":r="opt-mainnet.g.alchemy.com/v2/";break;case"optimism-kovan":r="opt-kovan.g.alchemy.com/v2/";break;default:ea.throwArgumentError("unsupported network","network",arguments[0])}return{allowGzip:!0,url:"https://"+r+t,throttleCallback:(e,r)=>(t===ta&&fs(),Promise.resolve(!0))}}isCommunityResource(){return this.apiKey===ta}}const ia=new b(ss);class oa extends Qs{static getApiKey(e){return null!=e&&ia.throwArgumentError("apiKey not supported for cloudflare","apiKey",e),null}static getUrl(e,t){let r=null;return"homestead"===e.name?r="https://cloudflare-eth.com/":ia.throwArgumentError("unsupported network","network",arguments[0]),r}perform(e,t){const r=Object.create(null,{perform:{get:()=>super.perform}});return n=this,i=void 0,s=function*(){return"getBlockNumber"===e?(yield r.perform.call(this,"getBlock",{blockTag:"latest"})).number:r.perform.call(this,e,t)},new((o=void 0)||(o=Promise))((function(e,t){function r(e){try{c(s.next(e))}catch(e){t(e)}}function a(e){try{c(s.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(r,a)}c((s=s.apply(n,i||[])).next())}));var n,i,o,s}}var sa=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};const aa=new b(ss);function ca(e){const t={};for(let r in e){if(null==e[r])continue;let n=e[r];"type"===r&&0===n||(n={type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0}[r]?C(T(n)):"accessList"===r?"["+ln(n).map((e=>`{address:"${e.address}",storageKeys:["${e.storageKeys.join('","')}"]}`)).join(",")+"]":T(n),t[r]=n)}return t}function ua(e){if(0==e.status&&("No records found"===e.message||"No transactions found"===e.message))return e.result;if(1!=e.status||"OK"!=e.message){const t=new Error("invalid response");throw t.result=JSON.stringify(e),(e.result||"").toLowerCase().indexOf("rate limit")>=0&&(t.throttleRetry=!0),t}return e.result}function da(e){if(e&&0==e.status&&"NOTOK"==e.message&&(e.result||"").toLowerCase().indexOf("rate limit")>=0){const t=new Error("throttled response");throw t.result=JSON.stringify(e),t.throttleRetry=!0,t}if("2.0"!=e.jsonrpc){const t=new Error("invalid response");throw t.result=JSON.stringify(e),t}if(e.error){const t=new Error(e.error.message||"unknown error");throw e.error.code&&(t.code=e.error.code),e.error.data&&(t.data=e.error.data),t}return e.result}function la(e){if("pending"===e)throw new Error("pending not supported");return"latest"===e?e:parseInt(e.substring(2),16)}const fa="9D13ZE7XSBTJ94N9BNJ2MA33VMAY2YPIRB";function ha(e,t,r){if("call"===e&&t.code===b.errors.SERVER_ERROR){const e=t.error;if(e&&(e.message.match(/reverted/i)||e.message.match(/VM execution error/i))){let r=e.data;if(r&&(r="0x"+r.replace(/^.*0x/i,"")),O(r))return r;aa.throwError("missing revert data in call exception",b.errors.CALL_EXCEPTION,{error:t,data:"0x"})}}let n=t.message;throw t.code===b.errors.SERVER_ERROR&&(t.error&&"string"==typeof t.error.message?n=t.error.message:"string"==typeof t.body?n=t.body:"string"==typeof t.responseText&&(n=t.responseText)),n=(n||"").toLowerCase(),n.match(/insufficient funds/)&&aa.throwError("insufficient funds for intrinsic transaction cost",b.errors.INSUFFICIENT_FUNDS,{error:t,method:e,transaction:r}),n.match(/same hash was already imported|transaction nonce is too low|nonce too low/)&&aa.throwError("nonce has already been used",b.errors.NONCE_EXPIRED,{error:t,method:e,transaction:r}),n.match(/another transaction with same nonce/)&&aa.throwError("replacement fee too low",b.errors.REPLACEMENT_UNDERPRICED,{error:t,method:e,transaction:r}),n.match(/execution failed due to an exception|execution reverted/)&&aa.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",b.errors.UNPREDICTABLE_GAS_LIMIT,{error:t,method:e,transaction:r}),t}class pa extends Rs{constructor(e,t){aa.checkNew(new.target,pa),super(e),ee(this,"baseUrl",this.getBaseUrl()),ee(this,"apiKey",t||fa)}getBaseUrl(){switch(this.network?this.network.name:"invalid"){case"homestead":return"https://api.etherscan.io";case"ropsten":return"https://api-ropsten.etherscan.io";case"rinkeby":return"https://api-rinkeby.etherscan.io";case"kovan":return"https://api-kovan.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io"}return aa.throwArgumentError("unsupported network","network",name)}getUrl(e,t){const r=Object.keys(t).reduce(((e,r)=>{const n=t[r];return null!=n&&(e+=`&${r}=${n}`),e}),""),n=this.apiKey?`&apikey=${this.apiKey}`:"";return`${this.baseUrl}/api?module=${e}${r}${n}`}getPostUrl(){return`${this.baseUrl}/api`}getPostData(e,t){return t.module=e,t.apikey=this.apiKey,t}fetch(e,t,r){return sa(this,void 0,void 0,(function*(){const n=r?this.getPostUrl():this.getUrl(e,t),i=r?this.getPostData(e,t):null,o="proxy"===e?da:ua;this.emit("debug",{action:"request",request:n,provider:this});const s={url:n,throttleSlotInterval:1e3,throttleCallback:(e,t)=>(this.isCommunityResource()&&fs(),Promise.resolve(!0))};let a=null;i&&(s.headers={"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},a=Object.keys(i).map((e=>`${e}=${i[e]}`)).join("&"));const c=yield rs(s,a,o||da);return this.emit("debug",{action:"response",request:n,response:ce(c),provider:this}),c}))}detectNetwork(){return sa(this,void 0,void 0,(function*(){return this.network}))}perform(e,t){const r=Object.create(null,{perform:{get:()=>super.perform}});return sa(this,void 0,void 0,(function*(){switch(e){case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getBalance":return this.fetch("account",{action:"balance",address:t.address,tag:t.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:t.address,tag:t.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:t.address,tag:t.blockTag});case"getStorageAt":return this.fetch("proxy",{action:"eth_getStorageAt",address:t.address,position:t.position,tag:t.blockTag});case"sendTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:t.signedTransaction},!0).catch((e=>ha("sendTransaction",e,t.signedTransaction)));case"getBlock":if(t.blockTag)return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:t.blockTag,boolean:t.includeTransactions?"true":"false"});throw new Error("getBlock by blockHash not implemented");case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:t.transactionHash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:t.transactionHash});case"call":{if("latest"!==t.blockTag)throw new Error("EtherscanProvider does not support blockTag for call");const e=ca(t.transaction);e.module="proxy",e.action="eth_call";try{return yield this.fetch("proxy",e,!0)}catch(e){return ha("call",e,t.transaction)}}case"estimateGas":{const e=ca(t.transaction);e.module="proxy",e.action="eth_estimateGas";try{return yield this.fetch("proxy",e,!0)}catch(e){return ha("estimateGas",e,t.transaction)}}case"getLogs":{const e={action:"getLogs"};if(t.filter.fromBlock&&(e.fromBlock=la(t.filter.fromBlock)),t.filter.toBlock&&(e.toBlock=la(t.filter.toBlock)),t.filter.address&&(e.address=t.filter.address),t.filter.topics&&t.filter.topics.length>0&&(t.filter.topics.length>1&&aa.throwError("unsupported topic count",b.errors.UNSUPPORTED_OPERATION,{topics:t.filter.topics}),1===t.filter.topics.length)){const r=t.filter.topics[0];"string"==typeof r&&66===r.length||aa.throwError("unsupported topic format",b.errors.UNSUPPORTED_OPERATION,{topic0:r}),e.topic0=r}const r=yield this.fetch("logs",e);let n={};for(let e=0;e<r.length;e++){const t=r[e];if(null==t.blockHash){if(null==n[t.blockNumber]){const e=yield this.getBlock(t.blockNumber);e&&(n[t.blockNumber]=e.hash)}t.blockHash=n[t.blockNumber]}}return r}case"getEtherPrice":return"homestead"!==this.network.name?0:parseFloat((yield this.fetch("stats",{action:"ethprice"})).ethusd)}return r.perform.call(this,e,t)}))}getHistory(e,t,r){return sa(this,void 0,void 0,(function*(){const n={action:"txlist",address:yield this.resolveName(e),startblock:null==t?0:t,endblock:null==r?99999999:r,sort:"asc"};return(yield this.fetch("account",n)).map((e=>{["contractAddress","to"].forEach((function(t){""==e[t]&&delete e[t]})),null==e.creates&&null!=e.contractAddress&&(e.creates=e.contractAddress);const t=this.formatter.transactionResponse(e);return e.timeStamp&&(t.timestamp=parseInt(e.timeStamp)),t}))}))}isCommunityResource(){return this.apiKey===fa}}function ya(e){for(let t=(e=e.slice()).length-1;t>0;t--){const r=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[r],e[r]=n}return e}var ma=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};const ga=new b(ss);function ba(){return(new Date).getTime()}function va(e){let t=null;for(let r=0;r<e.length;r++){const n=e[r];if(null==n)return null;t?t.name===n.name&&t.chainId===n.chainId&&(t.ensAddress===n.ensAddress||null==t.ensAddress&&null==n.ensAddress)||ga.throwArgumentError("provider mismatch","networks",e):t=n}return t}function wa(e,t){e=e.slice().sort();const r=Math.floor(e.length/2);if(e.length%2)return e[r];const n=e[r-1],i=e[r];return null!=t&&Math.abs(n-i)>t?null:(n+i)/2}function Ea(e){if(null===e)return"null";if("number"==typeof e||"boolean"==typeof e)return JSON.stringify(e);if("string"==typeof e)return e;if(W.isBigNumber(e))return e.toString();if(Array.isArray(e))return JSON.stringify(e.map((e=>Ea(e))));if("object"==typeof e){const t=Object.keys(e);return t.sort(),"{"+t.map((t=>{let r=e[t];return r="function"==typeof r?"[function]":Ea(r),JSON.stringify(t)+":"+r})).join(",")+"}"}throw new Error("unknown value type: "+typeof e)}let Sa=1;function _a(e){let t=null,r=null,n=new Promise((n=>{t=function(){r&&(clearTimeout(r),r=null),n()},r=setTimeout(t,e)}));return{cancel:t,getPromise:function(){return n},wait:e=>(n=n.then(e),n)}}const ka=[b.errors.CALL_EXCEPTION,b.errors.INSUFFICIENT_FUNDS,b.errors.NONCE_EXPIRED,b.errors.REPLACEMENT_UNDERPRICED,b.errors.UNPREDICTABLE_GAS_LIMIT],Aa=["address","args","errorArgs","errorSignature","method","transaction"];function Pa(e,t){const r={weight:e.weight};return Object.defineProperty(r,"provider",{get:()=>e.provider}),e.start&&(r.start=e.start),t&&(r.duration=t-e.start),e.done&&(e.error?r.error=e.error:r.result=e.result||null),r}function Na(e,t){return ma(this,void 0,void 0,(function*(){const r=e.provider;return null!=r.blockNumber&&r.blockNumber>=t||-1===t?r:ns((()=>new Promise(((n,i)=>{setTimeout((function(){return r.blockNumber>=t?n(r):e.cancelled?n(null):n(void 0)}),0)}))),{oncePoll:r})}))}function xa(e,t,r,n){return ma(this,void 0,void 0,(function*(){let i=e.provider;switch(r){case"getBlockNumber":case"getGasPrice":return i[r]();case"getEtherPrice":if(i.getEtherPrice)return i.getEtherPrice();break;case"getBalance":case"getTransactionCount":case"getCode":return n.blockTag&&O(n.blockTag)&&(i=yield Na(e,t)),i[r](n.address,n.blockTag||"latest");case"getStorageAt":return n.blockTag&&O(n.blockTag)&&(i=yield Na(e,t)),i.getStorageAt(n.address,n.position,n.blockTag||"latest");case"getBlock":return n.blockTag&&O(n.blockTag)&&(i=yield Na(e,t)),i[n.includeTransactions?"getBlockWithTransactions":"getBlock"](n.blockTag||n.blockHash);case"call":case"estimateGas":return n.blockTag&&O(n.blockTag)&&(i=yield Na(e,t)),i[r](n.transaction);case"getTransaction":case"getTransactionReceipt":return i[r](n.transactionHash);case"getLogs":{let r=n.filter;return(r.fromBlock&&O(r.fromBlock)||r.toBlock&&O(r.toBlock))&&(i=yield Na(e,t)),i.getLogs(r)}}return ga.throwError("unknown method error",b.errors.UNKNOWN_ERROR,{method:r,params:n})}))}class Oa extends Rs{constructor(e,t){ga.checkNew(new.target,Oa),0===e.length&&ga.throwArgumentError("missing providers","providers",e);const r=e.map(((e,t)=>{if(nr.isProvider(e)){const t=ds(e)?2e3:750,r=1;return Object.freeze({provider:e,weight:1,stallTimeout:t,priority:r})}const r=ie(e);null==r.priority&&(r.priority=1),null==r.stallTimeout&&(r.stallTimeout=ds(e)?2e3:750),null==r.weight&&(r.weight=1);const n=r.weight;return(n%1||n>512||n<1)&&ga.throwArgumentError("invalid weight; must be integer in [1, 512]",`providers[${t}].weight`,n),Object.freeze(r)})),n=r.reduce(((e,t)=>e+t.weight),0);null==t?t=n/2:t>n&&ga.throwArgumentError("quorum will always fail; larger than total weight","quorum",t);let i=va(r.map((e=>e.provider.network)));null==i&&(i=new Promise(((e,t)=>{setTimeout((()=>{this.detectNetwork().then(e,t)}),0)}))),super(i),ee(this,"providerConfigs",Object.freeze(r)),ee(this,"quorum",t),this._highestBlockNumber=-1}detectNetwork(){return ma(this,void 0,void 0,(function*(){return va(yield Promise.all(this.providerConfigs.map((e=>e.provider.getNetwork()))))}))}perform(e,t){return ma(this,void 0,void 0,(function*(){if("sendTransaction"===e){const e=yield Promise.all(this.providerConfigs.map((e=>e.provider.sendTransaction(t.signedTransaction).then((e=>e.hash),(e=>e)))));for(let t=0;t<e.length;t++){const r=e[t];if("string"==typeof r)return r}throw e[0]}-1===this._highestBlockNumber&&"getBlockNumber"!==e&&(yield this.getBlockNumber());const r=function(e,t,r){let n=Ea;switch(t){case"getBlockNumber":return function(t){const r=t.map((e=>e.result));let n=wa(t.map((e=>e.result)),2);if(null!=n)return n=Math.ceil(n),r.indexOf(n+1)>=0&&n++,n>=e._highestBlockNumber&&(e._highestBlockNumber=n),e._highestBlockNumber};case"getGasPrice":return function(e){const t=e.map((e=>e.result));return t.sort(),t[Math.floor(t.length/2)]};case"getEtherPrice":return function(e){return wa(e.map((e=>e.result)))};case"getBalance":case"getTransactionCount":case"getCode":case"getStorageAt":case"call":case"estimateGas":case"getLogs":break;case"getTransaction":case"getTransactionReceipt":n=function(e){return null==e?null:((e=ie(e)).confirmations=-1,Ea(e))};break;case"getBlock":n=r.includeTransactions?function(e){return null==e?null:((e=ie(e)).transactions=e.transactions.map((e=>((e=ie(e)).confirmations=-1,e))),Ea(e))}:function(e){return null==e?null:Ea(e)};break;default:throw new Error("unknown method: "+t)}return function(e,t){return function(r){const n={};r.forEach((t=>{const r=e(t.result);n[r]||(n[r]={count:0,result:t.result}),n[r].count++}));const i=Object.keys(n);for(let e=0;e<i.length;e++){const r=n[i[e]];if(r.count>=t)return r.result}}}(n,e.quorum)}(this,e,t),n=ya(this.providerConfigs.map(ie));n.sort(((e,t)=>e.priority-t.priority));const i=this._highestBlockNumber;let o=0,s=!0;for(;;){const a=ba();let c=n.filter((e=>e.runner&&a-e.start<e.stallTimeout)).reduce(((e,t)=>e+t.weight),0);for(;c<this.quorum&&o<n.length;){const r=n[o++],s=Sa++;r.start=ba(),r.staller=_a(r.stallTimeout),r.staller.wait((()=>{r.staller=null})),r.runner=xa(r,i,e,t).then((n=>{r.done=!0,r.result=n,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:s,backend:Pa(r,ba()),request:{method:e,params:ce(t)},provider:this})}),(n=>{r.done=!0,r.error=n,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:s,backend:Pa(r,ba()),request:{method:e,params:ce(t)},provider:this})})),this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:s,backend:Pa(r,null),request:{method:e,params:ce(t)},provider:this}),c+=r.weight}const u=[];n.forEach((e=>{!e.done&&e.runner&&(u.push(e.runner),e.staller&&u.push(e.staller.getPromise()))})),u.length&&(yield Promise.race(u));const d=n.filter((e=>e.done&&null==e.error));if(d.length>=this.quorum){const e=r(d);if(void 0!==e)return n.forEach((e=>{e.staller&&e.staller.cancel(),e.cancelled=!0})),e;s||(yield _a(100).getPromise()),s=!1}const l=n.reduce(((e,t)=>{if(!t.done||null==t.error)return e;const r=t.error.code;return ka.indexOf(r)>=0&&(e[r]||(e[r]={error:t.error,weight:0}),e[r].weight+=t.weight),e}),{});if(Object.keys(l).forEach((e=>{const t=l[e];if(t.weight<this.quorum)return;n.forEach((e=>{e.staller&&e.staller.cancel(),e.cancelled=!0}));const r=t.error,i={};Aa.forEach((e=>{null!=r[e]&&(i[e]=r[e])})),ga.throwError(r.reason||r.message,e,i)})),0===n.filter((e=>!e.done)).length)break}return n.forEach((e=>{e.staller&&e.staller.cancel(),e.cancelled=!0})),ga.throwError("failed to meet quorum",b.errors.SERVER_ERROR,{method:e,params:t,results:n.map((e=>Pa(e))),provider:this})}))}}const Ma=null,Ta=new b(ss),Ia="84842078b09946638c03157f83405213";class Ra extends Zs{constructor(e,t){const r=new Ba(e,t),n=r.connection;n.password&&Ta.throwError("INFURA WebSocket project secrets unsupported",b.errors.UNSUPPORTED_OPERATION,{operation:"InfuraProvider.getWebSocketProvider()"}),super(n.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/"),e),ee(this,"apiKey",r.projectId),ee(this,"projectId",r.projectId),ee(this,"projectSecret",r.projectSecret)}isCommunityResource(){return this.projectId===Ia}}class Ba extends Qs{static getWebSocketProvider(e,t){return new Ra(e,t)}static getApiKey(e){const t={apiKey:Ia,projectId:Ia,projectSecret:null};return null==e||("string"==typeof e?t.projectId=e:null!=e.projectSecret?(Ta.assertArgument("string"==typeof e.projectId,"projectSecret requires a projectId","projectId",e.projectId),Ta.assertArgument("string"==typeof e.projectSecret,"invalid projectSecret","projectSecret","[REDACTED]"),t.projectId=e.projectId,t.projectSecret=e.projectSecret):e.projectId&&(t.projectId=e.projectId),t.apiKey=t.projectId),t}static getUrl(e,t){let r=null;switch(e?e.name:"unknown"){case"homestead":r="mainnet.infura.io";break;case"ropsten":r="ropsten.infura.io";break;case"rinkeby":r="rinkeby.infura.io";break;case"kovan":r="kovan.infura.io";break;case"goerli":r="goerli.infura.io";break;case"matic":r="polygon-mainnet.infura.io";break;case"maticmum":r="polygon-mumbai.infura.io";break;case"optimism":r="optimism-mainnet.infura.io";break;case"optimism-kovan":r="optimism-kovan.infura.io";break;case"arbitrum":r="arbitrum-mainnet.infura.io";break;case"arbitrum-rinkeby":r="arbitrum-rinkeby.infura.io";break;default:Ta.throwError("unsupported network",b.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const n={allowGzip:!0,url:"https://"+r+"/v3/"+t.projectId,throttleCallback:(e,r)=>(t.projectId===Ia&&fs(),Promise.resolve(!0))};return null!=t.projectSecret&&(n.user="",n.password=t.projectSecret),n}isCommunityResource(){return this.projectId===Ia}}class Ca extends zs{send(e,t){const r={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};null==this._pendingBatch&&(this._pendingBatch=[]);const n={request:r,resolve:null,reject:null},i=new Promise(((e,t)=>{n.resolve=e,n.reject=t}));return this._pendingBatch.push(n),this._pendingBatchAggregator||(this._pendingBatchAggregator=setTimeout((()=>{const e=this._pendingBatch;this._pendingBatch=null,this._pendingBatchAggregator=null;const t=e.map((e=>e.request));return this.emit("debug",{action:"requestBatch",request:ce(t),provider:this}),rs(this.connection,JSON.stringify(t)).then((r=>{this.emit("debug",{action:"response",request:t,response:r,provider:this}),e.forEach(((e,t)=>{const n=r[t];if(n.error){const t=new Error(n.error.message);t.code=n.error.code,t.data=n.error.data,e.reject(t)}else e.resolve(n.result)}))}),(r=>{this.emit("debug",{action:"response",error:r,request:t,provider:this}),e.forEach((e=>{e.reject(r)}))}))}),10)),i}}const Ka=new b(ss);class Ua extends Qs{static getApiKey(e){return e&&"string"!=typeof e&&Ka.throwArgumentError("invalid apiKey","apiKey",e),e||"ETHERS_JS_SHARED"}static getUrl(e,t){Ka.warn("NodeSmith will be discontinued on 2019-12-20; please migrate to another platform.");let r=null;switch(e.name){case"homestead":r="https://ethereum.api.nodesmith.io/v1/mainnet/jsonrpc";break;case"ropsten":r="https://ethereum.api.nodesmith.io/v1/ropsten/jsonrpc";break;case"rinkeby":r="https://ethereum.api.nodesmith.io/v1/rinkeby/jsonrpc";break;case"goerli":r="https://ethereum.api.nodesmith.io/v1/goerli/jsonrpc";break;case"kovan":r="https://ethereum.api.nodesmith.io/v1/kovan/jsonrpc";break;default:Ka.throwArgumentError("unsupported network","network",arguments[0])}return r+"?apiKey="+t}}const Da=new b(ss),ja={homestead:"6004bcd10040261633ade990",ropsten:"6004bd4d0040261633ade991",rinkeby:"6004bda20040261633ade994",goerli:"6004bd860040261633ade992"};class Fa extends Qs{constructor(e,t){if(null==t){const r=te(new.target,"getNetwork")(e);if(r){const e=ja[r.name];e&&(t={applicationId:e,loadBalancer:!0})}null==t&&Da.throwError("unsupported network",b.errors.INVALID_ARGUMENT,{argument:"network",value:e})}super(e,t)}static getApiKey(e){null==e&&Da.throwArgumentError("PocketProvider.getApiKey does not support null apiKey","apiKey",e);const t={applicationId:null,loadBalancer:!1,applicationSecretKey:null};return"string"==typeof e?t.applicationId=e:null!=e.applicationSecretKey?(Da.assertArgument("string"==typeof e.applicationId,"applicationSecretKey requires an applicationId","applicationId",e.applicationId),Da.assertArgument("string"==typeof e.applicationSecretKey,"invalid applicationSecretKey","applicationSecretKey","[REDACTED]"),t.applicationId=e.applicationId,t.applicationSecretKey=e.applicationSecretKey,t.loadBalancer=!!e.loadBalancer):e.applicationId?(Da.assertArgument("string"==typeof e.applicationId,"apiKey.applicationId must be a string","apiKey.applicationId",e.applicationId),t.applicationId=e.applicationId,t.loadBalancer=!!e.loadBalancer):Da.throwArgumentError("unsupported PocketProvider apiKey","apiKey",e),t}static getUrl(e,t){let r=null;switch(e?e.name:"unknown"){case"homestead":r="eth-mainnet.gateway.pokt.network";break;case"ropsten":r="eth-ropsten.gateway.pokt.network";break;case"rinkeby":r="eth-rinkeby.gateway.pokt.network";break;case"goerli":r="eth-goerli.gateway.pokt.network";break;default:Da.throwError("unsupported network",b.errors.INVALID_ARGUMENT,{argument:"network",value:e})}let n=null;n=t.loadBalancer?`https://${r}/v1/lb/${t.applicationId}`:`https://${r}/v1/${t.applicationId}`;const i={url:n,headers:{}};return null!=t.applicationSecretKey&&(i.user="",i.password=t.applicationSecretKey),i}isCommunityResource(){return this.applicationId===ja[this.network.name]}}const La=new b(ss);let qa=1;function Va(e,t){const r="Web3LegacyFetcher";return function(e,n){const i={method:e,params:n,id:qa++,jsonrpc:"2.0"};return new Promise(((e,n)=>{this.emit("debug",{action:"request",fetcher:r,request:ce(i),provider:this}),t(i,((t,o)=>{if(t)return this.emit("debug",{action:"response",fetcher:r,error:t,request:i,provider:this}),n(t);if(this.emit("debug",{action:"response",fetcher:r,request:i,response:o,provider:this}),o.error){const e=new Error(o.error.message);return e.code=o.error.code,e.data=o.error.data,n(e)}e(o.result)}))}))}}class Ja extends zs{constructor(e,t){La.checkNew(new.target,Ja),null==e&&La.throwArgumentError("missing provider","provider",e);let r=null,n=null,i=null;"function"==typeof e?(r="unknown:",n=e):(r=e.host||e.path||"",!r&&e.isMetaMask&&(r="metamask"),i=e,e.request?(""===r&&(r="eip-1193:"),n=function(e){return function(t,r){null==r&&(r=[]);const n={method:t,params:r};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:ce(n),provider:this}),e.request(n).then((e=>(this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,response:e,provider:this}),e)),(e=>{throw this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,error:e,provider:this}),e}))}}(e)):e.sendAsync?n=Va(0,e.sendAsync.bind(e)):e.send?n=Va(0,e.send.bind(e)):La.throwArgumentError("unsupported provider","provider",e),r||(r="unknown:")),super(r,t),ee(this,"jsonRpcFetchFunc",n),ee(this,"provider",i)}send(e,t){return this.jsonRpcFetchFunc(e,t)}}const za=new b(ss);function Ga(e,t){if(null==e&&(e="homestead"),"string"==typeof e){const t=e.match(/^(ws|http)s?:/i);if(t)switch(t[1]){case"http":return new zs(e);case"ws":return new Zs(e);default:za.throwArgumentError("unsupported URL scheme","network",e)}}const r=Io(e);return r&&r._defaultProvider||za.throwError("unsupported getDefaultProvider network",b.errors.NETWORK_ERROR,{operation:"getDefaultProvider",network:e}),r._defaultProvider({FallbackProvider:Oa,AlchemyProvider:na,CloudflareProvider:oa,EtherscanProvider:pa,InfuraProvider:Ba,JsonRpcProvider:zs,NodesmithProvider:Ua,PocketProvider:Fa,Web3Provider:Ja,IpcProvider:Ma},t)}const Ha=new RegExp("^bytes([0-9]+)$"),Wa=new RegExp("^(u?int)([0-9]*)$"),$a=new RegExp("^(.*)\\[([0-9]*)\\]$"),Za=new b("solidity/5.5.0");function Xa(e,t,r){switch(e){case"address":return r?x(t,32):A(t);case"string":return Je(t);case"bytes":return A(t);case"bool":return t=t?"0x01":"0x00",r?x(t,32):A(t)}let n=e.match(Wa);if(n){let i=parseInt(n[2]||"256");return(n[2]&&String(i)!==n[2]||i%8!=0||0===i||i>256)&&Za.throwArgumentError("invalid number type","type",e),r&&(i=256),x(t=W.from(t).toTwos(i),i/8)}if(n=e.match(Ha),n){const i=parseInt(n[1]);return(String(i)!==n[1]||0===i||i>32)&&Za.throwArgumentError("invalid bytes type","type",e),A(t).byteLength!==i&&Za.throwArgumentError(`invalid value for ${e}`,"value",t),r?A((t+"0000000000000000000000000000000000000000000000000000000000000000").substring(0,66)):t}if(n=e.match($a),n&&Array.isArray(t)){const r=n[1];parseInt(n[2]||String(t.length))!=t.length&&Za.throwArgumentError(`invalid array length for ${e}`,"value",t);const i=[];return t.forEach((function(e){i.push(Xa(r,e,!0))})),P(i)}return Za.throwArgumentError("invalid type","type",e)}function Ya(e,t){e.length!=t.length&&Za.throwArgumentError("wrong number of values; expected ${ types.length }","values",t);const r=[];return e.forEach((function(e,n){r.push(Xa(e,t[n]))})),T(P(r))}function Qa(e,t){return be(Ya(e,t))}function ec(e,t){return mi(Ya(e,t))}function tc(e){const t=Je(e);if(t.length>31)throw new Error("bytes32 string must be less than 32 bytes");return T(P([t,_o]).slice(0,32))}function rc(e){const t=A(e);if(32!==t.length)throw new Error("invalid bytes32 - not 32 bytes long");if(0!==t[31])throw new Error("invalid bytes32 string - no null terminator");let r=31;for(;0===t[r-1];)r--;return We(t.slice(0,r))}const nc=new b("units/5.5.0"),ic=["wei","kwei","mwei","gwei","szabo","finney","ether"];function oc(e){const t=String(e).split(".");(t.length>2||!t[0].match(/^-?[0-9]*$/)||t[1]&&!t[1].match(/^[0-9]*$/)||"."===e||"-."===e)&&nc.throwArgumentError("invalid value","value",e);let r=t[0],n="";for("-"===r.substring(0,1)&&(n="-",r=r.substring(1));"0"===r.substring(0,1);)r=r.substring(1);""===r&&(r="0");let i="";for(2===t.length&&(i="."+(t[1]||"0"));i.length>2&&"0"===i[i.length-1];)i=i.substring(0,i.length-1);const o=[];for(;r.length;){if(r.length<=3){o.unshift(r);break}{const e=r.length-3;o.unshift(r.substring(e)),r=r.substring(0,e)}}return n+o.join(",")+i}function sc(e,t){if("string"==typeof t){const e=ic.indexOf(t);-1!==e&&(t=3*e)}return qn(e,null!=t?t:18)}function ac(e,t){if("string"!=typeof e&&nc.throwArgumentError("value must be a string","value",e),"string"==typeof t){const e=ic.indexOf(t);-1!==e&&(t=3*e)}return Vn(e,null!=t?t:18)}function cc(e){return sc(e,18)}function uc(e){return ac(e,18)}const dc="ethers/5.5.3",lc=new b(dc);try{const e=window;null==e._ethers&&(e._ethers=c)}catch(e){}},3715:(e,t,r)=>{var n=t;n.utils=r(6436),n.common=r(5772),n.sha=r(9041),n.ripemd=r(2949),n.hmac=r(2344),n.sha1=n.sha.sha1,n.sha256=n.sha.sha256,n.sha224=n.sha.sha224,n.sha384=n.sha.sha384,n.sha512=n.sha.sha512,n.ripemd160=n.ripemd.ripemd160},5772:(e,t,r)=>{"use strict";var n=r(6436),i=r(9746);function o(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}t.BlockHash=o,o.prototype.update=function(e,t){if(e=n.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var r=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-r,e.length),0===this.pending.length&&(this.pending=null),e=n.join32(e,0,e.length-r,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this},o.prototype.digest=function(e){return this.update(this._pad()),i(null===this.pending),this._digest(e)},o.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,n=new Array(r+this.padLength);n[0]=128;for(var i=1;i<r;i++)n[i]=0;if(e<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)n[i++]=0;n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=e>>>24&255,n[i++]=e>>>16&255,n[i++]=e>>>8&255,n[i++]=255&e}else for(n[i++]=255&e,n[i++]=e>>>8&255,n[i++]=e>>>16&255,n[i++]=e>>>24&255,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,o=8;o<this.padLength;o++)n[i++]=0;return n}},2344:(e,t,r)=>{"use strict";var n=r(6436),i=r(9746);function o(e,t,r){if(!(this instanceof o))return new o(e,t,r);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(n.toArray(t,r))}e.exports=o,o.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),i(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},o.prototype.update=function(e,t){return this.inner.update(e,t),this},o.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}},2949:(e,t,r)=>{"use strict";var n=r(6436),i=r(5772),o=n.rotl32,s=n.sum32,a=n.sum32_3,c=n.sum32_4,u=i.BlockHash;function d(){if(!(this instanceof d))return new d;u.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function l(e,t,r,n){return e<=15?t^r^n:e<=31?t&r|~t&n:e<=47?(t|~r)^n:e<=63?t&n|r&~n:t^(r|~n)}function f(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function h(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}n.inherits(d,u),t.ripemd160=d,d.blockSize=512,d.outSize=160,d.hmacStrength=192,d.padLength=64,d.prototype._update=function(e,t){for(var r=this.h[0],n=this.h[1],i=this.h[2],u=this.h[3],d=this.h[4],b=r,v=n,w=i,E=u,S=d,_=0;_<80;_++){var k=s(o(c(r,l(_,n,i,u),e[p[_]+t],f(_)),m[_]),d);r=d,d=u,u=o(i,10),i=n,n=k,k=s(o(c(b,l(79-_,v,w,E),e[y[_]+t],h(_)),g[_]),S),b=S,S=E,E=o(w,10),w=v,v=k}k=a(this.h[1],i,E),this.h[1]=a(this.h[2],u,S),this.h[2]=a(this.h[3],d,b),this.h[3]=a(this.h[4],r,v),this.h[4]=a(this.h[0],n,w),this.h[0]=k},d.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"little"):n.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],y=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],m=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],g=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},9041:(e,t,r)=>{"use strict";t.sha1=r(4761),t.sha224=r(799),t.sha256=r(9344),t.sha384=r(772),t.sha512=r(5900)},4761:(e,t,r)=>{"use strict";var n=r(6436),i=r(5772),o=r(7038),s=n.rotl32,a=n.sum32,c=n.sum32_5,u=o.ft_1,d=i.BlockHash,l=[1518500249,1859775393,2400959708,3395469782];function f(){if(!(this instanceof f))return new f;d.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}n.inherits(f,d),e.exports=f,f.blockSize=512,f.outSize=160,f.hmacStrength=80,f.padLength=64,f.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=s(r[n-3]^r[n-8]^r[n-14]^r[n-16],1);var i=this.h[0],o=this.h[1],d=this.h[2],f=this.h[3],h=this.h[4];for(n=0;n<r.length;n++){var p=~~(n/20),y=c(s(i,5),u(p,o,d,f),h,r[n],l[p]);h=f,f=d,d=s(o,30),o=i,i=y}this.h[0]=a(this.h[0],i),this.h[1]=a(this.h[1],o),this.h[2]=a(this.h[2],d),this.h[3]=a(this.h[3],f),this.h[4]=a(this.h[4],h)},f.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},799:(e,t,r)=>{"use strict";var n=r(6436),i=r(9344);function o(){if(!(this instanceof o))return new o;i.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}n.inherits(o,i),e.exports=o,o.blockSize=512,o.outSize=224,o.hmacStrength=192,o.padLength=64,o.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h.slice(0,7),"big"):n.split32(this.h.slice(0,7),"big")}},9344:(e,t,r)=>{"use strict";var n=r(6436),i=r(5772),o=r(7038),s=r(9746),a=n.sum32,c=n.sum32_4,u=n.sum32_5,d=o.ch32,l=o.maj32,f=o.s0_256,h=o.s1_256,p=o.g0_256,y=o.g1_256,m=i.BlockHash,g=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function b(){if(!(this instanceof b))return new b;m.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=g,this.W=new Array(64)}n.inherits(b,m),e.exports=b,b.blockSize=512,b.outSize=256,b.hmacStrength=192,b.padLength=64,b.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=c(y(r[n-2]),r[n-7],p(r[n-15]),r[n-16]);var i=this.h[0],o=this.h[1],m=this.h[2],g=this.h[3],b=this.h[4],v=this.h[5],w=this.h[6],E=this.h[7];for(s(this.k.length===r.length),n=0;n<r.length;n++){var S=u(E,h(b),d(b,v,w),this.k[n],r[n]),_=a(f(i),l(i,o,m));E=w,w=v,v=b,b=a(g,S),g=m,m=o,o=i,i=a(S,_)}this.h[0]=a(this.h[0],i),this.h[1]=a(this.h[1],o),this.h[2]=a(this.h[2],m),this.h[3]=a(this.h[3],g),this.h[4]=a(this.h[4],b),this.h[5]=a(this.h[5],v),this.h[6]=a(this.h[6],w),this.h[7]=a(this.h[7],E)},b.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},772:(e,t,r)=>{"use strict";var n=r(6436),i=r(5900);function o(){if(!(this instanceof o))return new o;i.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}n.inherits(o,i),e.exports=o,o.blockSize=1024,o.outSize=384,o.hmacStrength=192,o.padLength=128,o.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h.slice(0,12),"big"):n.split32(this.h.slice(0,12),"big")}},5900:(e,t,r)=>{"use strict";var n=r(6436),i=r(5772),o=r(9746),s=n.rotr64_hi,a=n.rotr64_lo,c=n.shr64_hi,u=n.shr64_lo,d=n.sum64,l=n.sum64_hi,f=n.sum64_lo,h=n.sum64_4_hi,p=n.sum64_4_lo,y=n.sum64_5_hi,m=n.sum64_5_lo,g=i.BlockHash,b=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function v(){if(!(this instanceof v))return new v;g.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=b,this.W=new Array(160)}function w(e,t,r,n,i){var o=e&r^~e&i;return o<0&&(o+=4294967296),o}function E(e,t,r,n,i,o){var s=t&n^~t&o;return s<0&&(s+=4294967296),s}function S(e,t,r,n,i){var o=e&r^e&i^r&i;return o<0&&(o+=4294967296),o}function _(e,t,r,n,i,o){var s=t&n^t&o^n&o;return s<0&&(s+=4294967296),s}function k(e,t){var r=s(e,t,28)^s(t,e,2)^s(t,e,7);return r<0&&(r+=4294967296),r}function A(e,t){var r=a(e,t,28)^a(t,e,2)^a(t,e,7);return r<0&&(r+=4294967296),r}function P(e,t){var r=a(e,t,14)^a(e,t,18)^a(t,e,9);return r<0&&(r+=4294967296),r}function N(e,t){var r=s(e,t,1)^s(e,t,8)^c(e,t,7);return r<0&&(r+=4294967296),r}function x(e,t){var r=a(e,t,1)^a(e,t,8)^u(e,t,7);return r<0&&(r+=4294967296),r}function O(e,t){var r=a(e,t,19)^a(t,e,29)^u(e,t,6);return r<0&&(r+=4294967296),r}n.inherits(v,g),e.exports=v,v.blockSize=1024,v.outSize=512,v.hmacStrength=192,v.padLength=128,v.prototype._prepareBlock=function(e,t){for(var r=this.W,n=0;n<32;n++)r[n]=e[t+n];for(;n<r.length;n+=2){var i=(m=r[n-4],g=r[n-3],b=void 0,(b=s(m,g,19)^s(g,m,29)^c(m,g,6))<0&&(b+=4294967296),b),o=O(r[n-4],r[n-3]),a=r[n-14],u=r[n-13],d=N(r[n-30],r[n-29]),l=x(r[n-30],r[n-29]),f=r[n-32],y=r[n-31];r[n]=h(i,o,a,u,d,l,f,y),r[n+1]=p(i,o,a,u,d,l,f,y)}var m,g,b},v.prototype._update=function(e,t){this._prepareBlock(e,t);var r,n,i,a=this.W,c=this.h[0],u=this.h[1],h=this.h[2],p=this.h[3],g=this.h[4],b=this.h[5],v=this.h[6],N=this.h[7],x=this.h[8],O=this.h[9],M=this.h[10],T=this.h[11],I=this.h[12],R=this.h[13],B=this.h[14],C=this.h[15];o(this.k.length===a.length);for(var K=0;K<a.length;K+=2){var U=B,D=C,j=(i=void 0,(i=s(r=x,n=O,14)^s(r,n,18)^s(n,r,9))<0&&(i+=4294967296),i),F=P(x,O),L=w(x,0,M,0,I),q=E(0,O,0,T,0,R),V=this.k[K],J=this.k[K+1],z=a[K],G=a[K+1],H=y(U,D,j,F,L,q,V,J,z,G),W=m(U,D,j,F,L,q,V,J,z,G);U=k(c,u),D=A(c,u),j=S(c,0,h,0,g),F=_(0,u,0,p,0,b);var $=l(U,D,j,F),Z=f(U,D,j,F);B=I,C=R,I=M,R=T,M=x,T=O,x=l(v,N,H,W),O=f(N,N,H,W),v=g,N=b,g=h,b=p,h=c,p=u,c=l(H,W,$,Z),u=f(H,W,$,Z)}d(this.h,0,c,u),d(this.h,2,h,p),d(this.h,4,g,b),d(this.h,6,v,N),d(this.h,8,x,O),d(this.h,10,M,T),d(this.h,12,I,R),d(this.h,14,B,C)},v.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},7038:(e,t,r)=>{"use strict";var n=r(6436).rotr32;function i(e,t,r){return e&t^~e&r}function o(e,t,r){return e&t^e&r^t&r}function s(e,t,r){return e^t^r}t.ft_1=function(e,t,r,n){return 0===e?i(t,r,n):1===e||3===e?s(t,r,n):2===e?o(t,r,n):void 0},t.ch32=i,t.maj32=o,t.p32=s,t.s0_256=function(e){return n(e,2)^n(e,13)^n(e,22)},t.s1_256=function(e){return n(e,6)^n(e,11)^n(e,25)},t.g0_256=function(e){return n(e,7)^n(e,18)^e>>>3},t.g1_256=function(e){return n(e,17)^n(e,19)^e>>>10}},6436:(e,t,r)=>{"use strict";var n=r(9746),i=r(5717);function o(e,t){return 55296==(64512&e.charCodeAt(t))&&!(t<0||t+1>=e.length)&&56320==(64512&e.charCodeAt(t+1))}function s(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function a(e){return 1===e.length?"0"+e:e}function c(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}t.inherits=i,t.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"==typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),i=0;i<e.length;i+=2)r.push(parseInt(e[i]+e[i+1],16))}else for(var n=0,i=0;i<e.length;i++){var s=e.charCodeAt(i);s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=63&s|128):o(e,i)?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++i)),r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=63&s|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=63&s|128)}else for(i=0;i<e.length;i++)r[i]=0|e[i];return r},t.toHex=function(e){for(var t="",r=0;r<e.length;r++)t+=a(e[r].toString(16));return t},t.htonl=s,t.toHex32=function(e,t){for(var r="",n=0;n<e.length;n++){var i=e[n];"little"===t&&(i=s(i)),r+=c(i.toString(16))}return r},t.zero2=a,t.zero8=c,t.join32=function(e,t,r,i){var o=r-t;n(o%4==0);for(var s=new Array(o/4),a=0,c=t;a<s.length;a++,c+=4){var u;u="big"===i?e[c]<<24|e[c+1]<<16|e[c+2]<<8|e[c+3]:e[c+3]<<24|e[c+2]<<16|e[c+1]<<8|e[c],s[a]=u>>>0}return s},t.split32=function(e,t){for(var r=new Array(4*e.length),n=0,i=0;n<e.length;n++,i+=4){var o=e[n];"big"===t?(r[i]=o>>>24,r[i+1]=o>>>16&255,r[i+2]=o>>>8&255,r[i+3]=255&o):(r[i+3]=o>>>24,r[i+2]=o>>>16&255,r[i+1]=o>>>8&255,r[i]=255&o)}return r},t.rotr32=function(e,t){return e>>>t|e<<32-t},t.rotl32=function(e,t){return e<<t|e>>>32-t},t.sum32=function(e,t){return e+t>>>0},t.sum32_3=function(e,t,r){return e+t+r>>>0},t.sum32_4=function(e,t,r,n){return e+t+r+n>>>0},t.sum32_5=function(e,t,r,n,i){return e+t+r+n+i>>>0},t.sum64=function(e,t,r,n){var i=e[t],o=n+e[t+1]>>>0,s=(o<n?1:0)+r+i;e[t]=s>>>0,e[t+1]=o},t.sum64_hi=function(e,t,r,n){return(t+n>>>0<t?1:0)+e+r>>>0},t.sum64_lo=function(e,t,r,n){return t+n>>>0},t.sum64_4_hi=function(e,t,r,n,i,o,s,a){var c=0,u=t;return c+=(u=u+n>>>0)<t?1:0,c+=(u=u+o>>>0)<o?1:0,e+r+i+s+(c+=(u=u+a>>>0)<a?1:0)>>>0},t.sum64_4_lo=function(e,t,r,n,i,o,s,a){return t+n+o+a>>>0},t.sum64_5_hi=function(e,t,r,n,i,o,s,a,c,u){var d=0,l=t;return d+=(l=l+n>>>0)<t?1:0,d+=(l=l+o>>>0)<o?1:0,d+=(l=l+a>>>0)<a?1:0,e+r+i+s+c+(d+=(l=l+u>>>0)<u?1:0)>>>0},t.sum64_5_lo=function(e,t,r,n,i,o,s,a,c,u){return t+n+o+a+u>>>0},t.rotr64_hi=function(e,t,r){return(t<<32-r|e>>>r)>>>0},t.rotr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0},t.shr64_hi=function(e,t,r){return e>>>r},t.shr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0}},2156:(e,t,r)=>{"use strict";var n=r(3715),i=r(4504),o=r(9746);function s(e){if(!(this instanceof s))return new s(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=i.toArray(e.entropy,e.entropyEnc||"hex"),r=i.toArray(e.nonce,e.nonceEnc||"hex"),n=i.toArray(e.pers,e.persEnc||"hex");o(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,n)}e.exports=s,s.prototype._init=function(e,t,r){var n=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},s.prototype._hmac=function(){return new n.hmac(this.hash,this.K)},s.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},s.prototype.reseed=function(e,t,r,n){"string"!=typeof t&&(n=r,r=t,t=null),e=i.toArray(e,t),r=i.toArray(r,n),o(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1},s.prototype.generate=function(e,t,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(n=r,r=t,t=null),r&&(r=i.toArray(r,n||"hex"),this._update(r));for(var o=[];o.length<e;)this.V=this._hmac().update(this.V).digest(),o=o.concat(this.V);var s=o.slice(0,e);return this._update(r),this._reseed++,i.encode(s,t)}},5717:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},1094:(e,t,r)=>{var n;!function(){"use strict";var i="input is invalid type",o="object"==typeof window,s=o?window:{};s.JS_SHA3_NO_WINDOW&&(o=!1);var a=!o&&"object"==typeof self;!s.JS_SHA3_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node?s=r.g:a&&(s=self);var c=!s.JS_SHA3_NO_COMMON_JS&&e.exports,u=r.amdO,d=!s.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,l="0123456789abcdef".split(""),f=[4,1024,262144,67108864],h=[0,8,16,24],p=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],y=[224,256,384,512],m=[128,256],g=["hex","buffer","arrayBuffer","array","digest"],b={128:168,256:136};!s.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!d||!s.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});for(var v=function(e,t,r){return function(n){return new B(e,t,e).update(n)[r]()}},w=function(e,t,r){return function(n,i){return new B(e,t,i).update(n)[r]()}},E=function(e,t,r){return function(t,n,i,o){return P["cshake"+e].update(t,n,i,o)[r]()}},S=function(e,t,r){return function(t,n,i,o){return P["kmac"+e].update(t,n,i,o)[r]()}},_=function(e,t,r,n){for(var i=0;i<g.length;++i){var o=g[i];e[o]=t(r,n,o)}return e},k=function(e,t){var r=v(e,t,"hex");return r.create=function(){return new B(e,t,e)},r.update=function(e){return r.create().update(e)},_(r,v,e,t)},A=[{name:"keccak",padding:[1,256,65536,16777216],bits:y,createMethod:k},{name:"sha3",padding:[6,1536,393216,100663296],bits:y,createMethod:k},{name:"shake",padding:[31,7936,2031616,520093696],bits:m,createMethod:function(e,t){var r=w(e,t,"hex");return r.create=function(r){return new B(e,t,r)},r.update=function(e,t){return r.create(t).update(e)},_(r,w,e,t)}},{name:"cshake",padding:f,bits:m,createMethod:function(e,t){var r=b[e],n=E(e,0,"hex");return n.create=function(n,i,o){return i||o?new B(e,t,n).bytepad([i,o],r):P["shake"+e].create(n)},n.update=function(e,t,r,i){return n.create(t,r,i).update(e)},_(n,E,e,t)}},{name:"kmac",padding:f,bits:m,createMethod:function(e,t){var r=b[e],n=S(e,0,"hex");return n.create=function(n,i,o){return new C(e,t,i).bytepad(["KMAC",o],r).bytepad([n],r)},n.update=function(e,t,r,i){return n.create(e,r,i).update(t)},_(n,S,e,t)}}],P={},N=[],x=0;x<A.length;++x)for(var O=A[x],M=O.bits,T=0;T<M.length;++T){var I=O.name+"_"+M[T];if(N.push(I),P[I]=O.createMethod(M[T],O.padding),"sha3"!==O.name){var R=O.name+M[T];N.push(R),P[R]=P[I]}}function B(e,t,r){this.blocks=[],this.s=[],this.padding=t,this.outputBits=r,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(e<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=r>>5,this.extraBytes=(31&r)>>3;for(var n=0;n<50;++n)this.s[n]=0}function C(e,t,r){B.call(this,e,t,r)}B.prototype.update=function(e){if(this.finalized)throw new Error("finalize already called");var t,r=typeof e;if("string"!==r){if("object"!==r)throw new Error(i);if(null===e)throw new Error(i);if(d&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||d&&ArrayBuffer.isView(e)))throw new Error(i);t=!0}for(var n,o,s=this.blocks,a=this.byteCount,c=e.length,u=this.blockCount,l=0,f=this.s;l<c;){if(this.reset)for(this.reset=!1,s[0]=this.block,n=1;n<u+1;++n)s[n]=0;if(t)for(n=this.start;l<c&&n<a;++l)s[n>>2]|=e[l]<<h[3&n++];else for(n=this.start;l<c&&n<a;++l)(o=e.charCodeAt(l))<128?s[n>>2]|=o<<h[3&n++]:o<2048?(s[n>>2]|=(192|o>>6)<<h[3&n++],s[n>>2]|=(128|63&o)<<h[3&n++]):o<55296||o>=57344?(s[n>>2]|=(224|o>>12)<<h[3&n++],s[n>>2]|=(128|o>>6&63)<<h[3&n++],s[n>>2]|=(128|63&o)<<h[3&n++]):(o=65536+((1023&o)<<10|1023&e.charCodeAt(++l)),s[n>>2]|=(240|o>>18)<<h[3&n++],s[n>>2]|=(128|o>>12&63)<<h[3&n++],s[n>>2]|=(128|o>>6&63)<<h[3&n++],s[n>>2]|=(128|63&o)<<h[3&n++]);if(this.lastByteIndex=n,n>=a){for(this.start=n-a,this.block=s[u],n=0;n<u;++n)f[n]^=s[n];K(f),this.reset=!0}else this.start=n}return this},B.prototype.encode=function(e,t){var r=255&e,n=1,i=[r];for(r=255&(e>>=8);r>0;)i.unshift(r),r=255&(e>>=8),++n;return t?i.push(n):i.unshift(n),this.update(i),i.length},B.prototype.encodeString=function(e){var t,r=typeof e;if("string"!==r){if("object"!==r)throw new Error(i);if(null===e)throw new Error(i);if(d&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||d&&ArrayBuffer.isView(e)))throw new Error(i);t=!0}var n=0,o=e.length;if(t)n=o;else for(var s=0;s<e.length;++s){var a=e.charCodeAt(s);a<128?n+=1:a<2048?n+=2:a<55296||a>=57344?n+=3:(a=65536+((1023&a)<<10|1023&e.charCodeAt(++s)),n+=4)}return n+=this.encode(8*n),this.update(e),n},B.prototype.bytepad=function(e,t){for(var r=this.encode(t),n=0;n<e.length;++n)r+=this.encodeString(e[n]);var i=t-r%t,o=[];return o.length=i,this.update(o),this},B.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex,r=this.blockCount,n=this.s;if(e[t>>2]|=this.padding[3&t],this.lastByteIndex===this.byteCount)for(e[0]=e[r],t=1;t<r+1;++t)e[t]=0;for(e[r-1]|=2147483648,t=0;t<r;++t)n[t]^=e[t];K(n)}},B.prototype.toString=B.prototype.hex=function(){this.finalize();for(var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,a="";s<n;){for(o=0;o<t&&s<n;++o,++s)e=r[o],a+=l[e>>4&15]+l[15&e]+l[e>>12&15]+l[e>>8&15]+l[e>>20&15]+l[e>>16&15]+l[e>>28&15]+l[e>>24&15];s%t==0&&(K(r),o=0)}return i&&(e=r[o],a+=l[e>>4&15]+l[15&e],i>1&&(a+=l[e>>12&15]+l[e>>8&15]),i>2&&(a+=l[e>>20&15]+l[e>>16&15])),a},B.prototype.arrayBuffer=function(){this.finalize();var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,a=this.outputBits>>3;e=i?new ArrayBuffer(n+1<<2):new ArrayBuffer(a);for(var c=new Uint32Array(e);s<n;){for(o=0;o<t&&s<n;++o,++s)c[s]=r[o];s%t==0&&K(r)}return i&&(c[o]=r[o],e=e.slice(0,a)),e},B.prototype.buffer=B.prototype.arrayBuffer,B.prototype.digest=B.prototype.array=function(){this.finalize();for(var e,t,r=this.blockCount,n=this.s,i=this.outputBlocks,o=this.extraBytes,s=0,a=0,c=[];a<i;){for(s=0;s<r&&a<i;++s,++a)e=a<<2,t=n[s],c[e]=255&t,c[e+1]=t>>8&255,c[e+2]=t>>16&255,c[e+3]=t>>24&255;a%r==0&&K(n)}return o&&(e=a<<2,t=n[s],c[e]=255&t,o>1&&(c[e+1]=t>>8&255),o>2&&(c[e+2]=t>>16&255)),c},C.prototype=new B,C.prototype.finalize=function(){return this.encode(this.outputBits,!0),B.prototype.finalize.call(this)};var K=function(e){var t,r,n,i,o,s,a,c,u,d,l,f,h,y,m,g,b,v,w,E,S,_,k,A,P,N,x,O,M,T,I,R,B,C,K,U,D,j,F,L,q,V,J,z,G,H,W,$,Z,X,Y,Q,ee,te,re,ne,ie,oe,se,ae,ce,ue,de;for(n=0;n<48;n+=2)i=e[0]^e[10]^e[20]^e[30]^e[40],o=e[1]^e[11]^e[21]^e[31]^e[41],s=e[2]^e[12]^e[22]^e[32]^e[42],a=e[3]^e[13]^e[23]^e[33]^e[43],c=e[4]^e[14]^e[24]^e[34]^e[44],u=e[5]^e[15]^e[25]^e[35]^e[45],d=e[6]^e[16]^e[26]^e[36]^e[46],l=e[7]^e[17]^e[27]^e[37]^e[47],t=(f=e[8]^e[18]^e[28]^e[38]^e[48])^(s<<1|a>>>31),r=(h=e[9]^e[19]^e[29]^e[39]^e[49])^(a<<1|s>>>31),e[0]^=t,e[1]^=r,e[10]^=t,e[11]^=r,e[20]^=t,e[21]^=r,e[30]^=t,e[31]^=r,e[40]^=t,e[41]^=r,t=i^(c<<1|u>>>31),r=o^(u<<1|c>>>31),e[2]^=t,e[3]^=r,e[12]^=t,e[13]^=r,e[22]^=t,e[23]^=r,e[32]^=t,e[33]^=r,e[42]^=t,e[43]^=r,t=s^(d<<1|l>>>31),r=a^(l<<1|d>>>31),e[4]^=t,e[5]^=r,e[14]^=t,e[15]^=r,e[24]^=t,e[25]^=r,e[34]^=t,e[35]^=r,e[44]^=t,e[45]^=r,t=c^(f<<1|h>>>31),r=u^(h<<1|f>>>31),e[6]^=t,e[7]^=r,e[16]^=t,e[17]^=r,e[26]^=t,e[27]^=r,e[36]^=t,e[37]^=r,e[46]^=t,e[47]^=r,t=d^(i<<1|o>>>31),r=l^(o<<1|i>>>31),e[8]^=t,e[9]^=r,e[18]^=t,e[19]^=r,e[28]^=t,e[29]^=r,e[38]^=t,e[39]^=r,e[48]^=t,e[49]^=r,y=e[0],m=e[1],H=e[11]<<4|e[10]>>>28,W=e[10]<<4|e[11]>>>28,O=e[20]<<3|e[21]>>>29,M=e[21]<<3|e[20]>>>29,ae=e[31]<<9|e[30]>>>23,ce=e[30]<<9|e[31]>>>23,V=e[40]<<18|e[41]>>>14,J=e[41]<<18|e[40]>>>14,C=e[2]<<1|e[3]>>>31,K=e[3]<<1|e[2]>>>31,g=e[13]<<12|e[12]>>>20,b=e[12]<<12|e[13]>>>20,$=e[22]<<10|e[23]>>>22,Z=e[23]<<10|e[22]>>>22,T=e[33]<<13|e[32]>>>19,I=e[32]<<13|e[33]>>>19,ue=e[42]<<2|e[43]>>>30,de=e[43]<<2|e[42]>>>30,te=e[5]<<30|e[4]>>>2,re=e[4]<<30|e[5]>>>2,U=e[14]<<6|e[15]>>>26,D=e[15]<<6|e[14]>>>26,v=e[25]<<11|e[24]>>>21,w=e[24]<<11|e[25]>>>21,X=e[34]<<15|e[35]>>>17,Y=e[35]<<15|e[34]>>>17,R=e[45]<<29|e[44]>>>3,B=e[44]<<29|e[45]>>>3,A=e[6]<<28|e[7]>>>4,P=e[7]<<28|e[6]>>>4,ne=e[17]<<23|e[16]>>>9,ie=e[16]<<23|e[17]>>>9,j=e[26]<<25|e[27]>>>7,F=e[27]<<25|e[26]>>>7,E=e[36]<<21|e[37]>>>11,S=e[37]<<21|e[36]>>>11,Q=e[47]<<24|e[46]>>>8,ee=e[46]<<24|e[47]>>>8,z=e[8]<<27|e[9]>>>5,G=e[9]<<27|e[8]>>>5,N=e[18]<<20|e[19]>>>12,x=e[19]<<20|e[18]>>>12,oe=e[29]<<7|e[28]>>>25,se=e[28]<<7|e[29]>>>25,L=e[38]<<8|e[39]>>>24,q=e[39]<<8|e[38]>>>24,_=e[48]<<14|e[49]>>>18,k=e[49]<<14|e[48]>>>18,e[0]=y^~g&v,e[1]=m^~b&w,e[10]=A^~N&O,e[11]=P^~x&M,e[20]=C^~U&j,e[21]=K^~D&F,e[30]=z^~H&$,e[31]=G^~W&Z,e[40]=te^~ne&oe,e[41]=re^~ie&se,e[2]=g^~v&E,e[3]=b^~w&S,e[12]=N^~O&T,e[13]=x^~M&I,e[22]=U^~j&L,e[23]=D^~F&q,e[32]=H^~$&X,e[33]=W^~Z&Y,e[42]=ne^~oe&ae,e[43]=ie^~se&ce,e[4]=v^~E&_,e[5]=w^~S&k,e[14]=O^~T&R,e[15]=M^~I&B,e[24]=j^~L&V,e[25]=F^~q&J,e[34]=$^~X&Q,e[35]=Z^~Y&ee,e[44]=oe^~ae&ue,e[45]=se^~ce&de,e[6]=E^~_&y,e[7]=S^~k&m,e[16]=T^~R&A,e[17]=I^~B&P,e[26]=L^~V&C,e[27]=q^~J&K,e[36]=X^~Q&z,e[37]=Y^~ee&G,e[46]=ae^~ue&te,e[47]=ce^~de&re,e[8]=_^~y&g,e[9]=k^~m&b,e[18]=R^~A&N,e[19]=B^~P&x,e[28]=V^~C&U,e[29]=J^~K&D,e[38]=Q^~z&H,e[39]=ee^~G&W,e[48]=ue^~te&ne,e[49]=de^~re&ie,e[0]^=p[n],e[1]^=p[n+1]};if(c)e.exports=P;else{for(x=0;x<N.length;++x)s[N[x]]=P[N[x]];u&&(void 0===(n=function(){return P}.call(t,r,t,e))||(e.exports=n))}}()},9746:e=>{function t(e,t){if(!e)throw new Error(t||"Assertion failed")}e.exports=t,t.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)}},4504:(e,t)=>{"use strict";var r=t;function n(e){return 1===e.length?"0"+e:e}function i(e){for(var t="",r=0;r<e.length;r++)t+=n(e[r].toString(16));return t}r.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"!=typeof e){for(var n=0;n<e.length;n++)r[n]=0|e[n];return r}if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16));else for(n=0;n<e.length;n++){var i=e.charCodeAt(n),o=i>>8,s=255&i;o?r.push(o,s):r.push(s)}return r},r.zero2=n,r.toHex=i,r.encode=function(e,t){return"hex"===t?i(e):e}},7635:function(e){"use strict";!function(t){const r=2147483647;function n(e){const t=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);let r=1779033703,n=3144134277,i=1013904242,o=2773480762,s=1359893119,a=2600822924,c=528734635,u=1541459225;const d=new Uint32Array(64);function l(e){let l=0,f=e.length;for(;f>=64;){let h,p,y,m,g,b=r,v=n,w=i,E=o,S=s,_=a,k=c,A=u;for(p=0;p<16;p++)y=l+4*p,d[p]=(255&e[y])<<24|(255&e[y+1])<<16|(255&e[y+2])<<8|255&e[y+3];for(p=16;p<64;p++)h=d[p-2],m=(h>>>17|h<<15)^(h>>>19|h<<13)^h>>>10,h=d[p-15],g=(h>>>7|h<<25)^(h>>>18|h<<14)^h>>>3,d[p]=(m+d[p-7]|0)+(g+d[p-16]|0)|0;for(p=0;p<64;p++)m=(((S>>>6|S<<26)^(S>>>11|S<<21)^(S>>>25|S<<7))+(S&_^~S&k)|0)+(A+(t[p]+d[p]|0)|0)|0,g=((b>>>2|b<<30)^(b>>>13|b<<19)^(b>>>22|b<<10))+(b&v^b&w^v&w)|0,A=k,k=_,_=S,S=E+m|0,E=w,w=v,v=b,b=m+g|0;r=r+b|0,n=n+v|0,i=i+w|0,o=o+E|0,s=s+S|0,a=a+_|0,c=c+k|0,u=u+A|0,l+=64,f-=64}}l(e);let f,h=e.length%64,p=e.length/536870912|0,y=e.length<<3,m=h<56?56:120,g=e.slice(e.length-h,e.length);for(g.push(128),f=h+1;f<m;f++)g.push(0);return g.push(p>>>24&255),g.push(p>>>16&255),g.push(p>>>8&255),g.push(p>>>0&255),g.push(y>>>24&255),g.push(y>>>16&255),g.push(y>>>8&255),g.push(y>>>0&255),l(g),[r>>>24&255,r>>>16&255,r>>>8&255,r>>>0&255,n>>>24&255,n>>>16&255,n>>>8&255,n>>>0&255,i>>>24&255,i>>>16&255,i>>>8&255,i>>>0&255,o>>>24&255,o>>>16&255,o>>>8&255,o>>>0&255,s>>>24&255,s>>>16&255,s>>>8&255,s>>>0&255,a>>>24&255,a>>>16&255,a>>>8&255,a>>>0&255,c>>>24&255,c>>>16&255,c>>>8&255,c>>>0&255,u>>>24&255,u>>>16&255,u>>>8&255,u>>>0&255]}function i(e,t,r){e=e.length<=64?e:n(e);const i=64+t.length+4,o=new Array(i),s=new Array(64);let a,c=[];for(a=0;a<64;a++)o[a]=54;for(a=0;a<e.length;a++)o[a]^=e[a];for(a=0;a<t.length;a++)o[64+a]=t[a];for(a=i-4;a<i;a++)o[a]=0;for(a=0;a<64;a++)s[a]=92;for(a=0;a<e.length;a++)s[a]^=e[a];function u(){for(let e=i-1;e>=i-4;e--){if(o[e]++,o[e]<=255)return;o[e]=0}}for(;r>=32;)u(),c=c.concat(n(s.concat(n(o)))),r-=32;return r>0&&(u(),c=c.concat(n(s.concat(n(o))).slice(0,r))),c}function o(e,t,r,n,i){let o;for(u(e,16*(2*r-1),i,0,16),o=0;o<2*r;o++)c(e,16*o,i,16),a(i,n),u(i,0,e,t+16*o,16);for(o=0;o<r;o++)u(e,t+2*o*16,e,16*o,16);for(o=0;o<r;o++)u(e,t+16*(2*o+1),e,16*(o+r),16)}function s(e,t){return e<<t|e>>>32-t}function a(e,t){u(e,0,t,0,16);for(let e=8;e>0;e-=2)t[4]^=s(t[0]+t[12],7),t[8]^=s(t[4]+t[0],9),t[12]^=s(t[8]+t[4],13),t[0]^=s(t[12]+t[8],18),t[9]^=s(t[5]+t[1],7),t[13]^=s(t[9]+t[5],9),t[1]^=s(t[13]+t[9],13),t[5]^=s(t[1]+t[13],18),t[14]^=s(t[10]+t[6],7),t[2]^=s(t[14]+t[10],9),t[6]^=s(t[2]+t[14],13),t[10]^=s(t[6]+t[2],18),t[3]^=s(t[15]+t[11],7),t[7]^=s(t[3]+t[15],9),t[11]^=s(t[7]+t[3],13),t[15]^=s(t[11]+t[7],18),t[1]^=s(t[0]+t[3],7),t[2]^=s(t[1]+t[0],9),t[3]^=s(t[2]+t[1],13),t[0]^=s(t[3]+t[2],18),t[6]^=s(t[5]+t[4],7),t[7]^=s(t[6]+t[5],9),t[4]^=s(t[7]+t[6],13),t[5]^=s(t[4]+t[7],18),t[11]^=s(t[10]+t[9],7),t[8]^=s(t[11]+t[10],9),t[9]^=s(t[8]+t[11],13),t[10]^=s(t[9]+t[8],18),t[12]^=s(t[15]+t[14],7),t[13]^=s(t[12]+t[15],9),t[14]^=s(t[13]+t[12],13),t[15]^=s(t[14]+t[13],18);for(let r=0;r<16;++r)e[r]+=t[r]}function c(e,t,r,n){for(let i=0;i<n;i++)r[i]^=e[t+i]}function u(e,t,r,n,i){for(;i--;)r[n++]=e[t++]}function d(e){if(!e||"number"!=typeof e.length)return!1;for(let t=0;t<e.length;t++){const r=e[t];if("number"!=typeof r||r%1||r<0||r>=256)return!1}return!0}function l(e,t){if("number"!=typeof e||e%1)throw new Error("invalid "+t);return e}function f(e,t,n,s,a,f,h){if(n=l(n,"N"),s=l(s,"r"),a=l(a,"p"),f=l(f,"dkLen"),0===n||0!=(n&n-1))throw new Error("N must be power of 2");if(n>r/128/s)throw new Error("N too large");if(s>r/128/a)throw new Error("r too large");if(!d(e))throw new Error("password must be an array or buffer");if(e=Array.prototype.slice.call(e),!d(t))throw new Error("salt must be an array or buffer");t=Array.prototype.slice.call(t);let p=i(e,t,128*a*s);const y=new Uint32Array(32*a*s);for(let e=0;e<y.length;e++){const t=4*e;y[e]=(255&p[t+3])<<24|(255&p[t+2])<<16|(255&p[t+1])<<8|(255&p[t+0])<<0}const m=new Uint32Array(64*s),g=new Uint32Array(32*s*n),b=32*s,v=new Uint32Array(16),w=new Uint32Array(16),E=a*n*2;let S,_,k=0,A=null,P=!1,N=0,x=0;const O=h?parseInt(1e3/s):4294967295,M="undefined"!=typeof setImmediate?setImmediate:setTimeout,T=function(){if(P)return h(new Error("cancelled"),k/E);let t;switch(N){case 0:_=32*x*s,u(y,_,m,0,b),N=1,S=0;case 1:t=n-S,t>O&&(t=O);for(let e=0;e<t;e++)u(m,0,g,(S+e)*b,b),o(m,b,s,v,w);if(S+=t,k+=t,h){const e=parseInt(1e3*k/E);if(e!==A){if(P=h(null,k/E),P)break;A=e}}if(S<n)break;S=0,N=2;case 2:t=n-S,t>O&&(t=O);for(let e=0;e<t;e++){const e=m[16*(2*s-1)]&n-1;c(g,e*b,m,b),o(m,b,s,v,w)}if(S+=t,k+=t,h){const e=parseInt(1e3*k/E);if(e!==A){if(P=h(null,k/E),P)break;A=e}}if(S<n)break;if(u(m,0,y,_,b),x++,x<a){N=0;break}p=[];for(let e=0;e<y.length;e++)p.push(y[e]>>0&255),p.push(y[e]>>8&255),p.push(y[e]>>16&255),p.push(y[e]>>24&255);const r=i(e,p,f);return h&&h(null,1,r),r}h&&M(T)};if(!h)for(;;){const e=T();if(null!=e)return e}T()}const h={scrypt:function(e,t,r,n,i,o,s){return new Promise((function(a,c){let u=0;s&&s(0),f(e,t,r,n,i,o,(function(e,t,r){if(e)c(e);else if(r)s&&1!==u&&s(1),a(new Uint8Array(r));else if(s&&t!==u)return u=t,s(t)}))}))},syncScrypt:function(e,t,r,n,i,o){return new Uint8Array(f(e,t,r,n,i,o))}};e.exports=h}()},1962:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.GrpcError=t.GrpcStatus=t.ApiUrls=t.SortDirection=t.MessageApi=void 0;const i=r(7754),o=r(5506),s=n(r(4203)),a=n(r(4147)),c=r(7915);var u;t.MessageApi=i.messageApi.MessageApi,t.SortDirection=i.messageApi.SortDirection,t.ApiUrls={local:"http://localhost:5555",dev:"https://dev.xmtp.network",production:"https://production.xmtp.network"},(u=t.GrpcStatus||(t.GrpcStatus={}))[u.OK=0]="OK",u[u.CANCELLED=1]="CANCELLED",u[u.UNKNOWN=2]="UNKNOWN",u[u.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",u[u.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",u[u.NOT_FOUND=5]="NOT_FOUND",u[u.ALREADY_EXISTS=6]="ALREADY_EXISTS",u[u.PERMISSION_DENIED=7]="PERMISSION_DENIED",u[u.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",u[u.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",u[u.ABORTED=10]="ABORTED",u[u.OUT_OF_RANGE=11]="OUT_OF_RANGE",u[u.UNIMPLEMENTED=12]="UNIMPLEMENTED",u[u.INTERNAL=13]="INTERNAL",u[u.UNAVAILABLE=14]="UNAVAILABLE",u[u.DATA_LOSS=15]="DATA_LOSS",u[u.UNAUTHENTICATED=16]="UNAUTHENTICATED";class d extends Error{constructor(e,t){super(e),this.code=t}static fromObject(e){return new d(e.message,e.code)}}t.GrpcError=d;const l=e=>!(!e||"AbortError"!==e.name&&!e.message.includes("aborted")),f=e=>!(e=>!(!e||!("code"in e)||16!==e.code))(e);t.default=class{constructor(e,r){this.pathPrefix=e,this.maxRetries=r?.maxRetries||5,this.appVersion=r?.appVersion,this.version="xmtp-js/"+a.default.version,e===t.ApiUrls.dev&&console.info(c.XMTP_DEV_WARNING)}async _query(e){try{return await(0,o.retry)(t.MessageApi.Query,[e,{pathPrefix:this.pathPrefix,mode:"cors",headers:this.headers()}],this.maxRetries,100)}catch(e){throw d.fromObject(e)}}_batchQuery(e){return(0,o.retry)(t.MessageApi.BatchQuery,[e,{pathPrefix:this.pathPrefix,mode:"cors",headers:this.headers()}],this.maxRetries,100)}async _publish(e,r=0){const n=await this.getToken(),i=this.headers();i.set("Authorization",`Bearer ${n}`);try{return await(0,o.retry)(t.MessageApi.Publish,[e,{pathPrefix:this.pathPrefix,mode:"cors",headers:i}],this.maxRetries,100,f)}catch(t){if(f(t)||r>=1)throw d.fromObject(t);return await(this.authCache?.refresh()),this._publish(e,r+1)}}_subscribe(e,r){const n=new AbortController;return(async()=>{for(;;){const i=(new Date).getTime();try{if(await t.MessageApi.Subscribe(e,r,{pathPrefix:this.pathPrefix,signal:n.signal,mode:"cors",headers:this.headers()}),n.signal.aborted)return;console.info("Stream connection closed. Resubscribing"),(new Date).getTime()-i<1e3&&await(0,o.sleep)(1e3)}catch(e){if(l(e)||n.signal.aborted)return;console.info("Stream connection closed. Resubscribing",e.toString()),(new Date).getTime()-i<1e3&&await(0,o.sleep)(1e3)}}})(),async()=>{n?.abort()}}async query(e,{direction:r=t.SortDirection.SORT_DIRECTION_ASCENDING,limit:n}){const i=[];for await(const t of this.queryIteratePages(e,{direction:r,pageSize:n&&n<100?n:100}))for(const e of t)if(i.push(e),n&&i.length===n)return i;return i}async*queryIterator(e,t){for await(const r of this.queryIteratePages(e,t))for(const e of r)yield e}async*queryIteratePages({contentTopic:e,startTime:t,endTime:r},{direction:n,pageSize:i=10}){if(!e||!e.length)throw new Error("Must specify content topics");const s=(0,o.toNanoString)(t),a=(0,o.toNanoString)(r);let c;for(;;){const t={limit:i,direction:n,cursor:c},r=await this._query({contentTopics:[e],startTimeNs:s,endTimeNs:a,pagingInfo:t});if(!r.envelopes?.length)return;if(yield r.envelopes,!r.pagingInfo?.cursor)return;c=r.pagingInfo?.cursor}}async batchQuery(e){const r=[];for(let n=0;n<e.length;n+=50){const i=e.slice(n,n+50),s=[];for(const e of i)s.push({contentTopics:[e.contentTopic],startTimeNs:(0,o.toNanoString)(e.startTime),endTimeNs:(0,o.toNanoString)(e.endTime),pagingInfo:{limit:e.pageSize||10,direction:e.direction||t.SortDirection.SORT_DIRECTION_ASCENDING}});const a={requests:s};r.push(a)}const n=await Promise.all(r.map((async e=>this._batchQuery(e)))),i=[];for(const e of n){if(!e.responses)throw new Error("BatchQueryResponse missing responses");for(const t of e.responses)t.envelopes?i.push(t.envelopes):i.push([])}return i}async publish(e){const t=[];for(const{contentTopic:r,message:n,timestamp:i}of e){if(!r.length)throw new Error("Content topic cannot be empty string");if(!n.length)throw new Error("0 length messages not allowed");const e=i||new Date;t.push({contentTopic:r,timestampNs:(0,o.toNanoString)(e),message:Uint8Array.from(n)})}return this._publish({envelopes:t})}subscribe(e,t){if(!e.contentTopics.length)throw new Error("Must provide list of contentTopics to subscribe to");return this._subscribe(e,t)}getToken(){if(!this.authCache)throw new Error("AuthCache is not set on API Client");return this.authCache.getToken()}setAuthenticator(e,t){this.authCache=new s.default(e,t)}headers(){const e=new Headers;return e.set("X-Client-Version",this.version),this.appVersion&&e.set("X-App-Version",this.appVersion),e}}},8901:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.defaultKeystoreProviders=t.defaultOptions=t.Compression=void 0;const s=r(741),a=r(2449),c=r(5506),u=r(9982),d=r(5880),l=r(6254),f=r(5783),h=r(7754),p=r(3374),y=o(r(1962)),m=r(9099),g=r(619),b=r(5983),v=r(7947),{Compression:w}=h.content;t.Compression=w;const{b64Decode:E}=h.fetcher,S=104857600;function _(e){const t={privateKeyOverride:void 0,env:"dev",apiUrl:void 0,codecs:[new l.TextCodec],maxContentSize:S,persistConversations:!0,skipContactPublishing:!1,keystoreProviders:N()};return e?.codecs&&(e.codecs=t.codecs.concat(e.codecs)),{...t,...e}}t.defaultOptions=_;class k{constructor(e,t,r,n){this.contacts=new Set,this.knownPublicKeyBundles=new Map,this.keystore=n,this.publicKeyBundle=e,this.address=e.walletSignatureAddress(),this._conversations=new d.Conversations(this),this._codecs=new Map,this._maxContentSize=S,this.apiClient=t,this._backupClient=r}get conversations(){return this._conversations}get backupType(){return this._backupClient.backupType}get signedPublicKeyBundle(){return a.SignedPublicKeyBundle.fromLegacyBundle(this.publicKeyBundle)}static async create(e,t){const r=_(t),n=function(e){const t=e.apiUrl||y.ApiUrls[e.env];return new y.default(t,{appVersion:e.appVersion})}(r),i=await async function(e,t,r){for(const n of e.keystoreProviders)try{return await n.newKeystore(e,t,r??void 0)}catch(e){if(e instanceof v.KeystoreProviderUnavailableError)continue;throw e}throw new Error("No keystore providers available")}(r,n,e),o=new a.PublicKeyBundle(await i.getPublicKeyBundle()),s=o.walletSignatureAddress();n.setAuthenticator(new m.KeystoreAuthenticator(i));const c=await k.setupBackupClient(s,r.env),u=new k(o,n,c,i);return await u.init(r),u}static async getKeys(e,t){const r=await k.create(e,t),n=await r.keystore.getPrivateKeyBundle();return new s.PrivateKeyBundleV1(n).encode()}static async setupBackupClient(e,t){return(0,b.createBackupClient)(e,(async()=>Promise.resolve({type:"local"===t?g.BackupType.xmtpTopicStore:g.BackupType.none})))}async init(e){e.codecs.forEach((e=>{this.registerCodec(e)})),this._maxContentSize=e.maxContentSize,e.skipContactPublishing||await this.ensureUserContactPublished(e.publishLegacyContact)}async close(){}async ensureUserContactPublished(e=!1){const t=await A(this.apiClient,this.address);t&&t instanceof a.SignedPublicKeyBundle&&this.signedPublicKeyBundle.equals(t)||(await this.publishUserContact(!0),e||await this.publishUserContact(e))}async publishUserContact(e=!1){const t=e?this.publicKeyBundle:this.signedPublicKeyBundle;await this.publishEnvelopes([{contentTopic:(0,c.buildUserContactTopic)(this.address),message:(0,p.encodeContactBundle)(t)}])}async getUserContact(e){e=u.utils.getAddress(e);const t=this.knownPublicKeyBundles.get(e);if(t)return t;const r=await A(this.apiClient,e);return r&&this.knownPublicKeyBundles.set(e,r),r}async getUserContacts(e){const t=e.map((e=>u.utils.getAddress(e))),r=new Map,n=[];for(const e of t){const t=this.knownPublicKeyBundles.get(e);t?r.set(e,t):(r.set(e,void 0),n.push(e))}const i=await P(this.apiClient,n);for(let e=0;e<i.length;e++){const t=n[e],o=i[e];r.set(t,o),o&&this.knownPublicKeyBundles.set(t,o)}return t.map((e=>r.get(e)))}forgetContact(e){e=u.utils.getAddress(e),this.knownPublicKeyBundles.delete(e)}async canMessage(e){try{return Array.isArray(e)?(await this.getUserContacts(e)).map((e=>!!e)):void 0!==await this.getUserContact(e)}catch(e){return!1}}static async canMessage(e,t){const r=t?.apiUrl||y.ApiUrls[t?.env||"dev"];if(Array.isArray(e)){const n=e.map((e=>u.utils.getAddress(e)));return(await P(new y.default(r,{appVersion:t?.appVersion}),n)).map((e=>!!e))}try{e=u.utils.getAddress(e)}catch(e){return!1}return void 0!==await A(new y.default(r,{appVersion:t?.appVersion}),e)}validateEnvelope(e){const t=e.message;if(!e.contentTopic)throw new Error("Missing content topic");if(!t||!t.length)throw new Error("Cannot publish empty message")}async publishEnvelopes(e){for(const t of e)this.validateEnvelope(t);await this.apiClient.publish(e)}registerCodec(e){const t=e.contentType,r=`${t.authorityId}/${t.typeId}`;this._codecs.set(r,e)}codecFor(e){const t=`${e.authorityId}/${e.typeId}`,r=this._codecs.get(t);if(r&&!(e.versionMajor>r.contentType.versionMajor))return r}async encodeContent(e,t){const r=t?.contentType||l.ContentTypeText,n=this.codecFor(r);if(!n)throw new Error("unknown content type "+r);const i=n.encode(e,this);return t?.contentFallback&&(i.fallback=t.contentFallback),"number"==typeof t?.compression&&(i.compression=t.compression),await(0,f.compress)(i),h.content.EncodedContent.encode(i).finish()}listInvitations(e){return this.listEnvelopes((0,c.buildUserInviteTopic)(this.address),(async e=>e),e)}async listEnvelopes(e,t,r){r||(r={});const{startTime:n,endTime:i,limit:o}=r,s=await this.apiClient.query({contentTopic:e,startTime:n,endTime:i},{direction:r.direction||h.messageApi.SortDirection.SORT_DIRECTION_ASCENDING,limit:o}),a=[];for(const e of s)if(e.message)try{const r=await t(e);a.push(r)}catch(e){console.warn("Error in listEnvelopes mapper",e)}return a}listEnvelopesPaginated(e,t,r){return(0,c.mapPaginatedStream)(this.apiClient.queryIteratePages({contentTopic:e,startTime:r?.startTime,endTime:r?.endTime},{direction:r?.direction,pageSize:r?.pageSize||100}),t)}}async function A(e,t){const r=e.queryIterator({contentTopic:(0,c.buildUserContactTopic)(t)},{pageSize:5,direction:y.SortDirection.SORT_DIRECTION_DESCENDING});for await(const e of r){if(!e.message)continue;const r=(0,p.decodeContactBundle)(E(e.message.toString()));let n;try{n=await(r?.walletSignatureAddress())}catch(e){n=void 0}if(n===t)return r}}async function P(e,t){const r=t.map(c.buildUserContactTopic),n=await e.batchQuery(r.map((e=>({contentTopic:e,pageSize:5,direction:y.SortDirection.SORT_DIRECTION_DESCENDING}))));return Promise.all(t.map((async(e,t)=>{const r=n[t];if(r)for(const t of r)if(t.message)try{const r=(0,p.decodeContactBundle)(E(t.message.toString()));if(e===await(r?.walletSignatureAddress()))return r;console.info("Received contact bundle with incorrect address")}catch(e){console.info("Invalid contact bundle",e)}})))}function N(){return[new v.StaticKeystoreProvider,new v.NetworkKeystoreProvider,new v.KeyGeneratorKeystoreProvider]}t.default=k,t.defaultKeystoreProviders=N},5783:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.writeStreamToBytes=t.readStreamFromBytes=t.compress=t.decompress=void 0;const n=r(7754);function i(e){if(e===n.content.Compression.COMPRESSION_GZIP)return"gzip";if(e===n.content.Compression.COMPRESSION_DEFLATE)return"deflate";throw new Error("unrecognized compression algorithm")}function o(e,t=1024){let r=0;return new ReadableStream({pull(n){if(r>=e.length)return n.close();let i=r+t;i=i<=e.length?i:e.length,n.enqueue(e.subarray(r,i)),r=i}})}function s(e,t){let r=0;return new WritableStream({write(n){const i=r+n.length;if(i>t)throw new Error("maximum output size exceeded");for(;e.bytes.length<i;)e.bytes=a(e.bytes,t);e.bytes.set(n,r),r=i},close(){r<e.bytes.length&&(e.bytes=e.bytes.subarray(0,r))}})}function a(e,t){let r=2*e.length;r>t&&(r=t);const n=new Uint8Array(r);return n.set(e),n}t.decompress=async function(e,t){if(void 0===e.compression)return;const r={bytes:new Uint8Array(e.content.length)};await o(e.content).pipeThrough(new DecompressionStream(i(e.compression))).pipeTo(s(r,t)),e.content=r.bytes},t.compress=async function(e){if(void 0===e.compression)return;const t={bytes:new Uint8Array(e.content.length/10)};await o(e.content).pipeThrough(new CompressionStream(i(e.compression))).pipeTo(s(t,e.content.length+1e3)),e.content=t.bytes},t.readStreamFromBytes=o,t.writeStreamToBytes=s},3374:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encodeContactBundle=t.decodeContactBundle=void 0;const n=r(7754),i=r(2449);t.decodeContactBundle=function(e){let t;try{t=n.contact.ContactBundle.decode(e)}catch(r){const o=n.publicKey.PublicKeyBundle.decode(e);t={v1:{keyBundle:new i.PublicKeyBundle(o)},v2:void 0}}if(t.v1?.keyBundle)return new i.PublicKeyBundle(t.v1.keyBundle);if(t.v2?.keyBundle)return new i.SignedPublicKeyBundle(t.v2.keyBundle);throw new Error("unknown or invalid contact bundle")},t.encodeContactBundle=function(e){return e instanceof i.PublicKeyBundle?n.contact.ContactBundle.encode({v1:{keyBundle:e},v2:void 0}).finish():n.contact.ContactBundle.encode({v1:void 0,v2:{keyBundle:e}}).finish()}},9896:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SealedInvitation=t.SealedInvitationV1=t.SealedInvitationHeaderV1=t.InvitationV1=void 0;const i=n(r(1583)),o=r(8245),s=r(7754),a=n(r(6998)),c=n(r(7527)),u=r(2449),d=r(5506),{b64Decode:l}=s.fetcher;class f{constructor({topic:e,context:t,aes256GcmHkdfSha256:r}){if(!e||!e.length)throw new Error("Missing topic");if(!r||!r.keyMaterial||!r.keyMaterial.length)throw new Error("Missing key material");this.topic=e,this.context=t,this.aes256GcmHkdfSha256=r}static createRandom(e){const t=(0,d.buildDirectMessageTopicV2)(Buffer.from(a.default.getRandomValues(new Uint8Array(32))).toString("base64").replace(/=*$/g,"").replace("/","-")),r=a.default.getRandomValues(new Uint8Array(32));return new f({topic:t,aes256GcmHkdfSha256:{keyMaterial:r},context:e})}toBytes(){return s.invitation.InvitationV1.encode(this).finish()}static fromBytes(e){return new f(s.invitation.InvitationV1.decode(e))}}t.InvitationV1=f;class h{constructor({sender:e,recipient:t,createdNs:r}){if(!e)throw new Error("Missing sender");if(!t)throw new Error("Missing recipient");this.sender=new o.SignedPublicKeyBundle(e),this.recipient=new o.SignedPublicKeyBundle(t),this.createdNs=r}toBytes(){return s.invitation.SealedInvitationHeaderV1.encode(this).finish()}static fromBytes(e){return new h(s.invitation.SealedInvitationHeaderV1.decode(e))}}t.SealedInvitationHeaderV1=h;class p{constructor({headerBytes:e,ciphertext:t}){if(!e||!e.length)throw new Error("Missing header bytes");if(!t)throw new Error("Missing ciphertext");this.headerBytes=e,this.ciphertext=new c.default(t)}get header(){return this._header||(this._header=h.fromBytes(this.headerBytes)),this._header}async getInvitation(e){if(this._invitation)return this._invitation;const t=this.header;let r;r=e.identityKey.matches(this.header.sender.identityKey)?await e.sharedSecret(t.recipient,t.sender.preKey,!1):await e.sharedSecret(t.sender,t.recipient.preKey,!0);const n=await(0,u.decrypt)(this.ciphertext,r,this.headerBytes);return this._invitation=f.fromBytes(n),this._invitation}toBytes(){return s.invitation.SealedInvitationV1.encode(this).finish()}static fromBytes(e){return new p(s.invitation.SealedInvitationV1.decode(e))}}t.SealedInvitationV1=p;class y{constructor({v1:e}){if(!e)throw new Error("Missing v1 or v2 invitation");this.v1=new p(e)}toBytes(){return s.invitation.SealedInvitation.encode(this).finish()}static fromBytes(e){return new y(s.invitation.SealedInvitation.decode(e))}static async fromEnvelope(e){if(!e.message||!e.timestampNs)throw new Error("invalid invitation envelope");const t=y.fromBytes(l(e.message)),r=i.default.fromString(e.timestampNs),n=t.v1?.header.createdNs;if(!n||!n.equals(r))throw new Error("envelope and header timestamp mistmatch");return t}static async createV1({sender:e,recipient:t,created:r,invitation:n}){const i=new h({sender:e.getPublicKeyBundle(),recipient:t,createdNs:(0,d.dateToNs)(r)}).toBytes(),o=await e.sharedSecret(t,e.getCurrentPreKey().publicKey,!1),s=n.toBytes(),a=await(0,u.encrypt)(s,o,i);return new y({v1:{headerBytes:i,ciphertext:a}})}}t.SealedInvitation=y},6044:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.decodeContent=t.DecodedMessage=t.MessageV2=t.MessageV1=void 0;const i=r(3937),o=r(7754),s=n(r(1583)),a=n(r(7527)),c=r(2449),u=r(9272),d=r(6314),l=r(6397),f=r(5506),h=r(5783),p=r(8397),y=e=>{if(e.v1?.ciphertext)return[e.v1.headerBytes,new a.default(e.v1.ciphertext)];if(e.v2?.ciphertext)return[e.v2.headerBytes,new a.default(e.v2.ciphertext)];throw new Error("unknown message version")};class m{constructor(e,t,r){[this.headerBytes,this.ciphertext]=y(r),this.id=e,this.bytes=t}toBytes(){return this.bytes}}class g extends m{constructor(e,t,r,n,i){super(e,t,r),this.conversation=void 0,this.senderAddress=i,this.header=n}static async create(e,t,r){if(!t.sender)throw new Error("missing message sender");const n=new c.PublicKeyBundle(t.sender).walletSignatureAddress(),i=(0,u.bytesToHex)(await(0,d.sha256)(r));return new g(i,r,e,t,n)}get sent(){return new Date(this.header.timestamp.toNumber())}get recipientAddress(){if(this.header?.recipient?.identityKey)return new c.PublicKey(this.header.recipient.identityKey).walletSignatureAddress()}async decrypt(e,t){const r=(await e.decryptV1((0,p.buildDecryptV1Request)([this],t))).responses;if(!r.length)throw new Error("No response from Keystore");const{decrypted:n}=(0,p.getResultOrThrow)(r[0]);return n}static fromBytes(e){const t=o.message.Message.decode(e),[r]=y(t),n=o.message.MessageHeaderV1.decode(r);if(!n)throw new Error("missing message header");if(!n.sender)throw new Error("missing message sender");if(!n.sender.identityKey)throw new Error("missing message sender identity key");if(!n.sender.preKey)throw new Error("missing message sender pre-key");if(!n.recipient)throw new Error("missing message recipient");if(!n.recipient.identityKey)throw new Error("missing message recipient identity-key");if(!n.recipient.preKey)throw new Error("missing message recipient pre-key");return g.create(t,n,e)}static async encode(e,t,r,n,i){const a={sender:r,recipient:n,timestamp:s.default.fromNumber(i.getTime())},c=o.message.MessageHeaderV1.encode(a).finish(),u=await e.encryptV1({requests:[{recipient:n,headerBytes:c,payload:t}]});if(!u.responses.length)throw new Error("No response from Keystore");const{encrypted:d}=(0,p.getResultOrThrow)(u.responses[0]),l={v1:{headerBytes:c,ciphertext:d},v2:void 0},f=o.message.Message.encode(l).finish();return g.create(l,a,f)}}t.MessageV1=g;class b extends m{constructor(e,t,r,n){super(e,t,r),this.header=n}static async create(e,t,r){const n=(0,u.bytesToHex)(await(0,d.sha256)(r));return new b(n,r,e,t)}get sent(){return(0,f.nsToDate)(this.header.createdNs)}}t.MessageV2=b;class v{constructor({id:e,messageVersion:t,senderAddress:r,recipientAddress:n,conversation:i,contentBytes:o,contentType:s,contentTopic:a,content:c,sent:u,error:d}){this.id=e,this.messageVersion=t,this.senderAddress=r,this.recipientAddress=n,this.conversation=i,this.contentType=s,this.sent=u,this.error=d,this.content=c,this.contentTopic=a,this.contentBytes=o}toBytes(){return o.message.DecodedMessage.encode({...this,conversation:{topic:this.conversation.topic,context:this.conversation.context??void 0,createdNs:(0,f.dateToNs)(this.conversation.createdAt),peerAddress:this.conversation.peerAddress},sentNs:(0,f.dateToNs)(this.sent)}).finish()}static async fromBytes(e,t){const r=o.message.DecodedMessage.decode(e),n=r.messageVersion;if("v1"!==n&&"v2"!==n)throw new Error("Invalid message version");if(!r.conversation)throw new Error("No conversation reference found");const{content:i,contentType:s,error:a}=await w(r.contentBytes,t);return new v({...r,content:i,contentType:s,error:a,messageVersion:n,sent:(0,f.nsToDate)(r.sentNs),conversation:E(r.conversation,t,n)})}static fromV1Message(e,t,r,n,i,o,s){const{id:a,senderAddress:c,recipientAddress:u,sent:d}=e;if(!c)throw new Error("Sender address is required");return new v({id:a,messageVersion:"v1",senderAddress:c,recipientAddress:u,sent:d,content:t,contentBytes:n,contentType:r,contentTopic:i,conversation:o,error:s})}static fromV2Message(e,t,r,n,i,o,s,a){const{id:c,sent:u}=e;return new v({id:c,messageVersion:"v2",senderAddress:s,sent:u,content:t,contentBytes:i,contentType:r,contentTopic:n,conversation:o,error:a})}}async function w(e,t){const r=o.content.EncodedContent.decode(e);if(!r.type)throw new Error("missing content type");let n,i,s=new l.ContentTypeId(r.type);await(0,h.decompress)(r,1e3);const a=t.codecFor(s);return a?n=a.decode(r,t):(i=new Error("unknown content type "+s),r.fallback&&(n=r.fallback,s=l.ContentTypeFallback)),{content:n,contentType:s,error:i}}function E(e,t,r){if("v1"===r)return new i.ConversationV1(t,e.peerAddress,(0,f.nsToDate)(e.createdNs));if("v2"===r)return new i.ConversationV2(t,e.topic,e.peerAddress,(0,f.nsToDate)(e.createdNs),e.context);throw new Error(`Unknown conversation version ${r}`)}t.DecodedMessage=v,t.decodeContent=w},6397:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContentTypeFallback=t.ContentTypeId=void 0;class r{constructor(e){this.authorityId=e.authorityId,this.typeId=e.typeId,this.versionMajor=e.versionMajor,this.versionMinor=e.versionMinor}toString(){return`${this.authorityId}/${this.typeId}:${this.versionMajor}.${this.versionMinor}`}sameAs(e){return this.authorityId===e.authorityId&&this.typeId===e.typeId}}t.ContentTypeId=r,t.ContentTypeFallback=new r({authorityId:"xmtp.org",typeId:"fallback",versionMajor:1,versionMinor:0})},220:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreparedMessage=void 0;const n=r(9272),i=r(6314);t.PreparedMessage=class{constructor(e,t){this.messageEnvelope=e,this.onSend=t}async messageID(){if(!this.messageEnvelope.message)throw new Error("no envelope message");return(0,n.bytesToHex)(await(0,i.sha256)(this.messageEnvelope.message))}async send(){await this.onSend()}}},4596:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e,t,r,n){this.messages=[],this.resolvers=[],this.topics=t,this.client=e,this.callback=this.newMessageCallback(r,n)}newMessageCallback(e,t){return async r=>{if(r.message)try{const n=await e(r);if(!n)return;if(t){const e=t(n);e&&this.resubscribeToTopics(e)}const i=this.resolvers.pop();i?i({value:n}):this.messages.unshift(n)}catch(e){console.warn(e)}}}async start(){if(!this.callback)throw new Error("Missing callback for stream");this.unsubscribeFn=this.client.apiClient.subscribe({contentTopics:this.topics},(async e=>{this.callback&&await(this?.callback(e))}))}static async create(e,t,n,i){const o=new r(e,t,n,i);return await o.start(),o}[Symbol.asyncIterator](){return this}async return(){return this.unsubscribeFn&&await this.unsubscribeFn(),this.callback?(this.callback=void 0,this.resolvers.forEach((e=>e({value:void 0,done:!0}))),{value:void 0,done:!0}):{value:void 0,done:!0}}next(){const e=this.messages.pop();return e?Promise.resolve({value:e}):this.callback?new Promise((e=>this.resolvers.unshift(e))):Promise.resolve({value:void 0,done:!0})}async resubscribeToTopics(e){if(!this.callback||!this.unsubscribeFn)throw new Error("Missing callback for stream");await this.unsubscribeFn(),this.topics=e,this.unsubscribeFn=this.client.apiClient.subscribe({contentTopics:this.topics},(async e=>{this.callback&&await(this?.callback(e))}))}}t.default=r},4203:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t=3590){this.authenticator=e,this.maxAgeMs=1e3*t}async getToken(){return(!this.token||this.token.ageMs>this.maxAgeMs)&&await this.refresh(),this.token.toBase64()}async refresh(){this.token=await this.authenticator.createToken()}}},9064:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(7754),i=r(6908);class o{constructor({walletAddr:e,createdNs:t}){this.walletAddr=e,this.createdNs=t}static create(e,t){return t=t||new Date,new o({walletAddr:e,createdNs:(0,i.dateToNs)(t)})}static fromBytes(e){const t=n.authn.AuthData.decode(e);return new o(t)}toBytes(){return n.authn.AuthData.encode(this).finish()}}t.default=o},464:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(5506),o=n(r(8140));t.default=class{constructor(e){this.keystore=e}async createToken(e){return(t=await this.keystore.createAuthToken({timestampNs:e?(0,i.dateToNs)(e):void 0}))instanceof o.default?t:new o.default(t);var t}}},3732:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(1094),o=r(7754),s=n(r(9064)),a=r(9272),c=n(r(8140));t.default=class{constructor(e){if(!e.publicKey.signature)throw new Error("Provided public key is not signed");this.identityKey=e}async createToken(e){const t=s.default.create(this.identityKey.publicKey.walletSignatureAddress(),e||new Date).toBytes(),r=(0,i.keccak256)(t),n=await this.identityKey.sign((0,a.hexToBytes)(r));return new c.default(o.authn.Token.fromPartial({identityKey:o.publicKey.PublicKey.fromPartial(this.identityKey.publicKey),authDataBytes:t,authDataSignature:o.signature.Signature.fromPartial(n)}))}}},8140:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(7754),o=n(r(9064));class s{constructor({identityKey:e,authDataBytes:t,authDataSignature:r}){if(!e)throw new Error("Missing identity key in token");if(!r)throw new Error("Missing authDataSignature in token");this.identityKey=e,this.authDataBytes=t,this.authDataSignature=r}get authData(){return this._authData||(this._authData=o.default.fromBytes(this.authDataBytes)),this._authData}get ageMs(){return(new Date).valueOf()-this.authData.createdNs.div(1e6).toNumber()}toBytes(){return i.authn.Token.encode(this).finish()}static fromBytes(e){return new s(i.authn.Token.decode(e))}toBase64(){return Buffer.from(this.toBytes()).toString("base64")}}t.default=s},9099:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Token=t.AuthData=t.KeystoreAuthenticator=t.LocalAuthenticator=void 0;var s=r(3732);Object.defineProperty(t,"LocalAuthenticator",{enumerable:!0,get:function(){return o(s).default}});var a=r(464);Object.defineProperty(t,"KeystoreAuthenticator",{enumerable:!0,get:function(){return o(a).default}});var c=r(9064);Object.defineProperty(t,"AuthData",{enumerable:!0,get:function(){return o(c).default}});var u=r(8140);Object.defineProperty(t,"Token",{enumerable:!0,get:function(){return o(u).default}}),i(r(1892),t)},1892:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4196:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompositeCodec=t.ContentTypeComposite=void 0;const n=r(6397),i=r(7754);t.ContentTypeComposite=new n.ContentTypeId({authorityId:"xmtp.org",typeId:"composite",versionMajor:1,versionMinor:0}),t.CompositeCodec=class{get contentType(){return t.ContentTypeComposite}encode(e,r){const n=this.toProto(e,r);let o;o=n.composite?n.composite:{parts:[n]};const s=i.composite.Composite.encode(o).finish();return{type:t.ContentTypeComposite,parameters:{},content:s}}decode(e,t){return this.fromProto({composite:i.composite.Composite.decode(e.content),part:void 0},t)}toProto(e,t){if("type"in e){const r=t.codecFor(e.type);if(!r)throw new Error(`missing codec for part type ${e.type}`);return{part:r.encode(e.content,t),composite:void 0}}const r=new Array;for(const n of e.parts)r.push(this.toProto(n,t));return{composite:{parts:r},part:void 0}}fromProto(e,t){if(e.part){if(!e.part.type)throw new Error("missing part content type");const r=new n.ContentTypeId(e.part.type),i=t.codecFor(r);if(!i)throw new Error(`missing codec for part type ${r}`);return{type:r,content:i.decode(e.part,t)}}if(!e.composite)throw new Error("invalid composite");const r=new Array;for(const n of e.composite.parts)r.push(this.fromProto(n,t));return{parts:r}}}},6254:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextCodec=t.Encoding=t.ContentTypeText=void 0;const n=r(6397);var i;t.ContentTypeText=new n.ContentTypeId({authorityId:"xmtp.org",typeId:"text",versionMajor:1,versionMinor:0}),function(e){e.utf8="UTF-8"}(i=t.Encoding||(t.Encoding={})),t.TextCodec=class{get contentType(){return t.ContentTypeText}encode(e){return{type:t.ContentTypeText,parameters:{encoding:i.utf8},content:(new TextEncoder).encode(e)}}decode(e){const t=e.parameters.encoding;if(t&&t!==i.utf8)throw new Error(`unrecognized encoding ${t}`);return(new TextDecoder).decode(e.content)}}},7868:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypingNotificationCodec=t.ContentTypeTypingNotification=void 0;const n=r(6397);t.ContentTypeTypingNotification=new n.ContentTypeId({authorityId:"xmtp.com",typeId:"typingNotification",versionMajor:1,versionMinor:0}),t.TypingNotificationCodec=class{get contentType(){return t.ContentTypeTypingNotification}encode(e){return{type:t.ContentTypeTypingNotification,parameters:{timestamp:e.timestamp.toISOString(),typerAddress:e.typerAddress,isFinished:e.isFinished?"true":"false"},content:new Uint8Array}}decode(e){return{timestamp:new Date(e.parameters.timestamp),typerAddress:e.parameters.senderAddress,isFinished:"true"===e.parameters.isFinished}}}},7915:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XMTP_DEV_WARNING=void 0,t.XMTP_DEV_WARNING="\nXX    XX MM    MM TTTTTT PPPPPP   DDDDD   EEEEEEE VV     VV \n XX  XX  MMM  MMM   TT   PP   PP  DD  DD  EE      VV     VV \n  XXXX   MM MM MM   TT   PPPPPP   DD   DD EEEEE    VV   VV  \n XX  XX  MM    MM   TT   PP       DD   DD EE        VV VV   \nXX    XX MM    MM   TT   PP       DDDDDD  EEEEEEE    VVV    \n\nConnected to the XMTP 'dev' network. Use 'production' for production messages.\nhttps://github.com/xmtp/xmtp-js#xmtp-production-and-dev-network-environments\n"},3937:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationV2=t.ConversationV1=void 0;const i=r(5506),o=r(9982),s=n(r(4596)),a=r(6044),c=r(7754),u=r(2449),d=r(220),l=r(6314),f=r(8397),h=r(6254);t.ConversationV1=class{constructor(e,t,r){this.context=void 0,this.peerAddress=o.utils.getAddress(t),this.client=e,this.createdAt=r}get clientAddress(){return this.client.address}get topic(){return(0,i.buildDirectMessageTopic)(this.peerAddress,this.client.address)}get ephemeralTopic(){return(0,i.buildDirectMessageTopic)(this.peerAddress,this.client.address).replace("/xmtp/0/dm-","/xmtp/0/dmE-")}async messages(e){const t=(0,i.buildDirectMessageTopic)(this.peerAddress,this.client.address),r=await this.client.listEnvelopes(t,this.processEnvelope.bind(this),e);return this.decryptBatch(r,t,!1)}messagesPaginated(e){return this.client.listEnvelopesPaginated(this.topic,this.decodeMessage.bind(this),e)}async decodeMessage(e){if(!e.contentTopic)throw new Error("Missing content topic");const t=await this.processEnvelope(e),r=await this.decryptBatch([t],e.contentTopic,!0);if(!r.length)throw new Error("No results");return r[0]}async prepareMessage(e,t){let r,n=await this.client.getUserContact(this.peerAddress);if(!n)throw new Error(`recipient ${this.peerAddress} is not registered`);n instanceof u.PublicKeyBundle||(n=n.toLegacyBundle()),this.client.contacts.has(this.peerAddress)?r=[this.topic]:(r=[(0,i.buildUserIntroTopic)(this.peerAddress),(0,i.buildUserIntroTopic)(this.client.address),this.topic],this.client.contacts.add(this.peerAddress));const o=await this.client.encodeContent(e,t),s=await this.createMessage(o,n,t?.timestamp),a={contentTopic:this.topic,message:s.toBytes(),timestampNs:(0,i.toNanoString)(s.sent)};return new d.PreparedMessage(a,(async()=>{await this.client.publishEnvelopes(r.map((e=>({contentTopic:e,message:s.toBytes(),timestamp:s.sent}))))}))}streamMessages(){return s.default.create(this.client,[this.topic],(async e=>this.decodeMessage(e)))}async processEnvelope({message:e,contentTopic:t}){const r=(0,i.b64Decode)(e),n=await a.MessageV1.fromBytes(r),{senderAddress:o,recipientAddress:s}=n;if(!o||!s||!t||(0,i.buildDirectMessageTopic)(o,s)!==this.topic)throw new Error("Headers do not match intended recipient");return n}streamEphemeral(){return s.default.create(this.client,[this.ephemeralTopic],this.decodeMessage.bind(this))}async send(e,t){let r,n=await this.client.getUserContact(this.peerAddress);if(!n)throw new Error(`recipient ${this.peerAddress} is not registered`);n instanceof u.PublicKeyBundle||(n=n.toLegacyBundle());const o=t?.ephemeral?this.ephemeralTopic:this.topic;this.client.contacts.has(this.peerAddress)?r=[this.topic]:(r=[(0,i.buildUserIntroTopic)(this.peerAddress),(0,i.buildUserIntroTopic)(this.client.address),o],this.client.contacts.add(this.peerAddress));const s=t?.contentType||h.ContentTypeText,c=await this.client.encodeContent(e,t),d=await this.createMessage(c,n,t?.timestamp);return await this.client.publishEnvelopes(r.map((e=>({contentTopic:e,message:d.toBytes(),timestamp:d.sent})))),a.DecodedMessage.fromV1Message(d,e,s,c,r[0],this)}async decryptBatch(e,t,r=!1){const n=(await this.client.keystore.decryptV1((0,f.buildDecryptV1Request)(e,this.client.publicKeyBundle))).responses,i=[];for(let o=0;o<n.length;o++){const s=n[o],a=e[o];try{const{decrypted:e}=(0,f.getResultOrThrow)(s);i.push(await this.buildDecodedMessage(a,e,t))}catch(e){if(r)throw e;console.warn("Error decoding content",e)}}return i}async buildDecodedMessage(e,t,r){const{content:n,contentType:i,error:o}=await(0,a.decodeContent)(t,this.client);return a.DecodedMessage.fromV1Message(e,n,i,t,r,this,o)}async createMessage(e,t,r){return r=r||new Date,a.MessageV1.encode(this.client.keystore,e,this.client.publicKeyBundle,t,r)}},t.ConversationV2=class{constructor(e,t,r,n,i){this.topic=t,this.createdAt=n,this.context=i,this.client=e,this.peerAddress=r}get clientAddress(){return this.client.address}async messages(e){const t=await this.client.listEnvelopes(this.topic,this.processEnvelope.bind(this),e);return this.decryptBatch(t,!1)}messagesPaginated(e){return this.client.listEnvelopesPaginated(this.topic,this.decodeMessage.bind(this),e)}get ephemeralTopic(){return this.topic.replace("/xmtp/0/m","/xmtp/0/mE")}streamEphemeral(){return s.default.create(this.client,[this.ephemeralTopic],this.decodeMessage.bind(this))}streamMessages(){return s.default.create(this.client,[this.topic],this.decodeMessage.bind(this))}async send(e,t){const r=await this.client.encodeContent(e,t),n=await this.createMessage(r,t?.timestamp);let i;i=t?.ephemeral?this.ephemeralTopic:this.topic,await this.client.publishEnvelopes([{contentTopic:i,message:n.toBytes(),timestamp:n.sent}]);const o=t?.contentType||h.ContentTypeText;return a.DecodedMessage.fromV2Message(n,e,o,this.topic,r,this,this.client.address)}async createMessage(e,t){const r={topic:this.topic,createdNs:(0,i.dateToNs)(t||new Date)},n=c.message.MessageHeaderV2.encode(r).finish(),o=await(0,l.sha256)((0,i.concat)(n,e)),s={payload:e,sender:this.client.signedPublicKeyBundle,signature:await this.client.keystore.signDigest({digest:o,prekeyIndex:0,identityKey:void 0})},u=c.content.SignedContent.encode(s).finish(),d={v1:void 0,v2:{headerBytes:n,ciphertext:await this.encryptMessage(u,n)}},f=c.message.Message.encode(d).finish();return a.MessageV2.create(d,r,f)}async decryptBatch(e,t=!1){const r=(await this.client.keystore.decryptV2(this.buildDecryptRequest(e))).responses,n=[];for(let i=0;i<r.length;i++){const o=r[i],s=e[i];try{const{decrypted:e}=(0,f.getResultOrThrow)(o);n.push(await this.buildDecodedMessage(s,e))}catch(e){if(t)throw e;console.warn("Error decoding content",e)}}return n}buildDecryptRequest(e){return{requests:e.map((e=>({payload:e.ciphertext,headerBytes:e.headerBytes,contentTopic:this.topic})))}}async encryptMessage(e,t){const{responses:r}=await this.client.keystore.encryptV2({requests:[{payload:e,headerBytes:t,contentTopic:this.topic}]});if(1!==r.length)throw new Error("Invalid response length");const{encrypted:n}=(0,f.getResultOrThrow)(r[0]);return n}async buildDecodedMessage(e,t){const r=c.content.SignedContent.decode(t);if(!r.sender?.identityKey||!r.sender?.preKey||!r.signature)throw new Error("incomplete signed content");await async function(e){const t=e.sender?.preKey;if(!t||!t.signature||!t.keyBytes)throw new Error("missing pre-key or pre-key signature");const r=e.sender?.identityKey;if(!r)throw new Error("missing identity key in bundle");if(!await new u.SignedPublicKey(r).verifyKey(new u.SignedPublicKey(t)))throw new Error("pre key not signed by identity key")}(r);const n=await(0,l.sha256)((0,i.concat)(e.headerBytes,r.payload));if(!new u.SignedPublicKey(r.sender?.preKey).verify(new u.Signature(r.signature),n))throw new Error("invalid signature");const o=await new u.SignedPublicKeyBundle(r.sender).walletSignatureAddress(),{content:s,contentType:d,error:f}=await(0,a.decodeContent)(r.payload,this.client);return a.DecodedMessage.fromV2Message(e,s,d,this.topic,r.payload,this,o,f)}async prepareMessage(e,t){const r=await this.client.encodeContent(e,t),n=await this.createMessage(r,t?.timestamp),o={contentTopic:t?.ephemeral?this.ephemeralTopic:this.topic,message:n.toBytes(),timestampNs:(0,i.toNanoString)(n.sent)};return new d.PreparedMessage(o,(async()=>{await this.client.publishEnvelopes([{contentTopic:this.topic,message:n.toBytes(),timestamp:n.sent}])}))}async processEnvelope(e){if(!e.message||!e.contentTopic)throw new Error("empty envelope");const t=(0,i.b64Decode)(e.message.toString()),r=c.message.Message.decode(t);if(!r.v2)throw new Error("unknown message version");const n=c.message.MessageHeaderV2.decode(r.v2.headerBytes);if(n.topic!==this.topic)throw new Error("topic mismatch");return a.MessageV2.create(r,n,t)}async decodeMessage(e){if(!e.contentTopic)throw new Error("Missing content topic");const t=await this.processEnvelope(e),r=await this.decryptBatch([t],!0);if(!r.length)throw new Error("No results");return r[0]}}},1851:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationCache=void 0;const i=r(8125),o=r(8245),s=r(3937),a=r(6044),c=n(r(4596)),u=r(5506),d=r(2449),l=r(1962),f=n(r(1583)),h=e=>Boolean(e.recipientAddress&&e.senderAddress);class p{constructor(){this.conversations=[],this.mutex=new i.Mutex,this.seenTopics=new Set}async load(e){const t=await this.mutex.acquire();try{const r=await e({latestSeen:this.latestSeen,existing:this.conversations});for(const e of r)this.seenTopics.has(e.topic)||(this.seenTopics.add(e.topic),this.conversations.push(e),(!this.latestSeen||e.createdAt>this.latestSeen)&&(this.latestSeen=e.createdAt))}finally{t()}return[...this.conversations]}}t.ConversationCache=p,t.default=class{constructor(e){this.client=e,this.v1Cache=new p,this.v2Mutex=new i.Mutex}async list(){const[e,t]=await Promise.all([this.listV1Conversations(),this.listV2Conversations()]),r=e.concat(t);return r.sort(((e,t)=>e.createdAt.getTime()-t.createdAt.getTime())),r}async listV1Conversations(){return this.v1Cache.load((async({latestSeen:e})=>{const t=await this.getIntroductionPeers({startTime:e?new Date(+e-1e4):void 0,direction:l.SortDirection.SORT_DIRECTION_ASCENDING});return Array.from(t).map((([e,t])=>new s.ConversationV1(this.client,e,t)))}))}async listV2Conversations(){return this.v2Mutex.runExclusive((async()=>{const e=await this.getV2ConversationsFromKeystore(),t=e.reduce(((e,t)=>!e||+t.createdAt>+e.createdAt?t:e),void 0),r=await this.updateV2Conversations(t?.createdAt),n=new Set(e.map((e=>e.topic)));for(const t of r)n.has(t.topic)||(e.push(t),n.add(t.topic));return e.sort(((e,t)=>e.createdAt.getTime()-t.createdAt.getTime())),e}))}async getV2ConversationsFromKeystore(){return(await this.client.keystore.getV2Conversations()).map(this.conversationReferenceToV2.bind(this))}async updateV2Conversations(e){const t=await this.client.listInvitations({startTime:e?new Date(+e-1e4):void 0,direction:l.SortDirection.SORT_DIRECTION_ASCENDING});return this.decodeInvites(t)}async decodeInvites(e,t=!1){const{responses:r}=await this.client.keystore.saveInvites({requests:e.map((e=>({payload:(0,u.b64Decode)(e.message),timestampNs:f.default.fromString(e.timestampNs),contentTopic:e.contentTopic})))}),n=[];for(const e of r)try{const t=this.saveInviteResponseToConversation(e);n.push(t)}catch(e){if(console.warn("Error saving invite response to conversation: ",e),t)throw e}return n}saveInviteResponseToConversation({result:e,error:t}){if(t||!e||!e.conversation)throw new Error(`Error from keystore: ${t?.code} ${t?.message}}`);return this.conversationReferenceToV2(e.conversation)}conversationReferenceToV2(e){return new s.ConversationV2(this.client,e.topic,e.peerAddress,(0,u.nsToDate)(e.createdNs),e.context)}async stream(){const e=new Set,t=(0,u.buildUserIntroTopic)(this.client.address),r=(0,u.buildUserInviteTopic)(this.client.address);return c.default.create(this.client,[r,t],(async n=>{if(n.contentTopic===t){const t=(0,u.b64Decode)(n.message),r=await a.MessageV1.fromBytes(t),i=this.getPeerAddress(r);if(!(t=>!e.has(t)&&(e.add(t),!0))(i))return;return await r.decrypt(this.client.keystore,this.client.publicKeyBundle),new s.ConversationV1(this.client,i,r.sent)}if(n.contentTopic===r){const e=await this.decodeInvites([n],!0);if(e.length)return e[0]}throw new Error("unrecognized invite topic")}).bind(this))}async streamAllMessages(){const e=(0,u.buildUserIntroTopic)(this.client.address),t=(0,u.buildUserInviteTopic)(this.client.address),r=new Set([e,t]),n=new Map;for(const e of await this.list())r.add(e.topic),n.set(e.topic,e);const i=(e,t)=>!r.has(e)&&(n.set(e,t),r.add(e),!0),o=await c.default.create(this.client,Array.from(r.values()),(async r=>{const i=r.contentTopic;if(!i)return null;if(i===e){const e=(0,u.b64Decode)(r.message),t=await a.MessageV1.fromBytes(e);if(!h(t))return null;const n=this.getPeerAddress(t);return new s.ConversationV1(this.client,n,t.sent).decodeMessage(r)}if(i===t)return(await this.decodeInvites([r],!0))[0];const o=n.get(i);if(o instanceof s.ConversationV1)return o.decodeMessage(r);if(o instanceof s.ConversationV2)return o.decodeMessage(r);throw console.log("Unknown topic"),new Error("Unknown topic")}),(t=>{if(t instanceof a.DecodedMessage&&t.contentTopic===e){const e=new s.ConversationV1(this.client,t.recipientAddress===this.client.address?t.senderAddress:t.recipientAddress,t.sent);return i(e.topic,e)?Array.from(r.values()):void 0}if(t instanceof s.ConversationV2)return i(t.topic,t)?Array.from(r.values()):void 0}));return async function*(){for await(const e of o)if(e instanceof a.DecodedMessage&&(yield e),e instanceof s.ConversationV2)for(const t of await e.messages())yield t}()}async getIntroductionPeers(e){const t=(0,u.buildUserIntroTopic)(this.client.address),r=await this.client.listEnvelopes(t,(e=>a.MessageV1.fromBytes((0,u.b64Decode)(e.message))),e),n=new Map;for(const e of r){if(!h(e))continue;const t=this.getPeerAddress(e);if(t){const r=n.get(t);if(!r||r>e.sent)try{await e.decrypt(this.client.keystore,this.client.publicKeyBundle),n.set(t,e.sent)}catch(e){continue}}}return n}async newConversation(e,t){let r=await this.client.getUserContact(e);if(!r)throw new Error(`Recipient ${e} is not on the XMTP network`);if(r instanceof d.PublicKeyBundle&&!t?.conversationId)return new s.ConversationV1(this.client,e,new Date);if(!t?.conversationId){const t=(await this.listV1Conversations()).find((t=>t.peerAddress===e));if(t){if(!this.client.signedPublicKeyBundle.isFromLegacyBundle())throw new Error("cannot resume pre-existing V1 conversation; client keys not compatible");if(!(r instanceof d.PublicKeyBundle||r.isFromLegacyBundle()))throw new Error("cannot resume pre-existing V1 conversation; peer keys not compatible");return t}}r instanceof d.PublicKeyBundle&&(r=o.SignedPublicKeyBundle.fromLegacyBundle(r));const n=r=>{return r.peerAddress===e&&(n=t,i=r.context??void 0,n?.conversationId===i?.conversationId);var n,i};return this.v2Mutex.runExclusive((async()=>{const e=await this.getV2ConversationsFromKeystore(),i=e.find(n);if(i)return i;const o=e[e.length-1]?.createdAt;return(await this.updateV2Conversations(o)).find(n)||this.createV2Convo(r,t)}))}async createV2Convo(e,t){const r=new Date,{payload:n,conversation:i}=await this.client.keystore.createInvite({recipient:e,context:t,createdNs:(0,u.dateToNs)(r)});if(!n||!i)throw new Error("Required field not returned from Keystore");const o=await e.walletSignatureAddress();return await this.client.publishEnvelopes([{contentTopic:(0,u.buildUserInviteTopic)(o),message:n,timestamp:r},{contentTopic:(0,u.buildUserInviteTopic)(this.client.address),message:n,timestamp:r}]),this.conversationReferenceToV2(i)}getPeerAddress(e){return e.recipientAddress===this.client.address?e.senderAddress:e.recipientAddress}}},5880:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationV2=t.ConversationV1=t.Conversations=void 0;var i=r(1851);Object.defineProperty(t,"Conversations",{enumerable:!0,get:function(){return n(i).default}});var o=r(3937);Object.defineProperty(t,"ConversationV1",{enumerable:!0,get:function(){return o.ConversationV1}}),Object.defineProperty(t,"ConversationV2",{enumerable:!0,get:function(){return o.ConversationV2}})},7527:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AESGCMTagLength=t.AESGCMNonceSize=t.KDFSaltSize=t.AESKeySize=void 0;const n=r(7754);t.AESKeySize=32,t.KDFSaltSize=32,t.AESGCMNonceSize=12,t.AESGCMTagLength=16;class i{constructor(e){if(!e.aes256GcmHkdfSha256)throw new Error("invalid ciphertext");if(e.aes256GcmHkdfSha256.payload.length<t.AESGCMTagLength)throw new Error(`invalid ciphertext ciphertext length: ${e.aes256GcmHkdfSha256.payload.length}`);if(e.aes256GcmHkdfSha256.hkdfSalt.length!==t.KDFSaltSize)throw new Error(`invalid ciphertext salt length: ${e.aes256GcmHkdfSha256.hkdfSalt.length}`);if(e.aes256GcmHkdfSha256.gcmNonce.length!==t.AESGCMNonceSize)throw new Error(`invalid ciphertext nonce length: ${e.aes256GcmHkdfSha256.gcmNonce.length}`);this.aes256GcmHkdfSha256=e.aes256GcmHkdfSha256}toBytes(){return n.ciphertext.Ciphertext.encode(this).finish()}static fromBytes(e){return new i(n.ciphertext.Ciphertext.decode(e))}}t.default=i},270:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PrivateKey=t.SignedPrivateKey=void 0;const a=r(7754),c=o(r(9656)),u=s(r(1583)),d=o(r(6002)),l=r(2940),f=r(6314),h=r(9272);function p(e){if(32!==e.bytes.length)throw new Error(`invalid private key length: ${e.bytes.length}`)}class y{constructor(e){if(!e.secp256k1)throw new Error("invalid private key");if(p(e.secp256k1),this.secp256k1=e.secp256k1,this.createdNs=e.createdNs,!e.publicKey)throw new Error("missing public key");this.publicKey=new l.SignedPublicKey(e.publicKey)}static async generate(e){const t={bytes:c.utils.randomPrivateKey()},r=u.default.fromNumber((new Date).getTime()).mul(1e6),n=new l.UnsignedPublicKey({secp256k1Uncompressed:{bytes:c.getPublicKey(t.bytes)},createdNs:r}),i=await e.signKey(n);return new y({secp256k1:t,createdNs:r,publicKey:i})}generated(){return new Date(this.createdNs.div(1e6).toNumber())}async sign(e){const[t,r]=await c.sign(e,this.secp256k1.bytes,{recovered:!0,der:!1});return new d.default({ecdsaCompact:{bytes:t,recovery:r}})}async signKey(e){const t=e.toBytes(),r=await(0,f.sha256)(t),n=await this.sign(r);return new l.SignedPublicKey({keyBytes:t,signature:n})}static async signerKey(e,t){const r=await(0,f.sha256)(e.bytesToSign());return(0,d.ecdsaSignerKey)(r,t)}sharedSecret(e){return c.getSharedSecret(this.secp256k1.bytes,e.secp256k1Uncompressed.bytes,!1)}encrypt(e,t,r){const n=this.sharedSecret(t);return(0,f.encrypt)(e,n,r)}decrypt(e,t,r){const n=this.sharedSecret(t);return(0,f.decrypt)(e,n,r)}matches(e){return this.publicKey.equals(e)}equals(e){return(0,h.equalBytes)(this.secp256k1.bytes,e.secp256k1.bytes)&&this.publicKey.equals(e.publicKey)}toBytes(){return a.privateKey.SignedPrivateKey.encode(this).finish()}static fromBytes(e){return new y(a.privateKey.SignedPrivateKey.decode(e))}static fromLegacyKey(e,t){return new y({createdNs:e.timestamp.mul(1e6),secp256k1:e.secp256k1,publicKey:l.SignedPublicKey.fromLegacyKey(e.publicKey,t)})}}t.SignedPrivateKey=y;class m{constructor(e){if(!e.secp256k1)throw new Error("invalid private key");if(p(e.secp256k1),this.timestamp=e.timestamp,this.secp256k1=e.secp256k1,!e.publicKey)throw new Error("missing public key");this.publicKey=new l.PublicKey(e.publicKey)}static generate(){const e={bytes:c.utils.randomPrivateKey()},t=u.default.fromNumber((new Date).getTime());return new m({secp256k1:e,timestamp:t,publicKey:new l.PublicKey({secp256k1Uncompressed:{bytes:c.getPublicKey(e.bytes)},timestamp:t})})}generated(){return new Date(this.timestamp.toNumber())}async sign(e){const[t,r]=await c.sign(e,this.secp256k1.bytes,{recovered:!0,der:!1});return new d.default({ecdsaCompact:{bytes:t,recovery:r}})}async signKey(e){const t=await(0,f.sha256)(e.bytesToSign());return e.signature=await this.sign(t),e}sharedSecret(e){return c.getSharedSecret(this.secp256k1.bytes,e.secp256k1Uncompressed.bytes,!1)}encrypt(e,t,r){const n=this.sharedSecret(t);return(0,f.encrypt)(e,n,r)}decrypt(e,t,r){const n=this.sharedSecret(t);return(0,f.decrypt)(e,n,r)}matches(e){return this.publicKey.equals(e)}toBytes(){return a.privateKey.PrivateKey.encode(this).finish()}static fromBytes(e){return new m(a.privateKey.PrivateKey.decode(e))}}t.PrivateKey=m},741:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodePrivateKeyBundle=t.PrivateKeyBundleV1=t.PrivateKeyBundleV2=void 0;const n=r(7754),i=r(270),o=r(6002),s=r(8245),a=r(4728);class c{constructor(e){if(this.version=2,!e.identityKey)throw new Error("missing identity key");this.identityKey=new i.SignedPrivateKey(e.identityKey),this.preKeys=(e.preKeys||[]).map((e=>new i.SignedPrivateKey(e)))}static async generate(e){const t=await i.SignedPrivateKey.generate(new o.WalletSigner(e)),r=new c({identityKey:t,preKeys:[]});return await r.addPreKey(),r}getCurrentPreKey(){return this.preKeys[0]}findPreKey(e){const t=this.preKeys.find((t=>t.matches(e)));if(!t)throw new a.NoMatchingPreKeyError(e);return t}async addPreKey(){this._publicKeyBundle=void 0;const e=await i.SignedPrivateKey.generate(this.identityKey);this.preKeys.unshift(e)}getPublicKeyBundle(){return this._publicKeyBundle||(this._publicKeyBundle=new s.SignedPublicKeyBundle({identityKey:this.identityKey.publicKey,preKey:this.getCurrentPreKey().publicKey})),this._publicKeyBundle}async sharedSecret(e,t,r){if(!e.identityKey||!e.preKey)throw new Error("invalid peer key bundle");if(!await e.identityKey.verifyKey(e.preKey))throw new Error("peer preKey signature invalid");if(!this.identityKey)throw new Error("missing identity key");let n,i,o;r?(o=this.findPreKey(t),n=o.sharedSecret(e.identityKey),i=this.identityKey.sharedSecret(e.preKey)):(o=this.findPreKey(t),n=this.identityKey.sharedSecret(e.preKey),i=o.sharedSecret(e.identityKey));const s=o.sharedSecret(e.preKey),a=new Uint8Array(n.length+i.length+s.length);return a.set(n,0),a.set(i,n.length),a.set(s,n.length+i.length),a}encode(){return n.privateKey.PrivateKeyBundle.encode({v1:void 0,v2:this}).finish()}equals(e){if(this.preKeys.length!==e.preKeys.length)return!1;for(let t=0;t<this.preKeys.length;t++)if(!this.preKeys[t].equals(e.preKeys[t]))return!1;return this.identityKey.equals(e.identityKey)}static fromLegacyBundle(e){return new c({identityKey:i.SignedPrivateKey.fromLegacyKey(e.identityKey,!0),preKeys:e.preKeys.map((e=>i.SignedPrivateKey.fromLegacyKey(e)))})}}t.PrivateKeyBundleV2=c;class u{constructor(e){if(this.version=1,!e.identityKey)throw new Error("missing identity key");this.identityKey=new i.PrivateKey(e.identityKey),this.preKeys=(e.preKeys||[]).map((e=>new i.PrivateKey(e)))}static async generate(e){const t=i.PrivateKey.generate();e&&await t.publicKey.signWithWallet(e);const r=new u({identityKey:t,preKeys:[]});return await r.addPreKey(),r}getCurrentPreKey(){return this.preKeys[0]}findPreKey(e){const t=this.preKeys.find((t=>t.matches(e)));if(!t)throw new a.NoMatchingPreKeyError(e);return t}async addPreKey(){this._publicKeyBundle=void 0;const e=i.PrivateKey.generate();await this.identityKey.signKey(e.publicKey),this.preKeys.unshift(e)}getPublicKeyBundle(){return this._publicKeyBundle||(this._publicKeyBundle=new s.PublicKeyBundle({identityKey:this.identityKey.publicKey,preKey:this.getCurrentPreKey().publicKey})),this._publicKeyBundle}async sharedSecret(e,t,r){if(!e.identityKey||!e.preKey)throw new Error("invalid peer key bundle");if(!await e.identityKey.verifyKey(e.preKey))throw new Error("peer preKey signature invalid");if(!this.identityKey)throw new Error("missing identity key");let n,i,o;r?(o=this.findPreKey(t),n=o.sharedSecret(e.identityKey),i=this.identityKey.sharedSecret(e.preKey)):(o=this.findPreKey(t),n=this.identityKey.sharedSecret(e.preKey),i=o.sharedSecret(e.identityKey));const s=o.sharedSecret(e.preKey),a=new Uint8Array(n.length+i.length+s.length);return a.set(n,0),a.set(i,n.length),a.set(s,n.length+i.length),a}encode(){return n.privateKey.PrivateKeyBundle.encode({v1:this,v2:void 0}).finish()}}t.PrivateKeyBundleV1=u,t.decodePrivateKeyBundle=function(e){const t=n.privateKey.PrivateKeyBundle.decode(e);if(t.v1)return new u(t.v1);if(t.v2)return new c(t.v2);throw new Error("unknown private key bundle version")}},2940:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PublicKey=t.SignedPublicKey=t.UnsignedPublicKey=void 0;const a=r(7754),c=o(r(9656)),u=s(r(1583)),d=o(r(6002)),l=r(9272),f=r(9982),h=r(6314),p=new u.default(10**9).mul(10**9);class y{constructor(e){if(!e?.secp256k1Uncompressed)throw new Error("invalid public key");!function(e){if(65!==e.bytes.length)throw new Error(`invalid public key length: ${e.bytes.length}`);if(4!==e.bytes[0])throw new Error(`unrecognized public key prefix: ${e.bytes[0]}`)}(e.secp256k1Uncompressed),this.secp256k1Uncompressed=e.secp256k1Uncompressed,this.createdNs=e.createdNs.toUnsigned()}generated(){return new Date(this.timestamp.toNumber())}isFromLegacyKey(){return this.createdNs.lessThan(p)}get timestamp(){return(this.isFromLegacyKey()?this.createdNs:this.createdNs.div(1e6)).toUnsigned()}verify(e,t){return!!e.ecdsaCompact&&c.verify(e.ecdsaCompact.bytes,t,this.secp256k1Uncompressed.bytes)}async verifyKey(e){if(!e.signature)return!1;const t=await(0,h.sha256)(e.bytesToSign());return this.verify(e.signature,t)}equals(e){return(0,l.equalBytes)(this.secp256k1Uncompressed.bytes,e.secp256k1Uncompressed.bytes)}getEthereumAddress(){return f.utils.computeAddress(this.secp256k1Uncompressed.bytes)}toBytes(){return a.publicKey.UnsignedPublicKey.encode(this).finish()}static fromBytes(e){return new y(a.publicKey.UnsignedPublicKey.decode(e))}}t.UnsignedPublicKey=y;class m extends y{constructor(e){if(!e.keyBytes)throw new Error("missing key bytes");if(super(a.publicKey.UnsignedPublicKey.decode(e.keyBytes)),this.keyBytes=e.keyBytes,!e.signature)throw new Error("missing key signature");this.signature=new d.default(e.signature)}get unsignedKey(){return new y({createdNs:this.createdNs,secp256k1Uncompressed:this.secp256k1Uncompressed})}signerKey(){return this.signature.signerKey(this)}async walletSignatureAddress(){if(!this.signature.walletEcdsaCompact)throw new Error("key was not signed by a wallet");const e=await this.signerKey();if(!e)throw new Error("key signature not valid");return e.getEthereumAddress()}equals(e){return this.unsignedKey.equals(e.unsignedKey)&&this.signature.equals(e.signature)}bytesToSign(){return this.keyBytes}toBytes(){return a.publicKey.SignedPublicKey.encode(this).finish()}static fromBytes(e){return new m(a.publicKey.SignedPublicKey.decode(e))}toLegacyKey(){if(!this.isFromLegacyKey())throw new Error("cannot be converted to legacy key");let e=this.signature;return e.walletEcdsaCompact&&(e=new d.default({ecdsaCompact:e.walletEcdsaCompact})),new g({timestamp:this.timestamp,secp256k1Uncompressed:this.secp256k1Uncompressed,signature:e})}static fromLegacyKey(e,t){if(!e.signature)throw new Error("key is not signed");let r=e.signature;return t&&(r=new d.default({walletEcdsaCompact:r.ecdsaCompact})),new m({keyBytes:e.bytesToSign(),signature:r})}}t.SignedPublicKey=m;class g extends y{constructor(e){super({createdNs:e.timestamp.mul(1e6),secp256k1Uncompressed:e.secp256k1Uncompressed}),e.signature&&(!e.signature.ecdsaCompact&&e.signature.walletEcdsaCompact?this.signature=new d.default({ecdsaCompact:{bytes:e.signature.walletEcdsaCompact.bytes,recovery:e.signature.walletEcdsaCompact.recovery}}):this.signature=new d.default(e.signature))}get timestamp(){return this.createdNs.div(1e6)}bytesToSign(){return a.publicKey.PublicKey.encode({timestamp:this.timestamp,secp256k1Uncompressed:this.secp256k1Uncompressed}).finish()}async signWithWallet(e){const t=await e.signMessage(d.WalletSigner.identitySigRequestText(this.bytesToSign())),r=f.utils.splitSignature(t),n=(0,l.hexToBytes)(r.r),i=(0,l.hexToBytes)(r.s),o=new Uint8Array(64);o.set(n),o.set(i,n.length),this.signature=new d.default({ecdsaCompact:{bytes:o,recovery:r.recoveryParam}})}walletSignatureAddress(){if(!this.signature)throw new Error("key is not signed");const e=(0,l.hexToBytes)(f.utils.hashMessage(d.WalletSigner.identitySigRequestText(this.bytesToSign()))),t=this.signature.getPublicKey(e);if(!t)throw new Error("key signature is malformed");return t.getEthereumAddress()}toBytes(){return a.publicKey.PublicKey.encode(this).finish()}static fromBytes(e){return new g(a.publicKey.PublicKey.decode(e))}}t.PublicKey=g},8245:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PublicKeyBundle=t.SignedPublicKeyBundle=void 0;const n=r(7754),i=r(2940);class o{constructor(e){if(!e.identityKey)throw new Error("missing identity key");if(!e.preKey)throw new Error("missing pre-key");this.identityKey=new i.SignedPublicKey(e.identityKey),this.preKey=new i.SignedPublicKey(e.preKey)}walletSignatureAddress(){return this.identityKey.walletSignatureAddress()}equals(e){return this.identityKey.equals(e.identityKey)&&this.preKey.equals(e.preKey)}toBytes(){return n.publicKey.SignedPublicKeyBundle.encode(this).finish()}isFromLegacyBundle(){return this.identityKey.isFromLegacyKey()&&this.preKey.isFromLegacyKey()}toLegacyBundle(){return new s({identityKey:this.identityKey.toLegacyKey(),preKey:this.preKey.toLegacyKey()})}static fromBytes(e){const t=n.publicKey.SignedPublicKeyBundle.decode(e);return new o(t)}static fromLegacyBundle(e){return new o({identityKey:i.SignedPublicKey.fromLegacyKey(e.identityKey,!0),preKey:i.SignedPublicKey.fromLegacyKey(e.preKey)})}}t.SignedPublicKeyBundle=o;class s{constructor(e){if(!e.identityKey)throw new Error("missing identity key");if(!e.preKey)throw new Error("missing pre-key");this.identityKey=new i.PublicKey(e.identityKey),this.preKey=new i.PublicKey(e.preKey)}equals(e){return this.identityKey.equals(e.identityKey)&&this.preKey.equals(e.preKey)}walletSignatureAddress(){return this.identityKey.walletSignatureAddress()}toBytes(){return n.publicKey.PublicKeyBundle.encode(this).finish()}static fromBytes(e){const t=n.publicKey.PublicKeyBundle.decode(e);return new s(t)}}t.PublicKeyBundle=s},6002:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WalletSigner=t.AccountLinkedRole=t.ecdsaSignerKey=void 0;const a=r(7754),c=s(r(1583)),u=o(r(9656)),d=r(2940),l=r(270),f=r(9982),h=r(9272);function p(e){if(64!==e.bytes.length)throw new Error(`invalid signature length: ${e.bytes.length}`);if(0!==e.recovery&&1!==e.recovery)throw new Error(`invalid recovery bit: ${e.recovery}`)}function y(e,t){return e.recovery===t.recovery&&(0,h.equalBytes)(e.bytes,t.bytes)}function m(e,t){const r=u.recoverPublicKey(e,t.bytes,t.recovery);return r?new d.UnsignedPublicKey({secp256k1Uncompressed:{bytes:r},createdNs:c.default.fromNumber(0)}):void 0}t.ecdsaSignerKey=m;class g{constructor(e){if(e.ecdsaCompact)p(e.ecdsaCompact),this.ecdsaCompact=e.ecdsaCompact;else{if(!e.walletEcdsaCompact)throw new Error("invalid signature");p(e.walletEcdsaCompact),this.walletEcdsaCompact=e.walletEcdsaCompact}}async signerKey(e){return this.ecdsaCompact?l.SignedPrivateKey.signerKey(e,this.ecdsaCompact):this.walletEcdsaCompact?v.signerKey(e,this.walletEcdsaCompact):void 0}getPublicKey(e){let t;if(this.ecdsaCompact)t=u.recoverPublicKey(e,this.ecdsaCompact.bytes,this.ecdsaCompact.recovery);else{if(!this.walletEcdsaCompact)throw new Error("invalid v1 signature");t=u.recoverPublicKey(e,this.walletEcdsaCompact.bytes,this.walletEcdsaCompact.recovery)}return t?new d.PublicKey({secp256k1Uncompressed:{bytes:t},timestamp:c.default.fromNumber(0)}):void 0}equals(e){return this.ecdsaCompact&&e.ecdsaCompact?y(this.ecdsaCompact,e.ecdsaCompact):!(!this.walletEcdsaCompact||!e.walletEcdsaCompact)&&y(this.walletEcdsaCompact,e.walletEcdsaCompact)}toBytes(){return a.signature.Signature.encode(this).finish()}static fromBytes(e){return new g(a.signature.Signature.decode(e))}}var b;t.default=g,(b=t.AccountLinkedRole||(t.AccountLinkedRole={}))[b.INBOX_KEY=0]="INBOX_KEY",b[b.SEND_KEY=1]="SEND_KEY";class v{constructor(e){this.wallet=e}static identitySigRequestText(e){return`XMTP : Create Identity\n${(0,h.bytesToHex)(e)}\n\nFor more info: https://xmtp.org/signatures/`}static signerKey(e,t){return m((0,h.hexToBytes)(f.utils.hashMessage(this.identitySigRequestText(e.bytesToSign()))),t)}async signKey(e){const t=e.toBytes(),r=await this.wallet.signMessage(v.identitySigRequestText(t)),n=f.utils.splitSignature(r),i=(0,h.hexToBytes)(n.r),o=(0,h.hexToBytes)(n.s),s=new Uint8Array(64);s.set(i),s.set(o,i.length);const a=new g({walletEcdsaCompact:{bytes:s,recovery:n.recoveryParam}});return new d.SignedPublicKey({keyBytes:t,signature:a})}}t.WalletSigner=v},6092:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(7754),o=r(6314),s=n(r(6002));class a{constructor({eciesBytes:e,signature:t}){if(!e||!e.length)throw new Error("eciesBytes is empty");if(!t)throw new Error("signature is undefined");this.eciesBytes=e,this.signature=new s.default(t),this.ciphertext=i.ciphertext.SignedEciesCiphertext_Ecies.decode(e)}toBytes(){return i.ciphertext.SignedEciesCiphertext.encode(this).finish()}async verify(e){return e.verify(this.signature,await(0,o.sha256)(this.eciesBytes))}static fromBytes(e){const t=i.ciphertext.SignedEciesCiphertext.decode(e);return new a(t)}static async create(e,t){(e=>{if(16!==e.iv.length)throw new Error("Invalid iv length");if(65!==e.ephemeralPublicKey.length)throw new Error("Invalid ephemPublicKey length");if(e.ciphertext.length<1||e.ciphertext.length%16!=0)throw new Error("Invalid ciphertext length");if(32!==e.mac.length)throw new Error("Invalid mac length")})(e);const r=i.ciphertext.SignedEciesCiphertext_Ecies.encode(e).finish(),n=await t.sign(await(0,o.sha256)(r));return new a({eciesBytes:r,signature:n})}}t.default=a},6998:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(2114),i=("object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0)??n.webcrypto;t.default=i},6904:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.decrypt=t.encrypt=t.derive=t.verify=t.sign=t.getPublicCompressed=t.getPublic=t.generatePrivate=void 0;const i=r(6266),o=n(r(6998)),s=new i.ec("secp256k1"),a=o.default.subtle,c=Buffer.from("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141","hex"),u=Buffer.alloc(32,0);function d(e,t){if(!e)throw new Error(t||"Assertion failed")}function l(e){return t=e,!(!Buffer.isBuffer(t)||32!==t.length)&&e.compare(u)>0&&e.compare(c)<0;var t}function f(e){const t=new Uint8Array(e);return o.default.getRandomValues(t),Buffer.from(t)}async function h(e){const t=await a.digest("SHA-512",e);return Buffer.from(t)}function p(e){return function(t,r,n){return new Promise((function(i){return a.importKey("raw",r,{name:"AES-CBC"},!1,[e]).then((function(r){const i={name:"AES-CBC",iv:t};return a[e](i,r,n)})).then((function(e){i(Buffer.from(new Uint8Array(e)))}))}))}}const y=p("encrypt"),m=p("decrypt");async function g(e,t){const r=await a.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);return Buffer.from(await a.sign({name:"HMAC",hash:"SHA-256"},r,t))}function b(e){return d(32===e.length,"Bad private key"),d(l(e),"Bad private key"),Buffer.from(s.keyFromPrivate(e).getPublic("array"))}function v(e,t){return new Promise((function(r){d(Buffer.isBuffer(e),"Bad private key"),d(Buffer.isBuffer(t),"Bad public key"),d(32===e.length,"Bad private key"),d(l(e),"Bad private key"),d(65===t.length||33===t.length,"Bad public key"),65===t.length&&d(4===t[0],"Bad public key"),33===t.length&&d(2===t[0]||3===t[0],"Bad public key");const n=s.keyFromPrivate(e),i=s.keyFromPublic(t),o=n.derive(i.getPublic());r(Buffer.from(o.toArray()))}))}t.generatePrivate=function(){let e=f(32);for(;!l(e);)e=f(32);return e},t.getPublic=b,t.getPublicCompressed=function(e){return d(32===e.length,"Bad private key"),d(l(e),"Bad private key"),Buffer.from(s.keyFromPrivate(e).getPublic(!0,"array"))},t.sign=function(e,t){return new Promise((function(r){d(32===e.length,"Bad private key"),d(l(e),"Bad private key"),d(t.length>0,"Message should not be empty"),d(t.length<=32,"Message is too long"),r(Buffer.from(s.sign(t,e,{canonical:!0}).toDER()))}))},t.verify=function(e,t,r){return new Promise((function(n,i){d(65===e.length||33===e.length,"Bad public key"),65===e.length&&d(4===e[0],"Bad public key"),33===e.length&&d(2===e[0]||3===e[0],"Bad public key"),d(t.length>0,"Message should not be empty"),d(t.length<=32,"Message is too long"),s.verify(t,r,e)?n(null):i(new Error("Bad signature"))}))},t.derive=v,t.encrypt=async function(e,t,r){const n=(r=r||{})?.iv||f(16);let i=r?.ephemPrivateKey||f(32);for(;!l(i);){if(r?.ephemPrivateKey)throw new Error("ephemPrivateKey is not valid");i=f(32)}const o=b(i),s=await h(await v(i,e)),a=s.slice(0,32),c=s.slice(32),u=await y(n,a,t),d=Buffer.concat([n,o,u]);return{iv:n,ephemeralPublicKey:o,ciphertext:u,mac:await g(c,d)}},t.decrypt=async function(e,t){const r=await v(e,t.ephemeralPublicKey),n=await h(r),i=n.slice(0,32),o=n.slice(32),s=Buffer.concat([t.iv,t.ephemeralPublicKey,t.ciphertext]);return d(await async function(e,t,r){return function(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r}(await g(e,t),r)}(o,s,t.mac),"Bad mac"),m(t.iv,i,t.ciphertext)}},6314:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.decrypt=t.encrypt=t.sha256=void 0;const a=o(r(7527)),c=s(r(6998)),u=new ArrayBuffer(0);function d(e,t){const r={name:"AES-GCM",iv:e};return t&&(r.additionalData=t),r}async function l(e,t){const r=await c.default.subtle.importKey("raw",e,"HKDF",!1,["deriveKey"]);return c.default.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:t,info:u},r,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}t.sha256=async function(e){return new Uint8Array(await c.default.subtle.digest("SHA-256",e))},t.encrypt=async function(e,t,r){const n=c.default.getRandomValues(new Uint8Array(a.KDFSaltSize)),i=c.default.getRandomValues(new Uint8Array(a.AESGCMNonceSize)),o=await l(t,n),s=await c.default.subtle.encrypt(d(i,r),o,e);return new a.default({aes256GcmHkdfSha256:{payload:new Uint8Array(s),hkdfSalt:n,gcmNonce:i}})},t.decrypt=async function(e,t,r){if(!e.aes256GcmHkdfSha256)throw new Error("invalid payload ciphertext");const n=await l(t,e.aes256GcmHkdfSha256.hkdfSalt),i=await c.default.subtle.decrypt(d(e.aes256GcmHkdfSha256.gcmNonce,r),n,e.aes256GcmHkdfSha256.payload);return new Uint8Array(i)}},4728:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoMatchingPreKeyError=void 0;const n=r(9272);class i extends Error{constructor(e){super(`no pre-key matches: ${(0,n.bytesToHex)(e.secp256k1Uncompressed.bytes)}`)}}t.NoMatchingPreKeyError=i},2449:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WalletSigner=t.SignedEciesCiphertext=t.Signature=t.PrivateKeyBundleV2=t.PrivateKeyBundleV1=t.decodePrivateKeyBundle=t.SignedPrivateKey=t.PrivateKey=t.PublicKeyBundle=t.PublicKey=t.SignedPublicKeyBundle=t.SignedPublicKey=t.UnsignedPublicKey=t.Ciphertext=t.decrypt=t.encrypt=t.utils=void 0;const a=r(8245);Object.defineProperty(t,"PublicKeyBundle",{enumerable:!0,get:function(){return a.PublicKeyBundle}}),Object.defineProperty(t,"SignedPublicKeyBundle",{enumerable:!0,get:function(){return a.SignedPublicKeyBundle}});const c=r(270);Object.defineProperty(t,"SignedPrivateKey",{enumerable:!0,get:function(){return c.SignedPrivateKey}}),Object.defineProperty(t,"PrivateKey",{enumerable:!0,get:function(){return c.PrivateKey}});const u=r(741);Object.defineProperty(t,"PrivateKeyBundleV1",{enumerable:!0,get:function(){return u.PrivateKeyBundleV1}}),Object.defineProperty(t,"PrivateKeyBundleV2",{enumerable:!0,get:function(){return u.PrivateKeyBundleV2}}),Object.defineProperty(t,"decodePrivateKeyBundle",{enumerable:!0,get:function(){return u.decodePrivateKeyBundle}});const d=r(2940);Object.defineProperty(t,"UnsignedPublicKey",{enumerable:!0,get:function(){return d.UnsignedPublicKey}}),Object.defineProperty(t,"SignedPublicKey",{enumerable:!0,get:function(){return d.SignedPublicKey}}),Object.defineProperty(t,"PublicKey",{enumerable:!0,get:function(){return d.PublicKey}});const l=o(r(6002));t.Signature=l.default,Object.defineProperty(t,"WalletSigner",{enumerable:!0,get:function(){return l.WalletSigner}});const f=o(r(9272));t.utils=f;const h=r(6314);Object.defineProperty(t,"encrypt",{enumerable:!0,get:function(){return h.encrypt}}),Object.defineProperty(t,"decrypt",{enumerable:!0,get:function(){return h.decrypt}});const p=s(r(7527));t.Ciphertext=p.default;const y=s(r(6092));t.SignedEciesCiphertext=y.default},9272:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.equalBytes=t.bytesToBase64=t.hexToBytes=t.bytesToHex=void 0;const s=o(r(9656));t.bytesToHex=s.utils.bytesToHex,t.hexToBytes=function(e){e.startsWith("0x")&&(e=e.slice(2));const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const n=2*r;t[r]=Number.parseInt(e.slice(n,n+2),16)}return t},t.bytesToBase64=function(e){return Buffer.from(e).toString("base64")},t.equalBytes=function(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}},4432:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PrefixedPersistence=t.LocalStoragePersistence=t.EncryptedPersistence=t.StaticKeystoreProvider=t.NetworkKeystoreProvider=t.KeyGeneratorKeystoreProvider=t.InMemoryKeystore=t.buildDirectMessageTopicV2=t.buildDirectMessageTopic=t.mapPaginatedStream=t.toNanoString=t.fromNanoString=t.dateToNs=t.nsToDate=t.SortDirection=t.ApiUrls=t.ContentTypeComposite=t.CompositeCodec=t.ContentTypeTypingNotification=t.TypingNotificationCodec=t.ContentTypeText=t.TextCodec=t.ContentTypeFallback=t.ContentTypeId=t.Conversations=t.Compression=t.Client=t.Stream=t.decrypt=t.encrypt=t.Signature=t.PrivateKey=t.SignedPublicKeyBundle=t.SignedPublicKey=t.PublicKeyBundle=t.PublicKey=t.Ciphertext=t.decodeContent=t.DecodedMessage=void 0;var i=r(6044);Object.defineProperty(t,"DecodedMessage",{enumerable:!0,get:function(){return i.DecodedMessage}}),Object.defineProperty(t,"decodeContent",{enumerable:!0,get:function(){return i.decodeContent}});var o=r(2449);Object.defineProperty(t,"Ciphertext",{enumerable:!0,get:function(){return o.Ciphertext}}),Object.defineProperty(t,"PublicKey",{enumerable:!0,get:function(){return o.PublicKey}}),Object.defineProperty(t,"PublicKeyBundle",{enumerable:!0,get:function(){return o.PublicKeyBundle}}),Object.defineProperty(t,"SignedPublicKey",{enumerable:!0,get:function(){return o.SignedPublicKey}}),Object.defineProperty(t,"SignedPublicKeyBundle",{enumerable:!0,get:function(){return o.SignedPublicKeyBundle}}),Object.defineProperty(t,"PrivateKey",{enumerable:!0,get:function(){return o.PrivateKey}}),Object.defineProperty(t,"Signature",{enumerable:!0,get:function(){return o.Signature}}),Object.defineProperty(t,"encrypt",{enumerable:!0,get:function(){return o.encrypt}}),Object.defineProperty(t,"decrypt",{enumerable:!0,get:function(){return o.decrypt}});var s=r(4596);Object.defineProperty(t,"Stream",{enumerable:!0,get:function(){return n(s).default}});var a=r(8901);Object.defineProperty(t,"Client",{enumerable:!0,get:function(){return n(a).default}}),Object.defineProperty(t,"Compression",{enumerable:!0,get:function(){return a.Compression}});var c=r(5880);Object.defineProperty(t,"Conversations",{enumerable:!0,get:function(){return c.Conversations}});var u=r(6397);Object.defineProperty(t,"ContentTypeId",{enumerable:!0,get:function(){return u.ContentTypeId}}),Object.defineProperty(t,"ContentTypeFallback",{enumerable:!0,get:function(){return u.ContentTypeFallback}});var d=r(6254);Object.defineProperty(t,"TextCodec",{enumerable:!0,get:function(){return d.TextCodec}}),Object.defineProperty(t,"ContentTypeText",{enumerable:!0,get:function(){return d.ContentTypeText}});var l=r(7868);Object.defineProperty(t,"TypingNotificationCodec",{enumerable:!0,get:function(){return l.TypingNotificationCodec}}),Object.defineProperty(t,"ContentTypeTypingNotification",{enumerable:!0,get:function(){return l.ContentTypeTypingNotification}});var f=r(4196);Object.defineProperty(t,"CompositeCodec",{enumerable:!0,get:function(){return f.CompositeCodec}}),Object.defineProperty(t,"ContentTypeComposite",{enumerable:!0,get:function(){return f.ContentTypeComposite}});var h=r(1962);Object.defineProperty(t,"ApiUrls",{enumerable:!0,get:function(){return h.ApiUrls}}),Object.defineProperty(t,"SortDirection",{enumerable:!0,get:function(){return h.SortDirection}});var p=r(5506);Object.defineProperty(t,"nsToDate",{enumerable:!0,get:function(){return p.nsToDate}}),Object.defineProperty(t,"dateToNs",{enumerable:!0,get:function(){return p.dateToNs}}),Object.defineProperty(t,"fromNanoString",{enumerable:!0,get:function(){return p.fromNanoString}}),Object.defineProperty(t,"toNanoString",{enumerable:!0,get:function(){return p.toNanoString}}),Object.defineProperty(t,"mapPaginatedStream",{enumerable:!0,get:function(){return p.mapPaginatedStream}});var y=r(5506);Object.defineProperty(t,"buildDirectMessageTopic",{enumerable:!0,get:function(){return y.buildDirectMessageTopic}}),Object.defineProperty(t,"buildDirectMessageTopicV2",{enumerable:!0,get:function(){return y.buildDirectMessageTopicV2}});var m=r(98);Object.defineProperty(t,"InMemoryKeystore",{enumerable:!0,get:function(){return m.InMemoryKeystore}});var g=r(7947);Object.defineProperty(t,"KeyGeneratorKeystoreProvider",{enumerable:!0,get:function(){return g.KeyGeneratorKeystoreProvider}}),Object.defineProperty(t,"NetworkKeystoreProvider",{enumerable:!0,get:function(){return g.NetworkKeystoreProvider}}),Object.defineProperty(t,"StaticKeystoreProvider",{enumerable:!0,get:function(){return g.StaticKeystoreProvider}});var b=r(5766);Object.defineProperty(t,"EncryptedPersistence",{enumerable:!0,get:function(){return b.EncryptedPersistence}}),Object.defineProperty(t,"LocalStoragePersistence",{enumerable:!0,get:function(){return b.LocalStoragePersistence}}),Object.defineProperty(t,"PrefixedPersistence",{enumerable:!0,get:function(){return b.PrefixedPersistence}})},6284:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(7754),o=r(741),s=r(9896),a=r(5417),c=r(6320),u=r(4162),d=r(5506),l=n(r(5657)),f=n(r(3732)),{ErrorCode:h}=i.keystore;class p{constructor(e,t){this.v1Keys=e,this.v2Keys=o.PrivateKeyBundleV2.fromLegacyBundle(e),this.inviteStore=t,this.authenticator=new f.default(e.identityKey)}static async create(e,t){return new p(e,await l.default.create(t))}async decryptV1(e){const t=await(0,u.mapAndConvertErrors)(e.requests,(async e=>{if(!(0,u.validateObject)(e,["payload","peerKeys"],["headerBytes"]))throw new c.KeystoreError(h.ERROR_CODE_INVALID_INPUT,"invalid");const{payload:t,peerKeys:r,headerBytes:n,isSender:i}=e;return{decrypted:await(0,a.decryptV1)(this.v1Keys,(0,u.toPublicKeyBundle)(r),t,n,i)}}),i.keystore.ErrorCode.ERROR_CODE_UNSPECIFIED);return i.keystore.DecryptResponse.fromPartial({responses:t})}async decryptV2(e){const t=await(0,u.mapAndConvertErrors)(e.requests,(async e=>{if(!(0,u.validateObject)(e,["payload"],["headerBytes"]))throw new c.KeystoreError(i.keystore.ErrorCode.ERROR_CODE_INVALID_INPUT,"missing required field");const{payload:t,headerBytes:r,contentTopic:n}=e,o=this.inviteStore.lookup(n);if(!o)throw new c.KeystoreError(i.keystore.ErrorCode.ERROR_CODE_NO_MATCHING_PREKEY,"no topic key");return{decrypted:await(0,a.decryptV2)(t,(0,u.getKeyMaterial)(o.invitation),r)}}),h.ERROR_CODE_UNSPECIFIED);return i.keystore.DecryptResponse.fromPartial({responses:t})}async encryptV1(e){const t=await(0,u.mapAndConvertErrors)(e.requests,(async e=>{if(!(0,u.validateObject)(e,["payload","recipient"],["headerBytes"]))throw new c.KeystoreError(h.ERROR_CODE_INVALID_INPUT,"missing required field");const{recipient:t,payload:r,headerBytes:n}=e;return{encrypted:await(0,a.encryptV1)(this.v1Keys,(0,u.toPublicKeyBundle)(t),r,n)}}),h.ERROR_CODE_UNSPECIFIED);return i.keystore.EncryptResponse.fromPartial({responses:t})}async createAuthToken({timestampNs:e}){return this.authenticator.createToken(e?(0,d.nsToDate)(e):void 0)}async encryptV2(e){const t=await(0,u.mapAndConvertErrors)(e.requests,(async e=>{if(!(0,u.validateObject)(e,["payload"],["headerBytes"]))throw new c.KeystoreError(h.ERROR_CODE_INVALID_INPUT,"missing required field");const{payload:t,headerBytes:r,contentTopic:n}=e,i=this.inviteStore.lookup(n);if(!i)throw new c.KeystoreError(h.ERROR_CODE_NO_MATCHING_PREKEY,"no topic key");return{encrypted:await(0,a.encryptV2)(t,(0,u.getKeyMaterial)(i.invitation),r)}}),h.ERROR_CODE_INVALID_INPUT);return i.keystore.EncryptResponse.fromPartial({responses:t})}async saveInvites(e){const t=[],r=await(0,u.mapAndConvertErrors)(e.requests,(async({payload:e,timestampNs:r})=>{const n=s.SealedInvitation.fromBytes(e);if(n.v1){if(!n.v1.header.createdNs.equals(r))throw new Error("envelope and header timestamp mismatch");const e=n.v1.header.sender.equals(this.v2Keys.getPublicKeyBundle()),i={invitation:await n.v1.getInvitation(this.v2Keys),createdNs:n.v1.header.createdNs,peerAddress:e?await n.v1.header.recipient.walletSignatureAddress():await n.v1.header.sender.walletSignatureAddress()};return t.push(i),{conversation:(0,u.topicDataToConversationReference)(i)}}}),h.ERROR_CODE_INVALID_INPUT);return await this.inviteStore.add(t),i.keystore.SaveInvitesResponse.fromPartial({responses:r})}async createInvite(e){try{if(!(0,u.validateObject)(e,["recipient"],[]))throw new c.KeystoreError(h.ERROR_CODE_INVALID_INPUT,"missing recipient");const t=s.InvitationV1.createRandom(e.context),r=(0,d.nsToDate)(e.createdNs),n=(0,u.toSignedPublicKeyBundle)(e.recipient),o=await s.SealedInvitation.createV1({sender:this.v2Keys,recipient:n,created:r,invitation:t}),a={invitation:t,createdNs:e.createdNs,peerAddress:await n.walletSignatureAddress()};return await this.inviteStore.add([a]),i.keystore.CreateInviteResponse.fromPartial({conversation:(0,u.topicDataToConversationReference)(a),payload:o.toBytes()})}catch(e){throw(0,u.convertError)(e,h.ERROR_CODE_INVALID_INPUT)}}async signDigest(e){if(!(0,u.validateObject)(e,["digest"],[]))throw new c.KeystoreError(h.ERROR_CODE_INVALID_INPUT,"missing required field");const{digest:t,identityKey:r,prekeyIndex:n}=e;let i;if(r)i=this.v1Keys.identityKey;else{if(void 0===n||!Number.isInteger(n))throw new c.KeystoreError(h.ERROR_CODE_INVALID_INPUT,"must specifify identityKey or prekeyIndex");if(i=this.v1Keys.preKeys[n],!i)throw new c.KeystoreError(h.ERROR_CODE_NO_MATCHING_PREKEY,"no prekey found")}return i.sign(t)}async getV2Conversations(){const e=this.inviteStore.topics.map((e=>(0,u.topicDataToConversationReference)(e)));return e.sort(((e,t)=>e.createdNs.div(1e6).sub(t.createdNs.div(1e6)).toNumber())),e}async getPublicKeyBundle(){return this.v1Keys.getPublicKeyBundle()}async getPrivateKeyBundle(){return this.v1Keys}async getAccountAddress(){return this.accountAddress||(this.accountAddress=await this.v2Keys.getPublicKeyBundle().walletSignatureAddress()),this.accountAddress}lookupTopic(e){return this.inviteStore.lookup(e)}}t.default=p},5657:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(7754),i=r(8125),o=r(4162),s="invitations/v1";class a{constructor(e,t=new Map){this.persistence=e,this.mutex=new i.Mutex,this.topicMap=t}static async create(e){if(e){const t=await e.getItem(s);if(t)try{const r=(0,o.typeSafeTopicMap)(n.keystore.TopicMap.decode(t));return new a(e,new Map(Object.entries(r)))}catch(e){console.warn(`Error loading invites from store: ${e}`)}}return new a(e)}async add(e){await this.mutex.runExclusive((async()=>{let t=!1;for(const r of e)this.topicMap.has(r.invitation.topic)||(this.topicMap.set(r.invitation.topic,r),t=!0);t&&this.persistence&&await this.persistence.setItem(s,this.toBytes())}))}get topics(){return[...this.topicMap.values()]}lookup(e){return this.topicMap.get(e)}toBytes(){return n.keystore.TopicMap.encode({topics:Object.fromEntries(this.topicMap)}).finish()}}t.default=a},5417:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encryptV2=t.decryptV2=t.encryptV1=t.decryptV1=void 0;const n=r(2449);t.decryptV1=async(e,t,r,i,o)=>{const s=await e.sharedSecret(t,e.getCurrentPreKey().publicKey,!o);return(0,n.decrypt)(r,s,i)},t.encryptV1=async(e,t,r,i)=>{const o=await e.sharedSecret(t,e.getCurrentPreKey().publicKey,!1);return(0,n.encrypt)(r,o,i)},t.decryptV2=(e,t,r)=>(0,n.decrypt)(e,t,r),t.encryptV2=(e,t,r)=>(0,n.encrypt)(e,t,r)},6320:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeystoreError=void 0;class r extends Error{constructor(e,t){super(t),this.code=e}}t.KeystoreError=r},98:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.InviteStore=t.InMemoryKeystore=void 0;var s=r(6284);Object.defineProperty(t,"InMemoryKeystore",{enumerable:!0,get:function(){return o(s).default}});var a=r(5657);Object.defineProperty(t,"InviteStore",{enumerable:!0,get:function(){return o(a).default}}),i(r(5417),t),i(r(6320),t),i(r(9270),t)},9270:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3929:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(6904),i=r(2449);t.default=class{constructor(e,t){this.persistence=e,this.privateKey=t,this.privateKeyBytes=Buffer.from(t.secp256k1.bytes),this.publicKey=(0,n.getPublic)(this.privateKeyBytes)}async getItem(e){const t=await this.persistence.getItem(e);return t?this.decrypt(t):null}async setItem(e,t){const r=await this.encrypt(t);await this.persistence.setItem(e,r)}async encrypt(e){const t=await(0,n.encrypt)(this.publicKey,Buffer.from(e));return this.serializeEcies(t)}async decrypt(e){const t=await this.deserializeEcies(e),r=await(0,n.decrypt)(this.privateKeyBytes,t);return Uint8Array.from(r)}async serializeEcies(e){return(await i.SignedEciesCiphertext.create(e,this.privateKey)).toBytes()}async deserializeEcies(e){const t=i.SignedEciesCiphertext.fromBytes(e);if(!await t.verify(this.privateKey.publicKey))throw new Error("signature validation failed");const r=t.ciphertext;return{ciphertext:Buffer.from(r.ciphertext),mac:Buffer.from(r.mac),iv:Buffer.from(r.iv),ephemeralPublicKey:Buffer.from(r.ephemeralPublicKey)}}}},13:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(5456));t.default=class{constructor(){this.storage="undefined"!=typeof localStorage?localStorage:new i.default}async getItem(e){const t=this.storage.getItem(e);return null===t?null:Uint8Array.from(Buffer.from(t,"binary"))}async setItem(e,t){this.storage.setItem(e,Buffer.from(t).toString("binary"))}}},5456:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.store=new Map}get length(){return this.store.size}clear(){this.store=new Map}getItem(e){return this.validateString(e),this.store.has(e)?String(this.store.get(e)):null}key(e){if(void 0===e)throw new TypeError("Failed to execute 'key' on 'Storage': 1 argument required, but only 0 present.");const t=[...this.store.keys()];return e>=t.length?null:t[e]}removeItem(e){this.validateString(e),this.store.delete(e)}setItem(e,t){this.validateString(e),this.validateString(t),this.store.set(String(e),String(t))}validateString(e){if("string"!=typeof e)throw new TypeError("Key must be a string")}}},8613:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t){this.prefix=e,this.persistence=t}getItem(e){return this.persistence.getItem(this.buildKey(e))}setItem(e,t){return this.persistence.setItem(this.buildKey(e),t)}buildKey(e){return this.prefix+e}}},3303:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(7754),i=r(6384),o=r(5161);t.default=class{constructor(e){this.apiClient=e}async getItem(e){for await(const t of this.apiClient.queryIterator({contentTopic:this.buildTopic(e)},{pageSize:1,direction:n.messageApi.SortDirection.SORT_DIRECTION_DESCENDING}))if(t.message)try{const e=(0,i.b64Decode)(t.message.toString());return Uint8Array.from(e)}catch(e){console.log(e)}return null}async setItem(e,t){const r=Uint8Array.from(t);await this.apiClient.publish([{contentTopic:this.buildTopic(e),message:r}])}setAuthenticator(e){this.apiClient.setAuthenticator(e)}buildTopic(e){return(0,o.buildUserPrivateStoreTopic)(e)}}},5766:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.EncryptedPersistence=t.PrefixedPersistence=t.LocalStoragePersistence=void 0,i(r(67),t);var s=r(13);Object.defineProperty(t,"LocalStoragePersistence",{enumerable:!0,get:function(){return o(s).default}});var a=r(8613);Object.defineProperty(t,"PrefixedPersistence",{enumerable:!0,get:function(){return o(a).default}});var c=r(3929);Object.defineProperty(t,"EncryptedPersistence",{enumerable:!0,get:function(){return o(c).default}})},67:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2653:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(2449),o=n(r(6284)),s=n(r(3303)),a=r(492),c=r(8115),u=n(r(6431));t.default=class{async newKeystore(e,t,r){if(!r)throw new a.KeystoreProviderUnavailableError("Wallet required to generate new keys");e.preCreateIdentityCallback&&await e.preCreateIdentityCallback();const n=await i.PrivateKeyBundleV1.generate(r),d=new u.default(r,new s.default(t),e.preEnableIdentityCallback);return await d.storePrivateKeyBundle(n),o.default.create(n,await(0,c.buildPersistenceFromOptions)(e,n))}}},6431:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.storageSigRequestText=void 0;const i=r(9982),o=n(r(6998)),s=r(2449),a=r(9099),c=r(9272),u=n(r(7527)),d=r(7754),l="key_bundle";function f(e){try{const t=(0,s.decodePrivateKeyBundle)(e);if(t instanceof s.PrivateKeyBundleV2)throw new Error("V2 bundles not supported yet");return[t,!1]}catch(t){const r=d.privateKey.PrivateKeyBundleV1.decode(e);return[new s.PrivateKeyBundleV1(r),!0]}}function h(e){return`XMTP : Enable Identity\n${(0,c.bytesToHex)(e)}\n\nFor more info: https://xmtp.org/signatures/`}t.default=class{constructor(e,t,r){this.signer=e,this.persistence=t,this.preEnableIdentityCallback=r}async getStorageAddress(e){let t=await this.signer.getAddress();return t=i.utils.getAddress(t),`${t}/${e}`}async loadPrivateKeyBundle(){const e=await this.persistence.getItem(await this.getStorageAddress(l));if(!e)return null;const[t,r]=await this.fromEncryptedBytes(this.signer,Uint8Array.from(e));return r&&await this.storePrivateKeyBundle(t),t}async storePrivateKeyBundle(e){const t=await this.getStorageAddress(l),r=await this.toEncryptedBytes(e,this.signer);"function"==typeof this.persistence.setAuthenticator&&this.persistence.setAuthenticator(new a.LocalAuthenticator(e.identityKey)),await this.persistence.setItem(t,r)}async toEncryptedBytes(e,t){const r=e.encode(),n=o.default.getRandomValues(new Uint8Array(32)),a=h(n),u=await t.getAddress();this.preEnableIdentityCallback&&await this.preEnableIdentityCallback();let l=await t.signMessage(a),f=i.utils.verifyMessage(a,l);if(f!==u&&(l=await t.signMessage(a),console.log("invalid signature, retrying"),f=i.utils.verifyMessage(a,l),f!==u))throw new Error("invalid signature");const p=(0,c.hexToBytes)(l),y=await(0,s.encrypt)(r,p);return d.privateKey.EncryptedPrivateKeyBundle.encode({v1:{walletPreKey:n,ciphertext:y}}).finish()}async fromEncryptedBytes(e,t){const[r,n]=function(e){try{const t=d.privateKey.EncryptedPrivateKeyBundle.decode(e);if(t.v1)return[t.v1,!1]}catch(t){return[d.privateKey.EncryptedPrivateKeyBundleV1.decode(e),!0]}throw new Error("unrecognized encrypted private key bundle version")}(t);if(!r.walletPreKey)throw new Error("missing wallet pre-key");if(!r.ciphertext?.aes256GcmHkdfSha256)throw new Error("missing bundle ciphertext");this.preEnableIdentityCallback&&await this.preEnableIdentityCallback();const i=(0,c.hexToBytes)(await e.signMessage(h(r.walletPreKey)));try{const e=new u.default(r.ciphertext),t=await(0,s.decrypt)(e,i),[o,a]=f(t);return[o,n||a]}catch(e){if(65!==i.length)throw new Error("Expected 65 bytes before trying a different recovery byte");const t=i[i.length-1];let o=i.slice(0,i.length-1);o=t<27?new Uint8Array([...o,t+27]):new Uint8Array([...o,t-27]);const a=new u.default(r.ciphertext),c=await(0,s.decrypt)(a,o),[d,l]=f(c);return[d,n||l]}}},t.storageSigRequestText=h},7117:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(6431)),o=r(492),s=n(r(3303)),a=n(r(6284)),c=r(8115);t.default=class{async newKeystore(e,t,r){if(!r)throw new o.KeystoreProviderUnavailableError("No wallet provided");const n=new i.default(r,new s.default(t),e.preEnableIdentityCallback),u=await n.loadPrivateKeyBundle();if(!u)throw new o.KeystoreProviderUnavailableError("No keys found");return a.default.create(u,await(0,c.buildPersistenceFromOptions)(e,u))}}},7184:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(492),o=n(r(6284)),s=r(741),a=r(8115);t.default=class{async newKeystore(e){const{privateKeyOverride:t}=e;if(!t)throw new i.KeystoreProviderUnavailableError("No private key override provided");const r=(0,s.decodePrivateKeyBundle)(t);if(r instanceof s.PrivateKeyBundleV2)throw new Error("V2 private key bundle found. Only V1 supported");return o.default.create(r,await(0,a.buildPersistenceFromOptions)(e,r))}}},492:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeystoreProviderUnavailableError=void 0;class r extends Error{}t.KeystoreProviderUnavailableError=r},8115:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildPersistenceFromOptions=void 0;const n=r(5766);t.buildPersistenceFromOptions=async(e,t)=>{if(!e.persistConversations)return;const r=await t.identityKey.publicKey.walletSignatureAddress(),i=`xmtp/${e.env}/${r}/`;return new n.PrefixedPersistence(i,new n.EncryptedPersistence(new n.LocalStoragePersistence,t.identityKey))}},7947:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.StaticKeystoreProvider=t.NetworkKeystoreProvider=t.KeyGeneratorKeystoreProvider=void 0,i(r(492),t),i(r(8795),t);var s=r(2653);Object.defineProperty(t,"KeyGeneratorKeystoreProvider",{enumerable:!0,get:function(){return o(s).default}});var a=r(7117);Object.defineProperty(t,"NetworkKeystoreProvider",{enumerable:!0,get:function(){return o(a).default}});var c=r(7184);Object.defineProperty(t,"StaticKeystoreProvider",{enumerable:!0,get:function(){return o(c).default}})},8795:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4162:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.typeSafeTopicMap=t.isCompleteTopicData=t.topicDataToConversationReference=t.getKeyMaterial=t.validateObject=t.toSignedPublicKeyBundle=t.toPublicKeyBundle=t.mapAndConvertErrors=t.wrapResult=t.convertError=void 0;const n=r(7754),i=r(2449),o=r(6320);t.convertError=(e,t)=>e instanceof o.KeystoreError?e:new o.KeystoreError(t,e.message),t.wrapResult=e=>({result:e}),t.mapAndConvertErrors=(e,r,n)=>Promise.all(e.map((async e=>{try{return(0,t.wrapResult)(await r(e))}catch(e){return{error:(0,t.convertError)(e,n)}}}))),t.toPublicKeyBundle=e=>e instanceof i.PublicKeyBundle?e:new i.PublicKeyBundle(e),t.toSignedPublicKeyBundle=e=>e instanceof i.SignedPublicKeyBundle?e:new i.SignedPublicKeyBundle(e),t.validateObject=(e,t,r)=>{for(const r of t)if(!e[r])throw new o.KeystoreError(n.keystore.ErrorCode.ERROR_CODE_INVALID_INPUT,`Missing field ${String(r)}`);for(const t of r){const r=e[t];if(!r||!r?.length)throw new o.KeystoreError(n.keystore.ErrorCode.ERROR_CODE_INVALID_INPUT,`Missing field ${String(t)}`)}return!0},t.getKeyMaterial=e=>{if(!e?.aes256GcmHkdfSha256?.keyMaterial)throw new o.KeystoreError(n.keystore.ErrorCode.ERROR_CODE_INVALID_INPUT,"Missing key material");return e.aes256GcmHkdfSha256.keyMaterial},t.topicDataToConversationReference=({invitation:e,createdNs:t,peerAddress:r})=>({context:e.context,topic:e.topic,peerAddress:r,createdNs:t}),t.isCompleteTopicData=e=>!!e.invitation,t.typeSafeTopicMap=e=>{const r={};for(const[n,i]of Object.entries(e.topics))(0,t.isCompleteTopicData)(i)?r[n]=i:console.warn("Invitation missing from topic data");return r}},619:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.BackupType=void 0,(r=t.BackupType||(t.BackupType={}))[r.none=0]="none",r[r.xmtpTopicStore=1]="xmtpTopicStore"},5983:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.fetchOrCreateConfiguration=t.createBackupClient=void 0;const i=r(619),o=n(r(6219)),s=n(r(6492));async function a(e,t){let r;switch((await t()).type){case i.BackupType.none:r=o.default.createConfiguration();break;case i.BackupType.xmtpTopicStore:r=s.default.createConfiguration(e)}return r}t.createBackupClient=async function(e,t){const r=await a(e,t);switch(r.type){case i.BackupType.none:return new o.default(r);case i.BackupType.xmtpTopicStore:return new s.default(r)}},t.fetchOrCreateConfiguration=a},6219:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(619).BackupType.none;t.default=class{constructor(e){this.configuration=e}static createConfiguration(){return{type:n,version:0}}get backupType(){return n}}},6492:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(619).BackupType.xmtpTopicStore;t.default=class{constructor(e){this.configuration=e}static createConfiguration(e){return{type:n,version:0,topic:"history-v0:"+e}}get backupType(){return n}}},8206:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapPaginatedStream=t.retry=t.promiseWithTimeout=t.sleep=void 0,t.sleep=e=>new Promise((t=>setTimeout(t,e))),t.promiseWithTimeout=(e,t,r)=>{let n;const i=new Promise(((t,i)=>{n=setTimeout((()=>i(new Error(r))),e)}));return Promise.race([t(),i]).then((e=>(clearTimeout(n),e)))};const r=e=>!!e;t.retry=async function e(n,i,o,s,a=r,c=1){const u="number"==typeof c?c:1;try{return await n(...i)}catch(r){if(!a(r)||u>o)throw r;return await(0,t.sleep)(s),e(n,i,o,s,a,u+1)}},t.mapPaginatedStream=async function*(e,t){for await(const r of e){const e=await Promise.allSettled(r.map(t)),n=[];for(const t of e)"fulfilled"===t.status?n.push(t.value):console.warn("Failed to process envelope due to reason: ",t.reason);yield n}}},6384:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.concat=t.b64Encode=t.b64Decode=void 0;const n=r(7754);t.b64Decode=n.fetcher.b64Decode,t.b64Encode=n.fetcher.b64Encode,t.concat=function(e,t){const r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}},6908:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.fromNanoString=t.toNanoString=t.nsToDate=t.dateToNs=void 0;const i=n(r(1583));function o(e){return i.default.fromNumber(e.valueOf()).multiply(1e6)}function s(e){return new Date(e.divide(1e6).toNumber())}t.dateToNs=o,t.nsToDate=s,t.toNanoString=e=>e&&o(e).toString(),t.fromNanoString=e=>{if(e)return s(i.default.fromString(e))}},5506:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(5161),t),i(r(8206),t),i(r(6908),t),i(r(6384),t)},8397:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildDecryptV1Request=t.getResultOrThrow=void 0;const n=r(7754),i=r(8245),o=r(6320);t.getResultOrThrow=e=>{if(e.error)throw new o.KeystoreError(e.error.code,e.error.message);if(!e.result)throw new o.KeystoreError(n.keystore.ErrorCode.ERROR_CODE_UNSPECIFIED,"No result from Keystore");if("encrypted"in e.result&&!e.result.encrypted)throw new Error("Missing ciphertext");if("decrypted"in e.result&&!e.result.decrypted)throw new Error("Missing decrypted result");return e.result},t.buildDecryptV1Request=(e,t)=>({requests:e.map((e=>{const r=new i.PublicKeyBundle({identityKey:e.header.sender?.identityKey,preKey:e.header.sender?.preKey}),n=t.equals(r);return{payload:e.ciphertext,peerKeys:n?new i.PublicKeyBundle({identityKey:e.header.recipient?.identityKey,preKey:e.header.recipient?.preKey}):r,headerBytes:e.headerBytes,isSender:n}}))})},5161:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildUserPrivateStoreTopic=t.buildUserInviteTopic=t.buildUserIntroTopic=t.buildUserContactTopic=t.buildDirectMessageTopicV2=t.buildDirectMessageTopic=t.buildContentTopic=void 0;const n=r(9982);t.buildContentTopic=e=>`/xmtp/0/${e}/proto`,t.buildDirectMessageTopic=(e,r)=>{const i=[n.utils.getAddress(e),n.utils.getAddress(r)];return i.sort(),(0,t.buildContentTopic)(`dm-${i.join("-")}`)},t.buildDirectMessageTopicV2=e=>(0,t.buildContentTopic)(`m-${e}`),t.buildUserContactTopic=e=>(0,t.buildContentTopic)(`contact-${n.utils.getAddress(e)}`),t.buildUserIntroTopic=e=>(0,t.buildContentTopic)(`intro-${n.utils.getAddress(e)}`),t.buildUserInviteTopic=e=>(0,t.buildContentTopic)(`invite-${n.utils.getAddress(e)}`),t.buildUserPrivateStoreTopic=e=>(0,t.buildContentTopic)(`privatestore-${e}`)},9159:()=>{},6601:()=>{},9214:()=>{},2114:()=>{},1583:(e,t)=>{var r,n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function r(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function n(e){return!0===(e&&e.__isLong__)}function i(e){var t=Math.clz32(e&-e);return e?31-t:t}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=n;var o={},s={};function a(e,t){var r,n,i;return t?(i=0<=(e>>>=0)&&e<256)&&(n=s[e])?n:(r=u(e,0,!0),i&&(s[e]=r),r):(i=-128<=(e|=0)&&e<128)&&(n=o[e])?n:(r=u(e,e<0?-1:0,!1),i&&(o[e]=r),r)}function c(e,t){if(isNaN(e))return t?b:g;if(t){if(e<0)return b;if(e>=p)return _}else{if(e<=-y)return k;if(e+1>=y)return S}return e<0?c(-e,t).neg():u(e%h|0,e/h|0,t)}function u(e,t,n){return new r(e,t,n)}r.fromInt=a,r.fromNumber=c,r.fromBits=u;var d=Math.pow;function l(e,t,r){if(0===e.length)throw Error("empty string");if("number"==typeof t?(r=t,t=!1):t=!!t,"NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return t?b:g;if((r=r||10)<2||36<r)throw RangeError("radix");var n;if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return l(e.substring(1),t,r).neg();for(var i=c(d(r,8)),o=g,s=0;s<e.length;s+=8){var a=Math.min(8,e.length-s),u=parseInt(e.substring(s,s+a),r);if(a<8){var f=c(d(r,a));o=o.mul(f).add(c(u))}else o=(o=o.mul(i)).add(c(u))}return o.unsigned=t,o}function f(e,t){return"number"==typeof e?c(e,t):"string"==typeof e?l(e,t):u(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}r.fromString=l,r.fromValue=f;var h=4294967296,p=h*h,y=p/2,m=a(1<<24),g=a(0);r.ZERO=g;var b=a(0,!0);r.UZERO=b;var v=a(1);r.ONE=v;var w=a(1,!0);r.UONE=w;var E=a(-1);r.NEG_ONE=E;var S=u(-1,2147483647,!1);r.MAX_VALUE=S;var _=u(-1,-1,!0);r.MAX_UNSIGNED_VALUE=_;var k=u(0,-2147483648,!1);r.MIN_VALUE=k;var A=r.prototype;A.toInt=function(){return this.unsigned?this.low>>>0:this.low},A.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},A.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(k)){var t=c(e),r=this.div(t),n=r.mul(t).sub(this);return r.toString(e)+n.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var i=c(d(e,6),this.unsigned),o=this,s="";;){var a=o.div(i),u=(o.sub(a.mul(i)).toInt()>>>0).toString(e);if((o=a).isZero())return u+s;for(;u.length<6;)u="0"+u;s=""+u+s}},A.getHighBits=function(){return this.high},A.getHighBitsUnsigned=function(){return this.high>>>0},A.getLowBits=function(){return this.low},A.getLowBitsUnsigned=function(){return this.low>>>0},A.getNumBitsAbs=function(){if(this.isNegative())return this.eq(k)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},A.isZero=function(){return 0===this.high&&0===this.low},A.eqz=A.isZero,A.isNegative=function(){return!this.unsigned&&this.high<0},A.isPositive=function(){return this.unsigned||this.high>=0},A.isOdd=function(){return 1==(1&this.low)},A.isEven=function(){return 0==(1&this.low)},A.equals=function(e){return n(e)||(e=f(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},A.eq=A.equals,A.notEquals=function(e){return!this.eq(e)},A.neq=A.notEquals,A.ne=A.notEquals,A.lessThan=function(e){return this.comp(e)<0},A.lt=A.lessThan,A.lessThanOrEqual=function(e){return this.comp(e)<=0},A.lte=A.lessThanOrEqual,A.le=A.lessThanOrEqual,A.greaterThan=function(e){return this.comp(e)>0},A.gt=A.greaterThan,A.greaterThanOrEqual=function(e){return this.comp(e)>=0},A.gte=A.greaterThanOrEqual,A.ge=A.greaterThanOrEqual,A.compare=function(e){if(n(e)||(e=f(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},A.comp=A.compare,A.negate=function(){return!this.unsigned&&this.eq(k)?k:this.not().add(v)},A.neg=A.negate,A.add=function(e){n(e)||(e=f(e));var t=this.high>>>16,r=65535&this.high,i=this.low>>>16,o=65535&this.low,s=e.high>>>16,a=65535&e.high,c=e.low>>>16,d=0,l=0,h=0,p=0;return h+=(p+=o+(65535&e.low))>>>16,l+=(h+=i+c)>>>16,d+=(l+=r+a)>>>16,d+=t+s,u((h&=65535)<<16|(p&=65535),(d&=65535)<<16|(l&=65535),this.unsigned)},A.subtract=function(e){return n(e)||(e=f(e)),this.add(e.neg())},A.sub=A.subtract,A.multiply=function(e){if(this.isZero())return this;if(n(e)||(e=f(e)),t)return u(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return this.unsigned?b:g;if(this.eq(k))return e.isOdd()?k:g;if(e.eq(k))return this.isOdd()?k:g;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return c(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,i=65535&this.high,o=this.low>>>16,s=65535&this.low,a=e.high>>>16,d=65535&e.high,l=e.low>>>16,h=65535&e.low,p=0,y=0,v=0,w=0;return v+=(w+=s*h)>>>16,y+=(v+=o*h)>>>16,v&=65535,y+=(v+=s*l)>>>16,p+=(y+=i*h)>>>16,y&=65535,p+=(y+=o*l)>>>16,y&=65535,p+=(y+=s*d)>>>16,p+=r*h+i*l+o*d+s*a,u((v&=65535)<<16|(w&=65535),(p&=65535)<<16|(y&=65535),this.unsigned)},A.mul=A.multiply,A.divide=function(e){if(n(e)||(e=f(e)),e.isZero())throw Error("division by zero");var r,i,o;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?u((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?b:g;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return b;if(e.gt(this.shru(1)))return w;o=b}else{if(this.eq(k))return e.eq(v)||e.eq(E)?k:e.eq(k)?v:(r=this.shr(1).div(e).shl(1)).eq(g)?e.isNegative()?v:E:(i=this.sub(e.mul(r)),o=r.add(i.div(e)));if(e.eq(k))return this.unsigned?b:g;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=g}for(i=this;i.gte(e);){r=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(r)/Math.LN2),a=s<=48?1:d(2,s-48),l=c(r),h=l.mul(e);h.isNegative()||h.gt(i);)h=(l=c(r-=a,this.unsigned)).mul(e);l.isZero()&&(l=v),o=o.add(l),i=i.sub(h)}return o},A.div=A.divide,A.modulo=function(e){return n(e)||(e=f(e)),t?u((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},A.mod=A.modulo,A.rem=A.modulo,A.not=function(){return u(~this.low,~this.high,this.unsigned)},A.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},A.clz=A.countLeadingZeros,A.countTrailingZeros=function(){return this.low?i(this.low):i(this.high)+32},A.ctz=A.countTrailingZeros,A.and=function(e){return n(e)||(e=f(e)),u(this.low&e.low,this.high&e.high,this.unsigned)},A.or=function(e){return n(e)||(e=f(e)),u(this.low|e.low,this.high|e.high,this.unsigned)},A.xor=function(e){return n(e)||(e=f(e)),u(this.low^e.low,this.high^e.high,this.unsigned)},A.shiftLeft=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):u(0,this.low<<e-32,this.unsigned)},A.shl=A.shiftLeft,A.shiftRight=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):u(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},A.shr=A.shiftRight,A.shiftRightUnsigned=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):u(32===e?this.high:this.high>>>e-32,0,this.unsigned)},A.shru=A.shiftRightUnsigned,A.shr_u=A.shiftRightUnsigned,A.rotateLeft=function(e){var t;return n(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?u(this.high,this.low,this.unsigned):e<32?(t=32-e,u(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(t=32-(e-=32),u(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))},A.rotl=A.rotateLeft,A.rotateRight=function(e){var t;return n(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?u(this.high,this.low,this.unsigned):e<32?(t=32-e,u(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(t=32-(e-=32),u(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))},A.rotr=A.rotateRight,A.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},A.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},A.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},A.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},A.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,n){return n?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};var P=r;return e.default=P,"default"in e?e.default:e}({});void 0===(r=function(){return n}.apply(t,[]))||(e.exports=r)},8597:e=>{"use strict";e.exports={i8:"6.5.4"}},4147:e=>{"use strict";e.exports=JSON.parse('{"name":"@xmtp/xmtp-js","version":"8.2.1","description":"XMTP client SDK for interacting with XMTP networks.","main":"dist/cjs/src/index.js","module":"dist/esm/src/index.js","umd:main":"dist/umd/index.js","browser":"dist/umd/index.js","types":"dist/types/src/index.d.ts","scripts":{"prebench":"npm run build:cjs","bench":"node dist/cjs/bench/index.js","build":"npm run build:cjs && npm run build:esm && npm run build:umd && npm run build:types","build:cjs":"node tools/cleanup cjs && tsc -p config/tsconfig.cjs.json","build:esm":"node tools/cleanup esm && tsc -p config/tsconfig.esm.json","build:umd":"node tools/cleanup umd && webpack --config config/webpack.config.js","build:types":"node tools/cleanup types && tsc -p config/tsconfig.types.json","build:docs":"rm -rf docs && mkdir -p tmp && cp README.md tmp/ && sed -i.bak \'/badge.svg/d\' tmp/README.md && typedoc --excludePrivate --readme tmp/README.md src/index.ts","clean":"node tools/cleanup && npm run clean:proto","clean:proto":"rm -rf src/proto/*.ts","package":"npm pack","prepublishOnly":"npm run build","test:setup":"./dev/up","test:teardown":"./dev/down","test":"npm run test:node","test:node":"jest --no-cache --env=\'node\' --testTimeout=30000","test:jsdom":"jest --no-cache --env=\'./jest.jsdom.env.js\' --testTimeout=30000","test:cov":"jest --coverage --no-cache --runInBand","lint":"prettier --check . && eslint .","autolint":"prettier --write . && eslint --fix .","semantic-release":"semantic-release"},"publishConfig":{"access":"public"},"files":["dist"],"keywords":["xmtp","messaging","web3","sdk","js","javascript","node","nodejs"],"author":"XMTP Labs <eng@xmtp.com>","license":"MIT","homepage":"https://github.com/xmtp/xmtp-js","repository":{"type":"git","url":"https:git@github.com:xmtp/xmtp-js.git"},"bugs":{"url":"https://github.com/xmtp/xmtp-js/issues"},"release":{"branches":["main",{"name":"beta","prerelease":true}]},"dependencies":{"@noble/secp256k1":"^1.5.2","@xmtp/proto":"^3.24.0","async-mutex":"^0.4.0","elliptic":"^6.5.4","ethers":"^5.5.3","long":"^5.2.0"},"devDependencies":{"@commitlint/cli":"^16.1.0","@commitlint/config-conventional":"^16.0.0","@types/benchmark":"^2.1.2","@types/bl":"^5.0.2","@types/callback-to-async-iterator":"^1.1.4","@types/elliptic":"^6.4.14","@types/jest":"^28.1.3","@types/node":"^18.14.0","@typescript-eslint/eslint-plugin":"^5.38.0","@typescript-eslint/parser":"^5.38.0","benny":"^3.7.1","buffer":"^6.0.3","crypto-browserify":"^3.12.0","dd-trace":"^2.12.2","eslint":"^8.0.1","eslint-config-prettier":"^8.3.0","eslint-config-standard":"^17.0.0","eslint-plugin-import":"^2.26.0","eslint-plugin-jsdoc":"^37.9.1","eslint-plugin-node":"^11.1.0","eslint-plugin-prettier":"^4.0.0","eslint-plugin-promise":"^6.0.1","husky":"^7.0.4","jest":"^28.1.3","jest-environment-jsdom":"^28.1.3","prettier":"^2.4.0","semantic-release":"^19.0.2","ts-jest":"^28.0.0","ts-loader":"^9.2.5","typedoc":"^0.22.11","typescript":"^4.4.3","webpack":"^5.52.1","webpack-cli":"^4.8.0"},"engines":{"node":">=18"}}')}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.loaded=!0,r.exports}__webpack_require__.amdO={},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var __webpack_exports__=__webpack_require__(4432);return __webpack_exports__})()}));